function JX(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var GS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ka(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function w8(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var E8={exports:{}},r2={},C8={exports:{}},un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=Symbol.for("react.element"),eY=Symbol.for("react.portal"),tY=Symbol.for("react.fragment"),nY=Symbol.for("react.strict_mode"),iY=Symbol.for("react.profiler"),rY=Symbol.for("react.provider"),sY=Symbol.for("react.context"),oY=Symbol.for("react.forward_ref"),aY=Symbol.for("react.suspense"),lY=Symbol.for("react.memo"),uY=Symbol.for("react.lazy"),uN=Symbol.iterator;function cY(t){return t===null||typeof t!="object"?null:(t=uN&&t[uN]||t["@@iterator"],typeof t=="function"?t:null)}var A8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M8=Object.assign,P8={};function og(t,e,n){this.props=t,this.context=e,this.refs=P8,this.updater=n||A8}og.prototype.isReactComponent={};og.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};og.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I8(){}I8.prototype=og.prototype;function aR(t,e,n){this.props=t,this.context=e,this.refs=P8,this.updater=n||A8}var lR=aR.prototype=new I8;lR.constructor=aR;M8(lR,og.prototype);lR.isPureReactComponent=!0;var cN=Array.isArray,R8=Object.prototype.hasOwnProperty,uR={current:null},D8={key:!0,ref:!0,__self:!0,__source:!0};function k8(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)R8.call(e,i)&&!D8.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:e_,type:t,key:s,ref:o,props:r,_owner:uR.current}}function dY(t,e){return{$$typeof:e_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cR(t){return typeof t=="object"&&t!==null&&t.$$typeof===e_}function hY(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dN=/\/+/g;function sC(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hY(""+t.key):e.toString(36)}function mS(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case e_:case eY:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+sC(o,0):i,cN(r)?(n="",t!=null&&(n=t.replace(dN,"$&/")+"/"),mS(r,e,n,"",function(u){return u})):r!=null&&(cR(r)&&(r=dY(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(dN,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",cN(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+sC(s,a);o+=mS(s,e,n,l,r)}else if(l=cY(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+sC(s,a++),o+=mS(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kx(t,e,n){if(t==null)return t;var i=[],r=0;return mS(t,i,"","",function(s){return e.call(n,s,r++)}),i}function fY(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rs={current:null},gS={transition:null},pY={ReactCurrentDispatcher:rs,ReactCurrentBatchConfig:gS,ReactCurrentOwner:uR};function L8(){throw Error("act(...) is not supported in production builds of React.")}un.Children={map:kx,forEach:function(t,e,n){kx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kx(t,function(){e++}),e},toArray:function(t){return kx(t,function(e){return e})||[]},only:function(t){if(!cR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};un.Component=og;un.Fragment=tY;un.Profiler=iY;un.PureComponent=aR;un.StrictMode=nY;un.Suspense=aY;un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pY;un.act=L8;un.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=M8({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=uR.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)R8.call(e,l)&&!D8.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:e_,type:t.type,key:r,ref:s,props:i,_owner:o}};un.createContext=function(t){return t={$$typeof:sY,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rY,_context:t},t.Consumer=t};un.createElement=k8;un.createFactory=function(t){var e=k8.bind(null,t);return e.type=t,e};un.createRef=function(){return{current:null}};un.forwardRef=function(t){return{$$typeof:oY,render:t}};un.isValidElement=cR;un.lazy=function(t){return{$$typeof:uY,_payload:{_status:-1,_result:t},_init:fY}};un.memo=function(t,e){return{$$typeof:lY,type:t,compare:e===void 0?null:e}};un.startTransition=function(t){var e=gS.transition;gS.transition={};try{t()}finally{gS.transition=e}};un.unstable_act=L8;un.useCallback=function(t,e){return rs.current.useCallback(t,e)};un.useContext=function(t){return rs.current.useContext(t)};un.useDebugValue=function(){};un.useDeferredValue=function(t){return rs.current.useDeferredValue(t)};un.useEffect=function(t,e){return rs.current.useEffect(t,e)};un.useId=function(){return rs.current.useId()};un.useImperativeHandle=function(t,e,n){return rs.current.useImperativeHandle(t,e,n)};un.useInsertionEffect=function(t,e){return rs.current.useInsertionEffect(t,e)};un.useLayoutEffect=function(t,e){return rs.current.useLayoutEffect(t,e)};un.useMemo=function(t,e){return rs.current.useMemo(t,e)};un.useReducer=function(t,e,n){return rs.current.useReducer(t,e,n)};un.useRef=function(t){return rs.current.useRef(t)};un.useState=function(t){return rs.current.useState(t)};un.useSyncExternalStore=function(t,e,n){return rs.current.useSyncExternalStore(t,e,n)};un.useTransition=function(){return rs.current.useTransition()};un.version="18.3.1";C8.exports=un;var U=C8.exports;const Zr=ka(U),WS=JX({__proto__:null,default:Zr},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mY=U,gY=Symbol.for("react.element"),yY=Symbol.for("react.fragment"),vY=Object.prototype.hasOwnProperty,_Y=mY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xY={key:!0,ref:!0,__self:!0,__source:!0};function N8(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)vY.call(e,i)&&!xY.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:gY,type:t,key:s,ref:o,props:r,_owner:_Y.current}}r2.Fragment=yY;r2.jsx=N8;r2.jsxs=N8;E8.exports=r2;var dR=E8.exports;const Ma=dR.Fragment,$=dR.jsx,Nt=dR.jsxs;var PM={},O8={exports:{}},fo={},U8={exports:{}},F8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,ee){var te=z.length;z.push(ee);e:for(;0<te;){var ce=te-1>>>1,Te=z[ce];if(0<r(Te,ee))z[ce]=ee,z[te]=Te,te=ce;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ee=z[0],te=z.pop();if(te!==ee){z[0]=te;e:for(var ce=0,Te=z.length,Ue=Te>>>1;ce<Ue;){var he=2*(ce+1)-1,xe=z[he],Fe=he+1,He=z[Fe];if(0>r(xe,te))Fe<Te&&0>r(He,xe)?(z[ce]=He,z[Fe]=te,ce=Fe):(z[ce]=xe,z[he]=te,ce=he);else if(Fe<Te&&0>r(He,te))z[ce]=He,z[Fe]=te,ce=Fe;else break e}}return ee}function r(z,ee){var te=z.sortIndex-ee.sortIndex;return te!==0?te:z.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var ee=n(u);ee!==null;){if(ee.callback===null)i(u);else if(ee.startTime<=z)i(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function w(z){if(v=!1,x(z),!g)if(n(l)!==null)g=!0,Q(P);else{var ee=n(u);ee!==null&&oe(w,ee.startTime-z)}}function P(z,ee){g=!1,v&&(v=!1,y(O),O=-1),m=!0;var te=h;try{for(x(ee),d=n(l);d!==null&&(!(d.expirationTime>ee)||z&&!k());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var Te=ce(d.expirationTime<=ee);ee=t.unstable_now(),typeof Te=="function"?d.callback=Te:d===n(l)&&i(l),x(ee)}else i(l);d=n(l)}if(d!==null)var Ue=!0;else{var he=n(u);he!==null&&oe(w,he.startTime-ee),Ue=!1}return Ue}finally{d=null,h=te,m=!1}}var A=!1,D=null,O=-1,H=5,E=-1;function k(){return!(t.unstable_now()-E<H)}function W(){if(D!==null){var z=t.unstable_now();E=z;var ee=!0;try{ee=D(!0,z)}finally{ee?G():(A=!1,D=null)}}else A=!1}var G;if(typeof S=="function")G=function(){S(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ie=Y.port2;Y.port1.onmessage=W,G=function(){ie.postMessage(null)}}else G=function(){_(W,0)};function Q(z){D=z,A||(A=!0,G())}function oe(z,ee){O=_(function(){z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var te=h;h=ee;try{return z()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=h;h=z;try{return ee()}finally{h=te}},t.unstable_scheduleCallback=function(z,ee,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,z){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=te+Te,z={id:c++,callback:ee,priorityLevel:z,startTime:te,expirationTime:Te,sortIndex:-1},te>ce?(z.sortIndex=te,e(u,z),n(l)===null&&z===n(u)&&(v?(y(O),O=-1):v=!0,oe(w,te-ce))):(z.sortIndex=Te,e(l,z),g||m||(g=!0,Q(P))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var ee=h;return function(){var te=h;h=ee;try{return z.apply(this,arguments)}finally{h=te}}}})(F8);U8.exports=F8;var SY=U8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TY=U,ao=SY;function et(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B8=new Set,By={};function tf(t,e){Tm(t,e),Tm(t+"Capture",e)}function Tm(t,e){for(By[t]=e,t=0;t<e.length;t++)B8.add(e[t])}var yu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IM=Object.prototype.hasOwnProperty,bY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hN={},fN={};function wY(t){return IM.call(fN,t)?!0:IM.call(hN,t)?!1:bY.test(t)?fN[t]=!0:(hN[t]=!0,!1)}function EY(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CY(t,e,n,i){if(e===null||typeof e>"u"||EY(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ss(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xr[t]=new ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xr[e]=new ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xr[t]=new ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xr[t]=new ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xr[t]=new ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xr[t]=new ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xr[t]=new ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xr[t]=new ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xr[t]=new ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var hR=/[\-:]([a-z])/g;function fR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hR,fR);xr[e]=new ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hR,fR);xr[e]=new ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hR,fR);xr[e]=new ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xr[t]=new ss(t,1,!1,t.toLowerCase(),null,!1,!1)});xr.xlinkHref=new ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xr[t]=new ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function pR(t,e,n,i){var r=xr.hasOwnProperty(e)?xr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CY(e,n,r,i)&&(n=null),i||r===null?wY(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Lu=TY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lx=Symbol.for("react.element"),Lp=Symbol.for("react.portal"),Np=Symbol.for("react.fragment"),mR=Symbol.for("react.strict_mode"),RM=Symbol.for("react.profiler"),z8=Symbol.for("react.provider"),H8=Symbol.for("react.context"),gR=Symbol.for("react.forward_ref"),DM=Symbol.for("react.suspense"),kM=Symbol.for("react.suspense_list"),yR=Symbol.for("react.memo"),wc=Symbol.for("react.lazy"),V8=Symbol.for("react.offscreen"),pN=Symbol.iterator;function i0(t){return t===null||typeof t!="object"?null:(t=pN&&t[pN]||t["@@iterator"],typeof t=="function"?t:null)}var fi=Object.assign,oC;function $0(t){if(oC===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oC=e&&e[1]||""}return`
`+oC+t}var aC=!1;function lC(t,e){if(!t||aC)return"";aC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{aC=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$0(t):""}function AY(t){switch(t.tag){case 5:return $0(t.type);case 16:return $0("Lazy");case 13:return $0("Suspense");case 19:return $0("SuspenseList");case 0:case 2:case 15:return t=lC(t.type,!1),t;case 11:return t=lC(t.type.render,!1),t;case 1:return t=lC(t.type,!0),t;default:return""}}function LM(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Np:return"Fragment";case Lp:return"Portal";case RM:return"Profiler";case mR:return"StrictMode";case DM:return"Suspense";case kM:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H8:return(t.displayName||"Context")+".Consumer";case z8:return(t._context.displayName||"Context")+".Provider";case gR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yR:return e=t.displayName||null,e!==null?e:LM(t.type)||"Memo";case wc:e=t._payload,t=t._init;try{return LM(t(e))}catch{}}return null}function MY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LM(e);case 8:return e===mR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PY(t){var e=$8(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nx(t){t._valueTracker||(t._valueTracker=PY(t))}function G8(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=$8(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function jS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function NM(t,e){var n=e.checked;return fi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Xc(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W8(t,e){e=e.checked,e!=null&&pR(t,"checked",e,!1)}function OM(t,e){W8(t,e);var n=Xc(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?UM(t,e.type,n):e.hasOwnProperty("defaultValue")&&UM(t,e.type,Xc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function UM(t,e,n){(e!=="number"||jS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var G0=Array.isArray;function im(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Xc(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function FM(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(et(91));return fi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(et(92));if(G0(n)){if(1<n.length)throw Error(et(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xc(n)}}function j8(t,e){var n=Xc(e.value),i=Xc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function vN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q8(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function BM(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q8(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ox,X8=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ox=Ox||document.createElement("div"),Ox.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ox.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IY=["Webkit","ms","Moz","O"];Object.keys(sy).forEach(function(t){IY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sy[e]=sy[t]})});function Y8(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sy.hasOwnProperty(t)&&sy[t]?(""+e).trim():e+"px"}function K8(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Y8(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var RY=fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zM(t,e){if(e){if(RY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(et(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(et(62))}}function HM(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VM=null;function vR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $M=null,rm=null,sm=null;function _N(t){if(t=i_(t)){if(typeof $M!="function")throw Error(et(280));var e=t.stateNode;e&&(e=u2(e),$M(t.stateNode,t.type,e))}}function Q8(t){rm?sm?sm.push(t):sm=[t]:rm=t}function Z8(){if(rm){var t=rm,e=sm;if(sm=rm=null,_N(t),e)for(t=0;t<e.length;t++)_N(e[t])}}function J8(t,e){return t(e)}function e6(){}var uC=!1;function t6(t,e,n){if(uC)return t(e,n);uC=!0;try{return J8(t,e,n)}finally{uC=!1,(rm!==null||sm!==null)&&(e6(),Z8())}}function Hy(t,e){var n=t.stateNode;if(n===null)return null;var i=u2(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(et(231,e,typeof n));return n}var GM=!1;if(yu)try{var r0={};Object.defineProperty(r0,"passive",{get:function(){GM=!0}}),window.addEventListener("test",r0,r0),window.removeEventListener("test",r0,r0)}catch{GM=!1}function DY(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var oy=!1,qS=null,XS=!1,WM=null,kY={onError:function(t){oy=!0,qS=t}};function LY(t,e,n,i,r,s,o,a,l){oy=!1,qS=null,DY.apply(kY,arguments)}function NY(t,e,n,i,r,s,o,a,l){if(LY.apply(this,arguments),oy){if(oy){var u=qS;oy=!1,qS=null}else throw Error(et(198));XS||(XS=!0,WM=u)}}function nf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function n6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xN(t){if(nf(t)!==t)throw Error(et(188))}function OY(t){var e=t.alternate;if(!e){if(e=nf(t),e===null)throw Error(et(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return xN(r),t;if(s===i)return xN(r),e;s=s.sibling}throw Error(et(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==i)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?t:e}function i6(t){return t=OY(t),t!==null?r6(t):null}function r6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r6(t);if(e!==null)return e;t=t.sibling}return null}var s6=ao.unstable_scheduleCallback,SN=ao.unstable_cancelCallback,UY=ao.unstable_shouldYield,FY=ao.unstable_requestPaint,Ci=ao.unstable_now,BY=ao.unstable_getCurrentPriorityLevel,_R=ao.unstable_ImmediatePriority,o6=ao.unstable_UserBlockingPriority,YS=ao.unstable_NormalPriority,zY=ao.unstable_LowPriority,a6=ao.unstable_IdlePriority,s2=null,ul=null;function HY(t){if(ul&&typeof ul.onCommitFiberRoot=="function")try{ul.onCommitFiberRoot(s2,t,void 0,(t.current.flags&128)===128)}catch{}}var wa=Math.clz32?Math.clz32:GY,VY=Math.log,$Y=Math.LN2;function GY(t){return t>>>=0,t===0?32:31-(VY(t)/$Y|0)|0}var Ux=64,Fx=4194304;function W0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function KS(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=W0(a):(s&=o,s!==0&&(i=W0(s)))}else o=n&~r,o!==0?i=W0(o):s!==0&&(i=W0(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-wa(e),r=1<<n,i|=t[n],e&=~r;return i}function WY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jY(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wa(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=WY(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jM(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l6(){var t=Ux;return Ux<<=1,!(Ux&4194240)&&(Ux=64),t}function cC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function t_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wa(e),t[e]=n}function qY(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-wa(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function xR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-wa(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Rn=0;function u6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c6,SR,d6,h6,f6,qM=!1,Bx=[],Fc=null,Bc=null,zc=null,Vy=new Map,$y=new Map,Pc=[],XY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TN(t,e){switch(t){case"focusin":case"focusout":Fc=null;break;case"dragenter":case"dragleave":Bc=null;break;case"mouseover":case"mouseout":zc=null;break;case"pointerover":case"pointerout":Vy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$y.delete(e.pointerId)}}function s0(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=i_(e),e!==null&&SR(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function YY(t,e,n,i,r){switch(e){case"focusin":return Fc=s0(Fc,t,e,n,i,r),!0;case"dragenter":return Bc=s0(Bc,t,e,n,i,r),!0;case"mouseover":return zc=s0(zc,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Vy.set(s,s0(Vy.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,$y.set(s,s0($y.get(s)||null,t,e,n,i,r)),!0}return!1}function p6(t){var e=dh(t.target);if(e!==null){var n=nf(e);if(n!==null){if(e=n.tag,e===13){if(e=n6(n),e!==null){t.blockedOn=e,f6(t.priority,function(){d6(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=XM(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);VM=i,n.target.dispatchEvent(i),VM=null}else return e=i_(n),e!==null&&SR(e),t.blockedOn=n,!1;e.shift()}return!0}function bN(t,e,n){yS(t)&&n.delete(e)}function KY(){qM=!1,Fc!==null&&yS(Fc)&&(Fc=null),Bc!==null&&yS(Bc)&&(Bc=null),zc!==null&&yS(zc)&&(zc=null),Vy.forEach(bN),$y.forEach(bN)}function o0(t,e){t.blockedOn===e&&(t.blockedOn=null,qM||(qM=!0,ao.unstable_scheduleCallback(ao.unstable_NormalPriority,KY)))}function Gy(t){function e(r){return o0(r,t)}if(0<Bx.length){o0(Bx[0],t);for(var n=1;n<Bx.length;n++){var i=Bx[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fc!==null&&o0(Fc,t),Bc!==null&&o0(Bc,t),zc!==null&&o0(zc,t),Vy.forEach(e),$y.forEach(e),n=0;n<Pc.length;n++)i=Pc[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Pc.length&&(n=Pc[0],n.blockedOn===null);)p6(n),n.blockedOn===null&&Pc.shift()}var om=Lu.ReactCurrentBatchConfig,QS=!0;function QY(t,e,n,i){var r=Rn,s=om.transition;om.transition=null;try{Rn=1,TR(t,e,n,i)}finally{Rn=r,om.transition=s}}function ZY(t,e,n,i){var r=Rn,s=om.transition;om.transition=null;try{Rn=4,TR(t,e,n,i)}finally{Rn=r,om.transition=s}}function TR(t,e,n,i){if(QS){var r=XM(t,e,n,i);if(r===null)xC(t,e,i,ZS,n),TN(t,i);else if(YY(r,t,e,n,i))i.stopPropagation();else if(TN(t,i),e&4&&-1<XY.indexOf(t)){for(;r!==null;){var s=i_(r);if(s!==null&&c6(s),s=XM(t,e,n,i),s===null&&xC(t,e,i,ZS,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else xC(t,e,i,null,n)}}var ZS=null;function XM(t,e,n,i){if(ZS=null,t=vR(i),t=dh(t),t!==null)if(e=nf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=n6(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ZS=t,null}function m6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BY()){case _R:return 1;case o6:return 4;case YS:case zY:return 16;case a6:return 536870912;default:return 16}default:return 16}}var Dc=null,bR=null,vS=null;function g6(){if(vS)return vS;var t,e=bR,n=e.length,i,r="value"in Dc?Dc.value:Dc.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return vS=r.slice(t,1<i?1-i:void 0)}function _S(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zx(){return!0}function wN(){return!1}function po(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zx:wN,this.isPropagationStopped=wN,this}return fi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zx)},persist:function(){},isPersistent:zx}),e}var ag={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wR=po(ag),n_=fi({},ag,{view:0,detail:0}),JY=po(n_),dC,hC,a0,o2=fi({},n_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ER,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==a0&&(a0&&t.type==="mousemove"?(dC=t.screenX-a0.screenX,hC=t.screenY-a0.screenY):hC=dC=0,a0=t),dC)},movementY:function(t){return"movementY"in t?t.movementY:hC}}),EN=po(o2),eK=fi({},o2,{dataTransfer:0}),tK=po(eK),nK=fi({},n_,{relatedTarget:0}),fC=po(nK),iK=fi({},ag,{animationName:0,elapsedTime:0,pseudoElement:0}),rK=po(iK),sK=fi({},ag,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oK=po(sK),aK=fi({},ag,{data:0}),CN=po(aK),lK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cK[t])?!!e[t]:!1}function ER(){return dK}var hK=fi({},n_,{key:function(t){if(t.key){var e=lK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_S(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ER,charCode:function(t){return t.type==="keypress"?_S(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_S(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fK=po(hK),pK=fi({},o2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AN=po(pK),mK=fi({},n_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ER}),gK=po(mK),yK=fi({},ag,{propertyName:0,elapsedTime:0,pseudoElement:0}),vK=po(yK),_K=fi({},o2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xK=po(_K),SK=[9,13,27,32],CR=yu&&"CompositionEvent"in window,ay=null;yu&&"documentMode"in document&&(ay=document.documentMode);var TK=yu&&"TextEvent"in window&&!ay,y6=yu&&(!CR||ay&&8<ay&&11>=ay),MN=String.fromCharCode(32),PN=!1;function v6(t,e){switch(t){case"keyup":return SK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Op=!1;function bK(t,e){switch(t){case"compositionend":return _6(e);case"keypress":return e.which!==32?null:(PN=!0,MN);case"textInput":return t=e.data,t===MN&&PN?null:t;default:return null}}function wK(t,e){if(Op)return t==="compositionend"||!CR&&v6(t,e)?(t=g6(),vS=bR=Dc=null,Op=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y6&&e.locale!=="ko"?null:e.data;default:return null}}var EK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!EK[t.type]:e==="textarea"}function x6(t,e,n,i){Q8(i),e=JS(e,"onChange"),0<e.length&&(n=new wR("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ly=null,Wy=null;function CK(t){R6(t,0)}function a2(t){var e=Bp(t);if(G8(e))return t}function AK(t,e){if(t==="change")return e}var S6=!1;if(yu){var pC;if(yu){var mC="oninput"in document;if(!mC){var RN=document.createElement("div");RN.setAttribute("oninput","return;"),mC=typeof RN.oninput=="function"}pC=mC}else pC=!1;S6=pC&&(!document.documentMode||9<document.documentMode)}function DN(){ly&&(ly.detachEvent("onpropertychange",T6),Wy=ly=null)}function T6(t){if(t.propertyName==="value"&&a2(Wy)){var e=[];x6(e,Wy,t,vR(t)),t6(CK,e)}}function MK(t,e,n){t==="focusin"?(DN(),ly=e,Wy=n,ly.attachEvent("onpropertychange",T6)):t==="focusout"&&DN()}function PK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return a2(Wy)}function IK(t,e){if(t==="click")return a2(e)}function RK(t,e){if(t==="input"||t==="change")return a2(e)}function DK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pa=typeof Object.is=="function"?Object.is:DK;function jy(t,e){if(Pa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!IM.call(e,r)||!Pa(t[r],e[r]))return!1}return!0}function kN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LN(t,e){var n=kN(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kN(n)}}function b6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w6(){for(var t=window,e=jS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jS(t.document)}return e}function AR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kK(t){var e=w6(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b6(n.ownerDocument.documentElement,n)){if(i!==null&&AR(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=LN(n,s);var o=LN(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LK=yu&&"documentMode"in document&&11>=document.documentMode,Up=null,YM=null,uy=null,KM=!1;function NN(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;KM||Up==null||Up!==jS(i)||(i=Up,"selectionStart"in i&&AR(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uy&&jy(uy,i)||(uy=i,i=JS(YM,"onSelect"),0<i.length&&(e=new wR("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Up)))}function Hx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fp={animationend:Hx("Animation","AnimationEnd"),animationiteration:Hx("Animation","AnimationIteration"),animationstart:Hx("Animation","AnimationStart"),transitionend:Hx("Transition","TransitionEnd")},gC={},E6={};yu&&(E6=document.createElement("div").style,"AnimationEvent"in window||(delete Fp.animationend.animation,delete Fp.animationiteration.animation,delete Fp.animationstart.animation),"TransitionEvent"in window||delete Fp.transitionend.transition);function l2(t){if(gC[t])return gC[t];if(!Fp[t])return t;var e=Fp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E6)return gC[t]=e[n];return t}var C6=l2("animationend"),A6=l2("animationiteration"),M6=l2("animationstart"),P6=l2("transitionend"),I6=new Map,ON="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function id(t,e){I6.set(t,e),tf(e,[t])}for(var yC=0;yC<ON.length;yC++){var vC=ON[yC],NK=vC.toLowerCase(),OK=vC[0].toUpperCase()+vC.slice(1);id(NK,"on"+OK)}id(C6,"onAnimationEnd");id(A6,"onAnimationIteration");id(M6,"onAnimationStart");id("dblclick","onDoubleClick");id("focusin","onFocus");id("focusout","onBlur");id(P6,"onTransitionEnd");Tm("onMouseEnter",["mouseout","mouseover"]);Tm("onMouseLeave",["mouseout","mouseover"]);Tm("onPointerEnter",["pointerout","pointerover"]);Tm("onPointerLeave",["pointerout","pointerover"]);tf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tf("onBeforeInput",["compositionend","keypress","textInput","paste"]);tf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var j0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UK=new Set("cancel close invalid load scroll toggle".split(" ").concat(j0));function UN(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,NY(i,e,void 0,t),t.currentTarget=null}function R6(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;UN(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;UN(r,a,u),s=l}}}if(XS)throw t=WM,XS=!1,WM=null,t}function Kn(t,e){var n=e[tP];n===void 0&&(n=e[tP]=new Set);var i=t+"__bubble";n.has(i)||(D6(e,t,2,!1),n.add(i))}function _C(t,e,n){var i=0;e&&(i|=4),D6(n,t,i,e)}var Vx="_reactListening"+Math.random().toString(36).slice(2);function qy(t){if(!t[Vx]){t[Vx]=!0,B8.forEach(function(n){n!=="selectionchange"&&(UK.has(n)||_C(n,!1,t),_C(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vx]||(e[Vx]=!0,_C("selectionchange",!1,e))}}function D6(t,e,n,i){switch(m6(e)){case 1:var r=QY;break;case 4:r=ZY;break;default:r=TR}n=r.bind(null,e,n,t),r=void 0,!GM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function xC(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=dh(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}t6(function(){var u=s,c=vR(n),d=[];e:{var h=I6.get(t);if(h!==void 0){var m=wR,g=t;switch(t){case"keypress":if(_S(n)===0)break e;case"keydown":case"keyup":m=fK;break;case"focusin":g="focus",m=fC;break;case"focusout":g="blur",m=fC;break;case"beforeblur":case"afterblur":m=fC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=EN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=gK;break;case C6:case A6:case M6:m=rK;break;case P6:m=vK;break;case"scroll":m=JY;break;case"wheel":m=xK;break;case"copy":case"cut":case"paste":m=oK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=AN}var v=(e&4)!==0,_=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var S=u,x;S!==null;){x=S;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,y!==null&&(w=Hy(S,y),w!=null&&v.push(Xy(S,w,x)))),_)break;S=S.return}0<v.length&&(h=new m(h,g,null,n,c),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==VM&&(g=n.relatedTarget||n.fromElement)&&(dh(g)||g[vu]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?dh(g):null,g!==null&&(_=nf(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=EN,w="onMouseLeave",y="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(v=AN,w="onPointerLeave",y="onPointerEnter",S="pointer"),_=m==null?h:Bp(m),x=g==null?h:Bp(g),h=new v(w,S+"leave",m,n,c),h.target=_,h.relatedTarget=x,w=null,dh(c)===u&&(v=new v(y,S+"enter",g,n,c),v.target=x,v.relatedTarget=_,w=v),_=w,m&&g)t:{for(v=m,y=g,S=0,x=v;x;x=qf(x))S++;for(x=0,w=y;w;w=qf(w))x++;for(;0<S-x;)v=qf(v),S--;for(;0<x-S;)y=qf(y),x--;for(;S--;){if(v===y||y!==null&&v===y.alternate)break t;v=qf(v),y=qf(y)}v=null}else v=null;m!==null&&FN(d,h,m,v,!1),g!==null&&_!==null&&FN(d,_,g,v,!0)}}e:{if(h=u?Bp(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var P=AK;else if(IN(h))if(S6)P=RK;else{P=PK;var A=MK}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=IK);if(P&&(P=P(t,u))){x6(d,P,n,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&UM(h,"number",h.value)}switch(A=u?Bp(u):window,t){case"focusin":(IN(A)||A.contentEditable==="true")&&(Up=A,YM=u,uy=null);break;case"focusout":uy=YM=Up=null;break;case"mousedown":KM=!0;break;case"contextmenu":case"mouseup":case"dragend":KM=!1,NN(d,n,c);break;case"selectionchange":if(LK)break;case"keydown":case"keyup":NN(d,n,c)}var D;if(CR)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Op?v6(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(y6&&n.locale!=="ko"&&(Op||O!=="onCompositionStart"?O==="onCompositionEnd"&&Op&&(D=g6()):(Dc=c,bR="value"in Dc?Dc.value:Dc.textContent,Op=!0)),A=JS(u,O),0<A.length&&(O=new CN(O,t,null,n,c),d.push({event:O,listeners:A}),D?O.data=D:(D=_6(n),D!==null&&(O.data=D)))),(D=TK?bK(t,n):wK(t,n))&&(u=JS(u,"onBeforeInput"),0<u.length&&(c=new CN("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=D))}R6(d,e)})}function Xy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function JS(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Hy(t,n),s!=null&&i.unshift(Xy(t,s,r)),s=Hy(t,e),s!=null&&i.push(Xy(t,s,r))),t=t.return}return i}function qf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function FN(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Hy(n,s),l!=null&&o.unshift(Xy(n,l,a))):r||(l=Hy(n,s),l!=null&&o.push(Xy(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FK=/\r\n?/g,BK=/\u0000|\uFFFD/g;function BN(t){return(typeof t=="string"?t:""+t).replace(FK,`
`).replace(BK,"")}function $x(t,e,n){if(e=BN(e),BN(t)!==e&&n)throw Error(et(425))}function eT(){}var QM=null,ZM=null;function JM(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eP=typeof setTimeout=="function"?setTimeout:void 0,zK=typeof clearTimeout=="function"?clearTimeout:void 0,zN=typeof Promise=="function"?Promise:void 0,HK=typeof queueMicrotask=="function"?queueMicrotask:typeof zN<"u"?function(t){return zN.resolve(null).then(t).catch(VK)}:eP;function VK(t){setTimeout(function(){throw t})}function SC(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Gy(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Gy(e)}function Hc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lg=Math.random().toString(36).slice(2),tl="__reactFiber$"+lg,Yy="__reactProps$"+lg,vu="__reactContainer$"+lg,tP="__reactEvents$"+lg,$K="__reactListeners$"+lg,GK="__reactHandles$"+lg;function dh(t){var e=t[tl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vu]||n[tl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HN(t);t!==null;){if(n=t[tl])return n;t=HN(t)}return e}t=n,n=t.parentNode}return null}function i_(t){return t=t[tl]||t[vu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(et(33))}function u2(t){return t[Yy]||null}var nP=[],zp=-1;function rd(t){return{current:t}}function Zn(t){0>zp||(t.current=nP[zp],nP[zp]=null,zp--)}function Gn(t,e){zp++,nP[zp]=t.current,t.current=e}var Yc={},Ur=rd(Yc),As=rd(!1),Bh=Yc;function bm(t,e){var n=t.type.contextTypes;if(!n)return Yc;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ms(t){return t=t.childContextTypes,t!=null}function tT(){Zn(As),Zn(Ur)}function VN(t,e,n){if(Ur.current!==Yc)throw Error(et(168));Gn(Ur,e),Gn(As,n)}function k6(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(et(108,MY(t)||"Unknown",r));return fi({},n,i)}function nT(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yc,Bh=Ur.current,Gn(Ur,t),Gn(As,As.current),!0}function $N(t,e,n){var i=t.stateNode;if(!i)throw Error(et(169));n?(t=k6(t,e,Bh),i.__reactInternalMemoizedMergedChildContext=t,Zn(As),Zn(Ur),Gn(Ur,t)):Zn(As),Gn(As,n)}var Ql=null,c2=!1,TC=!1;function L6(t){Ql===null?Ql=[t]:Ql.push(t)}function WK(t){c2=!0,L6(t)}function sd(){if(!TC&&Ql!==null){TC=!0;var t=0,e=Rn;try{var n=Ql;for(Rn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ql=null,c2=!1}catch(r){throw Ql!==null&&(Ql=Ql.slice(t+1)),s6(_R,sd),r}finally{Rn=e,TC=!1}}return null}var Hp=[],Vp=0,iT=null,rT=0,Ro=[],Do=0,zh=null,ru=1,su="";function eh(t,e){Hp[Vp++]=rT,Hp[Vp++]=iT,iT=t,rT=e}function N6(t,e,n){Ro[Do++]=ru,Ro[Do++]=su,Ro[Do++]=zh,zh=t;var i=ru;t=su;var r=32-wa(i)-1;i&=~(1<<r),n+=1;var s=32-wa(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ru=1<<32-wa(e)+r|n<<r|i,su=s+t}else ru=1<<s|n<<r|i,su=t}function MR(t){t.return!==null&&(eh(t,1),N6(t,1,0))}function PR(t){for(;t===iT;)iT=Hp[--Vp],Hp[Vp]=null,rT=Hp[--Vp],Hp[Vp]=null;for(;t===zh;)zh=Ro[--Do],Ro[Do]=null,su=Ro[--Do],Ro[Do]=null,ru=Ro[--Do],Ro[Do]=null}var io=null,no=null,si=!1,ya=null;function O6(t,e){var n=Uo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function GN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,io=t,no=Hc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,io=t,no=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zh!==null?{id:ru,overflow:su}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Uo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,io=t,no=null,!0):!1;default:return!1}}function iP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rP(t){if(si){var e=no;if(e){var n=e;if(!GN(t,e)){if(iP(t))throw Error(et(418));e=Hc(n.nextSibling);var i=io;e&&GN(t,e)?O6(i,n):(t.flags=t.flags&-4097|2,si=!1,io=t)}}else{if(iP(t))throw Error(et(418));t.flags=t.flags&-4097|2,si=!1,io=t}}}function WN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;io=t}function Gx(t){if(t!==io)return!1;if(!si)return WN(t),si=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!JM(t.type,t.memoizedProps)),e&&(e=no)){if(iP(t))throw U6(),Error(et(418));for(;e;)O6(t,e),e=Hc(e.nextSibling)}if(WN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(et(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){no=Hc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}no=null}}else no=io?Hc(t.stateNode.nextSibling):null;return!0}function U6(){for(var t=no;t;)t=Hc(t.nextSibling)}function wm(){no=io=null,si=!1}function IR(t){ya===null?ya=[t]:ya.push(t)}var jK=Lu.ReactCurrentBatchConfig;function l0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var i=n.stateNode}if(!i)throw Error(et(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,t))}return t}function Wx(t,e){throw t=Object.prototype.toString.call(e),Error(et(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jN(t){var e=t._init;return e(t._payload)}function F6(t){function e(y,S){if(t){var x=y.deletions;x===null?(y.deletions=[S],y.flags|=16):x.push(S)}}function n(y,S){if(!t)return null;for(;S!==null;)e(y,S),S=S.sibling;return null}function i(y,S){for(y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function r(y,S){return y=Wc(y,S),y.index=0,y.sibling=null,y}function s(y,S,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<S?(y.flags|=2,S):x):(y.flags|=2,S)):(y.flags|=1048576,S)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,S,x,w){return S===null||S.tag!==6?(S=PC(x,y.mode,w),S.return=y,S):(S=r(S,x),S.return=y,S)}function l(y,S,x,w){var P=x.type;return P===Np?c(y,S,x.props.children,w,x.key):S!==null&&(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===wc&&jN(P)===S.type)?(w=r(S,x.props),w.ref=l0(y,S,x),w.return=y,w):(w=CS(x.type,x.key,x.props,null,y.mode,w),w.ref=l0(y,S,x),w.return=y,w)}function u(y,S,x,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=IC(x,y.mode,w),S.return=y,S):(S=r(S,x.children||[]),S.return=y,S)}function c(y,S,x,w,P){return S===null||S.tag!==7?(S=Eh(x,y.mode,w,P),S.return=y,S):(S=r(S,x),S.return=y,S)}function d(y,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=PC(""+S,y.mode,x),S.return=y,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lx:return x=CS(S.type,S.key,S.props,null,y.mode,x),x.ref=l0(y,null,S),x.return=y,x;case Lp:return S=IC(S,y.mode,x),S.return=y,S;case wc:var w=S._init;return d(y,w(S._payload),x)}if(G0(S)||i0(S))return S=Eh(S,y.mode,x,null),S.return=y,S;Wx(y,S)}return null}function h(y,S,x,w){var P=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return P!==null?null:a(y,S,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lx:return x.key===P?l(y,S,x,w):null;case Lp:return x.key===P?u(y,S,x,w):null;case wc:return P=x._init,h(y,S,P(x._payload),w)}if(G0(x)||i0(x))return P!==null?null:c(y,S,x,w,null);Wx(y,x)}return null}function m(y,S,x,w,P){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(x)||null,a(S,y,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lx:return y=y.get(w.key===null?x:w.key)||null,l(S,y,w,P);case Lp:return y=y.get(w.key===null?x:w.key)||null,u(S,y,w,P);case wc:var A=w._init;return m(y,S,x,A(w._payload),P)}if(G0(w)||i0(w))return y=y.get(x)||null,c(S,y,w,P,null);Wx(S,w)}return null}function g(y,S,x,w){for(var P=null,A=null,D=S,O=S=0,H=null;D!==null&&O<x.length;O++){D.index>O?(H=D,D=null):H=D.sibling;var E=h(y,D,x[O],w);if(E===null){D===null&&(D=H);break}t&&D&&E.alternate===null&&e(y,D),S=s(E,S,O),A===null?P=E:A.sibling=E,A=E,D=H}if(O===x.length)return n(y,D),si&&eh(y,O),P;if(D===null){for(;O<x.length;O++)D=d(y,x[O],w),D!==null&&(S=s(D,S,O),A===null?P=D:A.sibling=D,A=D);return si&&eh(y,O),P}for(D=i(y,D);O<x.length;O++)H=m(D,y,O,x[O],w),H!==null&&(t&&H.alternate!==null&&D.delete(H.key===null?O:H.key),S=s(H,S,O),A===null?P=H:A.sibling=H,A=H);return t&&D.forEach(function(k){return e(y,k)}),si&&eh(y,O),P}function v(y,S,x,w){var P=i0(x);if(typeof P!="function")throw Error(et(150));if(x=P.call(x),x==null)throw Error(et(151));for(var A=P=null,D=S,O=S=0,H=null,E=x.next();D!==null&&!E.done;O++,E=x.next()){D.index>O?(H=D,D=null):H=D.sibling;var k=h(y,D,E.value,w);if(k===null){D===null&&(D=H);break}t&&D&&k.alternate===null&&e(y,D),S=s(k,S,O),A===null?P=k:A.sibling=k,A=k,D=H}if(E.done)return n(y,D),si&&eh(y,O),P;if(D===null){for(;!E.done;O++,E=x.next())E=d(y,E.value,w),E!==null&&(S=s(E,S,O),A===null?P=E:A.sibling=E,A=E);return si&&eh(y,O),P}for(D=i(y,D);!E.done;O++,E=x.next())E=m(D,y,O,E.value,w),E!==null&&(t&&E.alternate!==null&&D.delete(E.key===null?O:E.key),S=s(E,S,O),A===null?P=E:A.sibling=E,A=E);return t&&D.forEach(function(W){return e(y,W)}),si&&eh(y,O),P}function _(y,S,x,w){if(typeof x=="object"&&x!==null&&x.type===Np&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Lx:e:{for(var P=x.key,A=S;A!==null;){if(A.key===P){if(P=x.type,P===Np){if(A.tag===7){n(y,A.sibling),S=r(A,x.props.children),S.return=y,y=S;break e}}else if(A.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===wc&&jN(P)===A.type){n(y,A.sibling),S=r(A,x.props),S.ref=l0(y,A,x),S.return=y,y=S;break e}n(y,A);break}else e(y,A);A=A.sibling}x.type===Np?(S=Eh(x.props.children,y.mode,w,x.key),S.return=y,y=S):(w=CS(x.type,x.key,x.props,null,y.mode,w),w.ref=l0(y,S,x),w.return=y,y=w)}return o(y);case Lp:e:{for(A=x.key;S!==null;){if(S.key===A)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){n(y,S.sibling),S=r(S,x.children||[]),S.return=y,y=S;break e}else{n(y,S);break}else e(y,S);S=S.sibling}S=IC(x,y.mode,w),S.return=y,y=S}return o(y);case wc:return A=x._init,_(y,S,A(x._payload),w)}if(G0(x))return g(y,S,x,w);if(i0(x))return v(y,S,x,w);Wx(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(n(y,S.sibling),S=r(S,x),S.return=y,y=S):(n(y,S),S=PC(x,y.mode,w),S.return=y,y=S),o(y)):n(y,S)}return _}var Em=F6(!0),B6=F6(!1),sT=rd(null),oT=null,$p=null,RR=null;function DR(){RR=$p=oT=null}function kR(t){var e=sT.current;Zn(sT),t._currentValue=e}function sP(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function am(t,e){oT=t,RR=$p=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ws=!0),t.firstContext=null)}function Wo(t){var e=t._currentValue;if(RR!==t)if(t={context:t,memoizedValue:e,next:null},$p===null){if(oT===null)throw Error(et(308));$p=t,oT.dependencies={lanes:0,firstContext:t}}else $p=$p.next=t;return e}var hh=null;function LR(t){hh===null?hh=[t]:hh.push(t)}function z6(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,LR(e)):(n.next=r.next,r.next=n),e.interleaved=n,_u(t,i)}function _u(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ec=!1;function NR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function uu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vc(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,vn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_u(t,n)}return r=i.interleaved,r===null?(e.next=e,LR(i)):(e.next=r.next,r.next=e),i.interleaved=e,_u(t,n)}function xS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,xR(t,n)}}function qN(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function aT(t,e,n,i){var r=t.updateQueue;Ec=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(h=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=fi({},d,h);break e;case 2:Ec=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Vh|=o,t.lanes=o,t.memoizedState=d}}function XN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(et(191,r));r.call(i)}}}var r_={},cl=rd(r_),Ky=rd(r_),Qy=rd(r_);function fh(t){if(t===r_)throw Error(et(174));return t}function OR(t,e){switch(Gn(Qy,e),Gn(Ky,t),Gn(cl,r_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:BM(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=BM(e,t)}Zn(cl),Gn(cl,e)}function Cm(){Zn(cl),Zn(Ky),Zn(Qy)}function V6(t){fh(Qy.current);var e=fh(cl.current),n=BM(e,t.type);e!==n&&(Gn(Ky,t),Gn(cl,n))}function UR(t){Ky.current===t&&(Zn(cl),Zn(Ky))}var li=rd(0);function lT(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bC=[];function FR(){for(var t=0;t<bC.length;t++)bC[t]._workInProgressVersionPrimary=null;bC.length=0}var SS=Lu.ReactCurrentDispatcher,wC=Lu.ReactCurrentBatchConfig,Hh=0,di=null,Xi=null,nr=null,uT=!1,cy=!1,Zy=0,qK=0;function Er(){throw Error(et(321))}function BR(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pa(t[n],e[n]))return!1;return!0}function zR(t,e,n,i,r,s){if(Hh=s,di=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,SS.current=t===null||t.memoizedState===null?QK:ZK,t=n(i,r),cy){s=0;do{if(cy=!1,Zy=0,25<=s)throw Error(et(301));s+=1,nr=Xi=null,e.updateQueue=null,SS.current=JK,t=n(i,r)}while(cy)}if(SS.current=cT,e=Xi!==null&&Xi.next!==null,Hh=0,nr=Xi=di=null,uT=!1,e)throw Error(et(300));return t}function HR(){var t=Zy!==0;return Zy=0,t}function Ya(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?di.memoizedState=nr=t:nr=nr.next=t,nr}function jo(){if(Xi===null){var t=di.alternate;t=t!==null?t.memoizedState:null}else t=Xi.next;var e=nr===null?di.memoizedState:nr.next;if(e!==null)nr=e,Xi=t;else{if(t===null)throw Error(et(310));Xi=t,t={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},nr===null?di.memoizedState=nr=t:nr=nr.next=t}return nr}function Jy(t,e){return typeof e=="function"?e(t):e}function EC(t){var e=jo(),n=e.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=t;var i=Xi,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Hh&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,di.lanes|=c,Vh|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Pa(i,e.memoizedState)||(ws=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,di.lanes|=s,Vh|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function CC(t){var e=jo(),n=e.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Pa(s,e.memoizedState)||(ws=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function $6(){}function G6(t,e){var n=di,i=jo(),r=e(),s=!Pa(i.memoizedState,r);if(s&&(i.memoizedState=r,ws=!0),i=i.queue,VR(q6.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||nr!==null&&nr.memoizedState.tag&1){if(n.flags|=2048,ev(9,j6.bind(null,n,i,r,e),void 0,null),or===null)throw Error(et(349));Hh&30||W6(n,e,r)}return r}function W6(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=di.updateQueue,e===null?(e={lastEffect:null,stores:null},di.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function j6(t,e,n,i){e.value=n,e.getSnapshot=i,X6(e)&&Y6(t)}function q6(t,e,n){return n(function(){X6(e)&&Y6(t)})}function X6(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pa(t,n)}catch{return!0}}function Y6(t){var e=_u(t,1);e!==null&&Ea(e,t,1,-1)}function YN(t){var e=Ya();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jy,lastRenderedState:t},e.queue=t,t=t.dispatch=KK.bind(null,di,t),[e.memoizedState,t]}function ev(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=di.updateQueue,e===null?(e={lastEffect:null,stores:null},di.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function K6(){return jo().memoizedState}function TS(t,e,n,i){var r=Ya();di.flags|=t,r.memoizedState=ev(1|e,n,void 0,i===void 0?null:i)}function d2(t,e,n,i){var r=jo();i=i===void 0?null:i;var s=void 0;if(Xi!==null){var o=Xi.memoizedState;if(s=o.destroy,i!==null&&BR(i,o.deps)){r.memoizedState=ev(e,n,s,i);return}}di.flags|=t,r.memoizedState=ev(1|e,n,s,i)}function KN(t,e){return TS(8390656,8,t,e)}function VR(t,e){return d2(2048,8,t,e)}function Q6(t,e){return d2(4,2,t,e)}function Z6(t,e){return d2(4,4,t,e)}function J6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ez(t,e,n){return n=n!=null?n.concat([t]):null,d2(4,4,J6.bind(null,e,t),n)}function $R(){}function tz(t,e){var n=jo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&BR(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function nz(t,e){var n=jo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&BR(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function iz(t,e,n){return Hh&21?(Pa(n,e)||(n=l6(),di.lanes|=n,Vh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ws=!0),t.memoizedState=n)}function XK(t,e){var n=Rn;Rn=n!==0&&4>n?n:4,t(!0);var i=wC.transition;wC.transition={};try{t(!1),e()}finally{Rn=n,wC.transition=i}}function rz(){return jo().memoizedState}function YK(t,e,n){var i=Gc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},sz(t))oz(e,n);else if(n=z6(t,e,n,i),n!==null){var r=es();Ea(n,t,i,r),az(n,e,i)}}function KK(t,e,n){var i=Gc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(sz(t))oz(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Pa(a,o)){var l=e.interleaved;l===null?(r.next=r,LR(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=z6(t,e,r,i),n!==null&&(r=es(),Ea(n,t,i,r),az(n,e,i))}}function sz(t){var e=t.alternate;return t===di||e!==null&&e===di}function oz(t,e){cy=uT=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function az(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,xR(t,n)}}var cT={readContext:Wo,useCallback:Er,useContext:Er,useEffect:Er,useImperativeHandle:Er,useInsertionEffect:Er,useLayoutEffect:Er,useMemo:Er,useReducer:Er,useRef:Er,useState:Er,useDebugValue:Er,useDeferredValue:Er,useTransition:Er,useMutableSource:Er,useSyncExternalStore:Er,useId:Er,unstable_isNewReconciler:!1},QK={readContext:Wo,useCallback:function(t,e){return Ya().memoizedState=[t,e===void 0?null:e],t},useContext:Wo,useEffect:KN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,TS(4194308,4,J6.bind(null,e,t),n)},useLayoutEffect:function(t,e){return TS(4194308,4,t,e)},useInsertionEffect:function(t,e){return TS(4,2,t,e)},useMemo:function(t,e){var n=Ya();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ya();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YK.bind(null,di,t),[i.memoizedState,t]},useRef:function(t){var e=Ya();return t={current:t},e.memoizedState=t},useState:YN,useDebugValue:$R,useDeferredValue:function(t){return Ya().memoizedState=t},useTransition:function(){var t=YN(!1),e=t[0];return t=XK.bind(null,t[1]),Ya().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=di,r=Ya();if(si){if(n===void 0)throw Error(et(407));n=n()}else{if(n=e(),or===null)throw Error(et(349));Hh&30||W6(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,KN(q6.bind(null,i,s,t),[t]),i.flags|=2048,ev(9,j6.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ya(),e=or.identifierPrefix;if(si){var n=su,i=ru;n=(i&~(1<<32-wa(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZK={readContext:Wo,useCallback:tz,useContext:Wo,useEffect:VR,useImperativeHandle:ez,useInsertionEffect:Q6,useLayoutEffect:Z6,useMemo:nz,useReducer:EC,useRef:K6,useState:function(){return EC(Jy)},useDebugValue:$R,useDeferredValue:function(t){var e=jo();return iz(e,Xi.memoizedState,t)},useTransition:function(){var t=EC(Jy)[0],e=jo().memoizedState;return[t,e]},useMutableSource:$6,useSyncExternalStore:G6,useId:rz,unstable_isNewReconciler:!1},JK={readContext:Wo,useCallback:tz,useContext:Wo,useEffect:VR,useImperativeHandle:ez,useInsertionEffect:Q6,useLayoutEffect:Z6,useMemo:nz,useReducer:CC,useRef:K6,useState:function(){return CC(Jy)},useDebugValue:$R,useDeferredValue:function(t){var e=jo();return Xi===null?e.memoizedState=t:iz(e,Xi.memoizedState,t)},useTransition:function(){var t=CC(Jy)[0],e=jo().memoizedState;return[t,e]},useMutableSource:$6,useSyncExternalStore:G6,useId:rz,unstable_isNewReconciler:!1};function pa(t,e){if(t&&t.defaultProps){e=fi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oP(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:fi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var h2={isMounted:function(t){return(t=t._reactInternals)?nf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=es(),r=Gc(t),s=uu(i,r);s.payload=e,n!=null&&(s.callback=n),e=Vc(t,s,r),e!==null&&(Ea(e,t,r,i),xS(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=es(),r=Gc(t),s=uu(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vc(t,s,r),e!==null&&(Ea(e,t,r,i),xS(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=es(),i=Gc(t),r=uu(n,i);r.tag=2,e!=null&&(r.callback=e),e=Vc(t,r,i),e!==null&&(Ea(e,t,i,n),xS(e,t,i))}};function QN(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!jy(n,i)||!jy(r,s):!0}function lz(t,e,n){var i=!1,r=Yc,s=e.contextType;return typeof s=="object"&&s!==null?s=Wo(s):(r=Ms(e)?Bh:Ur.current,i=e.contextTypes,s=(i=i!=null)?bm(t,r):Yc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=h2,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function ZN(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&h2.enqueueReplaceState(e,e.state,null)}function aP(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},NR(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Wo(s):(s=Ms(e)?Bh:Ur.current,r.context=bm(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oP(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&h2.enqueueReplaceState(r,r.state,null),aT(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Am(t,e){try{var n="",i=e;do n+=AY(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function AC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lP(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eQ=typeof WeakMap=="function"?WeakMap:Map;function uz(t,e,n){n=uu(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){hT||(hT=!0,vP=i),lP(t,e)},n}function cz(t,e,n){n=uu(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){lP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lP(t,e),typeof i!="function"&&($c===null?$c=new Set([this]):$c.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function JN(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new eQ;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=pQ.bind(null,t,e,n),e.then(t,t))}function eO(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tO(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=uu(-1,1),e.tag=2,Vc(n,e,1))),n.lanes|=1),t)}var tQ=Lu.ReactCurrentOwner,ws=!1;function qr(t,e,n,i){e.child=t===null?B6(e,null,n,i):Em(e,t.child,n,i)}function nO(t,e,n,i,r){n=n.render;var s=e.ref;return am(e,r),i=zR(t,e,n,i,s,r),n=HR(),t!==null&&!ws?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,xu(t,e,r)):(si&&n&&MR(e),e.flags|=1,qr(t,e,i,r),e.child)}function iO(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!QR(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dz(t,e,s,i,r)):(t=CS(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jy,n(o,i)&&t.ref===e.ref)return xu(t,e,r)}return e.flags|=1,t=Wc(s,i),t.ref=e.ref,t.return=e,e.child=t}function dz(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(jy(s,i)&&t.ref===e.ref)if(ws=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ws=!0);else return e.lanes=t.lanes,xu(t,e,r)}return uP(t,e,n,i,r)}function hz(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gn(Wp,Qs),Qs|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Gn(Wp,Qs),Qs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Gn(Wp,Qs),Qs|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Gn(Wp,Qs),Qs|=i;return qr(t,e,r,n),e.child}function fz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uP(t,e,n,i,r){var s=Ms(n)?Bh:Ur.current;return s=bm(e,s),am(e,r),n=zR(t,e,n,i,s,r),i=HR(),t!==null&&!ws?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,xu(t,e,r)):(si&&i&&MR(e),e.flags|=1,qr(t,e,n,r),e.child)}function rO(t,e,n,i,r){if(Ms(n)){var s=!0;nT(e)}else s=!1;if(am(e,r),e.stateNode===null)bS(t,e),lz(e,n,i),aP(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wo(u):(u=Ms(n)?Bh:Ur.current,u=bm(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&ZN(e,o,i,u),Ec=!1;var h=e.memoizedState;o.state=h,aT(e,i,o,r),l=e.memoizedState,a!==i||h!==l||As.current||Ec?(typeof c=="function"&&(oP(e,n,c,i),l=e.memoizedState),(a=Ec||QN(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,H6(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:pa(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wo(l):(l=Ms(n)?Bh:Ur.current,l=bm(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&ZN(e,o,i,l),Ec=!1,h=e.memoizedState,o.state=h,aT(e,i,o,r);var g=e.memoizedState;a!==d||h!==g||As.current||Ec?(typeof m=="function"&&(oP(e,n,m,i),g=e.memoizedState),(u=Ec||QN(e,n,u,i,h,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return cP(t,e,n,i,s,r)}function cP(t,e,n,i,r,s){fz(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&$N(e,n,!1),xu(t,e,s);i=e.stateNode,tQ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Em(e,t.child,null,s),e.child=Em(e,null,a,s)):qr(t,e,a,s),e.memoizedState=i.state,r&&$N(e,n,!0),e.child}function pz(t){var e=t.stateNode;e.pendingContext?VN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&VN(t,e.context,!1),OR(t,e.containerInfo)}function sO(t,e,n,i,r){return wm(),IR(r),e.flags|=256,qr(t,e,n,i),e.child}var dP={dehydrated:null,treeContext:null,retryLane:0};function hP(t){return{baseLanes:t,cachePool:null,transitions:null}}function mz(t,e,n){var i=e.pendingProps,r=li.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Gn(li,r&1),t===null)return rP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=m2(o,i,0,null),t=Eh(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hP(n),e.memoizedState=dP,t):GR(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return nQ(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Wc(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Wc(a,s):(s=Eh(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?hP(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dP,i}return s=t.child,t=s.sibling,i=Wc(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function GR(t,e){return e=m2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jx(t,e,n,i){return i!==null&&IR(i),Em(e,t.child,null,n),t=GR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nQ(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=AC(Error(et(422))),jx(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=m2({mode:"visible",children:i.children},r,0,null),s=Eh(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Em(e,t.child,null,o),e.child.memoizedState=hP(o),e.memoizedState=dP,s);if(!(e.mode&1))return jx(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(et(419)),i=AC(s,i,void 0),jx(t,e,o,i)}if(a=(o&t.childLanes)!==0,ws||a){if(i=or,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,_u(t,r),Ea(i,t,r,-1))}return KR(),i=AC(Error(et(421))),jx(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=mQ.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,no=Hc(r.nextSibling),io=e,si=!0,ya=null,t!==null&&(Ro[Do++]=ru,Ro[Do++]=su,Ro[Do++]=zh,ru=t.id,su=t.overflow,zh=e),e=GR(e,i.children),e.flags|=4096,e)}function oO(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),sP(t.return,e,n)}function MC(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function gz(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(qr(t,e,i.children,n),i=li.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oO(t,n,e);else if(t.tag===19)oO(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Gn(li,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&lT(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),MC(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&lT(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}MC(e,!0,n,null,s);break;case"together":MC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(et(153));if(e.child!==null){for(t=e.child,n=Wc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iQ(t,e,n){switch(e.tag){case 3:pz(e),wm();break;case 5:V6(e);break;case 1:Ms(e.type)&&nT(e);break;case 4:OR(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Gn(sT,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Gn(li,li.current&1),e.flags|=128,null):n&e.child.childLanes?mz(t,e,n):(Gn(li,li.current&1),t=xu(t,e,n),t!==null?t.sibling:null);Gn(li,li.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return gz(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Gn(li,li.current),i)break;return null;case 22:case 23:return e.lanes=0,hz(t,e,n)}return xu(t,e,n)}var yz,fP,vz,_z;yz=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fP=function(){};vz=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fh(cl.current);var s=null;switch(n){case"input":r=NM(t,r),i=NM(t,i),s=[];break;case"select":r=fi({},r,{value:void 0}),i=fi({},i,{value:void 0}),s=[];break;case"textarea":r=FM(t,r),i=FM(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=eT)}zM(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(By.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(By.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Kn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};_z=function(t,e,n,i){n!==i&&(e.flags|=4)};function u0(t,e){if(!si)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Cr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function rQ(t,e,n){var i=e.pendingProps;switch(PR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(e),null;case 1:return Ms(e.type)&&tT(),Cr(e),null;case 3:return i=e.stateNode,Cm(),Zn(As),Zn(Ur),FR(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Gx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ya!==null&&(SP(ya),ya=null))),fP(t,e),Cr(e),null;case 5:UR(e);var r=fh(Qy.current);if(n=e.type,t!==null&&e.stateNode!=null)vz(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(et(166));return Cr(e),null}if(t=fh(cl.current),Gx(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[tl]=e,i[Yy]=s,t=(e.mode&1)!==0,n){case"dialog":Kn("cancel",i),Kn("close",i);break;case"iframe":case"object":case"embed":Kn("load",i);break;case"video":case"audio":for(r=0;r<j0.length;r++)Kn(j0[r],i);break;case"source":Kn("error",i);break;case"img":case"image":case"link":Kn("error",i),Kn("load",i);break;case"details":Kn("toggle",i);break;case"input":mN(i,s),Kn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Kn("invalid",i);break;case"textarea":yN(i,s),Kn("invalid",i)}zM(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&$x(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$x(i.textContent,a,t),r=["children",""+a]):By.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kn("scroll",i)}switch(n){case"input":Nx(i),gN(i,s,!0);break;case"textarea":Nx(i),vN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=eT)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q8(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[tl]=e,t[Yy]=i,yz(t,e,!1,!1),e.stateNode=t;e:{switch(o=HM(n,i),n){case"dialog":Kn("cancel",t),Kn("close",t),r=i;break;case"iframe":case"object":case"embed":Kn("load",t),r=i;break;case"video":case"audio":for(r=0;r<j0.length;r++)Kn(j0[r],t);r=i;break;case"source":Kn("error",t),r=i;break;case"img":case"image":case"link":Kn("error",t),Kn("load",t),r=i;break;case"details":Kn("toggle",t),r=i;break;case"input":mN(t,i),r=NM(t,i),Kn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=fi({},i,{value:void 0}),Kn("invalid",t);break;case"textarea":yN(t,i),r=FM(t,i),Kn("invalid",t);break;default:r=i}zM(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?K8(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X8(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zy(t,l):typeof l=="number"&&zy(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(By.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kn("scroll",t):l!=null&&pR(t,s,l,o))}switch(n){case"input":Nx(t),gN(t,i,!1);break;case"textarea":Nx(t),vN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Xc(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?im(t,!!i.multiple,s,!1):i.defaultValue!=null&&im(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=eT)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cr(e),null;case 6:if(t&&e.stateNode!=null)_z(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(et(166));if(n=fh(Qy.current),fh(cl.current),Gx(e)){if(i=e.stateNode,n=e.memoizedProps,i[tl]=e,(s=i.nodeValue!==n)&&(t=io,t!==null))switch(t.tag){case 3:$x(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$x(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[tl]=e,e.stateNode=i}return Cr(e),null;case 13:if(Zn(li),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(si&&no!==null&&e.mode&1&&!(e.flags&128))U6(),wm(),e.flags|=98560,s=!1;else if(s=Gx(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(et(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[tl]=e}else wm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cr(e),s=!1}else ya!==null&&(SP(ya),ya=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||li.current&1?Yi===0&&(Yi=3):KR())),e.updateQueue!==null&&(e.flags|=4),Cr(e),null);case 4:return Cm(),fP(t,e),t===null&&qy(e.stateNode.containerInfo),Cr(e),null;case 10:return kR(e.type._context),Cr(e),null;case 17:return Ms(e.type)&&tT(),Cr(e),null;case 19:if(Zn(li),s=e.memoizedState,s===null)return Cr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)u0(s,!1);else{if(Yi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lT(t),o!==null){for(e.flags|=128,u0(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Gn(li,li.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ci()>Mm&&(e.flags|=128,i=!0,u0(s,!1),e.lanes=4194304)}else{if(!i)if(t=lT(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),u0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!si)return Cr(e),null}else 2*Ci()-s.renderingStartTime>Mm&&n!==1073741824&&(e.flags|=128,i=!0,u0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ci(),e.sibling=null,n=li.current,Gn(li,i?n&1|2:n&1),e):(Cr(e),null);case 22:case 23:return YR(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Qs&1073741824&&(Cr(e),e.subtreeFlags&6&&(e.flags|=8192)):Cr(e),null;case 24:return null;case 25:return null}throw Error(et(156,e.tag))}function sQ(t,e){switch(PR(e),e.tag){case 1:return Ms(e.type)&&tT(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cm(),Zn(As),Zn(Ur),FR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return UR(e),null;case 13:if(Zn(li),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(et(340));wm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zn(li),null;case 4:return Cm(),null;case 10:return kR(e.type._context),null;case 22:case 23:return YR(),null;case 24:return null;default:return null}}var qx=!1,Rr=!1,oQ=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Gp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){xi(t,e,i)}else n.current=null}function pP(t,e,n){try{n()}catch(i){xi(t,e,i)}}var aO=!1;function aQ(t,e){if(QM=QS,t=w6(),AR(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ZM={focusedElem:t,selectionRange:n},QS=!1,wt=e;wt!==null;)if(e=wt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,wt=t;else for(;wt!==null;){e=wt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,y=e.stateNode,S=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:pa(e.type,v),_);y.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){xi(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,wt=t;break}wt=e.return}return g=aO,aO=!1,g}function dy(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&pP(e,n,s)}r=r.next}while(r!==i)}}function f2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function mP(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xz(t){var e=t.alternate;e!==null&&(t.alternate=null,xz(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tl],delete e[Yy],delete e[tP],delete e[$K],delete e[GK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sz(t){return t.tag===5||t.tag===3||t.tag===4}function lO(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gP(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eT));else if(i!==4&&(t=t.child,t!==null))for(gP(t,e,n),t=t.sibling;t!==null;)gP(t,e,n),t=t.sibling}function yP(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(yP(t,e,n),t=t.sibling;t!==null;)yP(t,e,n),t=t.sibling}var mr=null,ga=!1;function lc(t,e,n){for(n=n.child;n!==null;)Tz(t,e,n),n=n.sibling}function Tz(t,e,n){if(ul&&typeof ul.onCommitFiberUnmount=="function")try{ul.onCommitFiberUnmount(s2,n)}catch{}switch(n.tag){case 5:Rr||Gp(n,e);case 6:var i=mr,r=ga;mr=null,lc(t,e,n),mr=i,ga=r,mr!==null&&(ga?(t=mr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mr.removeChild(n.stateNode));break;case 18:mr!==null&&(ga?(t=mr,n=n.stateNode,t.nodeType===8?SC(t.parentNode,n):t.nodeType===1&&SC(t,n),Gy(t)):SC(mr,n.stateNode));break;case 4:i=mr,r=ga,mr=n.stateNode.containerInfo,ga=!0,lc(t,e,n),mr=i,ga=r;break;case 0:case 11:case 14:case 15:if(!Rr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pP(n,e,o),r=r.next}while(r!==i)}lc(t,e,n);break;case 1:if(!Rr&&(Gp(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){xi(n,e,a)}lc(t,e,n);break;case 21:lc(t,e,n);break;case 22:n.mode&1?(Rr=(i=Rr)||n.memoizedState!==null,lc(t,e,n),Rr=i):lc(t,e,n);break;default:lc(t,e,n)}}function uO(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oQ),e.forEach(function(i){var r=gQ.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ca(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mr=a.stateNode,ga=!1;break e;case 3:mr=a.stateNode.containerInfo,ga=!0;break e;case 4:mr=a.stateNode.containerInfo,ga=!0;break e}a=a.return}if(mr===null)throw Error(et(160));Tz(s,o,r),mr=null,ga=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){xi(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bz(e,t),e=e.sibling}function bz(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ca(e,t),ja(t),i&4){try{dy(3,t,t.return),f2(3,t)}catch(v){xi(t,t.return,v)}try{dy(5,t,t.return)}catch(v){xi(t,t.return,v)}}break;case 1:ca(e,t),ja(t),i&512&&n!==null&&Gp(n,n.return);break;case 5:if(ca(e,t),ja(t),i&512&&n!==null&&Gp(n,n.return),t.flags&32){var r=t.stateNode;try{zy(r,"")}catch(v){xi(t,t.return,v)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&W8(r,s),HM(a,o);var u=HM(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?K8(r,d):c==="dangerouslySetInnerHTML"?X8(r,d):c==="children"?zy(r,d):pR(r,c,d,u)}switch(a){case"input":OM(r,s);break;case"textarea":j8(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?im(r,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?im(r,!!s.multiple,s.defaultValue,!0):im(r,!!s.multiple,s.multiple?[]:"",!1))}r[Yy]=s}catch(v){xi(t,t.return,v)}}break;case 6:if(ca(e,t),ja(t),i&4){if(t.stateNode===null)throw Error(et(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(v){xi(t,t.return,v)}}break;case 3:if(ca(e,t),ja(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Gy(e.containerInfo)}catch(v){xi(t,t.return,v)}break;case 4:ca(e,t),ja(t);break;case 13:ca(e,t),ja(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(qR=Ci())),i&4&&uO(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Rr=(u=Rr)||c,ca(e,t),Rr=u):ca(e,t),ja(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(wt=t,c=t.child;c!==null;){for(d=wt=c;wt!==null;){switch(h=wt,m=h.child,h.tag){case 0:case 11:case 14:case 15:dy(4,h,h.return);break;case 1:Gp(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){xi(i,n,v)}}break;case 5:Gp(h,h.return);break;case 22:if(h.memoizedState!==null){dO(d);continue}}m!==null?(m.return=h,wt=m):dO(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Y8("display",o))}catch(v){xi(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){xi(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ca(e,t),ja(t),i&4&&uO(t);break;case 21:break;default:ca(e,t),ja(t)}}function ja(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sz(n)){var i=n;break e}n=n.return}throw Error(et(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(zy(r,""),i.flags&=-33);var s=lO(t);yP(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=lO(t);gP(t,a,o);break;default:throw Error(et(161))}}catch(l){xi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lQ(t,e,n){wt=t,wz(t)}function wz(t,e,n){for(var i=(t.mode&1)!==0;wt!==null;){var r=wt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||qx;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Rr;a=qx;var u=Rr;if(qx=o,(Rr=l)&&!u)for(wt=r;wt!==null;)o=wt,l=o.child,o.tag===22&&o.memoizedState!==null?hO(r):l!==null?(l.return=o,wt=l):hO(r);for(;s!==null;)wt=s,wz(s),s=s.sibling;wt=r,qx=a,Rr=u}cO(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,wt=s):cO(t)}}function cO(t){for(;wt!==null;){var e=wt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rr||f2(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Rr)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:pa(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&XN(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}XN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Gy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Rr||e.flags&512&&mP(e)}catch(h){xi(e,e.return,h)}}if(e===t){wt=null;break}if(n=e.sibling,n!==null){n.return=e.return,wt=n;break}wt=e.return}}function dO(t){for(;wt!==null;){var e=wt;if(e===t){wt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,wt=n;break}wt=e.return}}function hO(t){for(;wt!==null;){var e=wt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{f2(4,e)}catch(l){xi(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){xi(e,r,l)}}var s=e.return;try{mP(e)}catch(l){xi(e,s,l)}break;case 5:var o=e.return;try{mP(e)}catch(l){xi(e,o,l)}}}catch(l){xi(e,e.return,l)}if(e===t){wt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,wt=a;break}wt=e.return}}var uQ=Math.ceil,dT=Lu.ReactCurrentDispatcher,WR=Lu.ReactCurrentOwner,Ho=Lu.ReactCurrentBatchConfig,vn=0,or=null,Ui=null,_r=0,Qs=0,Wp=rd(0),Yi=0,tv=null,Vh=0,p2=0,jR=0,hy=null,_s=null,qR=0,Mm=1/0,Yl=null,hT=!1,vP=null,$c=null,Xx=!1,kc=null,fT=0,fy=0,_P=null,wS=-1,ES=0;function es(){return vn&6?Ci():wS!==-1?wS:wS=Ci()}function Gc(t){return t.mode&1?vn&2&&_r!==0?_r&-_r:jK.transition!==null?(ES===0&&(ES=l6()),ES):(t=Rn,t!==0||(t=window.event,t=t===void 0?16:m6(t.type)),t):1}function Ea(t,e,n,i){if(50<fy)throw fy=0,_P=null,Error(et(185));t_(t,n,i),(!(vn&2)||t!==or)&&(t===or&&(!(vn&2)&&(p2|=n),Yi===4&&Ic(t,_r)),Ps(t,i),n===1&&vn===0&&!(e.mode&1)&&(Mm=Ci()+500,c2&&sd()))}function Ps(t,e){var n=t.callbackNode;jY(t,e);var i=KS(t,t===or?_r:0);if(i===0)n!==null&&SN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&SN(n),e===1)t.tag===0?WK(fO.bind(null,t)):L6(fO.bind(null,t)),HK(function(){!(vn&6)&&sd()}),n=null;else{switch(u6(i)){case 1:n=_R;break;case 4:n=o6;break;case 16:n=YS;break;case 536870912:n=a6;break;default:n=YS}n=Dz(n,Ez.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ez(t,e){if(wS=-1,ES=0,vn&6)throw Error(et(327));var n=t.callbackNode;if(lm()&&t.callbackNode!==n)return null;var i=KS(t,t===or?_r:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=pT(t,i);else{e=i;var r=vn;vn|=2;var s=Az();(or!==t||_r!==e)&&(Yl=null,Mm=Ci()+500,wh(t,e));do try{hQ();break}catch(a){Cz(t,a)}while(1);DR(),dT.current=s,vn=r,Ui!==null?e=0:(or=null,_r=0,e=Yi)}if(e!==0){if(e===2&&(r=jM(t),r!==0&&(i=r,e=xP(t,r))),e===1)throw n=tv,wh(t,0),Ic(t,i),Ps(t,Ci()),n;if(e===6)Ic(t,i);else{if(r=t.current.alternate,!(i&30)&&!cQ(r)&&(e=pT(t,i),e===2&&(s=jM(t),s!==0&&(i=s,e=xP(t,s))),e===1))throw n=tv,wh(t,0),Ic(t,i),Ps(t,Ci()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(et(345));case 2:th(t,_s,Yl);break;case 3:if(Ic(t,i),(i&130023424)===i&&(e=qR+500-Ci(),10<e)){if(KS(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){es(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=eP(th.bind(null,t,_s,Yl),e);break}th(t,_s,Yl);break;case 4:if(Ic(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-wa(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ci()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*uQ(i/1960))-i,10<i){t.timeoutHandle=eP(th.bind(null,t,_s,Yl),i);break}th(t,_s,Yl);break;case 5:th(t,_s,Yl);break;default:throw Error(et(329))}}}return Ps(t,Ci()),t.callbackNode===n?Ez.bind(null,t):null}function xP(t,e){var n=hy;return t.current.memoizedState.isDehydrated&&(wh(t,e).flags|=256),t=pT(t,e),t!==2&&(e=_s,_s=n,e!==null&&SP(e)),t}function SP(t){_s===null?_s=t:_s.push.apply(_s,t)}function cQ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Pa(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ic(t,e){for(e&=~jR,e&=~p2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wa(e),i=1<<n;t[n]=-1,e&=~i}}function fO(t){if(vn&6)throw Error(et(327));lm();var e=KS(t,0);if(!(e&1))return Ps(t,Ci()),null;var n=pT(t,e);if(t.tag!==0&&n===2){var i=jM(t);i!==0&&(e=i,n=xP(t,i))}if(n===1)throw n=tv,wh(t,0),Ic(t,e),Ps(t,Ci()),n;if(n===6)throw Error(et(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,th(t,_s,Yl),Ps(t,Ci()),null}function XR(t,e){var n=vn;vn|=1;try{return t(e)}finally{vn=n,vn===0&&(Mm=Ci()+500,c2&&sd())}}function $h(t){kc!==null&&kc.tag===0&&!(vn&6)&&lm();var e=vn;vn|=1;var n=Ho.transition,i=Rn;try{if(Ho.transition=null,Rn=1,t)return t()}finally{Rn=i,Ho.transition=n,vn=e,!(vn&6)&&sd()}}function YR(){Qs=Wp.current,Zn(Wp)}function wh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zK(n)),Ui!==null)for(n=Ui.return;n!==null;){var i=n;switch(PR(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&tT();break;case 3:Cm(),Zn(As),Zn(Ur),FR();break;case 5:UR(i);break;case 4:Cm();break;case 13:Zn(li);break;case 19:Zn(li);break;case 10:kR(i.type._context);break;case 22:case 23:YR()}n=n.return}if(or=t,Ui=t=Wc(t.current,null),_r=Qs=e,Yi=0,tv=null,jR=p2=Vh=0,_s=hy=null,hh!==null){for(e=0;e<hh.length;e++)if(n=hh[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}hh=null}return t}function Cz(t,e){do{var n=Ui;try{if(DR(),SS.current=cT,uT){for(var i=di.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}uT=!1}if(Hh=0,nr=Xi=di=null,cy=!1,Zy=0,WR.current=null,n===null||n.return===null){Yi=1,tv=e,Ui=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=eO(o);if(m!==null){m.flags&=-257,tO(m,o,a,s,e),m.mode&1&&JN(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){JN(s,u,e),KR();break e}l=Error(et(426))}}else if(si&&a.mode&1){var _=eO(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),tO(_,o,a,s,e),IR(Am(l,a));break e}}s=l=Am(l,a),Yi!==4&&(Yi=2),hy===null?hy=[s]:hy.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=uz(s,l,e);qN(s,y);break e;case 1:a=l;var S=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($c===null||!$c.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=cz(s,a,e);qN(s,w);break e}}s=s.return}while(s!==null)}Pz(n)}catch(P){e=P,Ui===n&&n!==null&&(Ui=n=n.return);continue}break}while(1)}function Az(){var t=dT.current;return dT.current=cT,t===null?cT:t}function KR(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),or===null||!(Vh&268435455)&&!(p2&268435455)||Ic(or,_r)}function pT(t,e){var n=vn;vn|=2;var i=Az();(or!==t||_r!==e)&&(Yl=null,wh(t,e));do try{dQ();break}catch(r){Cz(t,r)}while(1);if(DR(),vn=n,dT.current=i,Ui!==null)throw Error(et(261));return or=null,_r=0,Yi}function dQ(){for(;Ui!==null;)Mz(Ui)}function hQ(){for(;Ui!==null&&!UY();)Mz(Ui)}function Mz(t){var e=Rz(t.alternate,t,Qs);t.memoizedProps=t.pendingProps,e===null?Pz(t):Ui=e,WR.current=null}function Pz(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sQ(n,e),n!==null){n.flags&=32767,Ui=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yi=6,Ui=null;return}}else if(n=rQ(n,e,Qs),n!==null){Ui=n;return}if(e=e.sibling,e!==null){Ui=e;return}Ui=e=t}while(e!==null);Yi===0&&(Yi=5)}function th(t,e,n){var i=Rn,r=Ho.transition;try{Ho.transition=null,Rn=1,fQ(t,e,n,i)}finally{Ho.transition=r,Rn=i}return null}function fQ(t,e,n,i){do lm();while(kc!==null);if(vn&6)throw Error(et(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(et(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qY(t,s),t===or&&(Ui=or=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xx||(Xx=!0,Dz(YS,function(){return lm(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ho.transition,Ho.transition=null;var o=Rn;Rn=1;var a=vn;vn|=4,WR.current=null,aQ(t,n),bz(n,t),kK(ZM),QS=!!QM,ZM=QM=null,t.current=n,lQ(n),FY(),vn=a,Rn=o,Ho.transition=s}else t.current=n;if(Xx&&(Xx=!1,kc=t,fT=r),s=t.pendingLanes,s===0&&($c=null),HY(n.stateNode),Ps(t,Ci()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(hT)throw hT=!1,t=vP,vP=null,t;return fT&1&&t.tag!==0&&lm(),s=t.pendingLanes,s&1?t===_P?fy++:(fy=0,_P=t):fy=0,sd(),null}function lm(){if(kc!==null){var t=u6(fT),e=Ho.transition,n=Rn;try{if(Ho.transition=null,Rn=16>t?16:t,kc===null)var i=!1;else{if(t=kc,kc=null,fT=0,vn&6)throw Error(et(331));var r=vn;for(vn|=4,wt=t.current;wt!==null;){var s=wt,o=s.child;if(wt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(wt=u;wt!==null;){var c=wt;switch(c.tag){case 0:case 11:case 15:dy(8,c,s)}var d=c.child;if(d!==null)d.return=c,wt=d;else for(;wt!==null;){c=wt;var h=c.sibling,m=c.return;if(xz(c),c===u){wt=null;break}if(h!==null){h.return=m,wt=h;break}wt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}wt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,wt=o;else e:for(;wt!==null;){if(s=wt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dy(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,wt=y;break e}wt=s.return}}var S=t.current;for(wt=S;wt!==null;){o=wt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,wt=x;else e:for(o=S;wt!==null;){if(a=wt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:f2(9,a)}}catch(P){xi(a,a.return,P)}if(a===o){wt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,wt=w;break e}wt=a.return}}if(vn=r,sd(),ul&&typeof ul.onPostCommitFiberRoot=="function")try{ul.onPostCommitFiberRoot(s2,t)}catch{}i=!0}return i}finally{Rn=n,Ho.transition=e}}return!1}function pO(t,e,n){e=Am(n,e),e=uz(t,e,1),t=Vc(t,e,1),e=es(),t!==null&&(t_(t,1,e),Ps(t,e))}function xi(t,e,n){if(t.tag===3)pO(t,t,n);else for(;e!==null;){if(e.tag===3){pO(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($c===null||!$c.has(i))){t=Am(n,t),t=cz(e,t,1),e=Vc(e,t,1),t=es(),e!==null&&(t_(e,1,t),Ps(e,t));break}}e=e.return}}function pQ(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=es(),t.pingedLanes|=t.suspendedLanes&n,or===t&&(_r&n)===n&&(Yi===4||Yi===3&&(_r&130023424)===_r&&500>Ci()-qR?wh(t,0):jR|=n),Ps(t,e)}function Iz(t,e){e===0&&(t.mode&1?(e=Fx,Fx<<=1,!(Fx&130023424)&&(Fx=4194304)):e=1);var n=es();t=_u(t,e),t!==null&&(t_(t,e,n),Ps(t,n))}function mQ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Iz(t,n)}function gQ(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(et(314))}i!==null&&i.delete(e),Iz(t,n)}var Rz;Rz=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||As.current)ws=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ws=!1,iQ(t,e,n);ws=!!(t.flags&131072)}else ws=!1,si&&e.flags&1048576&&N6(e,rT,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bS(t,e),t=e.pendingProps;var r=bm(e,Ur.current);am(e,n),r=zR(null,e,i,t,r,n);var s=HR();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ms(i)?(s=!0,nT(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,NR(e),r.updater=h2,e.stateNode=r,r._reactInternals=e,aP(e,i,t,n),e=cP(null,e,i,!0,s,n)):(e.tag=0,si&&s&&MR(e),qr(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(bS(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=vQ(i),t=pa(i,t),r){case 0:e=uP(null,e,i,t,n);break e;case 1:e=rO(null,e,i,t,n);break e;case 11:e=nO(null,e,i,t,n);break e;case 14:e=iO(null,e,i,pa(i.type,t),n);break e}throw Error(et(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pa(i,r),uP(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pa(i,r),rO(t,e,i,r,n);case 3:e:{if(pz(e),t===null)throw Error(et(387));i=e.pendingProps,s=e.memoizedState,r=s.element,H6(t,e),aT(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Am(Error(et(423)),e),e=sO(t,e,i,n,r);break e}else if(i!==r){r=Am(Error(et(424)),e),e=sO(t,e,i,n,r);break e}else for(no=Hc(e.stateNode.containerInfo.firstChild),io=e,si=!0,ya=null,n=B6(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wm(),i===r){e=xu(t,e,n);break e}qr(t,e,i,n)}e=e.child}return e;case 5:return V6(e),t===null&&rP(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,JM(i,r)?o=null:s!==null&&JM(i,s)&&(e.flags|=32),fz(t,e),qr(t,e,o,n),e.child;case 6:return t===null&&rP(e),null;case 13:return mz(t,e,n);case 4:return OR(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Em(e,null,i,n):qr(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pa(i,r),nO(t,e,i,r,n);case 7:return qr(t,e,e.pendingProps,n),e.child;case 8:return qr(t,e,e.pendingProps.children,n),e.child;case 12:return qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Gn(sT,i._currentValue),i._currentValue=o,s!==null)if(Pa(s.value,o)){if(s.children===r.children&&!As.current){e=xu(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=uu(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),sP(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sP(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qr(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,am(e,n),r=Wo(r),i=i(r),e.flags|=1,qr(t,e,i,n),e.child;case 14:return i=e.type,r=pa(i,e.pendingProps),r=pa(i.type,r),iO(t,e,i,r,n);case 15:return dz(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pa(i,r),bS(t,e),e.tag=1,Ms(i)?(t=!0,nT(e)):t=!1,am(e,n),lz(e,i,r),aP(e,i,r,n),cP(null,e,i,!0,t,n);case 19:return gz(t,e,n);case 22:return hz(t,e,n)}throw Error(et(156,e.tag))};function Dz(t,e){return s6(t,e)}function yQ(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uo(t,e,n,i){return new yQ(t,e,n,i)}function QR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vQ(t){if(typeof t=="function")return QR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gR)return 11;if(t===yR)return 14}return 2}function Wc(t,e){var n=t.alternate;return n===null?(n=Uo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function CS(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")QR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Np:return Eh(n.children,r,s,e);case mR:o=8,r|=8;break;case RM:return t=Uo(12,n,e,r|2),t.elementType=RM,t.lanes=s,t;case DM:return t=Uo(13,n,e,r),t.elementType=DM,t.lanes=s,t;case kM:return t=Uo(19,n,e,r),t.elementType=kM,t.lanes=s,t;case V8:return m2(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z8:o=10;break e;case H8:o=9;break e;case gR:o=11;break e;case yR:o=14;break e;case wc:o=16,i=null;break e}throw Error(et(130,t==null?t:typeof t,""))}return e=Uo(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Eh(t,e,n,i){return t=Uo(7,t,i,e),t.lanes=n,t}function m2(t,e,n,i){return t=Uo(22,t,i,e),t.elementType=V8,t.lanes=n,t.stateNode={isHidden:!1},t}function PC(t,e,n){return t=Uo(6,t,null,e),t.lanes=n,t}function IC(t,e,n){return e=Uo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _Q(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cC(0),this.expirationTimes=cC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cC(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ZR(t,e,n,i,r,s,o,a,l){return t=new _Q(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Uo(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},NR(s),t}function xQ(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lp,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function kz(t){if(!t)return Yc;t=t._reactInternals;e:{if(nf(t)!==t||t.tag!==1)throw Error(et(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ms(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(et(171))}if(t.tag===1){var n=t.type;if(Ms(n))return k6(t,n,e)}return e}function Lz(t,e,n,i,r,s,o,a,l){return t=ZR(n,i,!0,t,r,s,o,a,l),t.context=kz(null),n=t.current,i=es(),r=Gc(n),s=uu(i,r),s.callback=e??null,Vc(n,s,r),t.current.lanes=r,t_(t,r,i),Ps(t,i),t}function g2(t,e,n,i){var r=e.current,s=es(),o=Gc(r);return n=kz(n),e.context===null?e.context=n:e.pendingContext=n,e=uu(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Vc(r,e,o),t!==null&&(Ea(t,r,o,s),xS(t,r,o)),o}function mT(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mO(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function JR(t,e){mO(t,e),(t=t.alternate)&&mO(t,e)}function SQ(){return null}var Nz=typeof reportError=="function"?reportError:function(t){console.error(t)};function eD(t){this._internalRoot=t}y2.prototype.render=eD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(et(409));g2(t,e,null,null)};y2.prototype.unmount=eD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$h(function(){g2(null,t,null,null)}),e[vu]=null}};function y2(t){this._internalRoot=t}y2.prototype.unstable_scheduleHydration=function(t){if(t){var e=h6();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pc.length&&e!==0&&e<Pc[n].priority;n++);Pc.splice(n,0,t),n===0&&p6(t)}};function tD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function v2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gO(){}function TQ(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=mT(o);s.call(u)}}var o=Lz(e,i,t,0,null,!1,!1,"",gO);return t._reactRootContainer=o,t[vu]=o.current,qy(t.nodeType===8?t.parentNode:t),$h(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=mT(l);a.call(u)}}var l=ZR(t,0,!1,null,null,!1,!1,"",gO);return t._reactRootContainer=l,t[vu]=l.current,qy(t.nodeType===8?t.parentNode:t),$h(function(){g2(e,l,n,i)}),l}function _2(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=mT(o);a.call(l)}}g2(e,o,t,r)}else o=TQ(n,e,t,r,i);return mT(o)}c6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=W0(e.pendingLanes);n!==0&&(xR(e,n|1),Ps(e,Ci()),!(vn&6)&&(Mm=Ci()+500,sd()))}break;case 13:$h(function(){var i=_u(t,1);if(i!==null){var r=es();Ea(i,t,1,r)}}),JR(t,1)}};SR=function(t){if(t.tag===13){var e=_u(t,134217728);if(e!==null){var n=es();Ea(e,t,134217728,n)}JR(t,134217728)}};d6=function(t){if(t.tag===13){var e=Gc(t),n=_u(t,e);if(n!==null){var i=es();Ea(n,t,e,i)}JR(t,e)}};h6=function(){return Rn};f6=function(t,e){var n=Rn;try{return Rn=t,e()}finally{Rn=n}};$M=function(t,e,n){switch(e){case"input":if(OM(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=u2(i);if(!r)throw Error(et(90));G8(i),OM(i,r)}}}break;case"textarea":j8(t,n);break;case"select":e=n.value,e!=null&&im(t,!!n.multiple,e,!1)}};J8=XR;e6=$h;var bQ={usingClientEntryPoint:!1,Events:[i_,Bp,u2,Q8,Z8,XR]},c0={findFiberByHostInstance:dh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wQ={bundleType:c0.bundleType,version:c0.version,rendererPackageName:c0.rendererPackageName,rendererConfig:c0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=i6(t),t===null?null:t.stateNode},findFiberByHostInstance:c0.findFiberByHostInstance||SQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yx.isDisabled&&Yx.supportsFiber)try{s2=Yx.inject(wQ),ul=Yx}catch{}}fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bQ;fo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tD(e))throw Error(et(200));return xQ(t,e,null,n)};fo.createRoot=function(t,e){if(!tD(t))throw Error(et(299));var n=!1,i="",r=Nz;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ZR(t,1,!1,null,null,n,!1,i,r),t[vu]=e.current,qy(t.nodeType===8?t.parentNode:t),new eD(e)};fo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(et(188)):(t=Object.keys(t).join(","),Error(et(268,t)));return t=i6(e),t=t===null?null:t.stateNode,t};fo.flushSync=function(t){return $h(t)};fo.hydrate=function(t,e,n){if(!v2(e))throw Error(et(200));return _2(null,t,e,!0,n)};fo.hydrateRoot=function(t,e,n){if(!tD(t))throw Error(et(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Nz;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lz(e,null,t,1,n??null,r,!1,s,o),t[vu]=e.current,qy(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new y2(e)};fo.render=function(t,e,n){if(!v2(e))throw Error(et(200));return _2(null,t,e,!1,n)};fo.unmountComponentAtNode=function(t){if(!v2(t))throw Error(et(40));return t._reactRootContainer?($h(function(){_2(null,null,t,!1,function(){t._reactRootContainer=null,t[vu]=null})}),!0):!1};fo.unstable_batchedUpdates=XR;fo.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!v2(n))throw Error(et(200));if(t==null||t._reactInternals===void 0)throw Error(et(38));return _2(t,e,n,!1,i)};fo.version="18.3.1-next-f1338f8080-20240426";function Oz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oz)}catch(t){console.error(t)}}Oz(),O8.exports=fo;var x2=O8.exports;const jp=ka(x2);var Uz,yO=x2;Uz=PM.createRoot=yO.createRoot,PM.hydrateRoot=yO.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nv.apply(this,arguments)}var Lc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lc||(Lc={}));const vO="popstate";function EQ(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return TP("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:gT(r)}return AQ(e,n,null,t)}function zi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fz(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CQ(){return Math.random().toString(36).substr(2,8)}function _O(t,e){return{usr:t.state,key:t.key,idx:e}}function TP(t,e,n,i){return n===void 0&&(n=null),nv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ug(e):e,{state:n,key:e&&e.key||i||CQ()})}function gT(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ug(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function AQ(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Lc.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(nv({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Lc.Pop;let _=c(),y=_==null?null:_-u;u=_,l&&l({action:a,location:v.location,delta:y})}function h(_,y){a=Lc.Push;let S=TP(v.location,_,y);n&&n(S,_),u=c()+1;let x=_O(S,u),w=v.createHref(S);try{o.pushState(x,"",w)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(w)}s&&l&&l({action:a,location:v.location,delta:1})}function m(_,y){a=Lc.Replace;let S=TP(v.location,_,y);n&&n(S,_),u=c();let x=_O(S,u),w=v.createHref(S);o.replaceState(x,"",w),s&&l&&l({action:a,location:v.location,delta:0})}function g(_){let y=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof _=="string"?_:gT(_);return S=S.replace(/ $/,"%20"),zi(y,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,y)}let v={get action(){return a},get location(){return t(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(vO,d),l=_,()=>{r.removeEventListener(vO,d),l=null}},createHref(_){return e(r,_)},createURL:g,encodeLocation(_){let y=g(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(_){return o.go(_)}};return v}var xO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xO||(xO={}));function MQ(t,e,n){return n===void 0&&(n="/"),PQ(t,e,n,!1)}function PQ(t,e,n,i){let r=typeof e=="string"?ug(e):e,s=nD(r.pathname||"/",n);if(s==null)return null;let o=Bz(t);IQ(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=HQ(s);a=BQ(o[l],u,i)}return a}function Bz(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(zi(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=jc([i,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(zi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Bz(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:UQ(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of zz(s.path))r(s,o,l)}),e}function zz(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=zz(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function IQ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FQ(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const RQ=/^:[\w-]+$/,DQ=3,kQ=2,LQ=1,NQ=10,OQ=-2,SO=t=>t==="*";function UQ(t,e){let n=t.split("/"),i=n.length;return n.some(SO)&&(i+=OQ),e&&(i+=kQ),n.filter(r=>!SO(r)).reduce((r,s)=>r+(RQ.test(s)?DQ:s===""?LQ:NQ),i)}function FQ(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function BQ(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=TO({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&n&&!i[i.length-1].route.index&&(d=TO({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:jc([s,d.pathname]),pathnameBase:WQ(jc([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=jc([s,d.pathnameBase]))}return o}function TO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=zQ(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,c,d)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[d];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function zQ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fz(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function HQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fz(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nD(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function VQ(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ug(t):t;return{pathname:n?n.startsWith("/")?n:$Q(n,e):e,search:jQ(i),hash:qQ(r)}}function $Q(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function RC(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GQ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hz(t,e){let n=GQ(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Vz(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ug(t):(r=nv({},t),zi(!r.pathname||!r.pathname.includes("?"),RC("?","pathname","search",r)),zi(!r.pathname||!r.pathname.includes("#"),RC("#","pathname","hash",r)),zi(!r.search||!r.search.includes("#"),RC("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=VQ(r,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const jc=t=>t.join("/").replace(/\/\/+/g,"/"),WQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $z=["post","put","patch","delete"];new Set($z);const YQ=["get",...$z];new Set(YQ);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iv.apply(this,arguments)}const iD=U.createContext(null),KQ=U.createContext(null),rf=U.createContext(null),S2=U.createContext(null),sf=U.createContext({outlet:null,matches:[],isDataRoute:!1}),Gz=U.createContext(null);function QQ(t,e){let{relative:n}=e===void 0?{}:e;s_()||zi(!1);let{basename:i,navigator:r}=U.useContext(rf),{hash:s,pathname:o,search:a}=jz(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:jc([i,o])),r.createHref({pathname:l,search:a,hash:s})}function s_(){return U.useContext(S2)!=null}function T2(){return s_()||zi(!1),U.useContext(S2).location}function Wz(t){U.useContext(rf).static||U.useLayoutEffect(t)}function ZQ(){let{isDataRoute:t}=U.useContext(sf);return t?dZ():JQ()}function JQ(){s_()||zi(!1);let t=U.useContext(iD),{basename:e,future:n,navigator:i}=U.useContext(rf),{matches:r}=U.useContext(sf),{pathname:s}=T2(),o=JSON.stringify(Hz(r,n.v7_relativeSplatPath)),a=U.useRef(!1);return Wz(()=>{a.current=!0}),U.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=Vz(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:jc([e,d.pathname])),(c.replace?i.replace:i.push)(d,c.state,c)},[e,i,o,s,t])}function jz(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=U.useContext(rf),{matches:r}=U.useContext(sf),{pathname:s}=T2(),o=JSON.stringify(Hz(r,i.v7_relativeSplatPath));return U.useMemo(()=>Vz(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function eZ(t,e){return tZ(t,e)}function tZ(t,e,n,i){s_()||zi(!1);let{navigator:r}=U.useContext(rf),{matches:s}=U.useContext(sf),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=T2(),c;if(e){var d;let _=typeof e=="string"?ug(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||zi(!1),c=_}else c=u;let h=c.pathname||"/",m=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=MQ(t,{pathname:m}),v=oZ(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:jc([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:jc([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,i);return e&&v?U.createElement(S2.Provider,{value:{location:iv({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Lc.Pop}},v):v}function nZ(){let t=cZ(),e=XQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:r},n):null,s)}const iZ=U.createElement(nZ,null);class rZ extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(sf.Provider,{value:this.props.routeContext},U.createElement(Gz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sZ(t){let{routeContext:e,match:n,children:i}=t,r=U.useContext(iD);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(sf.Provider,{value:e},i)}function oZ(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||zi(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let m,g=!1,v=null,_=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||iZ,l&&(u<0&&h===0?(hZ("route-fallback",!1),g=!0,_=null):u===h&&(g=!0,_=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),S=()=>{let x;return m?x=v:g?x=_:d.route.Component?x=U.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,U.createElement(sZ,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?U.createElement(rZ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:S(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):S()},null)}var qz=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qz||{}),yT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yT||{});function aZ(t){let e=U.useContext(iD);return e||zi(!1),e}function lZ(t){let e=U.useContext(KQ);return e||zi(!1),e}function uZ(t){let e=U.useContext(sf);return e||zi(!1),e}function Xz(t){let e=uZ(),n=e.matches[e.matches.length-1];return n.route.id||zi(!1),n.route.id}function cZ(){var t;let e=U.useContext(Gz),n=lZ(yT.UseRouteError),i=Xz(yT.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function dZ(){let{router:t}=aZ(qz.UseNavigateStable),e=Xz(yT.UseNavigateStable),n=U.useRef(!1);return Wz(()=>{n.current=!0}),U.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,iv({fromRouteId:e},s)))},[t,e])}const bO={};function hZ(t,e,n){!e&&!bO[t]&&(bO[t]=!0)}function bc(t){zi(!1)}function fZ(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Lc.Pop,navigator:s,static:o=!1,future:a}=t;s_()&&zi(!1);let l=e.replace(/^\/*/,"/"),u=U.useMemo(()=>({basename:l,navigator:s,static:o,future:iv({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=ug(i));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:g="default"}=i,v=U.useMemo(()=>{let _=nD(c,l);return _==null?null:{location:{pathname:_,search:d,hash:h,state:m,key:g},navigationType:r}},[l,c,d,h,m,g,r]);return v==null?null:U.createElement(rf.Provider,{value:u},U.createElement(S2.Provider,{children:n,value:v}))}function pZ(t){let{children:e,location:n}=t;return eZ(bP(e),n)}new Promise(()=>{});function bP(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(i,r)=>{if(!U.isValidElement(i))return;let s=[...e,r];if(i.type===U.Fragment){n.push.apply(n,bP(i.props.children,s));return}i.type!==bc&&zi(!1),!i.props.index||!i.props.children||zi(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=bP(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wP(){return wP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wP.apply(this,arguments)}function mZ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function gZ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yZ(t,e){return t.button===0&&(!e||e==="_self")&&!gZ(t)}const vZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_Z="6";try{window.__reactRouterVersion=_Z}catch{}const xZ="startTransition",wO=WS[xZ];function SZ(t){let{basename:e,children:n,future:i,window:r}=t,s=U.useRef();s.current==null&&(s.current=EQ({window:r,v5Compat:!0}));let o=s.current,[a,l]=U.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},c=U.useCallback(d=>{u&&wO?wO(()=>l(d)):l(d)},[l,u]);return U.useLayoutEffect(()=>o.listen(c),[o,c]),U.createElement(fZ,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const TZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bd=U.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,h=mZ(e,vZ),{basename:m}=U.useContext(rf),g,v=!1;if(typeof u=="string"&&bZ.test(u)&&(g=u,TZ))try{let x=new URL(window.location.href),w=u.startsWith("//")?new URL(x.protocol+u):new URL(u),P=nD(w.pathname,m);w.origin===x.origin&&P!=null?u=P+w.search+w.hash:v=!0}catch{}let _=QQ(u,{relative:r}),y=wZ(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:r,viewTransition:d});function S(x){i&&i(x),x.defaultPrevented||y(x)}return U.createElement("a",wP({},h,{href:g||_,onClick:v||s?i:S,ref:n,target:l}))});var EO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(EO||(EO={}));var CO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(CO||(CO={}));function wZ(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ZQ(),u=T2(),c=jz(t,{relative:o});return U.useCallback(d=>{if(yZ(d,n)){d.preventDefault();let h=i!==void 0?i:gT(u)===gT(c);l(t,{replace:h,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,i,r,n,t,s,o,a])}var Yz={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Yz);var EZ=Yz.exports;const fn=ka(EZ),CZ=["xxl","xl","lg","md","sm","xs"],AZ="xs",rD=U.createContext({prefixes:{},breakpoints:CZ,minBreakpoint:AZ});function Nn(t,e){const{prefixes:n}=U.useContext(rD);return t||n[e]||e}function MZ(){const{breakpoints:t}=U.useContext(rD);return t}function PZ(){const{minBreakpoint:t}=U.useContext(rD);return t}const Kz=U.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:i,...r},s)=>{const o=Nn(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return $(n,{ref:s,...r,className:fn(i,e?`${o}${a}`:o)})});Kz.displayName="Container";const IZ=Kz;var AO={exports:{}},EP={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(i){function r(o,a,l,u,c,d){var h=u||"<<anonymous>>",m=d||l;if(a[l]==null)return o?new Error("Required "+c+" `"+m+"` was not specified "+("in `"+h+"`.")):null;for(var g=arguments.length,v=Array(g>6?g-6:0),_=6;_<g;_++)v[_-6]=arguments[_];return i.apply(void 0,[a,l,h,c,m].concat(v))}var s=r.bind(null,!1);return s.isRequired=r.bind(null,!0),s}t.exports=e.default})(EP,EP.exports);var RZ=EP.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=RZ,i=r(n);function r(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function u(){for(var c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=null;return a.forEach(function(g){if(m==null){var v=g.apply(void 0,d);v!=null&&(m=v)}}),m}return(0,i.default)(u)}t.exports=e.default})(AO,AO.exports);function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ve.apply(null,arguments)}const DZ=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ve}},Symbol.toStringTag,{value:"Module"}));function kn(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}function MO(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function kZ(t){var e=LZ(t,"string");return typeof e=="symbol"?e:String(e)}function LZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NZ(t,e,n){var i=U.useRef(t!==void 0),r=U.useState(e),s=r[0],o=r[1],a=t!==void 0,l=i.current;return i.current=a,!a&&l&&s!==e&&o(e),[a?t:s,U.useCallback(function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];n&&n.apply(void 0,[u].concat(d)),o(u)},[n])]}function Qz(t,e){return Object.keys(e).reduce(function(n,i){var r,s=n,o=s[MO(i)],a=s[i],l=kn(s,[MO(i),i].map(kZ)),u=e[i],c=NZ(a,o,t[u]),d=c[0],h=c[1];return ve({},l,(r={},r[i]=d,r[u]=h,r))},t)}function CP(t,e){return CP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},CP(t,e)}function OZ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,CP(t,e)}var UZ=Function.prototype.bind.call(Function.prototype.call,[].slice);function nh(t,e){return UZ(t.querySelectorAll(e))}function FZ(){const[,t]=U.useReducer(e=>!e,!1);return t}const PO=t=>!t||typeof t=="function"?t:e=>{t.current=e};function BZ(t,e){const n=PO(t),i=PO(e);return r=>{n&&n(r),i&&i(r)}}function o_(t,e){return U.useMemo(()=>BZ(t,e),[t,e])}const Zz=U.createContext(null);Zz.displayName="NavContext";const Jz=Zz,zZ=U.createContext(null),sD=(t,e=null)=>t!=null?String(t):e||null,vT=zZ,HZ=U.createContext(null),e9=HZ,VZ="data-rr-ui-",$Z="rrUi";function b2(t){return`${VZ}${t}`}function GZ(t){return`${$Z}${t}`}function WZ(t){const e=U.useRef(t);return U.useEffect(()=>{e.current=t},[t]),e}function No(t){const e=WZ(t);return U.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const jZ=["as","disabled"];function qZ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function XZ(t){return!t||t.trim()==="#"}function oD({tagName:t,disabled:e,href:n,target:i,rel:r,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||i!=null||r!=null?t="a":t="button");const u={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},u];const c=h=>{if((e||t==="a"&&XZ(n))&&h.preventDefault(),e){h.stopPropagation();return}o==null||o(h)},d=h=>{h.key===" "&&(h.preventDefault(),c(h))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:c,onKeyDown:d},u]}const t9=U.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=qZ(t,jZ);const[s,{tagName:o}]=oD(Object.assign({tagName:n,disabled:i},r));return $(o,Object.assign({},r,s,{ref:e}))});t9.displayName="Button";const YZ=["as","active","eventKey"];function KZ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function n9({key:t,onClick:e,active:n,id:i,role:r,disabled:s}){const o=U.useContext(vT),a=U.useContext(Jz),l=U.useContext(e9);let u=n;const c={role:r};if(a){!r&&a.role==="tablist"&&(c.role="tab");const d=a.getControllerId(t??null),h=a.getControlledId(t??null);c[b2("event-key")]=t,c.id=d||i,u=n==null&&t!=null?a.activeKey===t:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=h)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),s&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=No(d=>{s||(e==null||e(d),t!=null&&o&&!d.isPropagationStopped()&&o(t,d))}),[c,{isActive:u}]}const i9=U.forwardRef((t,e)=>{let{as:n=t9,active:i,eventKey:r}=t,s=KZ(t,YZ);const[o,a]=n9(Object.assign({key:sD(r,s.href),active:i},s));return o[b2("active")]=a.isActive,$(n,Object.assign({},s,o,{ref:e}))});i9.displayName="NavItem";const QZ=i9,ZZ=["as","onSelect","activeKey","role","onKeyDown"];function JZ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}const IO=()=>{},RO=b2("event-key"),r9=U.forwardRef((t,e)=>{let{as:n="div",onSelect:i,activeKey:r,role:s,onKeyDown:o}=t,a=JZ(t,ZZ);const l=FZ(),u=U.useRef(!1),c=U.useContext(vT),d=U.useContext(e9);let h,m;d&&(s=s||"tablist",r=d.activeKey,h=d.getControlledId,m=d.getControllerId);const g=U.useRef(null),v=x=>{const w=g.current;if(!w)return null;const P=nh(w,`[${RO}]:not([aria-disabled=true])`),A=w.querySelector("[aria-selected=true]");if(!A||A!==document.activeElement)return null;const D=P.indexOf(A);if(D===-1)return null;let O=D+x;return O>=P.length&&(O=0),O<0&&(O=P.length-1),P[O]},_=(x,w)=>{x!=null&&(i==null||i(x,w),c==null||c(x,w))},y=x=>{if(o==null||o(x),!d)return;let w;switch(x.key){case"ArrowLeft":case"ArrowUp":w=v(-1);break;case"ArrowRight":case"ArrowDown":w=v(1);break;default:return}w&&(x.preventDefault(),_(w.dataset[GZ("EventKey")]||null,x),u.current=!0,l())};U.useEffect(()=>{if(g.current&&u.current){const x=g.current.querySelector(`[${RO}][aria-selected=true]`);x==null||x.focus()}u.current=!1});const S=o_(e,g);return $(vT.Provider,{value:_,children:$(Jz.Provider,{value:{role:s,activeKey:sD(r),getControlledId:h||IO,getControllerId:m||IO},children:$(n,Object.assign({},a,{onKeyDown:y,ref:S,role:s}))})})});r9.displayName="Nav";const eJ=Object.assign(r9,{Item:QZ}),s9=U.createContext(null);s9.displayName="NavbarContext";const cg=s9,o9=U.createContext(null);o9.displayName="CardHeaderContext";const tJ=o9,a9=U.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Nn(e,"nav-item"),$(n,{ref:r,className:fn(t,e),...i})));a9.displayName="NavItem";const nJ=a9;function iJ(){const t=U.useRef(!0),e=U.useRef(()=>t.current);return U.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function rJ(t){const e=U.useRef(null);return U.useEffect(()=>{e.current=t}),e.current}const sJ=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",oJ=typeof document<"u",AP=oJ||sJ?U.useLayoutEffect:U.useEffect,aJ=["onKeyDown"];function lJ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function uJ(t){return!t||t.trim()==="#"}const l9=U.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=lJ(t,aJ);const[r]=oD(Object.assign({tagName:"a"},i)),s=No(o=>{r.onKeyDown(o),n==null||n(o)});return uJ(i.href)||i.role==="button"?$("a",Object.assign({ref:e},i,r,{onKeyDown:s})):$("a",Object.assign({ref:e},i,{onKeyDown:n}))});l9.displayName="Anchor";const cJ=l9,u9=U.forwardRef(({bsPrefix:t,className:e,as:n=cJ,active:i,eventKey:r,disabled:s=!1,...o},a)=>{t=Nn(t,"nav-link");const[l,u]=n9({key:sD(r,o.href),active:i,disabled:s,...o});return $(n,{...o,...l,ref:a,disabled:s,className:fn(e,t,s&&"disabled",u.isActive&&"active")})});u9.displayName="NavLink";const dJ=u9,c9=U.forwardRef((t,e)=>{const{as:n="div",bsPrefix:i,variant:r,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:u,activeKey:c,...d}=Qz(t,{activeKey:"onSelect"}),h=Nn(i,"nav");let m,g,v=!1;const _=U.useContext(cg),y=U.useContext(tJ);return _?(m=_.bsPrefix,v=a??!0):y&&({cardHeaderBsPrefix:g}=y),$(eJ,{as:n,ref:e,activeKey:c,className:fn(u,{[h]:!v,[`${m}-nav`]:v,[`${m}-nav-scroll`]:v&&l,[`${g}-${r}`]:!!g,[`${h}-${r}`]:!!r,[`${h}-fill`]:s,[`${h}-justified`]:o}),...d})});c9.displayName="Nav";const uc=Object.assign(c9,{Item:nJ,Link:dJ}),d9=U.forwardRef(({bsPrefix:t,className:e,as:n,...i},r)=>{t=Nn(t,"navbar-brand");const s=n||(i.href?"a":"span");return $(s,{...i,ref:r,className:fn(e,t)})});d9.displayName="NavbarBrand";const hJ=d9;function aD(t){return t&&t.ownerDocument||document}function fJ(t){var e=aD(t);return e&&e.defaultView||window}function pJ(t,e){return fJ(t).getComputedStyle(t,e)}var mJ=/([A-Z])/g;function gJ(t){return t.replace(mJ,"-$1").toLowerCase()}var yJ=/^ms-/;function Kx(t){return gJ(t).replace(yJ,"-ms-")}var vJ=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function _J(t){return!!(t&&vJ.test(t))}function cu(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Kx(e))||pJ(t).getPropertyValue(Kx(e));Object.keys(e).forEach(function(r){var s=e[r];!s&&s!==0?t.style.removeProperty(Kx(r)):_J(r)?i+=r+"("+s+") ":n+=Kx(r)+": "+s+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var h9={exports:{}},xJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SJ=xJ,TJ=SJ;function f9(){}function p9(){}p9.resetWarningCache=f9;var bJ=function(){function t(i,r,s,o,a,l){if(l!==TJ){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:p9,resetWarningCache:f9};return n.PropTypes=n,n};h9.exports=bJ();var wJ=h9.exports;const du=ka(wJ),DO={disabled:!1},m9=Zr.createContext(null);var EJ=function(e){return e.scrollTop},q0="unmounted",Cc="exited",va="entering",Jl="entered",rv="exiting",Nu=function(t){OZ(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var o=r,a=o&&!o.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?a?(l=Cc,s.appearStatus=va):l=Jl:i.unmountOnExit||i.mountOnEnter?l=q0:l=Cc,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===q0?{status:Cc}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==va&&o!==Jl&&(s=va):(o===va||o===Jl)&&(s=rv)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===va){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:jp.findDOMNode(this);o&&EJ(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Cc&&this.setState({status:q0})},n.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,l=this.props.nodeRef?[a]:[jp.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!r&&!o||DO.disabled){this.safeSetState({status:Jl},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:va},function(){s.props.onEntering(u,c),s.onTransitionEnd(h,function(){s.safeSetState({status:Jl},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:jp.findDOMNode(this);if(!s||DO.disabled){this.safeSetState({status:Cc},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:rv},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Cc},function(){r.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:jp.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===q0)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=kn(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Zr.createElement(m9.Provider,{value:null},typeof o=="function"?o(r,a):Zr.cloneElement(Zr.Children.only(o),a))},e}(Zr.Component);Nu.contextType=m9;Nu.propTypes={};function Xf(){}Nu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xf,onEntering:Xf,onEntered:Xf,onExit:Xf,onExiting:Xf,onExited:Xf};Nu.UNMOUNTED=q0;Nu.EXITED=Cc;Nu.ENTERING=va;Nu.ENTERED=Jl;Nu.EXITING=rv;const CJ=Nu,w2=!!(typeof window<"u"&&window.document&&window.document.createElement);var MP=!1,PP=!1;try{var DC={get passive(){return MP=!0},get once(){return PP=MP=!0}};w2&&(window.addEventListener("test",DC,DC),window.removeEventListener("test",DC,!0))}catch{}function AJ(t,e,n,i){if(i&&typeof i!="boolean"&&!PP){var r=i.once,s=i.capture,o=n;!PP&&r&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,MP?i:s)}t.addEventListener(e,n,i)}function MJ(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function _T(t,e,n,i){return AJ(t,e,n,i),function(){MJ(t,e,n,i)}}function PJ(t,e,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function IJ(t){var e=cu(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function RJ(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||PJ(t,"transitionend",!0)},e+n),s=_T(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function DJ(t,e,n,i){n==null&&(n=IJ(t)||0);var r=RJ(t,n,i),s=_T(t,"transitionend",e);return function(){r(),s()}}function kO(t,e){const n=cu(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function lD(t,e){const n=kO(t,"transitionDuration"),i=kO(t,"transitionDelay"),r=DJ(t,s=>{s.target===t&&(r(),e(s))},n+i)}function d0(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function g9(t){t.offsetHeight}function kJ(t){return t&&"setState"in t?jp.findDOMNode(t):t??null}const LJ=Zr.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:s,addEndListener:o,children:a,childRef:l,...u},c)=>{const d=U.useRef(null),h=o_(d,l),m=A=>{h(kJ(A))},g=A=>D=>{A&&d.current&&A(d.current,D)},v=U.useCallback(g(t),[t]),_=U.useCallback(g(e),[e]),y=U.useCallback(g(n),[n]),S=U.useCallback(g(i),[i]),x=U.useCallback(g(r),[r]),w=U.useCallback(g(s),[s]),P=U.useCallback(g(o),[o]);return $(CJ,{ref:c,...u,onEnter:v,onEntered:y,onEntering:_,onExit:S,onExited:w,onExiting:x,addEndListener:P,nodeRef:d,children:typeof a=="function"?(A,D)=>a(A,{...D,ref:m}):Zr.cloneElement(a,{ref:m})})}),uD=LJ,NJ={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function OJ(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,i=e[n],r=NJ[t];return i+parseInt(cu(e,r[0]),10)+parseInt(cu(e,r[1]),10)}const UJ={[Cc]:"collapse",[rv]:"collapsing",[va]:"collapsing",[Jl]:"collapse show"},FJ=Zr.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,className:s,children:o,dimension:a="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:d=!1,appear:h=!1,getDimensionValue:m=OJ,...g},v)=>{const _=typeof a=="function"?a():a,y=U.useMemo(()=>d0(A=>{A.style[_]="0"},t),[_,t]),S=U.useMemo(()=>d0(A=>{const D=`scroll${_[0].toUpperCase()}${_.slice(1)}`;A.style[_]=`${A[D]}px`},e),[_,e]),x=U.useMemo(()=>d0(A=>{A.style[_]=null},n),[_,n]),w=U.useMemo(()=>d0(A=>{A.style[_]=`${m(_,A)}px`,g9(A)},i),[i,m,_]),P=U.useMemo(()=>d0(A=>{A.style[_]=null},r),[_,r]);return $(uD,{ref:v,addEndListener:lD,...g,"aria-expanded":g.role?l:null,onEnter:y,onEntering:S,onEntered:x,onExit:w,onExiting:P,childRef:o.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:d,appear:h,children:(A,D)=>Zr.cloneElement(o,{...D,className:fn(s,o.props.className,UJ[A],_==="width"&&"collapse-horizontal")})})}),BJ=FJ,y9=U.forwardRef(({children:t,bsPrefix:e,...n},i)=>{e=Nn(e,"navbar-collapse");const r=U.useContext(cg);return $(BJ,{in:!!(r&&r.expanded),...n,children:$("div",{ref:i,className:e,children:t})})});y9.displayName="NavbarCollapse";const zJ=y9,v9=U.forwardRef(({bsPrefix:t,className:e,children:n,label:i="Toggle navigation",as:r="button",onClick:s,...o},a)=>{t=Nn(t,"navbar-toggler");const{onToggle:l,expanded:u}=U.useContext(cg)||{},c=No(d=>{s&&s(d),l&&l()});return r==="button"&&(o.type="button"),$(r,{...o,ref:a,onClick:c,"aria-label":i,className:fn(e,t,!u&&"collapsed"),children:n||$("span",{className:`${t}-icon`})})});v9.displayName="NavbarToggle";const HJ=v9,IP=new WeakMap,LO=(t,e)=>{if(!t||!e)return;const n=IP.get(e)||new Map;IP.set(e,n);let i=n.get(t);return i||(i=e.matchMedia(t),i.refCount=0,n.set(i.media,i)),i};function VJ(t,e=typeof window>"u"?void 0:window){const n=LO(t,e),[i,r]=U.useState(()=>n?n.matches:!1);return AP(()=>{let s=LO(t,e);if(!s)return r(!1);let o=IP.get(e);const a=()=>{r(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(o==null||o.delete(s.media)),s=void 0}},[t]),i}function $J(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function i(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function r(a){const l=i(a);let u=t[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function s(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,u){let c;typeof a=="object"?(c=a,u=l,l=!0):(l=l||!0,c={[a]:l});let d=U.useMemo(()=>Object.entries(c).reduce((h,[m,g])=>((g==="up"||g===!0)&&(h=n(h,s(m))),(g==="down"||g===!0)&&(h=n(h,r(m))),h),""),[JSON.stringify(c)]);return VJ(d,u)}return o}const GJ=$J({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function kC(t){t===void 0&&(t=aD());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function NO(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function WJ(t){const e=U.useRef(t);return e.current=t,e}function jJ(t){const e=WJ(t);U.useEffect(()=>()=>e.current(),[])}function qJ(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const OO=b2("modal-open");class XJ{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return qJ(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(cu(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(OO,""),cu(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(OO),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const cD=XJ,_9=U.createContext(w2?window:void 0);_9.Provider;function dD(){return U.useContext(_9)}const LC=(t,e)=>w2?t==null?(e||aD()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function YJ(t,e){const n=dD(),[i,r]=U.useState(()=>LC(t,n==null?void 0:n.document));if(!i){const s=LC(t);s&&r(s)}return U.useEffect(()=>{e&&i&&e(i)},[e,i]),U.useEffect(()=>{const s=LC(t);s!==i&&r(s)},[t,i]),i}function KJ({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const s=U.useRef(null),o=U.useRef(e),a=No(n);U.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=o_(s,t.ref),u=U.cloneElement(t,{ref:l});return e?u:r||!o.current&&i?null:u}function QJ(t){return t.code==="Escape"||t.keyCode===27}function ZJ(){const t=U.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const JJ=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function eee(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function tee(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:s,onExited:o,addEndListener:a,children:l}=t,u=eee(t,JJ);const{major:c}=ZJ(),d=c>=19?l.props.ref:l.ref,h=U.useRef(null),m=o_(h,typeof l=="function"?null:d),g=A=>D=>{A&&h.current&&A(h.current,D)},v=U.useCallback(g(e),[e]),_=U.useCallback(g(n),[n]),y=U.useCallback(g(i),[i]),S=U.useCallback(g(r),[r]),x=U.useCallback(g(s),[s]),w=U.useCallback(g(o),[o]),P=U.useCallback(g(a),[a]);return Object.assign({},u,{nodeRef:h},e&&{onEnter:v},n&&{onEntering:_},i&&{onEntered:y},r&&{onExit:S},s&&{onExiting:x},o&&{onExited:w},a&&{addEndListener:P},{children:typeof l=="function"?(A,D)=>l(A,Object.assign({},D,{ref:m})):U.cloneElement(l,{ref:m})})}const nee=["component"];function iee(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}const ree=U.forwardRef((t,e)=>{let{component:n}=t,i=iee(t,nee);const r=tee(i);return $(n,Object.assign({ref:e},r))}),see=ree;function oee({in:t,onTransition:e}){const n=U.useRef(null),i=U.useRef(!0),r=No(e);return AP(()=>{if(!n.current)return;let s=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>s}),()=>{s=!0}},[t,r]),AP(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function aee({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[s,o]=U.useState(!e);e&&s&&o(!1);const a=oee({in:!!e,onTransition:u=>{const c=()=>{u.isStale()||(u.in?i==null||i(u.element,u.initial):(o(!0),n==null||n(u.element)))};Promise.resolve(r(u)).then(c,d=>{throw u.in||o(!0),d})}}),l=o_(a,t.ref);return s&&!e?null:U.cloneElement(t,{ref:l})}function UO(t,e,n){return t?$(see,Object.assign({},n,{component:t})):e?$(aee,Object.assign({},n,{transition:e})):$(KJ,Object.assign({},n))}const lee=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function uee(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}let NC;function cee(t){return NC||(NC=new cD({ownerDocument:t==null?void 0:t.document})),NC}function dee(t){const e=dD(),n=t||cee(e),i=U.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:U.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:U.useCallback(r=>{i.current.backdrop=r},[])})}const x9=U.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:d,runTransition:h,backdropTransition:m,runBackdropTransition:g,autoFocus:v=!0,enforceFocus:_=!0,restoreFocus:y=!0,restoreFocusOptions:S,renderDialog:x,renderBackdrop:w=Re=>$("div",Object.assign({},Re)),manager:P,container:A,onShow:D,onHide:O=()=>{},onExit:H,onExited:E,onExiting:k,onEnter:W,onEntering:G,onEntered:Y}=t,ie=uee(t,lee);const Q=dD(),oe=YJ(A),z=dee(P),ee=iJ(),te=rJ(n),[ce,Te]=U.useState(!n),Ue=U.useRef(null);U.useImperativeHandle(e,()=>z,[z]),w2&&!te&&n&&(Ue.current=kC(Q==null?void 0:Q.document)),n&&ce&&Te(!1);const he=No(()=>{if(z.add(),Ge.current=_T(document,"keydown",ot),Ae.current=_T(document,"focus",()=>setTimeout(Fe),!0),D&&D(),v){var Re,Be;const We=kC((Re=(Be=z.dialog)==null?void 0:Be.ownerDocument)!=null?Re:Q==null?void 0:Q.document);z.dialog&&We&&!NO(z.dialog,We)&&(Ue.current=We,z.dialog.focus())}}),xe=No(()=>{if(z.remove(),Ge.current==null||Ge.current(),Ae.current==null||Ae.current(),y){var Re;(Re=Ue.current)==null||Re.focus==null||Re.focus(S),Ue.current=null}});U.useEffect(()=>{!n||!oe||he()},[n,oe,he]),U.useEffect(()=>{ce&&xe()},[ce,xe]),jJ(()=>{xe()});const Fe=No(()=>{if(!_||!ee()||!z.isTopModal())return;const Re=kC(Q==null?void 0:Q.document);z.dialog&&Re&&!NO(z.dialog,Re)&&z.dialog.focus()}),He=No(Re=>{Re.target===Re.currentTarget&&(u==null||u(Re),a===!0&&O())}),ot=No(Re=>{l&&QJ(Re)&&z.isTopModal()&&(c==null||c(Re),Re.defaultPrevented||O())}),Ae=U.useRef(),Ge=U.useRef(),Le=(...Re)=>{Te(!0),E==null||E(...Re)};if(!oe)return null;const le=Object.assign({role:i,ref:z.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},ie,{style:s,className:r,tabIndex:-1});let j=x?x(le):$("div",Object.assign({},le,{children:U.cloneElement(o,{role:"document"})}));j=UO(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:H,onExiting:k,onExited:Le,onEnter:W,onEntering:G,onEntered:Y,children:j});let Me=null;return a&&(Me=w({ref:z.setBackdropRef,onClick:He}),Me=UO(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Me})),$(Ma,{children:jp.createPortal(Nt(Ma,{children:[Me,j]}),oe)})});x9.displayName="Modal";const hee=Object.assign(x9,{Manager:cD}),fee={[va]:"show",[Jl]:"show"},S9=U.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},a=U.useCallback((l,u)=>{g9(l),i==null||i(l,u)},[i]);return $(uD,{ref:s,addEndListener:lD,...o,onEnter:a,childRef:e.ref,children:(l,u)=>U.cloneElement(e,{...u,className:fn("fade",t,e.props.className,fee[l],n[l])})})});S9.displayName="Fade";const pee=S9,T9=U.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Nn(e,"offcanvas-body"),$(n,{ref:r,className:fn(t,e),...i})));T9.displayName="OffcanvasBody";const mee=T9,gee={[va]:"show",[Jl]:"show"},b9=U.forwardRef(({bsPrefix:t,className:e,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=Nn(t,"offcanvas"),$(uD,{ref:l,addEndListener:lD,in:i,mountOnEnter:r,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(u,c)=>U.cloneElement(n,{...c,className:fn(e,n.props.className,(u===va||u===rv)&&`${t}-toggling`,gee[u])})})));b9.displayName="OffcanvasToggling";const yee=b9,vee=U.createContext({onHide(){}}),w9=vee,_ee={"aria-label":du.string,onClick:du.func,variant:du.oneOf(["white"])},hD=U.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>$("button",{ref:r,type:"button",className:fn("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));hD.displayName="CloseButton";hD.propTypes=_ee;const xee=hD,See=U.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...s},o)=>{const a=U.useContext(w9),l=No(()=>{a==null||a.onHide(),i==null||i()});return Nt("div",{ref:o,...s,children:[r,n&&$(xee,{"aria-label":t,variant:e,onClick:l})]})}),Tee=See,E9=U.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},s)=>(t=Nn(t,"offcanvas-header"),$(Tee,{ref:s,...r,className:fn(e,t),closeLabel:n,closeButton:i})));E9.displayName="OffcanvasHeader";const bee=E9,wee=t=>U.forwardRef((e,n)=>$("div",{...e,ref:n,className:fn(e.className,t)})),Eee=wee("h5"),C9=U.forwardRef(({className:t,bsPrefix:e,as:n=Eee,...i},r)=>(e=Nn(e,"offcanvas-title"),$(n,{ref:r,className:fn(t,e),...i})));C9.displayName="OffcanvasTitle";const Cee=C9;function Aee(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function Mee(t,e){t.classList?t.classList.add(e):Aee(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function FO(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Pee(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=FO(t.className,e):t.setAttribute("class",FO(t.className&&t.className.baseVal||"",e))}const Yf={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class A9 extends cD{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,cu(n,{[e]:`${parseFloat(cu(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],cu(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(Mee(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";nh(n,Yf.FIXED_CONTENT).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth)),nh(n,Yf.STICKY_CONTENT).forEach(s=>this.adjustAndStore(r,s,-e.scrollBarWidth)),nh(n,Yf.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();Pee(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";nh(n,Yf.FIXED_CONTENT).forEach(s=>this.restore(i,s)),nh(n,Yf.STICKY_CONTENT).forEach(s=>this.restore(r,s)),nh(n,Yf.NAVBAR_TOGGLER).forEach(s=>this.restore(r,s))}}let OC;function Iee(t){return OC||(OC=new A9(t)),OC}const Ree=A9;function Dee(t){return $(yee,{...t})}function kee(t){return $(pee,{...t})}const M9=U.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":i,placement:r="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:d,onHide:h,container:m,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:_=!0,restoreFocusOptions:y,onEntered:S,onExit:x,onExiting:w,onEnter:P,onEntering:A,onExited:D,backdropClassName:O,manager:H,renderStaticNode:E=!1,...k},W)=>{const G=U.useRef();t=Nn(t,"offcanvas");const{onToggle:Y}=U.useContext(cg)||{},[ie,Q]=U.useState(!1),oe=GJ(s||"xs","up");U.useEffect(()=>{Q(s?o&&!oe:o)},[o,s,oe]);const z=No(()=>{Y==null||Y(),h==null||h()}),ee=U.useMemo(()=>({onHide:z}),[z]);function te(){return H||(u?(G.current||(G.current=new Ree({handleContainerOverflow:!1})),G.current):Iee())}const ce=(xe,...Fe)=>{xe&&(xe.style.visibility="visible"),P==null||P(xe,...Fe)},Te=(xe,...Fe)=>{xe&&(xe.style.visibility=""),D==null||D(...Fe)},Ue=U.useCallback(xe=>$("div",{...xe,className:fn(`${t}-backdrop`,O)}),[O,t]),he=xe=>$("div",{...xe,...k,className:fn(e,s?`${t}-${s}`:t,`${t}-${r}`),"aria-labelledby":i,children:n});return Nt(Ma,{children:[!ie&&(s||E)&&he({}),$(w9.Provider,{value:ee,children:$(hee,{show:ie,ref:W,backdrop:a,container:m,keyboard:l,autoFocus:g,enforceFocus:v&&!u,restoreFocus:_,restoreFocusOptions:y,onEscapeKeyDown:c,onShow:d,onHide:z,onEnter:ce,onEntering:A,onEntered:S,onExit:x,onExiting:w,onExited:Te,manager:te(),transition:Dee,backdropTransition:kee,renderBackdrop:Ue,renderDialog:he})})]})});M9.displayName="Offcanvas";const Lee=Object.assign(M9,{Body:mee,Header:bee,Title:Cee}),P9=U.forwardRef((t,e)=>{const n=U.useContext(cg);return $(Lee,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});P9.displayName="NavbarOffcanvas";const Nee=P9,I9=U.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},r)=>(e=Nn(e,"navbar-text"),$(n,{ref:r,className:fn(t,e),...i})));I9.displayName="NavbarText";const Oee=I9,R9=U.forwardRef((t,e)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:s,fixed:o,sticky:a,className:l,as:u="nav",expanded:c,onToggle:d,onSelect:h,collapseOnSelect:m=!1,...g}=Qz(t,{expanded:"onToggle"}),v=Nn(n,"navbar"),_=U.useCallback((...x)=>{h==null||h(...x),m&&c&&(d==null||d(!1))},[h,m,c,d]);g.role===void 0&&u!=="nav"&&(g.role="navigation");let y=`${v}-expand`;typeof i=="string"&&(y=`${y}-${i}`);const S=U.useMemo(()=>({onToggle:()=>d==null?void 0:d(!c),bsPrefix:v,expanded:!!c,expand:i}),[v,c,i,d]);return $(cg.Provider,{value:S,children:$(vT.Provider,{value:_,children:$(u,{ref:e,...g,className:fn(l,v,i&&y,r&&`${v}-${r}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});R9.displayName="Navbar";const Qx=Object.assign(R9,{Brand:hJ,Collapse:zJ,Offcanvas:Nee,Text:Oee,Toggle:HJ}),E2=U.createContext(),Uee=({children:t})=>{const[e,n]=U.useState(()=>localStorage.getItem("darkMode")==="true"||!1);U.useEffect(()=>{e?(document.body.classList.add("dark-mode"),document.body.setAttribute("data-bs-theme","dark")):(document.body.classList.remove("dark-mode"),document.body.removeAttribute("data-bs-theme")),localStorage.setItem("darkMode",e)},[e]);const i=()=>{n(!e)};return $(E2.Provider,{value:{darkMode:e,toggleDarkMode:i},children:t})},Fee=()=>{const{darkMode:t,toggleDarkMode:e}=U.useContext(E2);return $("button",{style:{background:"transparent",border:"none",padding:0},onClick:e,className:"dark-mode-toggle",children:$("i",{className:t?"fa-solid fa-moon":"fa-regular fa-sun"})})},Bee="/assets/github-mark-white-60d03f0f.png",zee="/assets/github-mark-367d5cb2.png",C2=U.createContext(null),Hee=({children:t})=>{const[e,n]=U.useState(null),[i,r]=U.useState(null);return U.useEffect(()=>{const s=localStorage.getItem("roverName");s&&n(s)},[]),U.useEffect(()=>{e&&localStorage.setItem("roverName",e)},[e]),U.useEffect(()=>{const s=e?`wss://rerassor.com/?name=${encodeURIComponent(e)}&clientType=browser`:"wss://rerassor.com",o=new WebSocket(s);return r(o),()=>{o.close()}},[e]),$(C2.Provider,{value:{connected:e,setConnected:n,ws:i},children:t})};function of(){const{darkMode:t,toggleDarkMode:e}=U.useContext(E2),{connected:n,setConnected:i,ws:r}=U.useContext(C2);return $(Qx,{expand:"lg",className:"bg-body-tertiary no-margin-padding",children:Nt(IZ,{children:[$(Qx.Brand,{children:"RE-RASSOR"}),$(Qx.Toggle,{"aria-controls":"basic-navbar-nav"}),$(Qx.Collapse,{id:"basic-navbar-nav",children:Nt(uc,{className:"me-auto",children:[$(uc.Link,{as:Bd,to:"/",children:"Controller"}),$(uc.Link,{as:Bd,to:"/graphs",children:"Telemetry"}),$(uc.Link,{as:Bd,to:"/binstream",children:"Bin Stream"}),$(uc.Link,{as:Bd,to:"/fpvstream",children:"FPV Stream"}),$(uc.Link,{as:Bd,to:"/location",children:"Location"}),$(uc.Link,{as:Bd,to:"/resources",children:"Resources"}),$(uc.Link,{as:Bd,to:"/media",children:"Media"})]})}),$("span",{className:"me-4",children:n?`Connected to ${n}`:"Not connected to rover"}),$(Fee,{}),$("a",{href:"https://github.com/colemaring/RE-RASSOR-lightweight",target:"_blank",rel:"noopener noreferrer",children:$("img",{src:t?Bee:zee,alt:"GitHub",style:{marginLeft:"1rem",width:"25px",height:"25px"}})})]})})}const Vee="/assets/fsirover-98dbb6a6.jpg";function $ee(){return Nt(Ma,{children:[$(of,{}),$("h3",{style:{display:"block",marginTop:"2rem",marginBottom:"0.3rem"},children:"My stuff"}),$("a",{href:"https://github.com/colemaring/RE-RASSOR-lightweight",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Github"}),$("a",{href:"https://docs.google.com/presentation/d/1bT2AEzoutYCk4yY9OqZmACdpAPInkWr6kpimgG5G9Ok/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Presentation"}),$("a",{href:"https://drive.google.com/drive/folders/1xFWGFmJ8TMMziFp8QMRdEFUxEIHuI4tB",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"3D Print Files"}),$("a",{href:"https://drive.google.com/drive/folders/1gh6lrkOwWv0ZDy4qrbicX4A5fCzM1dyK",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Documentation"}),$("a",{href:"https://docs.google.com/spreadsheets/d/1NXGNP6VN6AUMzi3yI0pYu8AWPift6RHg/edit?gid=405465821#gid=405465821",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Bill of Materials (needs update)"}),$("a",{href:"https://coltonmaring.com/",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"My portfolio"}),$("h3",{style:{display:"block",marginTop:"2rem",marginBottom:"0.3rem"},children:"Tinkercad Links"}),$("a",{href:"https://www.tinkercad.com/things/gu7IagF82qz-modified-cycloidal?sharecode=EaVgwKvzU-HyPk36FN7cERbTUvtTY_b2djwKR1AdhNg",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Modified FSI Cycloidal Drive"}),$("a",{href:"https://www.tinkercad.com/things/1p2ggSRB8as-gearbox-v1?sharecode=8IpHNY6IAvpy4pHOyp5e84vmgTq2tT6HnijBi_N8EMI",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Gearbox V1"}),$("a",{href:"https://www.tinkercad.com/things/2ldF289oJCp-gearbox-v2?sharecode=dsHo78Nv-HKhRKtgQijNCOR7xe-CxvZzn5wVtpn9wTg",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.2rem"},children:"Gearbox V2"}),$("h3",{style:{display:"block",marginTop:"2rem",marginBottom:"0.3rem"},children:"Other"}),$("a",{href:"https://fsi.ucf.edu/student-design/robotics/re-rassor/",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"0.3rem"},children:"FSI's RE-RASSOR page"}),$("a",{href:"https://floridaspacegrant.org/program/re-rassor/",target:"_blank",rel:"noopener noreferrer",style:{display:"block",marginBottom:"2rem"},children:"Florida Space Grant Consortium's RE-RASSOR page"})]})}const Gee="/assets/motortest-cb3d5064.jpg",Wee="/assets/modified_old_motorhousing-67a61813.jpg",jee="/assets/rover_nowheels-d80e4ce9.jpg",qee="/assets/oldgearboxrover-2f462db0.jpg",Xee="/assets/testing-4309b81b.jpg",Yee="/assets/roverinbin-1c5a535e.jpg",Kee="/assets/exolithtestpc-3ab9f2eb.jpg",Qee="/assets/esp32rovertest-3b10ef5d.jpg",Zee="/assets/explodedv1-c35b8b0a.png",Jee="/assets/v1open-4170b648.jpg",ete="/assets/v1rovernowheels-4c04afa5.jpg",tte="/assets/v1onrover-184b1f2d.jpg",nte="/assets/v1implemented-7e5e26f1.jpg",ite="/assets/roverandlaptop-54a41d30.jpg",rte="/assets/esp32wiring-418cbe27.jpg",ste="/assets/explodedv2-87b0e937.png",ote="/assets/boardwired-5be2086e.jpg",ate="/assets/boardplain-4c07ece3.jpg",lte="/assets/PCBscreenshot-448fe3c5.png",ute="/assets/boardtogether-c6060ad7.jpg";function cte(){return Nt(Ma,{children:[$(of,{}),$("h2",{style:{marginTop:"2rem",marginBottom:"0.5rem"},children:"Images are in chronological order"}),$("p",{children:"Hover for a short description"}),$("img",{src:Vee,alt:"FSI's built rover",title:"FSI's built rover",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Gee,alt:"Testing motors with new ESP32 implementation",title:"Testing motors with new ESP32 implementation",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Wee,alt:"After modifying the design of the motor housing",title:"After modifying the design of the motor housing",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:jee,alt:"Rover assembled using modified design of old motor housing, without wheels",title:"Rover assembled using modified design of old motor housing, without wheels",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Xee,alt:"Rover assembled using modified design of old motor housing, without wheels",title:"Rover assembled using modified design of old motor housing, without wheels",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Qee,alt:"Test of electronics in rover",title:"Test of electronics in rover",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:rte,alt:"Close up picture of wiring on ESP32",title:"Close up picture of wiring on ESP32",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:qee,alt:"Rover assembled using modified design of old motor housing, with wheels and cover",title:"Rover assembled using modified design of old motor housing, with wheels and cover",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Yee,alt:"Rover testing in the bin",title:"Rover testing in the bin",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Kee,alt:"Exolith IPcam of rover in bin",title:"Exolith IPcam of rover in bin",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Zee,alt:"Exploded view of v1 of the new gearbox",title:"Exploded view of v1 of the new gearbox",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:Jee,alt:"V1 of new gearbox printed on rover",title:"V1 of new gearbox printed on rover",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:ete,alt:"Assmebled rover with V1 of new gearbox, no wheels",title:"Assmebled rover with V1 of new gearbox, no wheels",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:tte,alt:"Assmebled rover with V1 of new gearbox",title:"Assmebled rover with V1 of new gearbox",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:nte,alt:"Close up of V1 of new gearbox on assembled rover",title:"Close up of V1 of new gearbox on assembled rover",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:ite,alt:"Top down view of rover with V1 of new gearbox and laptop for testing",title:"Top down view of rover with V1 of new gearbox and laptop for testing",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:ste,alt:"Exploded view of V2 of the new gearbox",title:"Exploded view of V2 of the new gearbox",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:lte,alt:"PCB wiring screenshot",title:"PCB wiring screenshot",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:ate,alt:"PCB board soldered",title:"PCB board soldered",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:ote,alt:"PCB board soldered and wired",title:"PCB board soldered and wired",style:{width:"400px",height:"auto",marginBottom:"1rem"}}),$("img",{src:ute,alt:"PCB board installed",title:"PCB board installed",style:{width:"400px",height:"auto",marginBottom:"1rem"}})]})}const D9=U.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:s=!1,className:o,...a},l)=>{const u=Nn(e,"btn"),[c,{tagName:d}]=oD({tagName:t,disabled:s,...a});return $(d,{...c,...a,ref:l,disabled:s,className:fn(o,u,r&&"active",n&&`${u}-${n}`,i&&`${u}-${i}`,a.href&&s&&"disabled")})});D9.displayName="Button";const Rp=D9;function dte({connected:t,ws:e}){return Nt("div",{className:"controller",children:[Nt(Rp,{onClick:()=>{e.send(JSON.stringify({rover:t,type:"move",direction:"forward"}))},disabled:!t,children:["Forward ",$("i",{className:"fa-solid fa-arrow-up"})]}),Nt("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[Nt(Rp,{onClick:()=>{e.send(JSON.stringify({rover:t,type:"move",direction:"left"}))},disabled:!t,children:["Left ",$("i",{className:"fa-solid fa-arrow-left"})]}),Nt(Rp,{onClick:()=>{e.send(JSON.stringify({rover:t,type:"move",direction:"stop"}))},disabled:!t,variant:"danger",children:["Stop ",$("i",{className:"fa-solid fa-stop"})]}),Nt(Rp,{onClick:()=>{e.send(JSON.stringify({rover:t,type:"move",direction:"right"}))},disabled:!t,children:["Right ",$("i",{className:"fa-solid fa-arrow-right"})]})]}),Nt(Rp,{onClick:()=>{e.send(JSON.stringify({rover:t,type:"move",direction:"backward"}))},disabled:!t,children:["Backward ",$("i",{className:"fa-solid fa-arrow-down"})]})]})}function hte({connected:t}){if(t!=null)return Nt(Ma,{children:[Nt("div",{style:{color:"green",fontWeight:"bold",marginBottom:"0.5rem"},children:["Connected to ",t,"."]}),"Refresh to disconnect."]})}const fte=U.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:i,borderless:r,hover:s,size:o,variant:a,responsive:l,...u},c)=>{const d=Nn(t,"table"),h=fn(e,d,a&&`${d}-${a}`,o&&`${d}-${o}`,n&&`${d}-${typeof n=="string"?`striped-${n}`:"striped"}`,i&&`${d}-bordered`,r&&`${d}-borderless`,s&&`${d}-hover`),m=$("table",{...u,className:h,ref:c});if(l){let g=`${d}-responsive`;return typeof l=="string"&&(g=`${g}-${l}`),$("div",{className:g,children:m})}return m}),pte=fte,mte={type:du.string,tooltip:du.bool,as:du.elementType},fD=U.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:i=!1,...r},s)=>$(t,{...r,ref:s,className:fn(e,`${n}-${i?"tooltip":"feedback"}`)}));fD.displayName="Feedback";fD.propTypes=mte;const k9=fD,gte=U.createContext({}),Su=gte,L9=U.forwardRef(({id:t,bsPrefix:e,className:n,type:i="checkbox",isValid:r=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:u}=U.useContext(Su);return e=Nn(e,"form-check-input"),$(o,{...a,ref:l,type:i,id:t||u,className:fn(n,e,r&&"is-valid",s&&"is-invalid")})});L9.displayName="FormCheckInput";const N9=L9,O9=U.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...i},r)=>{const{controlId:s}=U.useContext(Su);return t=Nn(t,"form-check-label"),$("label",{...i,ref:r,htmlFor:n||s,className:fn(e,t)})});O9.displayName="FormCheckLabel";const RP=O9;function yte(t,e){return U.Children.toArray(t).some(n=>U.isValidElement(n)&&n.type===e)}const U9=U.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:d,style:h,title:m="",type:g="checkbox",label:v,children:_,as:y="input",...S},x)=>{e=Nn(e,"form-check"),n=Nn(n,"form-switch");const{controlId:w}=U.useContext(Su),P=U.useMemo(()=>({controlId:t||w}),[w,t]),A=!_&&v!=null&&v!==!1||yte(_,RP),D=$(N9,{...S,type:g==="switch"?"checkbox":g,ref:x,isValid:o,isInvalid:a,disabled:s,as:y});return $(Su.Provider,{value:P,children:$("div",{style:h,className:fn(d,A&&e,i&&`${e}-inline`,r&&`${e}-reverse`,g==="switch"&&n),children:_||Nt(Ma,{children:[D,A&&$(RP,{title:m,children:v}),u&&$(k9,{type:c,tooltip:l,children:u})]})})})});U9.displayName="FormCheck";const xT=Object.assign(U9,{Input:N9,Label:RP}),F9=U.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:i,id:r,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:u,as:c="input",...d},h)=>{const{controlId:m}=U.useContext(Su);return t=Nn(t,"form-control"),$(c,{...d,type:e,size:i,ref:h,readOnly:u,id:r||m,className:fn(s,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",a&&"is-invalid")})});F9.displayName="FormControl";const vte=Object.assign(F9,{Feedback:k9}),B9=U.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Nn(e,"form-floating"),$(n,{ref:r,className:fn(t,e),...i})));B9.displayName="FormFloating";const _te=B9,z9=U.forwardRef(({controlId:t,as:e="div",...n},i)=>{const r=U.useMemo(()=>({controlId:t}),[t]);return $(Su.Provider,{value:r,children:$(e,{...n,ref:i})})});z9.displayName="FormGroup";const H9=z9;function xte({as:t,bsPrefix:e,className:n,...i}){e=Nn(e,"col");const r=MZ(),s=PZ(),o=[],a=[];return r.forEach(l=>{const u=i[l];delete i[l];let c,d,h;typeof u=="object"&&u!=null?{span:c,offset:d,order:h}=u:c=u;const m=l!==s?`-${l}`:"";c&&o.push(c===!0?`${e}${m}`:`${e}${m}-${c}`),h!=null&&a.push(`order${m}-${h}`),d!=null&&a.push(`offset${m}-${d}`)}),[{...i,className:fn(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const V9=U.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:s,spans:o}]=xte(t);return $(r,{...i,ref:e,className:fn(n,!o.length&&s)})});V9.displayName="Col";const Ste=V9,$9=U.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:s,...o},a)=>{const{controlId:l}=U.useContext(Su);e=Nn(e,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=fn(r,e,i&&"visually-hidden",n&&u);return s=s||l,n?$(Ste,{ref:a,as:"label",className:c,htmlFor:s,...o}):$(t,{ref:a,className:c,htmlFor:s,...o})});$9.displayName="FormLabel";const Tte=$9,G9=U.forwardRef(({bsPrefix:t,className:e,id:n,...i},r)=>{const{controlId:s}=U.useContext(Su);return t=Nn(t,"form-range"),$("input",{...i,type:"range",ref:r,className:fn(e,t),id:n||s})});G9.displayName="FormRange";const bte=G9,W9=U.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:i,isValid:r=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:u}=U.useContext(Su);return t=Nn(t,"form-select"),$("select",{...a,size:n,ref:l,className:fn(i,t,e&&`${t}-${e}`,r&&"is-valid",s&&"is-invalid"),id:o||u})});W9.displayName="FormSelect";const wte=W9,j9=U.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:i,...r},s)=>(t=Nn(t,"form-text"),$(n,{...r,ref:s,className:fn(e,t,i&&"text-muted")})));j9.displayName="FormText";const Ete=j9,q9=U.forwardRef((t,e)=>$(xT,{...t,ref:e,type:"switch"}));q9.displayName="Switch";const Cte=Object.assign(q9,{Input:xT.Input,Label:xT.Label}),X9=U.forwardRef(({bsPrefix:t,className:e,children:n,controlId:i,label:r,...s},o)=>(t=Nn(t,"form-floating"),Nt(H9,{ref:o,className:fn(e,t),controlId:i,...s,children:[n,$("label",{htmlFor:i,children:r})]})));X9.displayName="FloatingLabel";const Ate=X9,Mte={_ref:du.any,validated:du.bool,as:du.elementType},pD=U.forwardRef(({className:t,validated:e,as:n="form",...i},r)=>$(n,{...i,ref:r,className:fn(t,e&&"was-validated")}));pD.displayName="Form";pD.propTypes=Mte;const Y9=Object.assign(pD,{Group:H9,Control:vte,Floating:_te,Check:xT,Switch:Cte,Label:Tte,Text:Ete,Range:bte,Select:wte,FloatingLabel:Ate}),Pte=({setConnected:t,connected:e,ws:n})=>{const[i,r]=U.useState([]),[s,o]=U.useState({});U.useEffect(()=>{if(!n)return;const u=h=>{const m=JSON.parse(h.data);m.type==="connectedClients"&&r(m.clients||[])},c=h=>{n.readyState===WebSocket.CLOSING||n.readyState===WebSocket.CLOSED||console.error("WebSocket error:",h)};n.addEventListener("message",u),n.addEventListener("error",c);const d=setInterval(()=>{n.readyState===n.OPEN&&n.send(JSON.stringify({type:"getConnectedClients"}))},1e3);return()=>{n.removeEventListener("message",u),n.removeEventListener("error",c),clearInterval(d)}},[n]),U.useEffect(()=>{i.some(u=>u.name===e)||t(null)},[i,e,t]),U.useEffect(()=>{const u=localStorage.getItem("roverName");if(u&&i.length>0){const c=i.find(d=>d.name===u);c&&(t(c.name),o(d=>({...d,[c.name]:c.secret||""})))}},[i,t]);const a=u=>{e===u.name?(console.log(`Disconnecting from ${u.name}`),t(null),o({}),localStorage.removeItem("roverName")):(console.log(`Connecting to ${u.name}`),t(u.name),localStorage.setItem("roverName",u.name))},l=(u,c)=>{o(d=>({...d,[u]:c}))};return Nt("div",{className:"table-container",children:[$("h1",{children:"Online Rovers:"}),Nt(pte,{striped:!0,bordered:!0,hover:!0,children:[$("thead",{children:Nt("tr",{children:[$("th",{children:"Rover"}),$("th",{children:"Secret"}),$("th",{children:"Action"})]})}),$("tbody",{children:i.map((u,c)=>Nt("tr",{children:[$("td",{children:u.name}),$("td",{children:$(Y9.Control,{type:"password",placeholder:"Enter secret",value:s[u.name]||"",onChange:d=>l(u.name,d.target.value)})}),$("td",{children:$(Rp,{variant:"primary",disabled:s[u.name]!==u.secret,onClick:()=>a(u),className:e===u.name?"btn-danger":"",children:e===u.name?"Disconnect":"Connect"})})]},c))})]})]})};function Ite({connected:t,ws:e}){const[n,i]=U.useState(1),r=s=>{const o=s.target.value;i(o),e.send(JSON.stringify({rover:t,type:"speed",speed:o}))};return Nt("div",{style:{textAlign:"center",marginTop:"4rem"},children:[Nt("h5",{children:["Speed Multiplier: ",n]}),$(Y9.Range,{disabled:!t,value:n,min:.2,max:3,step:.1,onChange:r,style:{width:"200px",margin:"0 auto"}})]})}function Rte(){const{connected:t,setConnected:e,ws:n}=U.useContext(C2);return Nt(Ma,{children:[$(of,{}),$(Pte,{setConnected:e,connected:t,ws:n}),$(hte,{connected:t}),$(Ite,{connected:t,ws:n}),$(dte,{connected:t,ws:n})]})}function Gh(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(i=>n.searchParams.append("args[]",i)),`Minified MUI error #${t}; visit ${n} for the full message.`}const hu="$$material";function K9(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Dte=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kte=K9(function(t){return Dte.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Lte=!1;function Nte(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Ote(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Ute=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!Lte:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ote(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Nte(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},t}(),Ir="-ms-",ST="-moz-",Cn="-webkit-",Q9="comm",mD="rule",gD="decl",Fte="@import",Z9="@keyframes",Bte="@layer",zte=Math.abs,A2=String.fromCharCode,Hte=Object.assign;function Vte(t,e){return yr(t,0)^45?(((e<<2^yr(t,0))<<2^yr(t,1))<<2^yr(t,2))<<2^yr(t,3):0}function J9(t){return t.trim()}function $te(t,e){return(t=e.exec(t))?t[0]:t}function An(t,e,n){return t.replace(e,n)}function DP(t,e){return t.indexOf(e)}function yr(t,e){return t.charCodeAt(e)|0}function sv(t,e,n){return t.slice(e,n)}function Za(t){return t.length}function yD(t){return t.length}function Zx(t,e){return e.push(t),t}function Gte(t,e){return t.map(e).join("")}var M2=1,Pm=1,eH=0,ks=0,Oi=0,dg="";function P2(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:M2,column:Pm,length:o,return:""}}function h0(t,e){return Hte(P2("",null,null,"",null,null,0),t,{length:-t.length},e)}function Wte(){return Oi}function jte(){return Oi=ks>0?yr(dg,--ks):0,Pm--,Oi===10&&(Pm=1,M2--),Oi}function ro(){return Oi=ks<eH?yr(dg,ks++):0,Pm++,Oi===10&&(Pm=1,M2++),Oi}function dl(){return yr(dg,ks)}function AS(){return ks}function a_(t,e){return sv(dg,t,e)}function ov(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tH(t){return M2=Pm=1,eH=Za(dg=t),ks=0,[]}function nH(t){return dg="",t}function MS(t){return J9(a_(ks-1,kP(t===91?t+2:t===40?t+1:t)))}function qte(t){for(;(Oi=dl())&&Oi<33;)ro();return ov(t)>2||ov(Oi)>3?"":" "}function Xte(t,e){for(;--e&&ro()&&!(Oi<48||Oi>102||Oi>57&&Oi<65||Oi>70&&Oi<97););return a_(t,AS()+(e<6&&dl()==32&&ro()==32))}function kP(t){for(;ro();)switch(Oi){case t:return ks;case 34:case 39:t!==34&&t!==39&&kP(Oi);break;case 40:t===41&&kP(t);break;case 92:ro();break}return ks}function Yte(t,e){for(;ro()&&t+Oi!==47+10;)if(t+Oi===42+42&&dl()===47)break;return"/*"+a_(e,ks-1)+"*"+A2(t===47?t:ro())}function Kte(t){for(;!ov(dl());)ro();return a_(t,ks)}function Qte(t){return nH(PS("",null,null,null,[""],t=tH(t),0,[0],t))}function PS(t,e,n,i,r,s,o,a,l){for(var u=0,c=0,d=o,h=0,m=0,g=0,v=1,_=1,y=1,S=0,x="",w=r,P=s,A=i,D=x;_;)switch(g=S,S=ro()){case 40:if(g!=108&&yr(D,d-1)==58){DP(D+=An(MS(S),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:D+=MS(S);break;case 9:case 10:case 13:case 32:D+=qte(g);break;case 92:D+=Xte(AS()-1,7);continue;case 47:switch(dl()){case 42:case 47:Zx(Zte(Yte(ro(),AS()),e,n),l);break;default:D+="/"}break;case 123*v:a[u++]=Za(D)*y;case 125*v:case 59:case 0:switch(S){case 0:case 125:_=0;case 59+c:y==-1&&(D=An(D,/\f/g,"")),m>0&&Za(D)-d&&Zx(m>32?zO(D+";",i,n,d-1):zO(An(D," ","")+";",i,n,d-2),l);break;case 59:D+=";";default:if(Zx(A=BO(D,e,n,u,c,r,a,x,w=[],P=[],d),s),S===123)if(c===0)PS(D,e,A,A,w,s,d,a,P);else switch(h===99&&yr(D,3)===110?100:h){case 100:case 108:case 109:case 115:PS(t,A,A,i&&Zx(BO(t,A,A,0,0,r,a,x,r,w=[],d),P),r,P,d,a,i?w:P);break;default:PS(D,A,A,A,[""],P,0,a,P)}}u=c=m=0,v=y=1,x=D="",d=o;break;case 58:d=1+Za(D),m=g;default:if(v<1){if(S==123)--v;else if(S==125&&v++==0&&jte()==125)continue}switch(D+=A2(S),S*v){case 38:y=c>0?1:(D+="\f",-1);break;case 44:a[u++]=(Za(D)-1)*y,y=1;break;case 64:dl()===45&&(D+=MS(ro())),h=dl(),c=d=Za(x=D+=Kte(AS())),S++;break;case 45:g===45&&Za(D)==2&&(v=0)}}return s}function BO(t,e,n,i,r,s,o,a,l,u,c){for(var d=r-1,h=r===0?s:[""],m=yD(h),g=0,v=0,_=0;g<i;++g)for(var y=0,S=sv(t,d+1,d=zte(v=o[g])),x=t;y<m;++y)(x=J9(v>0?h[y]+" "+S:An(S,/&\f/g,h[y])))&&(l[_++]=x);return P2(t,e,n,r===0?mD:a,l,u,c)}function Zte(t,e,n){return P2(t,e,n,Q9,A2(Wte()),sv(t,2,-2),0)}function zO(t,e,n,i){return P2(t,e,n,gD,sv(t,0,i),sv(t,i+1,-1),i)}function um(t,e){for(var n="",i=yD(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function Jte(t,e,n,i){switch(t.type){case Bte:if(t.children.length)break;case Fte:case gD:return t.return=t.return||t.value;case Q9:return"";case Z9:return t.return=t.value+"{"+um(t.children,i)+"}";case mD:t.value=t.props.join(",")}return Za(n=um(t.children,i))?t.return=t.value+"{"+n+"}":""}function ene(t){var e=yD(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function tne(t){return function(e){e.root||(e=e.return)&&t(e)}}var nne=function(e,n,i){for(var r=0,s=0;r=s,s=dl(),r===38&&s===12&&(n[i]=1),!ov(s);)ro();return a_(e,ks)},ine=function(e,n){var i=-1,r=44;do switch(ov(r)){case 0:r===38&&dl()===12&&(n[i]=1),e[i]+=nne(ks-1,n,i);break;case 2:e[i]+=MS(r);break;case 4:if(r===44){e[++i]=dl()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=A2(r)}while(r=ro());return e},rne=function(e,n){return nH(ine(tH(e),n))},HO=new WeakMap,sne=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!HO.get(i))&&!r){HO.set(e,!0);for(var s=[],o=rne(n,s),a=i.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},one=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function iH(t,e){switch(Vte(t,e)){case 5103:return Cn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Cn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Cn+t+ST+t+Ir+t+t;case 6828:case 4268:return Cn+t+Ir+t+t;case 6165:return Cn+t+Ir+"flex-"+t+t;case 5187:return Cn+t+An(t,/(\w+).+(:[^]+)/,Cn+"box-$1$2"+Ir+"flex-$1$2")+t;case 5443:return Cn+t+Ir+"flex-item-"+An(t,/flex-|-self/,"")+t;case 4675:return Cn+t+Ir+"flex-line-pack"+An(t,/align-content|flex-|-self/,"")+t;case 5548:return Cn+t+Ir+An(t,"shrink","negative")+t;case 5292:return Cn+t+Ir+An(t,"basis","preferred-size")+t;case 6060:return Cn+"box-"+An(t,"-grow","")+Cn+t+Ir+An(t,"grow","positive")+t;case 4554:return Cn+An(t,/([^-])(transform)/g,"$1"+Cn+"$2")+t;case 6187:return An(An(An(t,/(zoom-|grab)/,Cn+"$1"),/(image-set)/,Cn+"$1"),t,"")+t;case 5495:case 3959:return An(t,/(image-set\([^]*)/,Cn+"$1$`$1");case 4968:return An(An(t,/(.+:)(flex-)?(.*)/,Cn+"box-pack:$3"+Ir+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Cn+t+t;case 4095:case 3583:case 4068:case 2532:return An(t,/(.+)-inline(.+)/,Cn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Za(t)-1-e>6)switch(yr(t,e+1)){case 109:if(yr(t,e+4)!==45)break;case 102:return An(t,/(.+:)(.+)-([^]+)/,"$1"+Cn+"$2-$3$1"+ST+(yr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~DP(t,"stretch")?iH(An(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(yr(t,e+1)!==115)break;case 6444:switch(yr(t,Za(t)-3-(~DP(t,"!important")&&10))){case 107:return An(t,":",":"+Cn)+t;case 101:return An(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Cn+(yr(t,14)===45?"inline-":"")+"box$3$1"+Cn+"$2$3$1"+Ir+"$2box$3")+t}break;case 5936:switch(yr(t,e+11)){case 114:return Cn+t+Ir+An(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Cn+t+Ir+An(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Cn+t+Ir+An(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Cn+t+Ir+t+t}return t}var ane=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case gD:e.return=iH(e.value,e.length);break;case Z9:return um([h0(e,{value:An(e.value,"@","@"+Cn)})],r);case mD:if(e.length)return Gte(e.props,function(s){switch($te(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return um([h0(e,{props:[An(s,/:(read-\w+)/,":"+ST+"$1")]})],r);case"::placeholder":return um([h0(e,{props:[An(s,/:(plac\w+)/,":"+Cn+"input-$1")]}),h0(e,{props:[An(s,/:(plac\w+)/,":"+ST+"$1")]}),h0(e,{props:[An(s,/:(plac\w+)/,Ir+"input-$1")]})],r)}return""})}},lne=[ane],une=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(v){var _=v.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var r=e.stylisPlugins||lne,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var _=v.getAttribute("data-emotion").split(" "),y=1;y<_.length;y++)s[_[y]]=!0;a.push(v)});var l,u=[sne,one];{var c,d=[Jte,tne(function(v){c.insert(v)})],h=ene(u.concat(r,d)),m=function(_){return um(Qte(_),h)};l=function(_,y,S,x){c=S,m(_?_+"{"+y.styles+"}":y.styles),x&&(g.inserted[y.name]=!0)}}var g={key:n,sheet:new Ute({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},rH={exports:{}},Ln={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lr=typeof Symbol=="function"&&Symbol.for,vD=lr?Symbol.for("react.element"):60103,_D=lr?Symbol.for("react.portal"):60106,I2=lr?Symbol.for("react.fragment"):60107,R2=lr?Symbol.for("react.strict_mode"):60108,D2=lr?Symbol.for("react.profiler"):60114,k2=lr?Symbol.for("react.provider"):60109,L2=lr?Symbol.for("react.context"):60110,xD=lr?Symbol.for("react.async_mode"):60111,N2=lr?Symbol.for("react.concurrent_mode"):60111,O2=lr?Symbol.for("react.forward_ref"):60112,U2=lr?Symbol.for("react.suspense"):60113,cne=lr?Symbol.for("react.suspense_list"):60120,F2=lr?Symbol.for("react.memo"):60115,B2=lr?Symbol.for("react.lazy"):60116,dne=lr?Symbol.for("react.block"):60121,hne=lr?Symbol.for("react.fundamental"):60117,fne=lr?Symbol.for("react.responder"):60118,pne=lr?Symbol.for("react.scope"):60119;function mo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case vD:switch(t=t.type,t){case xD:case N2:case I2:case D2:case R2:case U2:return t;default:switch(t=t&&t.$$typeof,t){case L2:case O2:case B2:case F2:case k2:return t;default:return e}}case _D:return e}}}function sH(t){return mo(t)===N2}Ln.AsyncMode=xD;Ln.ConcurrentMode=N2;Ln.ContextConsumer=L2;Ln.ContextProvider=k2;Ln.Element=vD;Ln.ForwardRef=O2;Ln.Fragment=I2;Ln.Lazy=B2;Ln.Memo=F2;Ln.Portal=_D;Ln.Profiler=D2;Ln.StrictMode=R2;Ln.Suspense=U2;Ln.isAsyncMode=function(t){return sH(t)||mo(t)===xD};Ln.isConcurrentMode=sH;Ln.isContextConsumer=function(t){return mo(t)===L2};Ln.isContextProvider=function(t){return mo(t)===k2};Ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===vD};Ln.isForwardRef=function(t){return mo(t)===O2};Ln.isFragment=function(t){return mo(t)===I2};Ln.isLazy=function(t){return mo(t)===B2};Ln.isMemo=function(t){return mo(t)===F2};Ln.isPortal=function(t){return mo(t)===_D};Ln.isProfiler=function(t){return mo(t)===D2};Ln.isStrictMode=function(t){return mo(t)===R2};Ln.isSuspense=function(t){return mo(t)===U2};Ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===I2||t===N2||t===D2||t===R2||t===U2||t===cne||typeof t=="object"&&t!==null&&(t.$$typeof===B2||t.$$typeof===F2||t.$$typeof===k2||t.$$typeof===L2||t.$$typeof===O2||t.$$typeof===hne||t.$$typeof===fne||t.$$typeof===pne||t.$$typeof===dne)};Ln.typeOf=mo;rH.exports=Ln;var mne=rH.exports,oH=mne,gne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yne={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},aH={};aH[oH.ForwardRef]=gne;aH[oH.Memo]=yne;var vne=!0;function _ne(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(i+=r+" ")}),i}var lH=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||vne===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},uH=function(e,n,i){lH(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function xne(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Sne={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tne=!1,bne=/[A-Z]|^ms/g,wne=/_EMO_([^_]+?)_([^]*?)_EMO_/g,cH=function(e){return e.charCodeAt(1)===45},VO=function(e){return e!=null&&typeof e!="boolean"},UC=K9(function(t){return cH(t)?t:t.replace(bne,"-$&").toLowerCase()}),$O=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(wne,function(i,r,s){return Ja={name:r,styles:s,next:Ja},r})}return Sne[e]!==1&&!cH(e)&&typeof n=="number"&&n!==0?n+"px":n},Ene="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function av(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return Ja={name:r.name,styles:r.styles,next:Ja},r.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Ja={name:o.name,styles:o.styles,next:Ja},o=o.next;var a=s.styles+";";return a}return Cne(t,e,n)}case"function":{if(t!==void 0){var l=Ja,u=n(t);return Ja=l,av(t,e,u)}break}}var c=n;if(e==null)return c;var d=e[c];return d!==void 0?d:c}function Cne(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=av(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?i+=s+"{"+e[a]+"}":VO(a)&&(i+=UC(s)+":"+$O(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&Tne)throw new Error(Ene);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)VO(o[l])&&(i+=UC(s)+":"+$O(s,o[l])+";");else{var u=av(t,e,o);switch(s){case"animation":case"animationName":{i+=UC(s)+":"+u+";";break}default:i+=s+"{"+u+"}"}}}}return i}var GO=/label:\s*([^\s;{]+)\s*(;|$)/g,Ja;function SD(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,r="";Ja=void 0;var s=t[0];if(s==null||s.raw===void 0)i=!1,r+=av(n,e,s);else{var o=s;r+=o[0]}for(var a=1;a<t.length;a++)if(r+=av(n,e,t[a]),i){var l=s;r+=l[a]}GO.lastIndex=0;for(var u="",c;(c=GO.exec(r))!==null;)u+="-"+c[1];var d=xne(r)+u;return{name:d,styles:r,next:Ja}}var Ane=function(e){return e()},dH=WS["useInsertionEffect"]?WS["useInsertionEffect"]:!1,Mne=dH||Ane,WO=dH||U.useLayoutEffect,hH=U.createContext(typeof HTMLElement<"u"?une({key:"css"}):null);hH.Provider;var fH=function(e){return U.forwardRef(function(n,i){var r=U.useContext(hH);return e(n,r,i)})},z2=U.createContext({}),Pne=fH(function(t,e){var n=t.styles,i=SD([n],void 0,U.useContext(z2)),r=U.useRef();return WO(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),r.current=[o,a],function(){o.flush()}},[e]),WO(function(){var s=r.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(i.next!==void 0&&uH(e,i.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",i,o,!1)},[e,i.name]),null}),Ine=kte,Rne=function(e){return e!=="theme"},jO=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Ine:Rne},qO=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},Dne=!1,kne=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return lH(n,i,r),Mne(function(){return uH(n,i,r)}),null},Lne=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=qO(e,n,i),l=a||jO(r),u=!l("as");return function(){var c=arguments,d=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var h=c.length,m=1;m<h;m++)d.push(c[m],c[0][m])}var g=fH(function(v,_,y){var S=u&&v.as||r,x="",w=[],P=v;if(v.theme==null){P={};for(var A in v)P[A]=v[A];P.theme=U.useContext(z2)}typeof v.className=="string"?x=_ne(_.registered,w,v.className):v.className!=null&&(x=v.className+" ");var D=SD(d.concat(w),_.registered,P);x+=_.key+"-"+D.name,o!==void 0&&(x+=" "+o);var O=u&&a===void 0?jO(S):l,H={};for(var E in v)u&&E==="as"||O(E)&&(H[E]=v[E]);return H.className=x,y&&(H.ref=y),U.createElement(U.Fragment,null,U.createElement(kne,{cache:_,serialized:D,isStringTag:typeof S=="string"}),U.createElement(S,H))});return g.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=r,g.__emotion_styles=d,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return o===void 0&&Dne?"NO_COMPONENT_SELECTOR":"."+o}}),g.withComponent=function(v,_){return t(v,ve({},n,_,{shouldForwardProp:qO(g,_,!0)})).apply(void 0,d)},g}},Nne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],LP=Lne.bind();Nne.forEach(function(t){LP[t]=LP(t)});function One(t){return t==null||Object.keys(t).length===0}function Une(t){const{styles:e,defaultTheme:n={}}=t;return $(Pne,{styles:typeof e=="function"?r=>e(One(r)?n:r):e})}/**
 * @mui/styled-engine v6.1.4
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Fne(t,e){return LP(t,e)}function Bne(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const XO=[];function YO(t){return XO[0]=t,SD(XO)}function nl(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function pH(t){if(!nl(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=pH(t[n])}),e}function so(t,e,n={clone:!0}){const i=n.clone?{...t}:t;return nl(t)&&nl(e)&&Object.keys(e).forEach(r=>{nl(e[r])&&Object.prototype.hasOwnProperty.call(t,r)&&nl(t[r])?i[r]=so(t[r],e[r],n):n.clone?i[r]=nl(e[r])?pH(e[r]):e[r]:i[r]=e[r]}),i}const zne=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>({...n,[i.key]:i.val}),{})};function Hne(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5,...r}=t,s=zne(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-i/100}${n})`}function u(h,m){const g=o.indexOf(m);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(g!==-1&&typeof e[o[g]]=="number"?e[o[g]]:m)-i/100}${n})`}function c(h){return o.indexOf(h)+1<o.length?u(h,o[o.indexOf(h)+1]):a(h)}function d(h){const m=o.indexOf(h);return m===0?a(o[1]):m===o.length-1?l(o[m]):u(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:l,between:u,only:c,not:d,unit:n,...r}}function Vne(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(i=>i.startsWith("@container")).sort((i,r)=>{var o,a;const s=/min-width:\s*([0-9.]+)/;return+(((o=i.match(s))==null?void 0:o[1])||0)-+(((a=r.match(s))==null?void 0:a[1])||0)});return n.length?n.reduce((i,r)=>{const s=e[r];return delete i[r],i[r]=s,i},{...e}):e}function $ne(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function Gne(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,i,r]=n,s=Number.isNaN(+i)?i||0:+i;return t.containerQueries(r).up(s)}function Wne(t){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function n(s,o){s.up=(...a)=>e(t.breakpoints.up(...a),o),s.down=(...a)=>e(t.breakpoints.down(...a),o),s.between=(...a)=>e(t.breakpoints.between(...a),o),s.only=(...a)=>e(t.breakpoints.only(...a),o),s.not=(...a)=>{const l=e(t.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const i={},r=s=>(n(i,s),i);return n(r),{...t,containerQueries:r}}const jne={borderRadius:4},qne=jne;function py(t,e){return e?so(t,e,{clone:!1}):t}const H2={xs:0,sm:600,md:900,lg:1200,xl:1536},KO={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${H2[t]}px)`},Xne={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:H2[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Tu(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const s=i.breakpoints||KO;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=i.breakpoints||KO;return Object.keys(e).reduce((o,a)=>{if($ne(s.keys,a)){const l=Gne(i.containerQueries?i:Xne,a);l&&(o[l]=n(e[a],a))}else if(Object.keys(s.values||H2).includes(a)){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function Yne(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((i,r)=>{const s=t.up(r);return i[s]={},i},{}))||{}}function Kne(t,e){return t.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function lv(t){if(typeof t!="string")throw new Error(Gh(7));return t.charAt(0).toUpperCase()+t.slice(1)}function V2(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,t)}function TT(t,e,n,i=n){let r;return typeof t=="function"?r=t(n):Array.isArray(t)?r=t[n]||i:r=V2(t,n)||i,e&&(r=e(r,i,t)),r}function Mi(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,u=V2(l,i)||{};return Tu(o,a,d=>{let h=TT(u,r,d);return d===h&&typeof d=="string"&&(h=TT(u,r,`${e}${d==="default"?"":lv(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function Qne(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Zne={m:"margin",p:"padding"},Jne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},QO={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},eie=Qne(t=>{if(t.length>2)if(QO[t])t=QO[t];else return[t];const[e,n]=t.split(""),i=Zne[e],r=Jne[n]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),TD=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],bD=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...TD,...bD];function l_(t,e,n,i){const r=V2(t,e,!0)??n;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=r[o];return s>=0?a:typeof a=="number"?-a:`-${a}`}:typeof r=="function"?r:()=>{}}function wD(t){return l_(t,"spacing",8)}function u_(t,e){return typeof e=="string"||e==null?e:t(e)}function tie(t,e){return n=>t.reduce((i,r)=>(i[r]=u_(e,n),i),{})}function nie(t,e,n,i){if(!e.includes(n))return null;const r=eie(n),s=tie(r,i),o=t[n];return Tu(t,o,s)}function mH(t,e){const n=wD(t.theme);return Object.keys(t).map(i=>nie(t,e,i,n)).reduce(py,{})}function vi(t){return mH(t,TD)}vi.propTypes={};vi.filterProps=TD;function _i(t){return mH(t,bD)}_i.propTypes={};_i.filterProps=bD;function gH(t=8,e=wD({spacing:t})){if(t.mui)return t;const n=(...i)=>(i.length===0?[1]:i).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function $2(...t){const e=t.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),n=i=>Object.keys(i).reduce((r,s)=>e[s]?py(r,e[s](i)):r,{});return n.propTypes={},n.filterProps=t.reduce((i,r)=>i.concat(r.filterProps),[]),n}function ko(t){return typeof t!="number"?t:`${t}px solid`}function Zo(t,e){return Mi({prop:t,themeKey:"borders",transform:e})}const iie=Zo("border",ko),rie=Zo("borderTop",ko),sie=Zo("borderRight",ko),oie=Zo("borderBottom",ko),aie=Zo("borderLeft",ko),lie=Zo("borderColor"),uie=Zo("borderTopColor"),cie=Zo("borderRightColor"),die=Zo("borderBottomColor"),hie=Zo("borderLeftColor"),fie=Zo("outline",ko),pie=Zo("outlineColor"),G2=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=l_(t.theme,"shape.borderRadius",4),n=i=>({borderRadius:u_(e,i)});return Tu(t,t.borderRadius,n)}return null};G2.propTypes={};G2.filterProps=["borderRadius"];$2(iie,rie,sie,oie,aie,lie,uie,cie,die,hie,G2,fie,pie);const W2=t=>{if(t.gap!==void 0&&t.gap!==null){const e=l_(t.theme,"spacing",8),n=i=>({gap:u_(e,i)});return Tu(t,t.gap,n)}return null};W2.propTypes={};W2.filterProps=["gap"];const j2=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=l_(t.theme,"spacing",8),n=i=>({columnGap:u_(e,i)});return Tu(t,t.columnGap,n)}return null};j2.propTypes={};j2.filterProps=["columnGap"];const q2=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=l_(t.theme,"spacing",8),n=i=>({rowGap:u_(e,i)});return Tu(t,t.rowGap,n)}return null};q2.propTypes={};q2.filterProps=["rowGap"];const mie=Mi({prop:"gridColumn"}),gie=Mi({prop:"gridRow"}),yie=Mi({prop:"gridAutoFlow"}),vie=Mi({prop:"gridAutoColumns"}),_ie=Mi({prop:"gridAutoRows"}),xie=Mi({prop:"gridTemplateColumns"}),Sie=Mi({prop:"gridTemplateRows"}),Tie=Mi({prop:"gridTemplateAreas"}),bie=Mi({prop:"gridArea"});$2(W2,j2,q2,mie,gie,yie,vie,_ie,xie,Sie,Tie,bie);function cm(t,e){return e==="grey"?e:t}const wie=Mi({prop:"color",themeKey:"palette",transform:cm}),Eie=Mi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:cm}),Cie=Mi({prop:"backgroundColor",themeKey:"palette",transform:cm});$2(wie,Eie,Cie);function Js(t){return t<=1&&t!==0?`${t*100}%`:t}const Aie=Mi({prop:"width",transform:Js}),ED=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,s,o,a,l;const i=((o=(s=(r=t.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:o[n])||H2[n];return i?((l=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${i}${t.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Js(n)}};return Tu(t,t.maxWidth,e)}return null};ED.filterProps=["maxWidth"];const Mie=Mi({prop:"minWidth",transform:Js}),Pie=Mi({prop:"height",transform:Js}),Iie=Mi({prop:"maxHeight",transform:Js}),Rie=Mi({prop:"minHeight",transform:Js});Mi({prop:"size",cssProperty:"width",transform:Js});Mi({prop:"size",cssProperty:"height",transform:Js});const Die=Mi({prop:"boxSizing"});$2(Aie,ED,Mie,Pie,Iie,Rie,Die);const kie={border:{themeKey:"borders",transform:ko},borderTop:{themeKey:"borders",transform:ko},borderRight:{themeKey:"borders",transform:ko},borderBottom:{themeKey:"borders",transform:ko},borderLeft:{themeKey:"borders",transform:ko},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ko},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:G2},color:{themeKey:"palette",transform:cm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:cm},backgroundColor:{themeKey:"palette",transform:cm},p:{style:_i},pt:{style:_i},pr:{style:_i},pb:{style:_i},pl:{style:_i},px:{style:_i},py:{style:_i},padding:{style:_i},paddingTop:{style:_i},paddingRight:{style:_i},paddingBottom:{style:_i},paddingLeft:{style:_i},paddingX:{style:_i},paddingY:{style:_i},paddingInline:{style:_i},paddingInlineStart:{style:_i},paddingInlineEnd:{style:_i},paddingBlock:{style:_i},paddingBlockStart:{style:_i},paddingBlockEnd:{style:_i},m:{style:vi},mt:{style:vi},mr:{style:vi},mb:{style:vi},ml:{style:vi},mx:{style:vi},my:{style:vi},margin:{style:vi},marginTop:{style:vi},marginRight:{style:vi},marginBottom:{style:vi},marginLeft:{style:vi},marginX:{style:vi},marginY:{style:vi},marginInline:{style:vi},marginInlineStart:{style:vi},marginInlineEnd:{style:vi},marginBlock:{style:vi},marginBlockStart:{style:vi},marginBlockEnd:{style:vi},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:W2},rowGap:{style:q2},columnGap:{style:j2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Js},maxWidth:{style:ED},minWidth:{transform:Js},height:{transform:Js},maxHeight:{transform:Js},minHeight:{transform:Js},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},c_=kie;function Lie(...t){const e=t.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return t.every(i=>n.size===Object.keys(i).length)}function Nie(t,e){return typeof t=="function"?t(e):t}function Oie(){function t(n,i,r,s){const o={[n]:i,theme:r},a=s[n];if(!a)return{[n]:i};const{cssProperty:l=n,themeKey:u,transform:c,style:d}=a;if(i==null)return null;if(u==="typography"&&i==="inherit")return{[n]:i};const h=V2(r,u)||{};return d?d(o):Tu(o,i,g=>{let v=TT(h,c,g);return g===v&&typeof g=="string"&&(v=TT(h,c,`${n}${g==="default"?"":lv(g)}`,g)),l===!1?v:{[l]:v}})}function e(n){const{sx:i,theme:r={}}=n||{};if(!i)return null;const s=r.unstable_sxConfig??c_;function o(a){let l=a;if(typeof a=="function")l=a(r);else if(typeof a!="object")return a;if(!l)return null;const u=Yne(r.breakpoints),c=Object.keys(u);let d=u;return Object.keys(l).forEach(h=>{const m=Nie(l[h],r);if(m!=null)if(typeof m=="object")if(s[h])d=py(d,t(h,m,r,s));else{const g=Tu({theme:r},m,v=>({[h]:v}));Lie(g,m)?d[h]=e({sx:m,theme:r}):d=py(d,g)}else d=py(d,t(h,m,r,s))}),Vne(r,Kne(c,d))}return Array.isArray(i)?i.map(o):o(i)}return e}const yH=Oie();yH.filterProps=["sx"];const Im=yH;function Uie(t,e){var i;const n=this;if(n.vars){if(!((i=n.colorSchemes)!=null&&i[t])||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function CD(t={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:s={},...o}=t,a=Hne(n),l=gH(r);let u=so({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:l,shape:{...qne,...s}},o);return u=Wne(u),u.applyStyles=Uie,u=e.reduce((c,d)=>so(c,d),u),u.unstable_sxConfig={...c_,...o==null?void 0:o.unstable_sxConfig},u.unstable_sx=function(d){return Im({sx:d,theme:this})},u}function Fie(t){return Object.keys(t).length===0}function vH(t=null){const e=U.useContext(z2);return!e||Fie(e)?t:e}const Bie=CD();function _H(t=Bie){return vH(t)}const zie=t=>{var i;const e={systemProps:{},otherProps:{}},n=((i=t==null?void 0:t.theme)==null?void 0:i.unstable_sxConfig)??c_;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function Hie(t){const{sx:e,...n}=t,{systemProps:i,otherProps:r}=zie(n);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return nl(a)?{...i,...a}:i}:s={...i,...e},{...r,sx:s}}const ZO=t=>t,Vie=()=>{let t=ZO;return{configure(e){t=e},generate(e){return t(e)},reset(){t=ZO}}},$ie=Vie(),Gie=$ie;function xH(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=xH(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function hl(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=xH(t))&&(i&&(i+=" "),i+=e);return i}const Wie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Jo(t,e,n="Mui"){const i=Wie[e];return i?`${n}-${i}`:`${Gie.generate(t)}-${e}`}function La(t,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=Jo(t,r,n)}),i}function SH(t){const{variants:e,...n}=t,i={variants:e,style:YO(n),isProcessed:!0};return i.style===n||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=YO(r.style))}),i}const jie=CD();function IS(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function qie(t){return t?(e,n)=>n[t]:null}function Xie(t,e,n){t.theme=Qie(t.theme)?n:t.theme[e]||t.theme}function RS(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(i=>RS(t,i));if(Array.isArray(n==null?void 0:n.variants)){let i;if(n.isProcessed)i=n.style;else{const{variants:r,...s}=n;i=s}return TH(t,n.variants,[i])}return n!=null&&n.isProcessed?n.style:n}function TH(t,e,n=[]){var r;let i;e:for(let s=0;s<e.length;s+=1){const o=e[s];if(typeof o.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!o.props(i))continue}else for(const a in o.props)if(t[a]!==o.props[a]&&((r=t.ownerState)==null?void 0:r[a])!==o.props[a])continue e;typeof o.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(o.style(i))):n.push(o.style)}return n}function Yie(t={}){const{themeId:e,defaultTheme:n=jie,rootShouldForwardProp:i=IS,slotShouldForwardProp:r=IS}=t;function s(a){Xie(a,e,n)}return(a,l={})=>{Bne(a,P=>P.filter(A=>A!==Im));const{name:u,slot:c,skipVariantsResolver:d,skipSx:h,overridesResolver:m=qie(Jie(c)),...g}=l,v=d!==void 0?d:c&&c!=="Root"&&c!=="root"||!1,_=h||!1;let y=IS;c==="Root"||c==="root"?y=i:c?y=r:Zie(a)&&(y=void 0);const S=Fne(a,{shouldForwardProp:y,label:Kie(),...g}),x=P=>{if(typeof P=="function"&&P.__emotion_real!==P)return function(D){return RS(D,P)};if(nl(P)){const A=SH(P);return A.variants?function(O){return RS(O,A)}:A.style}return P},w=(...P)=>{const A=[],D=P.map(x),O=[];if(A.push(s),u&&m&&O.push(function(W){var Q,oe;const Y=(oe=(Q=W.theme.components)==null?void 0:Q[u])==null?void 0:oe.styleOverrides;if(!Y)return null;const ie={};for(const z in Y)ie[z]=RS(W,Y[z]);return m(W,ie)}),u&&!v&&O.push(function(W){var ie,Q;const G=W.theme,Y=(Q=(ie=G==null?void 0:G.components)==null?void 0:ie[u])==null?void 0:Q.variants;return Y?TH(W,Y):null}),_||O.push(Im),Array.isArray(D[0])){const k=D.shift(),W=new Array(A.length).fill(""),G=new Array(O.length).fill("");let Y;Y=[...W,...k,...G],Y.raw=[...W,...k.raw,...G],A.unshift(Y)}const H=[...A,...D,...O],E=S(...H);return a.muiName&&(E.muiName=a.muiName),E};return S.withConfig&&(w.withConfig=S.withConfig),w}}function Kie(t,e){let n;return n}function Qie(t){for(const e in t)return!1;return!0}function Zie(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Jie(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function bT(t,e){const n={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const r=i;if(r==="components"||r==="slots")n[r]={...t[r],...n[r]};else if(r==="componentsProps"||r==="slotProps"){const s=t[r],o=e[r];if(!o)n[r]=s||{};else if(!s)n[r]=o;else{n[r]={...o};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const l=a;n[r][l]=bT(s[l],o[l])}}}else n[r]===void 0&&(n[r]=t[r])}return n}function ere(t){const{theme:e,name:n,props:i}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?i:bT(e.components[n].defaultProps,i)}function tre({props:t,name:e,defaultTheme:n,themeId:i}){let r=_H(n);return i&&(r=r[i]||r),ere({theme:r,name:e,props:t})}const nre=typeof window<"u"?U.useLayoutEffect:U.useEffect,Kc=nre;function ire(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function AD(t,e=0,n=1){return ire(t,e,n)}function rre(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Qc(t){if(t.type)return t;if(t.charAt(0)==="#")return Qc(rre(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Gh(9,t));let i=t.substring(e+1,t.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Gh(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:n,values:i,colorSpace:r}}const sre=t=>{const e=Qc(t);return e.values.slice(0,3).map((n,i)=>e.type.includes("hsl")&&i!==0?`${n}%`:n).join(" ")},X0=(t,e)=>{try{return sre(t)}catch{return t}};function X2(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return e.includes("rgb")?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.includes("color")?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function bH(t){t=Qc(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),o=(u,c=(u+n/30)%12)=>r-s*Math.max(Math.min(c-3,9-c,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),X2({type:a,values:l})}function NP(t){t=Qc(t);let e=t.type==="hsl"||t.type==="hsla"?Qc(bH(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function ore(t,e){const n=NP(t),i=NP(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function are(t,e){return t=Qc(t),e=AD(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,X2(t)}function Jx(t,e,n){try{return are(t,e)}catch{return t}}function MD(t,e){if(t=Qc(t),e=AD(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return X2(t)}function Un(t,e,n){try{return MD(t,e)}catch{return t}}function PD(t,e){if(t=Qc(t),e=AD(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return X2(t)}function Fn(t,e,n){try{return PD(t,e)}catch{return t}}function lre(t,e=.15){return NP(t)>.5?MD(t,e):PD(t,e)}function e1(t,e,n){try{return lre(t,e)}catch{return t}}function OP(t){return t&&t.ownerDocument||document}function ure(t){return OP(t).defaultView||window}function UP(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let JO=0;function cre(t){const[e,n]=U.useState(t),i=t||e;return U.useEffect(()=>{e==null&&(JO+=1,n(`mui-${JO}`))},[e]),i}const dre={...WS},e4=dre.useId;function wH(t){if(e4!==void 0){const e=e4();return t??e}return cre(t)}function hre({controlled:t,default:e,name:n,state:i="value"}){const{current:r}=U.useRef(t!==void 0),[s,o]=U.useState(e),a=r?t:s,l=U.useCallback(u=>{r||o(u)},[]);return[a,l]}function uv(...t){return U.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{UP(n,e)})},t)}function ea(t,e,n=void 0){const i={};for(const r in t){const s=t[r];let o="",a=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(o+=(a===!0?"":" ")+e(u),a=!1,n&&n[u]&&(o+=" "+n[u]))}i[r]=o}return i}function fre(t){return typeof t=="string"}function pre(t,e,n){return t===void 0||fre(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function mre(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&typeof t[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=t[i]}),n}function t4(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function gre(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const m=hl(n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),g={...n==null?void 0:n.style,...r==null?void 0:r.style,...i==null?void 0:i.style},v={...n,...r,...i};return m.length>0&&(v.className=m),Object.keys(g).length>0&&(v.style=g),{props:v,internalRef:void 0}}const o=mre({...r,...i}),a=t4(i),l=t4(r),u=e(o),c=hl(u==null?void 0:u.className,n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),d={...u==null?void 0:u.style,...n==null?void 0:n.style,...r==null?void 0:r.style,...i==null?void 0:i.style},h={...u,...n,...l,...a};return c.length>0&&(h.className=c),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:u.ref}}function yre(t,e,n){return typeof t=="function"?t(e,n):t}function Vo(t){var d;const{elementType:e,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:r=!1,...s}=t,o=r?{}:yre(n,i),{props:a,internalRef:l}=gre({...s,externalSlotProps:o}),u=uv(l,o==null?void 0:o.ref,(d=t.additionalProps)==null?void 0:d.ref);return pre(e,{...a,ref:u},i)}function vre(t){var e;return parseInt(U.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}const _re=U.createContext(null),EH=_re;function ID(){return U.useContext(EH)}const xre=typeof Symbol=="function"&&Symbol.for,Sre=xre?Symbol.for("mui.nested"):"__THEME_NESTED__";function Tre(t,e){return typeof e=="function"?e(t):{...t,...e}}function bre(t){const{children:e,theme:n}=t,i=ID(),r=U.useMemo(()=>{const s=i===null?{...n}:Tre(i,n);return s!=null&&(s[Sre]=i!==null),s},[n,i]);return $(EH.Provider,{value:r,children:e})}const CH=U.createContext();function wre({value:t,...e}){return $(CH.Provider,{value:t??!0,...e})}const RD=()=>U.useContext(CH)??!1,AH=U.createContext(void 0);function Ere({value:t,children:e}){return $(AH.Provider,{value:t,children:e})}function Cre(t){const{theme:e,name:n,props:i}=t;if(!e||!e.components||!e.components[n])return i;const r=e.components[n];return r.defaultProps?bT(r.defaultProps,i):!r.styleOverrides&&!r.variants?bT(r,i):i}function Are({props:t,name:e}){const n=U.useContext(AH);return Cre({props:t,name:e,theme:{components:n}})}const n4={};function i4(t,e,n,i=!1){return U.useMemo(()=>{const r=t&&e[t]||e;if(typeof n=="function"){const s=n(r),o=t?{...e,[t]:s}:s;return i?()=>o:o}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,i])}function MH(t){const{children:e,theme:n,themeId:i}=t,r=vH(n4),s=ID()||n4,o=i4(i,r,n),a=i4(i,s,n,!0),l=o.direction==="rtl";return $(bre,{theme:a,children:$(z2.Provider,{value:o,children:$(wre,{value:l,children:$(Ere,{value:o==null?void 0:o.components,children:e})})})})}const r4={theme:void 0};function Mre(t){let e,n;return function(r){let s=e;return(s===void 0||r.theme!==n)&&(r4.theme=r.theme,s=SH(t(r4)),e=s,n=r.theme),s}}const DD="mode",kD="color-scheme",Pre="data-color-scheme";function Ire(t){const{defaultLightColorScheme:e="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=DD,colorSchemeStorageKey:r=kD,attribute:s=Pre,colorSchemeNode:o="document.documentElement",nonce:a}=t||{};let l="",u=s;if(s==="class"&&(u=".%s"),s==="data"&&(u="[data-%s]"),u.startsWith(".")){const d=u.substring(1);l+=`${o}.classList.remove('${d}'.replace('%s', light), '${d}'.replace('%s', dark));
      ${o}.classList.add('${d}'.replace('%s', colorScheme));`}const c=u.match(/\[([^\]]+)\]/);if(c){const[d,h]=c[1].split("=");h||(l+=`${o}.removeAttribute('${d}'.replace('%s', light));
      ${o}.removeAttribute('${d}'.replace('%s', dark));`),l+=`
      ${o}.setAttribute('${d}'.replace('%s', colorScheme), ${h?`${h}.replace('%s', colorScheme)`:'""'});`}else l+=`${o}.setAttribute('${u}', colorScheme);`;return $("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?a:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || 'system';
  const dark = localStorage.getItem('${r}-dark') || '${n}';
  const light = localStorage.getItem('${r}-light') || '${e}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${l}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function s4(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function PH(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function Rre(t){return PH(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function FC(t,e){if(typeof window>"u")return;let n;try{n=localStorage.getItem(t)||void 0,n||localStorage.setItem(t,e)}catch{}return n||e}function Dre(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:i,supportedColorSchemes:r=[],modeStorageKey:s=DD,colorSchemeStorageKey:o=kD,storageWindow:a=typeof window>"u"?void 0:window}=t,l=r.join(","),u=r.length>1,[c,d]=U.useState(()=>{const x=FC(s,e),w=FC(`${o}-light`,n),P=FC(`${o}-dark`,i);return{mode:x,systemMode:s4(x),lightColorScheme:w,darkColorScheme:P}}),[,h]=U.useState(!1),m=U.useRef(!1);U.useEffect(()=>{u&&h(!0),m.current=!0},[u]);const g=Rre(c),v=U.useCallback(x=>{d(w=>{if(x===w.mode)return w;const P=x??e;try{localStorage.setItem(s,P)}catch{}return{...w,mode:P,systemMode:s4(P)}})},[s,e]),_=U.useCallback(x=>{x?typeof x=="string"?x&&!l.includes(x)?console.error(`\`${x}\` does not exist in \`theme.colorSchemes\`.`):d(w=>{const P={...w};return PH(w,A=>{try{localStorage.setItem(`${o}-${A}`,x)}catch{}A==="light"&&(P.lightColorScheme=x),A==="dark"&&(P.darkColorScheme=x)}),P}):d(w=>{const P={...w},A=x.light===null?n:x.light,D=x.dark===null?i:x.dark;if(A)if(!l.includes(A))console.error(`\`${A}\` does not exist in \`theme.colorSchemes\`.`);else{P.lightColorScheme=A;try{localStorage.setItem(`${o}-light`,A)}catch{}}if(D)if(!l.includes(D))console.error(`\`${D}\` does not exist in \`theme.colorSchemes\`.`);else{P.darkColorScheme=D;try{localStorage.setItem(`${o}-dark`,D)}catch{}}return P}):d(w=>{try{localStorage.setItem(`${o}-light`,n),localStorage.setItem(`${o}-dark`,i)}catch{}return{...w,lightColorScheme:n,darkColorScheme:i}})},[l,o,n,i]),y=U.useCallback(x=>{c.mode==="system"&&d(w=>{const P=x!=null&&x.matches?"dark":"light";return w.systemMode===P?w:{...w,systemMode:P}})},[c.mode]),S=U.useRef(y);return S.current=y,U.useEffect(()=>{if(typeof window.matchMedia!="function"||!u)return;const x=(...P)=>S.current(...P),w=window.matchMedia("(prefers-color-scheme: dark)");return w.addListener(x),x(w),()=>{w.removeListener(x)}},[u]),U.useEffect(()=>{if(a&&u){const x=w=>{const P=w.newValue;typeof w.key=="string"&&w.key.startsWith(o)&&(!P||l.match(P))&&(w.key.endsWith("light")&&_({light:P}),w.key.endsWith("dark")&&_({dark:P})),w.key===s&&(!P||["light","dark","system"].includes(P))&&v(P||e)};return a.addEventListener("storage",x),()=>{a.removeEventListener("storage",x)}}},[_,v,s,o,l,e,a,u]),{...c,mode:m.current||!u?c.mode:void 0,systemMode:m.current||!u?c.systemMode:void 0,colorScheme:m.current||!u?g:void 0,setMode:v,setColorScheme:_}}const kre="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Lre(t){const{themeId:e,theme:n={},modeStorageKey:i=DD,colorSchemeStorageKey:r=kD,disableTransitionOnChange:s=!1,defaultColorScheme:o,resolveTheme:a}=t,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=U.createContext(void 0),c=()=>U.useContext(u)||l;function d(v){var _e,De,Ve,Ne,dt;const{children:_,theme:y,modeStorageKey:S=i,colorSchemeStorageKey:x=r,disableTransitionOnChange:w=s,storageWindow:P=typeof window>"u"?void 0:window,documentNode:A=typeof document>"u"?void 0:document,colorSchemeNode:D=typeof document>"u"?void 0:document.documentElement,disableNestedContext:O=!1,disableStyleSheetGeneration:H=!1,defaultMode:E="system"}=v,k=U.useRef(!1),W=ID(),G=U.useContext(u),Y=!!G&&!O,ie=U.useMemo(()=>y||(typeof n=="function"?n():n),[y]),Q=ie[e],{colorSchemes:oe={},components:z={},cssVarPrefix:ee,...te}=Q||ie,ce=Object.keys(oe).filter(qe=>!!oe[qe]).join(","),Te=U.useMemo(()=>ce.split(","),[ce]),Ue=typeof o=="string"?o:o.light,he=typeof o=="string"?o:o.dark,xe=oe[Ue]&&oe[he]?E:((De=(_e=oe[te.defaultColorScheme])==null?void 0:_e.palette)==null?void 0:De.mode)||((Ve=te.palette)==null?void 0:Ve.mode),{mode:Fe,setMode:He,systemMode:ot,lightColorScheme:Ae,darkColorScheme:Ge,colorScheme:Le,setColorScheme:le}=Dre({supportedColorSchemes:Te,defaultLightColorScheme:Ue,defaultDarkColorScheme:he,modeStorageKey:S,colorSchemeStorageKey:x,defaultMode:xe,storageWindow:P});let j=Fe,Me=Le;Y&&(j=G.mode,Me=G.colorScheme);const Re=Me||te.defaultColorScheme,Be=((Ne=te.generateThemeVars)==null?void 0:Ne.call(te))||te.vars,We={...te,components:z,colorSchemes:oe,cssVarPrefix:ee,vars:Be};if(typeof We.generateSpacing=="function"&&(We.spacing=We.generateSpacing()),Re){const qe=oe[Re];qe&&typeof qe=="object"&&Object.keys(qe).forEach(Qe=>{qe[Qe]&&typeof qe[Qe]=="object"?We[Qe]={...We[Qe],...qe[Qe]}:We[Qe]=qe[Qe]})}const rt=te.colorSchemeSelector;U.useEffect(()=>{if(Me&&D&&rt&&rt!=="media"){const qe=rt;let Qe=rt;if(qe==="class"&&(Qe=".%s"),qe==="data"&&(Qe="[data-%s]"),qe!=null&&qe.startsWith("data-")&&!qe.includes("%s")&&(Qe=`[${qe}="%s"]`),Qe.startsWith("."))D.classList.remove(...Te.map(Gt=>Qe.substring(1).replace("%s",Gt))),D.classList.add(Qe.substring(1).replace("%s",Me));else{const Gt=Qe.replace("%s",Me).match(/\[([^\]]+)\]/);if(Gt){const[Ke,ut]=Gt[1].split("=");ut||Te.forEach(ct=>{D.removeAttribute(Ke.replace(Me,ct))}),D.setAttribute(Ke,ut?ut.replace(/"|'/g,""):"")}else D.setAttribute(Qe,Me)}}},[Me,rt,D,Te]),U.useEffect(()=>{let qe;if(w&&k.current&&A){const Qe=A.createElement("style");Qe.appendChild(A.createTextNode(kre)),A.head.appendChild(Qe),window.getComputedStyle(A.body),qe=setTimeout(()=>{A.head.removeChild(Qe)},1)}return()=>{clearTimeout(qe)}},[Me,w,A]),U.useEffect(()=>(k.current=!0,()=>{k.current=!1}),[]);const st=U.useMemo(()=>({allColorSchemes:Te,colorScheme:Me,darkColorScheme:Ge,lightColorScheme:Ae,mode:j,setColorScheme:le,setMode:He,systemMode:ot}),[Te,Me,Ge,Ae,j,le,He,ot]);let q=!0;(H||te.cssVariables===!1||Y&&(W==null?void 0:W.cssVarPrefix)===ee)&&(q=!1);const V=Nt(U.Fragment,{children:[$(MH,{themeId:Q?e:void 0,theme:a?a(We):We,children:_}),q&&$(Une,{styles:((dt=We.generateStyleSheets)==null?void 0:dt.call(We))||[]})]});return Y?V:$(u.Provider,{value:st,children:V})}const h=typeof o=="string"?o:o.light,m=typeof o=="string"?o:o.dark;return{CssVarsProvider:d,useColorScheme:c,getInitColorSchemeScript:v=>Ire({colorSchemeStorageKey:r,defaultLightColorScheme:h,defaultDarkColorScheme:m,modeStorageKey:i,...v})}}function Nre(t=""){function e(...i){if(!i.length)return"";const r=i[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${r}${e(...i.slice(1))})`:`, ${r}`}return(i,...r)=>`var(--${t?`${t}-`:""}${i}${e(...r)})`}const o4=(t,e,n,i=[])=>{let r=t;e.forEach((s,o)=>{o===e.length-1?Array.isArray(r)?r[Number(s)]=n:r&&typeof r=="object"&&(r[s]=n):r&&typeof r=="object"&&(r[s]||(r[s]=i.includes(s)?[]:{}),r=r[s])})},Ore=(t,e,n)=>{function i(r,s=[],o=[]){Object.entries(r).forEach(([a,l])=>{(!n||n&&!n([...s,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?i(l,[...s,a],Array.isArray(l)?[...o,a]:o):e([...s,a],l,o))})}i(t)},Ure=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>t.includes(i))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function BC(t,e){const{prefix:n,shouldSkipGeneratingVar:i}=e||{},r={},s={},o={};return Ore(t,(a,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!i||!i(a,l))){const c=`--${n?`${n}-`:""}${a.join("-")}`,d=Ure(a,l);Object.assign(r,{[c]:d}),o4(s,a,`var(${c})`,u),o4(o,a,`var(${c}, ${d})`,u)}},a=>a[0]==="vars"),{css:r,vars:s,varsWithDefaults:o}}function Fre(t,e={}){const{getSelector:n=_,disableCssColorScheme:i,colorSchemeSelector:r}=e,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...l}=t,{vars:u,css:c,varsWithDefaults:d}=BC(l,e);let h=d;const m={},{[a]:g,...v}=s;if(Object.entries(v||{}).forEach(([x,w])=>{const{vars:P,css:A,varsWithDefaults:D}=BC(w,e);h=so(h,D),m[x]={css:A,vars:P}}),g){const{css:x,vars:w,varsWithDefaults:P}=BC(g,e);h=so(h,P),m[a]={css:x,vars:w}}function _(x,w){var A,D;let P=r;if(r==="class"&&(P=".%s"),r==="data"&&(P="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(P=`[${r}="%s"]`),x){if(P==="media")return t.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((D=(A=s[x])==null?void 0:A.palette)==null?void 0:D.mode)||x})`]:{":root":w}};if(P)return t.defaultColorScheme===x?`:root, ${P.replace("%s",String(x))}`:P.replace("%s",String(x))}return":root"}return{vars:h,generateThemeVars:()=>{let x={...u};return Object.entries(m).forEach(([,{vars:w}])=>{x=so(x,w)}),x},generateStyleSheets:()=>{var O,H;const x=[],w=t.defaultColorScheme||"light";function P(E,k){Object.keys(k).length&&x.push(typeof E=="string"?{[E]:{...k}}:E)}P(n(void 0,{...c}),c);const{[w]:A,...D}=m;if(A){const{css:E}=A,k=(H=(O=s[w])==null?void 0:O.palette)==null?void 0:H.mode,W=!i&&k?{colorScheme:k,...E}:{...E};P(n(w,{...W}),W)}return Object.entries(D).forEach(([E,{css:k}])=>{var Y,ie;const W=(ie=(Y=s[E])==null?void 0:Y.palette)==null?void 0:ie.mode,G=!i&&W?{colorScheme:W,...k}:{...k};P(n(E,{...G}),G)}),x}}}function Bre(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const zre={black:"#000",white:"#fff"},cv=zre,Hre={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Vre=Hre,$re={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Kf=$re,Gre={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Qf=Gre,Wre={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},f0=Wre,jre={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Zf=jre,qre={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Jf=qre,Xre={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ep=Xre;function IH(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:cv.white,default:cv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Yre=IH();function RH(){return{text:{primary:cv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:cv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const a4=RH();function l4(t,e,n,i){const r=i.light||i,s=i.dark||i*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=PD(t.main,r):e==="dark"&&(t.dark=MD(t.main,s)))}function Kre(t="light"){return t==="dark"?{main:Zf[200],light:Zf[50],dark:Zf[400]}:{main:Zf[700],light:Zf[400],dark:Zf[800]}}function Qre(t="light"){return t==="dark"?{main:Kf[200],light:Kf[50],dark:Kf[400]}:{main:Kf[500],light:Kf[300],dark:Kf[700]}}function Zre(t="light"){return t==="dark"?{main:Qf[500],light:Qf[300],dark:Qf[700]}:{main:Qf[700],light:Qf[400],dark:Qf[800]}}function Jre(t="light"){return t==="dark"?{main:Jf[400],light:Jf[300],dark:Jf[700]}:{main:Jf[700],light:Jf[500],dark:Jf[900]}}function ese(t="light"){return t==="dark"?{main:ep[400],light:ep[300],dark:ep[700]}:{main:ep[800],light:ep[500],dark:ep[900]}}function tse(t="light"){return t==="dark"?{main:f0[400],light:f0[300],dark:f0[700]}:{main:"#ed6c02",light:f0[500],dark:f0[900]}}function LD(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2,...r}=t,s=t.primary||Kre(e),o=t.secondary||Qre(e),a=t.error||Zre(e),l=t.info||Jre(e),u=t.success||ese(e),c=t.warning||tse(e);function d(v){return ore(v,a4.text.primary)>=n?a4.text.primary:Yre.text.primary}const h=({color:v,name:_,mainShade:y=500,lightShade:S=300,darkShade:x=700})=>{if(v={...v},!v.main&&v[y]&&(v.main=v[y]),!v.hasOwnProperty("main"))throw new Error(Gh(11,_?` (${_})`:"",y));if(typeof v.main!="string")throw new Error(Gh(12,_?` (${_})`:"",JSON.stringify(v.main)));return l4(v,"light",S,i),l4(v,"dark",x,i),v.contrastText||(v.contrastText=d(v.main)),v};let m;return e==="light"?m=IH():e==="dark"&&(m=RH()),so({common:{...cv},mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:u,name:"success"}),grey:Vre,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:i,...m},r)}function nse(t){const e={};return Object.entries(t).forEach(i=>{const[r,s]=i;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function ise(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function rse(t){return Math.round(t*1e5)/1e5}const u4={textTransform:"uppercase"},c4='"Roboto", "Helvetica", "Arial", sans-serif';function DH(t,e){const{fontFamily:n=c4,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...d}=typeof e=="function"?e(t):e,h=i/14,m=c||(_=>`${_/l*h}rem`),g=(_,y,S,x,w)=>({fontFamily:n,fontWeight:_,fontSize:m(y),lineHeight:S,...n===c4?{letterSpacing:`${rse(x/y)}em`}:{},...w,...u}),v={h1:g(r,96,1.167,-1.5),h2:g(r,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(o,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(o,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(o,14,1.75,.4,u4),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,u4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return so({htmlFontSize:l,pxToRem:m,fontFamily:n,fontSize:i,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...v},d,{clone:!1})}const sse=.2,ose=.14,ase=.12;function ni(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${sse})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${ose})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${ase})`].join(",")}const lse=["none",ni(0,2,1,-1,0,1,1,0,0,1,3,0),ni(0,3,1,-2,0,2,2,0,0,1,5,0),ni(0,3,3,-2,0,3,4,0,0,1,8,0),ni(0,2,4,-1,0,4,5,0,0,1,10,0),ni(0,3,5,-1,0,5,8,0,0,1,14,0),ni(0,3,5,-1,0,6,10,0,0,1,18,0),ni(0,4,5,-2,0,7,10,1,0,2,16,1),ni(0,5,5,-3,0,8,10,1,0,3,14,2),ni(0,5,6,-3,0,9,12,1,0,3,16,2),ni(0,6,6,-3,0,10,14,1,0,4,18,3),ni(0,6,7,-4,0,11,15,1,0,4,20,3),ni(0,7,8,-4,0,12,17,2,0,5,22,4),ni(0,7,8,-4,0,13,19,2,0,5,24,4),ni(0,7,9,-4,0,14,21,2,0,5,26,4),ni(0,8,9,-5,0,15,22,2,0,6,28,5),ni(0,8,10,-5,0,16,24,2,0,6,30,5),ni(0,8,11,-5,0,17,26,2,0,6,32,5),ni(0,9,11,-5,0,18,28,2,0,7,34,6),ni(0,9,12,-6,0,19,29,2,0,7,36,6),ni(0,10,13,-6,0,20,31,3,0,8,38,7),ni(0,10,13,-6,0,21,33,3,0,8,40,7),ni(0,10,14,-6,0,22,35,3,0,8,42,7),ni(0,11,14,-7,0,23,36,3,0,9,44,8),ni(0,11,15,-7,0,24,38,3,0,9,46,8)],use=lse,cse={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},dse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function d4(t){return`${Math.round(t)}ms`}function hse(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function fse(t){const e={...cse,...t.easing},n={...dse,...t.duration};return{getAutoHeightDuration:hse,create:(r=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0,...u}=s;return(Array.isArray(r)?r:[r]).map(c=>`${c} ${typeof o=="string"?o:d4(o)} ${a} ${typeof l=="string"?l:d4(l)}`).join(",")},...t,easing:e,duration:n}}const pse={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},mse=pse;function FP(t={},...e){const{breakpoints:n,mixins:i={},spacing:r,palette:s={},transitions:o={},typography:a={},shape:l,...u}=t;if(t.vars)throw new Error(Gh(20));const c=LD(s),d=CD(t);let h=so(d,{mixins:ise(d.breakpoints,i),palette:c,shadows:use.slice(),typography:DH(c,a),transitions:fse(o),zIndex:{...mse}});return h=so(h,u),h=e.reduce((m,g)=>so(m,g),h),h.unstable_sxConfig={...c_,...u==null?void 0:u.unstable_sxConfig},h.unstable_sx=function(g){return Im({sx:g,theme:this})},h}function gse(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const yse=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=gse(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function kH(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function LH(t){return t==="dark"?yse:[]}function vse(t){const{palette:e={mode:"light"},opacity:n,overlays:i,...r}=t,s=LD(e);return{palette:s,opacity:{...kH(s.mode),...n},overlays:i||LH(s.mode),...r}}function _se(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const xse=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],Sse=xse,Tse=t=>(e,n)=>{const i=t.rootSelector||":root",r=t.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const o={};return Sse(t.cssVarPrefix).forEach(a=>{o[a]=n[a],delete n[a]}),s==="media"?{[i]:n,"@media (prefers-color-scheme: dark)":{[i]:o}}:s?{[s.replace("%s",e)]:o,[`${i}, ${s.replace("%s",e)}`]:n}:{[i]:{...n,...o}}}if(s&&s!=="media")return`${i}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[i]:n}};if(s)return s.replace("%s",String(e))}return i};function bse(t){return nl(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function wse(t={}){const e={...t};function n(i){const r=Object.entries(i);for(let s=0;s<r.length;s++){const[o,a]=r[s];!bse(a)||o.startsWith("unstable_")?delete i[o]:nl(a)&&(i[o]={...a},n(i[o]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Ese(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function ze(t,e,n){!t[e]&&n&&(t[e]=n)}function Y0(t){return!t||!t.startsWith("hsl")?t:bH(t)}function zl(t,e){`${e}Channel`in t||(t[`${e}Channel`]=X0(Y0(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function Cse(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const qa=t=>{try{return t()}catch{}},Ase=(t="mui")=>Nre(t);function zC(t,e,n,i){if(!e)return;e=e===!0?{}:e;const r=i==="dark"?"dark":"light";if(!n){t[i]=vse({...e,palette:{mode:r,...e==null?void 0:e.palette}});return}const{palette:s,...o}=FP({...n,palette:{mode:r,...e==null?void 0:e.palette}});return t[i]={...e,palette:s,opacity:{...kH(r),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||LH(r)},o}function Mse(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:i,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=_se,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...u}=t,c=Object.keys(n)[0],d=i||(n.light&&c!=="light"?"light":c),h=Ase(s),{[d]:m,light:g,dark:v,..._}=n,y={..._};let S=m;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(Gh(21,d));const x=zC(y,S,u,d);g&&!y.light&&zC(y,g,void 0,"light"),v&&!y.dark&&zC(y,v,void 0,"dark");let w={defaultColorScheme:d,...x,cssVarPrefix:s,colorSchemeSelector:a,rootSelector:l,getCssVar:h,colorSchemes:y,font:{...nse(x.typography),...x.font},spacing:Cse(u.spacing)};Object.keys(w.colorSchemes).forEach(H=>{const E=w.colorSchemes[H].palette,k=W=>{const G=W.split("-"),Y=G[1],ie=G[2];return h(W,E[Y][ie])};if(E.mode==="light"&&(ze(E.common,"background","#fff"),ze(E.common,"onBackground","#000")),E.mode==="dark"&&(ze(E.common,"background","#000"),ze(E.common,"onBackground","#fff")),Ese(E,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),E.mode==="light"){ze(E.Alert,"errorColor",Un(E.error.light,.6)),ze(E.Alert,"infoColor",Un(E.info.light,.6)),ze(E.Alert,"successColor",Un(E.success.light,.6)),ze(E.Alert,"warningColor",Un(E.warning.light,.6)),ze(E.Alert,"errorFilledBg",k("palette-error-main")),ze(E.Alert,"infoFilledBg",k("palette-info-main")),ze(E.Alert,"successFilledBg",k("palette-success-main")),ze(E.Alert,"warningFilledBg",k("palette-warning-main")),ze(E.Alert,"errorFilledColor",qa(()=>E.getContrastText(E.error.main))),ze(E.Alert,"infoFilledColor",qa(()=>E.getContrastText(E.info.main))),ze(E.Alert,"successFilledColor",qa(()=>E.getContrastText(E.success.main))),ze(E.Alert,"warningFilledColor",qa(()=>E.getContrastText(E.warning.main))),ze(E.Alert,"errorStandardBg",Fn(E.error.light,.9)),ze(E.Alert,"infoStandardBg",Fn(E.info.light,.9)),ze(E.Alert,"successStandardBg",Fn(E.success.light,.9)),ze(E.Alert,"warningStandardBg",Fn(E.warning.light,.9)),ze(E.Alert,"errorIconColor",k("palette-error-main")),ze(E.Alert,"infoIconColor",k("palette-info-main")),ze(E.Alert,"successIconColor",k("palette-success-main")),ze(E.Alert,"warningIconColor",k("palette-warning-main")),ze(E.AppBar,"defaultBg",k("palette-grey-100")),ze(E.Avatar,"defaultBg",k("palette-grey-400")),ze(E.Button,"inheritContainedBg",k("palette-grey-300")),ze(E.Button,"inheritContainedHoverBg",k("palette-grey-A100")),ze(E.Chip,"defaultBorder",k("palette-grey-400")),ze(E.Chip,"defaultAvatarColor",k("palette-grey-700")),ze(E.Chip,"defaultIconColor",k("palette-grey-700")),ze(E.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ze(E.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ze(E.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ze(E.LinearProgress,"primaryBg",Fn(E.primary.main,.62)),ze(E.LinearProgress,"secondaryBg",Fn(E.secondary.main,.62)),ze(E.LinearProgress,"errorBg",Fn(E.error.main,.62)),ze(E.LinearProgress,"infoBg",Fn(E.info.main,.62)),ze(E.LinearProgress,"successBg",Fn(E.success.main,.62)),ze(E.LinearProgress,"warningBg",Fn(E.warning.main,.62)),ze(E.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.11)`),ze(E.Slider,"primaryTrack",Fn(E.primary.main,.62)),ze(E.Slider,"secondaryTrack",Fn(E.secondary.main,.62)),ze(E.Slider,"errorTrack",Fn(E.error.main,.62)),ze(E.Slider,"infoTrack",Fn(E.info.main,.62)),ze(E.Slider,"successTrack",Fn(E.success.main,.62)),ze(E.Slider,"warningTrack",Fn(E.warning.main,.62));const W=e1(E.background.default,.8);ze(E.SnackbarContent,"bg",W),ze(E.SnackbarContent,"color",qa(()=>E.getContrastText(W))),ze(E.SpeedDialAction,"fabHoverBg",e1(E.background.paper,.15)),ze(E.StepConnector,"border",k("palette-grey-400")),ze(E.StepContent,"border",k("palette-grey-400")),ze(E.Switch,"defaultColor",k("palette-common-white")),ze(E.Switch,"defaultDisabledColor",k("palette-grey-100")),ze(E.Switch,"primaryDisabledColor",Fn(E.primary.main,.62)),ze(E.Switch,"secondaryDisabledColor",Fn(E.secondary.main,.62)),ze(E.Switch,"errorDisabledColor",Fn(E.error.main,.62)),ze(E.Switch,"infoDisabledColor",Fn(E.info.main,.62)),ze(E.Switch,"successDisabledColor",Fn(E.success.main,.62)),ze(E.Switch,"warningDisabledColor",Fn(E.warning.main,.62)),ze(E.TableCell,"border",Fn(Jx(E.divider,1),.88)),ze(E.Tooltip,"bg",Jx(E.grey[700],.92))}if(E.mode==="dark"){ze(E.Alert,"errorColor",Fn(E.error.light,.6)),ze(E.Alert,"infoColor",Fn(E.info.light,.6)),ze(E.Alert,"successColor",Fn(E.success.light,.6)),ze(E.Alert,"warningColor",Fn(E.warning.light,.6)),ze(E.Alert,"errorFilledBg",k("palette-error-dark")),ze(E.Alert,"infoFilledBg",k("palette-info-dark")),ze(E.Alert,"successFilledBg",k("palette-success-dark")),ze(E.Alert,"warningFilledBg",k("palette-warning-dark")),ze(E.Alert,"errorFilledColor",qa(()=>E.getContrastText(E.error.dark))),ze(E.Alert,"infoFilledColor",qa(()=>E.getContrastText(E.info.dark))),ze(E.Alert,"successFilledColor",qa(()=>E.getContrastText(E.success.dark))),ze(E.Alert,"warningFilledColor",qa(()=>E.getContrastText(E.warning.dark))),ze(E.Alert,"errorStandardBg",Un(E.error.light,.9)),ze(E.Alert,"infoStandardBg",Un(E.info.light,.9)),ze(E.Alert,"successStandardBg",Un(E.success.light,.9)),ze(E.Alert,"warningStandardBg",Un(E.warning.light,.9)),ze(E.Alert,"errorIconColor",k("palette-error-main")),ze(E.Alert,"infoIconColor",k("palette-info-main")),ze(E.Alert,"successIconColor",k("palette-success-main")),ze(E.Alert,"warningIconColor",k("palette-warning-main")),ze(E.AppBar,"defaultBg",k("palette-grey-900")),ze(E.AppBar,"darkBg",k("palette-background-paper")),ze(E.AppBar,"darkColor",k("palette-text-primary")),ze(E.Avatar,"defaultBg",k("palette-grey-600")),ze(E.Button,"inheritContainedBg",k("palette-grey-800")),ze(E.Button,"inheritContainedHoverBg",k("palette-grey-700")),ze(E.Chip,"defaultBorder",k("palette-grey-700")),ze(E.Chip,"defaultAvatarColor",k("palette-grey-300")),ze(E.Chip,"defaultIconColor",k("palette-grey-300")),ze(E.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ze(E.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ze(E.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ze(E.LinearProgress,"primaryBg",Un(E.primary.main,.5)),ze(E.LinearProgress,"secondaryBg",Un(E.secondary.main,.5)),ze(E.LinearProgress,"errorBg",Un(E.error.main,.5)),ze(E.LinearProgress,"infoBg",Un(E.info.main,.5)),ze(E.LinearProgress,"successBg",Un(E.success.main,.5)),ze(E.LinearProgress,"warningBg",Un(E.warning.main,.5)),ze(E.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.13)`),ze(E.Slider,"primaryTrack",Un(E.primary.main,.5)),ze(E.Slider,"secondaryTrack",Un(E.secondary.main,.5)),ze(E.Slider,"errorTrack",Un(E.error.main,.5)),ze(E.Slider,"infoTrack",Un(E.info.main,.5)),ze(E.Slider,"successTrack",Un(E.success.main,.5)),ze(E.Slider,"warningTrack",Un(E.warning.main,.5));const W=e1(E.background.default,.98);ze(E.SnackbarContent,"bg",W),ze(E.SnackbarContent,"color",qa(()=>E.getContrastText(W))),ze(E.SpeedDialAction,"fabHoverBg",e1(E.background.paper,.15)),ze(E.StepConnector,"border",k("palette-grey-600")),ze(E.StepContent,"border",k("palette-grey-600")),ze(E.Switch,"defaultColor",k("palette-grey-300")),ze(E.Switch,"defaultDisabledColor",k("palette-grey-600")),ze(E.Switch,"primaryDisabledColor",Un(E.primary.main,.55)),ze(E.Switch,"secondaryDisabledColor",Un(E.secondary.main,.55)),ze(E.Switch,"errorDisabledColor",Un(E.error.main,.55)),ze(E.Switch,"infoDisabledColor",Un(E.info.main,.55)),ze(E.Switch,"successDisabledColor",Un(E.success.main,.55)),ze(E.Switch,"warningDisabledColor",Un(E.warning.main,.55)),ze(E.TableCell,"border",Un(Jx(E.divider,1),.68)),ze(E.Tooltip,"bg",Jx(E.grey[700],.92))}zl(E.background,"default"),zl(E.background,"paper"),zl(E.common,"background"),zl(E.common,"onBackground"),zl(E,"divider"),Object.keys(E).forEach(W=>{const G=E[W];G&&typeof G=="object"&&(G.main&&ze(E[W],"mainChannel",X0(Y0(G.main))),G.light&&ze(E[W],"lightChannel",X0(Y0(G.light))),G.dark&&ze(E[W],"darkChannel",X0(Y0(G.dark))),G.contrastText&&ze(E[W],"contrastTextChannel",X0(Y0(G.contrastText))),W==="text"&&(zl(E[W],"primary"),zl(E[W],"secondary")),W==="action"&&(G.active&&zl(E[W],"active"),G.selected&&zl(E[W],"selected")))})}),w=e.reduce((H,E)=>so(H,E),w);const P={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:Tse(w)},{vars:A,generateThemeVars:D,generateStyleSheets:O}=Fre(w,P);return w.vars=A,Object.entries(w.colorSchemes[w.defaultColorScheme]).forEach(([H,E])=>{w[H]=E}),w.generateThemeVars=D,w.generateStyleSheets=O,w.generateSpacing=function(){return gH(u.spacing,wD(this))},w.getColorSchemeSelector=Bre(a),w.spacing=w.generateSpacing(),w.shouldSkipGeneratingVar=o,w.unstable_sxConfig={...c_,...u==null?void 0:u.unstable_sxConfig},w.unstable_sx=function(E){return Im({sx:E,theme:this})},w.toRuntimeSource=wse,w}function h4(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:LD({...n===!0?{}:n.palette,mode:e})})}function Y2(t={},...e){const{palette:n,cssVariables:i=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...o}=t,a=s||"light",l=r==null?void 0:r[a],u={...r,...n?{[a]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(i===!1){if(!("colorSchemes"in t))return FP(t,...e);let c=n;"palette"in t||u[a]&&(u[a]!==!0?c=u[a].palette:a==="dark"&&(c={mode:"dark"}));const d=FP({...t,palette:c},...e);return d.defaultColorScheme=a,d.colorSchemes=u,d.palette.mode==="light"&&(d.colorSchemes.light={...u.light!==!0&&u.light,palette:d.palette},h4(d,"dark",u.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:d.palette},h4(d,"light",u.light)),d}return!n&&!("light"in u)&&a==="light"&&(u.light=!0),Mse({...o,colorSchemes:u,defaultColorScheme:a,...typeof i!="boolean"&&i},...e)}const Pse=Y2(),ND=Pse;function hg(){const t=_H(ND);return t[hu]||t}function af({props:t,name:e}){return tre({props:t,name:e,defaultTheme:ND,themeId:hu})}function Ise(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Rse=t=>Ise(t)&&t!=="classes",Dse=Rse,kse=Yie({themeId:hu,defaultTheme:ND,rootShouldForwardProp:Dse}),mi=kse;function f4({theme:t,...e}){const n=hu in t?t[hu]:void 0;return $(MH,{...e,themeId:n?hu:void 0,theme:n||t})}const t1={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:Lse,useColorScheme:gPe,getInitColorSchemeScript:yPe}=Lre({themeId:hu,theme:()=>Y2({cssVariables:!0}),colorSchemeStorageKey:t1.colorSchemeStorageKey,modeStorageKey:t1.modeStorageKey,defaultColorScheme:{light:t1.defaultLightColorScheme,dark:t1.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:DH(t.palette,t.typography)};return e.unstable_sx=function(i){return Im({sx:i,theme:this})},e}}),Nse=Lse;function Ose({theme:t,...e}){return typeof t=="function"?$(f4,{theme:t,...e}):"colorSchemes"in(hu in t?t[hu]:t)?$(Nse,{theme:t,...e}):$(f4,{theme:t,...e})}function gn(t){return function(){return t}}const NH=Math.cos,wT=Math.sin,Na=Math.sqrt,p4=1e-12,ET=Math.PI,Ch=2*ET,BP=Math.PI,zP=2*BP,ih=1e-6,Use=zP-ih;function OH(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fse(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return OH;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let Bse=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?OH:Fse(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,u=r-n,c=o-e,d=a-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ih)if(!(Math.abs(d*l-u*c)>ih)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=i-o,g=r-a,v=l*l+u*u,_=m*m+g*g,y=Math.sqrt(v),S=Math.sqrt(h),x=s*Math.tan((BP-Math.acos((v+h-_)/(2*y*S)))/2),w=x/S,P=x/y;Math.abs(w-1)>ih&&this._append`L${e+w*c},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*m>c*g)},${this._x1=e+P*l},${this._y1=n+P*u}`}}arc(e,n,i,r,s,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),u=e+a,c=n+l,d=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ih||Math.abs(this._y1-c)>ih)&&this._append`L${u},${c}`,i&&(h<0&&(h=h%zP+zP),h>Use?this._append`A${i},${i},0,1,${d},${e-a},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:h>ih&&this._append`A${i},${i},0,${+(h>=BP)},${d},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function OD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Bse(e)}function K2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function UH(t){this._context=t}UH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function UD(t){return new UH(t)}function FH(t){return t[0]}function BH(t){return t[1]}function zH(t,e){var n=gn(!0),i=null,r=UD,s=null,o=OD(a);t=typeof t=="function"?t:t===void 0?FH:gn(t),e=typeof e=="function"?e:e===void 0?BH:gn(e);function a(l){var u,c=(l=K2(l)).length,d,h=!1,m;for(i==null&&(s=r(m=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,u,l),+e(d,u,l));if(m)return s=null,m+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:gn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:gn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:gn(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function zse(t,e,n){var i=null,r=gn(!0),s=null,o=UD,a=null,l=OD(u);t=typeof t=="function"?t:t===void 0?FH:gn(+t),e=typeof e=="function"?e:gn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?BH:gn(+n);function u(d){var h,m,g,v=(d=K2(d)).length,_,y=!1,S,x=new Array(v),w=new Array(v);for(s==null&&(a=o(S=l())),h=0;h<=v;++h){if(!(h<v&&r(_=d[h],h,d))===y)if(y=!y)m=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=m;--g)a.point(x[g],w[g]);a.lineEnd(),a.areaEnd()}y&&(x[h]=+t(_,h,d),w[h]=+e(_,h,d),a.point(i?+i(_,h,d):x[h],n?+n(_,h,d):w[h]))}if(S)return a=null,S+""||null}function c(){return zH().defined(r).curve(o).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:gn(+d),i=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:gn(+d),u):t},u.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:gn(+d),u):i},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:gn(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:gn(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:gn(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(i).y(e)},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:gn(!!d),u):r},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}function Hse(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Vse(t){return t}function $se(){var t=Vse,e=Hse,n=null,i=gn(0),r=gn(Ch),s=gn(0);function o(a){var l,u=(a=K2(a)).length,c,d,h=0,m=new Array(u),g=new Array(u),v=+i.apply(this,arguments),_=Math.min(Ch,Math.max(-Ch,r.apply(this,arguments)-v)),y,S=Math.min(Math.abs(_)/u,s.apply(this,arguments)),x=S*(_<0?-1:1),w;for(l=0;l<u;++l)(w=g[m[l]=l]=+t(a[l],l,a))>0&&(h+=w);for(e!=null?m.sort(function(P,A){return e(g[P],g[A])}):n!=null&&m.sort(function(P,A){return n(a[P],a[A])}),l=0,d=h?(_-u*x)/h:0;l<u;++l,v=y)c=m[l],w=g[c],y=v+(w>0?w*d:0)+x,g[c]={data:a[c],index:l,value:w,startAngle:v,endAngle:y,padAngle:S};return g}return o.value=function(a){return arguments.length?(t=typeof a=="function"?a:gn(+a),o):t},o.sortValues=function(a){return arguments.length?(e=a,n=null,o):e},o.sort=function(a){return arguments.length?(n=a,e=null,o):n},o.startAngle=function(a){return arguments.length?(i=typeof a=="function"?a:gn(+a),o):i},o.endAngle=function(a){return arguments.length?(r=typeof a=="function"?a:gn(+a),o):r},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:gn(+a),o):s},o}const HH={draw(t,e){const n=Na(e/ET);t.moveTo(n,0),t.arc(0,0,n,0,Ch)}},Gse={draw(t,e){const n=Na(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},VH=Na(1/3),Wse=VH*2,jse={draw(t,e){const n=Na(e/Wse),i=n*VH;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},qse={draw(t,e){const n=Na(e),i=-n/2;t.rect(i,i,n,n)}},Xse=.8908130915292852,$H=wT(ET/10)/wT(7*ET/10),Yse=wT(Ch/10)*$H,Kse=-NH(Ch/10)*$H,Qse={draw(t,e){const n=Na(e*Xse),i=Yse*n,r=Kse*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const o=Ch*s/5,a=NH(o),l=wT(o);t.lineTo(l*n,-a*n),t.lineTo(a*i-l*r,l*i+a*r)}t.closePath()}},HC=Na(3),Zse={draw(t,e){const n=-Na(e/(HC*3));t.moveTo(0,n*2),t.lineTo(-HC*n,-n),t.lineTo(HC*n,-n),t.closePath()}},Ao=-.5,Mo=Na(3)/2,HP=1/Na(12),Jse=(HP/2+1)*3,eoe={draw(t,e){const n=Na(e/Jse),i=n/2,r=n*HP,s=i,o=n*HP+n,a=-s,l=o;t.moveTo(i,r),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Ao*i-Mo*r,Mo*i+Ao*r),t.lineTo(Ao*s-Mo*o,Mo*s+Ao*o),t.lineTo(Ao*a-Mo*l,Mo*a+Ao*l),t.lineTo(Ao*i+Mo*r,Ao*r-Mo*i),t.lineTo(Ao*s+Mo*o,Ao*o-Mo*s),t.lineTo(Ao*a+Mo*l,Ao*l-Mo*a),t.closePath()}},toe=[HH,Gse,jse,qse,Qse,Zse,eoe];function noe(t,e){let n=null,i=OD(r);t=typeof t=="function"?t:gn(t||HH),e=typeof e=="function"?e:gn(e===void 0?64:+e);function r(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:gn(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:gn(+s),r):e},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function m4(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function FD(t,e){this._context=t,this._k=(1-e)/6}FD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:m4(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:m4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(i){return new FD(i,e)}return n.tension=function(i){return t(+i)},n})(0);function ioe(t,e,n){var i=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>p4){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>p4){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,s,o,t._x2,t._y2)}function GH(t,e){this._context=t,this._alpha=e}GH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ioe(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const roe=function t(e){function n(i){return e?new GH(i,e):new FD(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function g4(t){return t<0?-1:1}function y4(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(g4(s)+g4(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function v4(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function VC(t,e,n){var i=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*n,s,o)}function CT(t){this._context=t}CT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:VC(this,this._t0,v4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,VC(this,v4(this,n=y4(this,t,e)),n);break;default:VC(this,this._t0,n=y4(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function WH(t){this._context=new jH(t)}(WH.prototype=Object.create(CT.prototype)).point=function(t,e){CT.prototype.point.call(this,e,t)};function jH(t){this._context=t}jH.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function _4(t){return new CT(t)}function soe(t){return new WH(t)}function qH(t){this._context=t}qH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=x4(t),r=x4(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function x4(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(r[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function ooe(t){return new qH(t)}function Q2(t,e){this._context=t,this._t=e}Q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function aoe(t){return new Q2(t,.5)}function loe(t){return new Q2(t,0)}function uoe(t){return new Q2(t,1)}function Rm(t,e){if((o=t.length)>1)for(var n=1,i,r,s=t[e[0]],o,a=s.length;n<o;++n)for(r=s,s=t[e[n]],i=0;i<a;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function Dm(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function coe(t,e){return t[e]}function doe(t){const e=[];return e.key=t,e}function XH(){var t=gn([]),e=Dm,n=Rm,i=coe;function r(s){var o=Array.from(t.apply(this,arguments),doe),a,l=o.length,u=-1,c;for(const d of s)for(a=0,++u;a<l;++a)(o[a][u]=[0,+i(d,o[a].key,u,s)]).data=d;for(a=0,c=K2(e(o));a<l;++a)o[c[a]].index=a;return n(o,c),o}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:gn(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:gn(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?Dm:typeof s=="function"?s:gn(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??Rm,r):n},r}function hoe(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,o;r<s;++r){for(o=n=0;n<i;++n)o+=t[n][r][1]||0;if(o)for(n=0;n<i;++n)t[n][r][1]/=o}Rm(t,e)}}function foe(t,e){if((l=t.length)>0)for(var n,i=0,r,s,o,a,l,u=t[e[0]].length;i<u;++i)for(o=a=0,n=0;n<l;++n)(s=(r=t[e[n]][i])[1]-r[0])>0?(r[0]=o,r[1]=o+=s):s<0?(r[1]=a,r[0]=a+=s):(r[0]=0,r[1]=s)}function poe(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var o=0,a=0;o<r;++o)a+=t[o][n][1]||0;i[n][1]+=i[n][0]=-a/2}Rm(t,e)}}function moe(t,e){if(!(!((o=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,o;i<s;++i){for(var a=0,l=0,u=0;a<o;++a){for(var c=t[e[a]],d=c[i][1]||0,h=c[i-1][1]||0,m=(d-h)/2,g=0;g<a;++g){var v=t[e[g]],_=v[i][1]||0,y=v[i-1][1]||0;m+=_-y}l+=d,u+=m*d}r[i-1][1]+=r[i-1][0]=n,l&&(n-=u/l)}r[i-1][1]+=r[i-1][0]=n,Rm(t,e)}}function YH(t){var e=t.map(goe);return Dm(t).sort(function(n,i){return e[n]-e[i]})}function goe(t){for(var e=-1,n=0,i=t.length,r,s=-1/0;++e<i;)(r=+t[e][1])>s&&(s=r,n=e);return n}function KH(t){var e=t.map(QH);return Dm(t).sort(function(n,i){return e[n]-e[i]})}function QH(t){for(var e=0,n=-1,i=t.length,r;++n<i;)(r=+t[n][1])&&(e+=r);return e}function yoe(t){return KH(t).reverse()}function voe(t){var e=t.length,n,i,r=t.map(QH),s=YH(t),o=0,a=0,l=[],u=[];for(n=0;n<e;++n)i=s[n],o<a?(o+=r[i],l.push(i)):(a+=r[i],u.push(i));return u.reverse().concat(l)}function _oe(t){return Dm(t).reverse()}function DS(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xoe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BD(t){let e,n,i;t.length!==2?(e=DS,n=(a,l)=>DS(t(a),l),i=(a,l)=>t(a)-l):(e=t===DS||t===xoe?t:Soe,n=t,i=t);function r(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=r(a,l,u,c-1);return d>u&&i(a[d-1],l)>-i(a[d],l)?d-1:d}return{left:r,center:o,right:s}}function Soe(){return 0}function Toe(t){return t===null?NaN:+t}const boe=BD(DS),woe=boe.right;BD(Toe).center;const ZH=woe;class S4 extends Map{constructor(e,n=Aoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(T4(this,e))}has(e){return super.has(T4(this,e))}set(e,n){return super.set(Eoe(this,e),n)}delete(e){return super.delete(Coe(this,e))}}function T4({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Eoe({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Coe({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Aoe(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Moe=Math.sqrt(50),Poe=Math.sqrt(10),Ioe=Math.sqrt(2);function AT(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=Moe?10:s>=Poe?5:s>=Ioe?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?AT(t,e,n*2):[a,l,u]}function VP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,o]=i?AT(e,t,n):AT(t,e,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(r+u)/-o;else for(let u=0;u<a;++u)l[u]=(r+u)*o;return l}function $P(t,e,n){return e=+e,t=+t,n=+n,AT(t,e,n)[2]}function GP(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?$P(e,t,n):$P(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Roe(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function od(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Doe(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const b4=Symbol("implicit");function MT(){var t=new S4,e=[],n=[],i=b4;function r(s){let o=t.get(s);if(o===void 0){if(i!==b4)return i;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new S4;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return MT(e,n).unknown(i)},od.apply(r,arguments),r}function zD(){var t=MT().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var h=e().length,m=r<i,g=m?r:i,v=m?i:r;s=(v-g)/Math.max(1,h-l+u*2),a&&(s=Math.floor(s)),g+=(v-g-s*(h-l))*c,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var _=Roe(h).map(function(y){return g+s*y});return n(m?_.reverse():_)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,d()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},t.copy=function(){return zD(e(),[i,r]).round(a).paddingInner(l).paddingOuter(u).align(c)},od.apply(d(),arguments)}function JH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return JH(e())},t}function koe(){return JH(zD.apply(null,arguments).paddingInner(1))}function HD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function e7(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function d_(){}var dv=.7,PT=1/dv,dm="\\s*([+-]?\\d+)\\s*",hv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Loe=/^#([0-9a-f]{3,8})$/,Noe=new RegExp(`^rgb\\(${dm},${dm},${dm}\\)$`),Ooe=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),Uoe=new RegExp(`^rgba\\(${dm},${dm},${dm},${hv}\\)$`),Foe=new RegExp(`^rgba\\(${fl},${fl},${fl},${hv}\\)$`),Boe=new RegExp(`^hsl\\(${hv},${fl},${fl}\\)$`),zoe=new RegExp(`^hsla\\(${hv},${fl},${fl},${hv}\\)$`),w4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HD(d_,Zc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:E4,formatHex:E4,formatHex8:Hoe,formatHsl:Voe,formatRgb:C4,toString:C4});function E4(){return this.rgb().formatHex()}function Hoe(){return this.rgb().formatHex8()}function Voe(){return t7(this).formatHsl()}function C4(){return this.rgb().formatRgb()}function Zc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Loe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?A4(e):n===3?new Es(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?n1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?n1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Noe.exec(t))?new Es(e[1],e[2],e[3],1):(e=Ooe.exec(t))?new Es(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Uoe.exec(t))?n1(e[1],e[2],e[3],e[4]):(e=Foe.exec(t))?n1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Boe.exec(t))?I4(e[1],e[2]/100,e[3]/100,1):(e=zoe.exec(t))?I4(e[1],e[2]/100,e[3]/100,e[4]):w4.hasOwnProperty(t)?A4(w4[t]):t==="transparent"?new Es(NaN,NaN,NaN,0):null}function A4(t){return new Es(t>>16&255,t>>8&255,t&255,1)}function n1(t,e,n,i){return i<=0&&(t=e=n=NaN),new Es(t,e,n,i)}function $oe(t){return t instanceof d_||(t=Zc(t)),t?(t=t.rgb(),new Es(t.r,t.g,t.b,t.opacity)):new Es}function WP(t,e,n,i){return arguments.length===1?$oe(t):new Es(t,e,n,i??1)}function Es(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}HD(Es,WP,e7(d_,{brighter(t){return t=t==null?PT:Math.pow(PT,t),new Es(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dv:Math.pow(dv,t),new Es(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Es(Ah(this.r),Ah(this.g),Ah(this.b),IT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M4,formatHex:M4,formatHex8:Goe,formatRgb:P4,toString:P4}));function M4(){return`#${ph(this.r)}${ph(this.g)}${ph(this.b)}`}function Goe(){return`#${ph(this.r)}${ph(this.g)}${ph(this.b)}${ph((isNaN(this.opacity)?1:this.opacity)*255)}`}function P4(){const t=IT(this.opacity);return`${t===1?"rgb(":"rgba("}${Ah(this.r)}, ${Ah(this.g)}, ${Ah(this.b)}${t===1?")":`, ${t})`}`}function IT(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ah(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ph(t){return t=Ah(t),(t<16?"0":"")+t.toString(16)}function I4(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Sa(t,e,n,i)}function t7(t){if(t instanceof Sa)return new Sa(t.h,t.s,t.l,t.opacity);if(t instanceof d_||(t=Zc(t)),!t)return new Sa;if(t instanceof Sa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Sa(o,a,l,t.opacity)}function Woe(t,e,n,i){return arguments.length===1?t7(t):new Sa(t,e,n,i??1)}function Sa(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}HD(Sa,Woe,e7(d_,{brighter(t){return t=t==null?PT:Math.pow(PT,t),new Sa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dv:Math.pow(dv,t),new Sa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Es($C(t>=240?t-240:t+120,r,i),$C(t,r,i),$C(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Sa(R4(this.h),i1(this.s),i1(this.l),IT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=IT(this.opacity);return`${t===1?"hsl(":"hsla("}${R4(this.h)}, ${i1(this.s)*100}%, ${i1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function R4(t){return t=(t||0)%360,t<0?t+360:t}function i1(t){return Math.max(0,Math.min(1,t||0))}function $C(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const VD=t=>()=>t;function joe(t,e){return function(n){return t+n*e}}function qoe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Xoe(t){return(t=+t)==1?n7:function(e,n){return n-e?qoe(e,n,t):VD(isNaN(e)?n:e)}}function n7(t,e){var n=e-t;return n?joe(t,n):VD(isNaN(t)?e:t)}const D4=function t(e){var n=Xoe(e);function i(r,s){var o=n((r=WP(r)).r,(s=WP(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=n7(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i}(1);function Yoe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function Koe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qoe(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=Z2(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function i7(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function fv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Zoe(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Z2(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var jP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GC=new RegExp(jP.source,"g");function Joe(t){return function(){return t}}function eae(t){return function(e){return t(e)+""}}function r7(t,e){var n=jP.lastIndex=GC.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=jP.exec(t))&&(r=GC.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:fv(i,r)})),n=GC.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?eae(l[0].x):Joe(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Z2(t,e){var n=typeof e,i;return e==null||n==="boolean"?VD(e):(n==="number"?fv:n==="string"?(i=Zc(e))?(e=i,D4):r7:e instanceof Zc?D4:e instanceof Date?i7:Koe(e)?Yoe:Array.isArray(e)?Qoe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zoe:fv)(t,e)}function s7(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function tae(t){return function(){return t}}function nae(t){return+t}var k4=[0,1];function Fo(t){return t}function qP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tae(isNaN(e)?NaN:.5)}function iae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function rae(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=qP(r,i),s=n(o,s)):(i=qP(i,r),s=n(s,o)),function(a){return s(i(a))}}function sae(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=qP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=ZH(t,a,1,i)-1;return s[l](r[l](a))}}function J2(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $D(){var t=k4,e=k4,n=Z2,i,r,s,o=Fo,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==Fo&&(o=iae(t[0],t[h-1])),a=h>2?sae:rae,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(i),e,n)))(i(o(h)))}return d.invert=function(h){return o(r((u||(u=a(e,t.map(i),fv)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,nae),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=s7,c()},d.clamp=function(h){return arguments.length?(o=h?!0:Fo,c()):o!==Fo},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return i=h,r=m,c()}}function o7(){return $D()(Fo,Fo)}function oae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function RT(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function km(t){return t=RT(Math.abs(t)),t?t[1]:NaN}function aae(t,e){return function(n,i){for(var r=n.length,s=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function lae(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var uae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pv(t){if(!(e=uae.exec(t)))throw new Error("invalid format: "+t);var e;return new GD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}pv.prototype=GD.prototype;function GD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}GD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cae(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var a7;function dae(t,e){var n=RT(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(a7=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+RT(t,Math.max(0,e+s-1))[0]}function L4(t,e){var n=RT(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const N4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>L4(t*100,e),r:L4,s:dae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function O4(t){return t}var U4=Array.prototype.map,F4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hae(t){var e=t.grouping===void 0||t.thousands===void 0?O4:aae(U4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?O4:lae(U4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=pv(d);var h=d.fill,m=d.align,g=d.sign,v=d.symbol,_=d.zero,y=d.width,S=d.comma,x=d.precision,w=d.trim,P=d.type;P==="n"?(S=!0,P="g"):N4[P]||(x===void 0&&(x=12),w=!0,P="g"),(_||h==="0"&&m==="=")&&(_=!0,h="0",m="=");var A=v==="$"?n:v==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",D=v==="$"?i:/[%p]/.test(P)?o:"",O=N4[P],H=/[defgprs%]/.test(P);x=x===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function E(k){var W=A,G=D,Y,ie,Q;if(P==="c")G=O(k)+G,k="";else{k=+k;var oe=k<0||1/k<0;if(k=isNaN(k)?l:O(Math.abs(k),x),w&&(k=cae(k)),oe&&+k==0&&g!=="+"&&(oe=!1),W=(oe?g==="("?g:a:g==="-"||g==="("?"":g)+W,G=(P==="s"?F4[8+a7/3]:"")+G+(oe&&g==="("?")":""),H){for(Y=-1,ie=k.length;++Y<ie;)if(Q=k.charCodeAt(Y),48>Q||Q>57){G=(Q===46?r+k.slice(Y+1):k.slice(Y))+G,k=k.slice(0,Y);break}}}S&&!_&&(k=e(k,1/0));var z=W.length+k.length+G.length,ee=z<y?new Array(y-z+1).join(h):"";switch(S&&_&&(k=e(ee+k,ee.length?y-G.length:1/0),ee=""),m){case"<":k=W+k+G+ee;break;case"=":k=W+ee+k+G;break;case"^":k=ee.slice(0,z=ee.length>>1)+W+k+G+ee.slice(z);break;default:k=ee+W+k+G;break}return s(k)}return E.toString=function(){return d+""},E}function c(d,h){var m=u((d=pv(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(km(h)/3)))*3,v=Math.pow(10,-g),_=F4[8+g/3];return function(y){return m(v*y)+_}}return{format:u,formatPrefix:c}}var r1,WD,l7;fae({thousands:",",grouping:[3],currency:["$",""]});function fae(t){return r1=hae(t),WD=r1.format,l7=r1.formatPrefix,r1}function pae(t){return Math.max(0,-km(Math.abs(t)))}function mae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(km(e)/3)))*3-km(Math.abs(t)))}function gae(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,km(e)-km(t))+1}function yae(t,e,n,i){var r=GP(t,e,n),s;switch(i=pv(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=mae(r,o))&&(i.precision=s),l7(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=gae(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=pae(r))&&(i.precision=s-(i.type==="%")*2);break}}return WD(i)}function jD(t){var e=t.domain;return t.ticks=function(n){var i=e();return VP(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return yae(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);c-- >0;){if(u=$P(o,a,n),u===l)return i[r]=o,i[s]=a,e(i);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function u7(){var t=o7();return t.copy=function(){return J2(t,u7())},od.apply(t,arguments),jD(t)}function c7(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}function B4(t){return Math.log(t)}function z4(t){return Math.exp(t)}function vae(t){return-Math.log(-t)}function _ae(t){return-Math.exp(-t)}function xae(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Sae(t){return t===10?xae:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Tae(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function H4(t){return(e,n)=>-t(-e,n)}function bae(t){const e=t(B4,z4),n=e.domain;let i=10,r,s;function o(){return r=Tae(i),s=Sae(i),n()[0]<0?(r=H4(r),s=H4(s),t(vae,_ae)):t(B4,z4),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=r(u),m=r(c),g,v;const _=a==null?10:+a;let y=[];if(!(i%1)&&m-h<_){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<i;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>c)break;y.push(v)}}else for(;h<=m;++h)for(g=i-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>c)break;y.push(v)}y.length*2<_&&(y=VP(u,c,_))}else y=VP(h,m,Math.min(m-h,_)).map(s);return d?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=pv(l)).precision==null&&(l.trim=!0),l=WD(l)),a===1/0)return l;const u=Math.max(1,i*a/e.ticks().length);return c=>{let d=c/s(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},e.nice=()=>n(c7(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function d7(){const t=bae($D()).domain([1,10]);return t.copy=()=>J2(t,d7()).base(t.base()),od.apply(t,arguments),t}function V4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wae(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Eae(t){return t<0?-t*t:t*t}function Cae(t){var e=t(Fo,Fo),n=1;function i(){return n===1?t(Fo,Fo):n===.5?t(wae,Eae):t(V4(n),V4(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},jD(e)}function qD(){var t=Cae($D());return t.copy=function(){return J2(t,qD()).exponent(t.exponent())},od.apply(t,arguments),t}function Aae(){return qD.apply(null,arguments).exponent(.5)}function h7(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[ZH(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return h7().domain(t).range(e).unknown(n)},od.apply(r,arguments)}const WC=new Date,jC=new Date;function Zi(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},r.filter=s=>Zi(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(r.count=(s,o)=>(WC.setTime(+s),jC.setTime(+o),t(WC),t(jC),Math.floor(n(WC,jC))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const DT=Zi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);DT.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Zi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):DT);DT.range;const ou=1e3,Bo=ou*60,au=Bo*60,bu=au*24,XD=bu*7,$4=bu*30,qC=bu*365,mh=Zi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ou)},(t,e)=>(e-t)/ou,t=>t.getUTCSeconds());mh.range;const YD=Zi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ou)},(t,e)=>{t.setTime(+t+e*Bo)},(t,e)=>(e-t)/Bo,t=>t.getMinutes());YD.range;const KD=Zi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Bo)},(t,e)=>(e-t)/Bo,t=>t.getUTCMinutes());KD.range;const QD=Zi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ou-t.getMinutes()*Bo)},(t,e)=>{t.setTime(+t+e*au)},(t,e)=>(e-t)/au,t=>t.getHours());QD.range;const ZD=Zi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*au)},(t,e)=>(e-t)/au,t=>t.getUTCHours());ZD.range;const h_=Zi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Bo)/bu,t=>t.getDate()-1);h_.range;const ew=Zi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bu,t=>t.getUTCDate()-1);ew.range;const f7=Zi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bu,t=>Math.floor(t/bu));f7.range;function lf(t){return Zi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Bo)/XD)}const tw=lf(0),kT=lf(1),Mae=lf(2),Pae=lf(3),Lm=lf(4),Iae=lf(5),Rae=lf(6);tw.range;kT.range;Mae.range;Pae.range;Lm.range;Iae.range;Rae.range;function uf(t){return Zi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/XD)}const nw=uf(0),LT=uf(1),Dae=uf(2),kae=uf(3),Nm=uf(4),Lae=uf(5),Nae=uf(6);nw.range;LT.range;Dae.range;kae.range;Nm.range;Lae.range;Nae.range;const JD=Zi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());JD.range;const ek=Zi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ek.range;const wu=Zi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});wu.range;const Eu=Zi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Eu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Eu.range;function p7(t,e,n,i,r,s){const o=[[mh,1,ou],[mh,5,5*ou],[mh,15,15*ou],[mh,30,30*ou],[s,1,Bo],[s,5,5*Bo],[s,15,15*Bo],[s,30,30*Bo],[r,1,au],[r,3,3*au],[r,6,6*au],[r,12,12*au],[i,1,bu],[i,2,2*bu],[n,1,XD],[e,1,$4],[e,3,3*$4],[t,1,qC]];function a(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const m=d&&typeof d.range=="function"?d:l(u,c,d),g=m?m.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,m=BD(([,,_])=>_).right(o,h);if(m===o.length)return t.every(GP(u/qC,c/qC,d));if(m===0)return DT.every(Math.max(GP(u,c,d),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[a,l]}const[Oae,Uae]=p7(Eu,ek,nw,f7,ZD,KD),[Fae,Bae]=p7(wu,JD,tw,h_,QD,YD);function XC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function YC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function p0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function zae(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=m0(r),c=g0(r),d=m0(s),h=g0(s),m=m0(o),g=g0(o),v=m0(a),_=g0(a),y=m0(l),S=g0(l),x={a:oe,A:z,b:ee,B:te,c:null,d:Y4,e:Y4,f:ule,g:_le,G:Sle,H:ole,I:ale,j:lle,L:m7,m:cle,M:dle,p:ce,q:Te,Q:Z4,s:J4,S:hle,u:fle,U:ple,V:mle,w:gle,W:yle,x:null,X:null,y:vle,Y:xle,Z:Tle,"%":Q4},w={a:Ue,A:he,b:xe,B:Fe,c:null,d:K4,e:K4,f:Cle,g:Ole,G:Fle,H:ble,I:wle,j:Ele,L:y7,m:Ale,M:Mle,p:He,q:ot,Q:Z4,s:J4,S:Ple,u:Ile,U:Rle,V:Dle,w:kle,W:Lle,x:null,X:null,y:Nle,Y:Ule,Z:Ble,"%":Q4},P={a:E,A:k,b:W,B:G,c:Y,d:q4,e:q4,f:nle,g:j4,G:W4,H:X4,I:X4,j:Zae,L:tle,m:Qae,M:Jae,p:H,q:Kae,Q:rle,s:sle,S:ele,u:Wae,U:jae,V:qae,w:Gae,W:Xae,x:ie,X:Q,y:j4,Y:W4,Z:Yae,"%":ile};x.x=A(n,x),x.X=A(i,x),x.c=A(e,x),w.x=A(n,w),w.X=A(i,w),w.c=A(e,w);function A(Ae,Ge){return function(Le){var le=[],j=-1,Me=0,Re=Ae.length,Be,We,rt;for(Le instanceof Date||(Le=new Date(+Le));++j<Re;)Ae.charCodeAt(j)===37&&(le.push(Ae.slice(Me,j)),(We=G4[Be=Ae.charAt(++j)])!=null?Be=Ae.charAt(++j):We=Be==="e"?" ":"0",(rt=Ge[Be])&&(Be=rt(Le,We)),le.push(Be),Me=j+1);return le.push(Ae.slice(Me,j)),le.join("")}}function D(Ae,Ge){return function(Le){var le=p0(1900,void 0,1),j=O(le,Ae,Le+="",0),Me,Re;if(j!=Le.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(Ge&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Me=YC(p0(le.y,0,1)),Re=Me.getUTCDay(),Me=Re>4||Re===0?LT.ceil(Me):LT(Me),Me=ew.offset(Me,(le.V-1)*7),le.y=Me.getUTCFullYear(),le.m=Me.getUTCMonth(),le.d=Me.getUTCDate()+(le.w+6)%7):(Me=XC(p0(le.y,0,1)),Re=Me.getDay(),Me=Re>4||Re===0?kT.ceil(Me):kT(Me),Me=h_.offset(Me,(le.V-1)*7),le.y=Me.getFullYear(),le.m=Me.getMonth(),le.d=Me.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Re="Z"in le?YC(p0(le.y,0,1)).getUTCDay():XC(p0(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Re+5)%7:le.w+le.U*7-(Re+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,YC(le)):XC(le)}}function O(Ae,Ge,Le,le){for(var j=0,Me=Ge.length,Re=Le.length,Be,We;j<Me;){if(le>=Re)return-1;if(Be=Ge.charCodeAt(j++),Be===37){if(Be=Ge.charAt(j++),We=P[Be in G4?Ge.charAt(j++):Be],!We||(le=We(Ae,Le,le))<0)return-1}else if(Be!=Le.charCodeAt(le++))return-1}return le}function H(Ae,Ge,Le){var le=u.exec(Ge.slice(Le));return le?(Ae.p=c.get(le[0].toLowerCase()),Le+le[0].length):-1}function E(Ae,Ge,Le){var le=m.exec(Ge.slice(Le));return le?(Ae.w=g.get(le[0].toLowerCase()),Le+le[0].length):-1}function k(Ae,Ge,Le){var le=d.exec(Ge.slice(Le));return le?(Ae.w=h.get(le[0].toLowerCase()),Le+le[0].length):-1}function W(Ae,Ge,Le){var le=y.exec(Ge.slice(Le));return le?(Ae.m=S.get(le[0].toLowerCase()),Le+le[0].length):-1}function G(Ae,Ge,Le){var le=v.exec(Ge.slice(Le));return le?(Ae.m=_.get(le[0].toLowerCase()),Le+le[0].length):-1}function Y(Ae,Ge,Le){return O(Ae,e,Ge,Le)}function ie(Ae,Ge,Le){return O(Ae,n,Ge,Le)}function Q(Ae,Ge,Le){return O(Ae,i,Ge,Le)}function oe(Ae){return o[Ae.getDay()]}function z(Ae){return s[Ae.getDay()]}function ee(Ae){return l[Ae.getMonth()]}function te(Ae){return a[Ae.getMonth()]}function ce(Ae){return r[+(Ae.getHours()>=12)]}function Te(Ae){return 1+~~(Ae.getMonth()/3)}function Ue(Ae){return o[Ae.getUTCDay()]}function he(Ae){return s[Ae.getUTCDay()]}function xe(Ae){return l[Ae.getUTCMonth()]}function Fe(Ae){return a[Ae.getUTCMonth()]}function He(Ae){return r[+(Ae.getUTCHours()>=12)]}function ot(Ae){return 1+~~(Ae.getUTCMonth()/3)}return{format:function(Ae){var Ge=A(Ae+="",x);return Ge.toString=function(){return Ae},Ge},parse:function(Ae){var Ge=D(Ae+="",!1);return Ge.toString=function(){return Ae},Ge},utcFormat:function(Ae){var Ge=A(Ae+="",w);return Ge.toString=function(){return Ae},Ge},utcParse:function(Ae){var Ge=D(Ae+="",!0);return Ge.toString=function(){return Ae},Ge}}}var G4={"-":"",_:" ",0:"0"},ur=/^\s*\d+/,Hae=/^%/,Vae=/[\\^$*+?|[\]().{}]/g;function wn(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function $ae(t){return t.replace(Vae,"\\$&")}function m0(t){return new RegExp("^(?:"+t.map($ae).join("|")+")","i")}function g0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Gae(t,e,n){var i=ur.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Wae(t,e,n){var i=ur.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function jae(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function qae(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Xae(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function W4(t,e,n){var i=ur.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function j4(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Yae(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Kae(t,e,n){var i=ur.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Qae(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function q4(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Zae(t,e,n){var i=ur.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function X4(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Jae(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ele(t,e,n){var i=ur.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function tle(t,e,n){var i=ur.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function nle(t,e,n){var i=ur.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function ile(t,e,n){var i=Hae.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function rle(t,e,n){var i=ur.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function sle(t,e,n){var i=ur.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Y4(t,e){return wn(t.getDate(),e,2)}function ole(t,e){return wn(t.getHours(),e,2)}function ale(t,e){return wn(t.getHours()%12||12,e,2)}function lle(t,e){return wn(1+h_.count(wu(t),t),e,3)}function m7(t,e){return wn(t.getMilliseconds(),e,3)}function ule(t,e){return m7(t,e)+"000"}function cle(t,e){return wn(t.getMonth()+1,e,2)}function dle(t,e){return wn(t.getMinutes(),e,2)}function hle(t,e){return wn(t.getSeconds(),e,2)}function fle(t){var e=t.getDay();return e===0?7:e}function ple(t,e){return wn(tw.count(wu(t)-1,t),e,2)}function g7(t){var e=t.getDay();return e>=4||e===0?Lm(t):Lm.ceil(t)}function mle(t,e){return t=g7(t),wn(Lm.count(wu(t),t)+(wu(t).getDay()===4),e,2)}function gle(t){return t.getDay()}function yle(t,e){return wn(kT.count(wu(t)-1,t),e,2)}function vle(t,e){return wn(t.getFullYear()%100,e,2)}function _le(t,e){return t=g7(t),wn(t.getFullYear()%100,e,2)}function xle(t,e){return wn(t.getFullYear()%1e4,e,4)}function Sle(t,e){var n=t.getDay();return t=n>=4||n===0?Lm(t):Lm.ceil(t),wn(t.getFullYear()%1e4,e,4)}function Tle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wn(e/60|0,"0",2)+wn(e%60,"0",2)}function K4(t,e){return wn(t.getUTCDate(),e,2)}function ble(t,e){return wn(t.getUTCHours(),e,2)}function wle(t,e){return wn(t.getUTCHours()%12||12,e,2)}function Ele(t,e){return wn(1+ew.count(Eu(t),t),e,3)}function y7(t,e){return wn(t.getUTCMilliseconds(),e,3)}function Cle(t,e){return y7(t,e)+"000"}function Ale(t,e){return wn(t.getUTCMonth()+1,e,2)}function Mle(t,e){return wn(t.getUTCMinutes(),e,2)}function Ple(t,e){return wn(t.getUTCSeconds(),e,2)}function Ile(t){var e=t.getUTCDay();return e===0?7:e}function Rle(t,e){return wn(nw.count(Eu(t)-1,t),e,2)}function v7(t){var e=t.getUTCDay();return e>=4||e===0?Nm(t):Nm.ceil(t)}function Dle(t,e){return t=v7(t),wn(Nm.count(Eu(t),t)+(Eu(t).getUTCDay()===4),e,2)}function kle(t){return t.getUTCDay()}function Lle(t,e){return wn(LT.count(Eu(t)-1,t),e,2)}function Nle(t,e){return wn(t.getUTCFullYear()%100,e,2)}function Ole(t,e){return t=v7(t),wn(t.getUTCFullYear()%100,e,2)}function Ule(t,e){return wn(t.getUTCFullYear()%1e4,e,4)}function Fle(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Nm(t):Nm.ceil(t),wn(t.getUTCFullYear()%1e4,e,4)}function Ble(){return"+0000"}function Q4(){return"%"}function Z4(t){return+t}function J4(t){return Math.floor(+t/1e3)}var tp,_7,x7;zle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zle(t){return tp=zae(t),_7=tp.format,tp.parse,x7=tp.utcFormat,tp.utcParse,tp}function Hle(t){return new Date(t)}function Vle(t){return t instanceof Date?+t:+new Date(+t)}function tk(t,e,n,i,r,s,o,a,l,u){var c=o7(),d=c.invert,h=c.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),_=u("%I %p"),y=u("%a %d"),S=u("%b %d"),x=u("%B"),w=u("%Y");function P(A){return(l(A)<A?m:a(A)<A?g:o(A)<A?v:s(A)<A?_:i(A)<A?r(A)<A?y:S:n(A)<A?x:w)(A)}return c.invert=function(A){return new Date(d(A))},c.domain=function(A){return arguments.length?h(Array.from(A,Vle)):h().map(Hle)},c.ticks=function(A){var D=h();return t(D[0],D[D.length-1],A??10)},c.tickFormat=function(A,D){return D==null?P:u(D)},c.nice=function(A){var D=h();return(!A||typeof A.range!="function")&&(A=e(D[0],D[D.length-1],A??10)),A?h(c7(D,A)):c},c.copy=function(){return J2(c,tk(t,e,n,i,r,s,o,a,l,u))},c}function S7(){return od.apply(tk(Fae,Bae,wu,JD,tw,h_,QD,YD,mh,_7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $le(){return od.apply(tk(Oae,Uae,Eu,ek,nw,ew,ZD,KD,mh,x7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gle(){var t=0,e=1,n,i,r,s,o=Fo,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(r===0?.5:(d=(s(d)-n)*r,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(h){var m,g;return arguments.length?([m,g]=h,o=d(m,g),u):[o(0),o(1)]}}return u.range=c(Z2),u.rangeRound=c(s7),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(t),i=d(e),r=n===i?0:1/(i-n),u}}function Wle(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function T7(){var t=jD(Gle()(Fo));return t.copy=function(){return Wle(t,T7())},Doe.apply(t,arguments)}function jle(t){return t.scaleType==="band"}function qle(t){return t.scaleType==="point"}function Xle(t){return t.type==="piecewise"?h7(t.thresholds,t.colors):T7([t.min??0,t.max??100],t.color)}function NT(t){return t.values?MT(t.values,t.colors).unknown(t.unknownColor??null):MT(t.colors.map((e,n)=>n),t.colors).unknown(t.unknownColor??null)}function kS(t){return t.type==="ordinal"?NT(t):Xle(t)}function Wh(t){return t.bandwidth!==void 0}function nk(t){return typeof t=="number"&&!Number.isFinite(t)}function Yle(t){const{tickMaxStep:e,tickMinStep:n,tickNumber:i,range:r,domain:s}=t,o=n===void 0?999:Math.floor(Math.abs(s[1]-s[0])/n),a=e===void 0?2:Math.ceil(Math.abs(s[1]-s[0])/e),l=i??Math.floor(Math.abs(r[1]-r[0])/50);return Math.min(o,Math.max(a,l))}const KC={start:0,extremities:0,end:1,middle:.5};function iw(t){const{scale:e,tickNumber:n,valueFormatter:i,tickInterval:r,tickPlacement:s="extremities",tickLabelPlacement:o="middle"}=t;return U.useMemo(()=>{if(Wh(e)){const u=e.domain();return e.bandwidth()>0?[...(typeof r=="function"&&u.filter(r)||typeof r=="object"&&r||u).map(h=>({value:h,formattedValue:(i==null?void 0:i(h,{location:"tick"}))??`${h}`,offset:e(h)-(e.step()-e.bandwidth())/2+KC[s]*e.step(),labelOffset:o==="tick"?0:e.step()*(KC[o]-KC[s])})),...s==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof r=="function"&&u.filter(r)||typeof r=="object"&&r||u).map(d=>({value:d,formattedValue:(i==null?void 0:i(d,{location:"tick"}))??`${d}`,offset:e(d),labelOffset:0}))}return e.domain().some(nk)?[]:(typeof r=="object"?r:e.ticks(n)).map(u=>({value:u,formattedValue:(i==null?void 0:i(u,{location:"tick"}))??e.tickFormat(n)(u),offset:e(u),labelOffset:0}))},[e,r,n,i,s,o])}function Kle(t,e,n){switch(t){case"log":return d7(e,n);case"pow":return qD(e,n);case"sqrt":return Aae(e,n);case"time":return S7(e,n);case"utc":return $le(e,n);default:return u7(e,n)}}const QC=(t,e)=>{const n=t[1]-t[0],i=e[1]-e[0],r=t[0]-e[0]*n/i,s=t[1]+(100-e[1])*n/i;return[r,s]},Qle=(t,e,n,i,r,s,o)=>{var m;const a=i[e],l=((m=s[e])==null?void 0:m.series)??{},[u,c]=(a==null?void 0:a({series:l,axis:n,axisIndex:r,isDefaultAxis:r===0,getFilters:o}))??[1/0,-1/0],[d,h]=t;return[Math.min(u,d),Math.max(c,h)]},Zle=(t,e,n,i,r)=>{const o=Object.keys(e).reduce((a,l)=>Qle(a,l,t,e,n,i,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o};function Jle(t,e,n){if(e==="rotation"){const{startAngle:r=0,endAngle:s=r+360}=n;return n.reverse?[Math.PI*r/180,Math.PI*s/180]:[Math.PI*s/180,Math.PI*r/180]}if(e==="radius"){const{minRadius:r=0,maxRadius:s=Math.min(t.width,t.height)/2}=n;return[r,s]}const i=e==="x"?[t.left,t.left+t.width]:[t.top+t.height,t.top];return n.reverse?[i[1],i[0]]:i}const eU=t=>(t==null?void 0:t[0])instanceof Date;function tU(t,e){const n=S7(t.data,e);return(i,{location:r})=>r==="tick"?n.tickFormat(t.tickNumber)(i):`${i.toLocaleString()}`}const eue=.2,tue=.1;function nU({drawingArea:t,formattedSeries:e,axis:n,extremumGetters:i,axisDirection:r,zoomData:s,zoomOptions:o,getFilters:a}){const l={};return n.forEach((u,c)=>{const d=u,h=o==null?void 0:o[d.id],m=s==null?void 0:s.find(({axisId:W})=>W===d.id),g=m?[m.start,m.end]:[0,100],v=Jle(t,r,d),[_,y]=Zle(d,i,c,e,m===void 0&&!h?a:void 0),S=d.data??[];if(jle(d)){const W=d.categoryGapRatio??eue,G=d.barGapRatio??tue,Y=r==="y"?[v[1],v[0]]:v,ie=QC(Y,g);if(l[d.id]=ve({categoryGapRatio:W,barGapRatio:G},d,{data:S,scale:zD(d.data,ie).paddingInner(W).paddingOuter(W/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?NT(ve({values:d.data},d.colorMap)):kS(d.colorMap))}),eU(d.data)){const Q=tU(d,Y);l[d.id].valueFormatter=d.valueFormatter??Q}}if(qle(d)){const W=r==="y"?[...v].reverse():v,G=QC(W,g);if(l[d.id]=ve({},d,{data:S,scale:koe(d.data,G),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?NT(ve({values:d.data},d.colorMap)):kS(d.colorMap))}),eU(d.data)){const Y=tU(d,W);l[d.id].valueFormatter=d.valueFormatter??Y}}if(d.scaleType==="band"||d.scaleType==="point")return;const x=d.scaleType??"linear",w=[d.min??_,d.max??y],P=Yle(ve({},d,{range:v,domain:w})),A=P/((g[1]-g[0])/100),D=QC(v,g),O=Kle(x,w,D).nice(P),[H,E]=O.domain(),k=[d.min??H,d.max??E];l[d.id]=ve({},d,{data:S,scaleType:x,scale:O.domain(k),tickNumber:A,colorScale:d.colorMap&&kS(d.colorMap)})}),{axis:l,axisIds:n.map(({id:u})=>u)}}const rw="DEFAULT_X_AXIS_KEY",nue="DEFAULT_Y_AXIS_KEY",iue={top:50,bottom:50,left:50,right:50},rue=(t,e,n)=>{const i=ve({},iue,n);return U.useMemo(()=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:Math.max(0,t-i.left-i.right),height:Math.max(0,e-i.top-i.bottom)}),[t,e,i.top,i.bottom,i.left,i.right])},sue=rue,sw=U.createContext({top:0,left:0,bottom:0,right:0,height:300,width:400,chartId:"",isPointInside:()=>!1}),b7=U.createContext({isInitialized:!1,data:{current:null}});function oue(t){const{width:e,height:n,margin:i,svgRef:r,children:s}=t,o=sue(e,n,i),a=wH(),l=U.useCallback(({x:d,y:h},m)=>{if(m!=null&&m.targetElement&&(m!=null&&m.targetElement.closest("[data-drawing-container]")))return!0;const g=d>=o.left-1&&d<=o.left+o.width,v=h>=o.top-1&&h<=o.top+o.height;return(m==null?void 0:m.direction)==="x"?g:((m==null?void 0:m.direction)==="y"||g)&&v},[o]),u=U.useMemo(()=>ve({chartId:a??""},o,{isPointInside:l}),[a,o,l]),c=U.useMemo(()=>({isInitialized:!0,data:r}),[r]);return $(b7.Provider,{value:c,children:$(sw.Provider,{value:u,children:s})})}function Ls(){const{left:t,top:e,width:n,height:i,bottom:r,right:s,isPointInside:o}=U.useContext(sw);return U.useMemo(()=>({left:t,top:e,width:n,height:i,bottom:r,right:s,isPointInside:o}),[i,t,e,n,r,s,o])}const aue=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];function lue(t,e,n=aue){return t.type==="pie"?ve({},t,{data:t.data.map((i,r)=>ve({color:n[r%n.length]},i))}):ve({color:n[e%n.length]},t)}const uue=({series:t,colors:e,seriesFormatters:n,dataset:i})=>{const r={};t.forEach((o,a)=>{var c;const{id:l=`auto-generated-id-${a}`,type:u}=o;if(r[u]===void 0&&(r[u]={series:{},seriesOrder:[]}),((c=r[u])==null?void 0:c.series[l])!==void 0)throw new Error(`MUI X: series' id "${l}" is not unique.`);r[u].series[l]=ve({id:l},lue(o,a,e)),r[u].seriesOrder.push(l)});const s={};return Object.keys(n).forEach(o=>{var l;const a=r[o];a!==void 0&&(s[o]=((l=n[o])==null?void 0:l.call(n,a,i))??r[o])}),s},cue=["#02B2AF","#2E96FF","#B800D8","#60009B","#2731C8","#03008D"],due=["#02B2AF","#72CCFF","#DA00FF","#9001CB","#2E96FF","#3B48E0"],hue=t=>t==="dark"?due:cue,w7=U.createContext({isInitialized:!1,data:{}}),f_=U.createContext({isInitialized:!1,data:{colorProcessors:{},seriesFormatters:{},xExtremumGetters:{},yExtremumGetters:{},rotationExtremumGetters:{},radiusExtremumGetters:{}}}),iU=(t,e)=>e==="x"?{x:t,y:null}:{x:null,y:t},E7=t=>{var l;const{axis:e,getFilters:n,isDefaultAxis:i}=t,r=n==null?void 0:n({currentAxisId:e.id,isDefaultAxis:i}),s=r?(l=e.data)==null?void 0:l.filter((u,c)=>r({x:null,y:null},c)):e.data,o=Math.min(...s??[]),a=Math.max(...s??[]);return[o,a]},C7=t=>e=>{const{series:n,axis:i,getFilters:r,isDefaultAxis:s}=e;return Object.keys(n).filter(o=>{const a=n[o].yAxisId??n[o].yAxisKey;return a===i.id||s&&a===void 0}).reduce((o,a)=>{const{stackedData:l}=n[a],u=r==null?void 0:r({currentAxisId:i.id,isDefaultAxis:s,seriesXAxisId:n[a].xAxisId??n[a].xAxisKey,seriesYAxisId:n[a].yAxisId??n[a].yAxisKey}),[c,d]=(l==null?void 0:l.reduce((h,m,g)=>u&&(!u(iU(m[0],t),g)||!u(iU(m[1],t),g))?h:[Math.min(...m,h[0]),Math.max(...m,h[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(c,o[0]),Math.max(d,o[1])]},[1/0,-1/0])},fue=t=>Object.keys(t.series).some(n=>t.series[n].layout==="horizontal")?C7("x")(t):E7(t),pue=t=>Object.keys(t.series).some(n=>t.series[n].layout==="horizontal")?E7(t):C7("y")(t),ZC={appearance:YH,ascending:KH,descending:yoe,insideOut:voe,none:Dm,reverse:_oe},JC={expand:hoe,diverging:foe,none:Rm,silhouette:poe,wiggle:moe},A7=t=>{const{series:e,seriesOrder:n,defaultStrategy:i}=t,r=[],s={};return n.forEach(o=>{const{stack:a,stackOrder:l,stackOffset:u}=e[o];a===void 0?r.push({ids:[o],stackingOrder:ZC.none,stackingOffset:JC.none}):s[a]===void 0?(s[a]=r.length,r.push({ids:[o],stackingOrder:ZC[l??(i==null?void 0:i.stackOrder)??"none"],stackingOffset:JC[u??(i==null?void 0:i.stackOffset)??"diverging"]})):(r[s[a]].ids.push(o),l!==void 0&&(r[s[a]].stackingOrder=ZC[l]),u!==void 0&&(r[s[a]].stackingOffset=JC[u]))}),r};function M7(t,e){const n={};return Object.keys(t).forEach(i=>{n[i]=ve({},t[i],{valueFormatter:t[i].valueFormatter??e})}),n}const mue=(t,e)=>{const{seriesOrder:n,series:i}=t,r=A7(t),s=e??[];n.forEach(a=>{const l=i[a].data;if(l!==void 0)l.forEach((u,c)=>{s.length<=c?s.push({[a]:u}):s[c][a]=u});else if(e===void 0)throw new Error([`MUI X: bar series with id='${a}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(a=>{const{ids:l,stackingOffset:u,stackingOrder:c}=a,d=XH().keys(l.map(h=>{const m=i[h].dataKey;return i[h].data===void 0&&m!==void 0?m:h})).value((h,m)=>h[m]??0).order(c).offset(u)(s);l.forEach((h,m)=>{const g=i[h].dataKey;o[h]=ve({layout:"vertical"},i[h],{data:g?e.map(v=>{const _=v[g];return typeof _!="number"?0:_}):i[h].data,stackedData:d[m].map(([v,_])=>[v,_])})})}),{seriesOrder:n,stackingGroups:r,series:M7(o,a=>a==null?"":a.toLocaleString())}},gue=mue,yue=(t,e,n)=>{const i=t.layout==="vertical",r=i?e==null?void 0:e.colorScale:n==null?void 0:n.colorScale,s=i?n==null?void 0:n.colorScale:e==null?void 0:e.colorScale,o=i?e==null?void 0:e.data:n==null?void 0:n.data;return s?a=>{const l=t.data[a],u=l===null?t.color:s(l);return u===null?t.color:u}:r&&o?a=>{const l=o[a],u=l===null?t.color:r(l);return u===null?t.color:u}:()=>t.color},vue=yue,_ue={seriesType:"bar",seriesFormatter:gue,colorProcessor:vue,xExtremumGetter:fue,yExtremumGetter:pue},OT=(t,e)=>[Math.min(t[0],e[0]),Math.max(t[1],e[1])],xue=t=>{const{series:e,axis:n,isDefaultAxis:i,getFilters:r}=t;return Object.keys(e).filter(s=>{const o=e[s].xAxisId??e[s].xAxisKey;return o===n.id||o===void 0&&i}).reduce((s,o)=>{var u;const a=r==null?void 0:r({currentAxisId:n.id,isDefaultAxis:i,seriesXAxisId:e[o].xAxisId??e[o].xAxisKey,seriesYAxisId:e[o].yAxisId??e[o].yAxisKey}),l=(u=e[o].data)==null?void 0:u.reduce((c,d,h)=>a&&!a(d,h)?c:OT(c,[d.x,d.x]),[1/0,-1/0]);return OT(s,l??[1/0,-1/0])},[1/0,-1/0])},Sue=t=>{const{series:e,axis:n,isDefaultAxis:i,getFilters:r}=t;return Object.keys(e).filter(s=>{const o=e[s].yAxisId??e[s].yAxisKey;return o===n.id||o===void 0&&i}).reduce((s,o)=>{var u;const a=r==null?void 0:r({currentAxisId:n.id,isDefaultAxis:i,seriesXAxisId:e[o].xAxisId??e[o].xAxisKey,seriesYAxisId:e[o].yAxisId??e[o].yAxisKey}),l=(u=e[o].data)==null?void 0:u.reduce((c,d,h)=>a&&!a(d,h)?c:OT(c,[d.y,d.y]),[1/0,-1/0]);return OT(s,l??[1/0,-1/0])},[1/0,-1/0])},Tue=({series:t,seriesOrder:e},n)=>({series:Object.fromEntries(Object.entries(t).map(([r,s])=>{const o=s==null?void 0:s.datasetKeys,a=["x","y","id"].filter(u=>typeof(o==null?void 0:o[u])!="string");if(s!=null&&s.datasetKeys&&a.length>0)throw new Error([`MUI X: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${a.map(u=>`"${u}"`).join(", ")} are missing.`].join(`
`));const l=o?(n==null?void 0:n.map(u=>({x:u[o.x],y:u[o.y],z:o.z&&u[o.z],id:u[o.id]})))??[]:s.data??[];return[r,ve({},s,{data:l,valueFormatter:s.valueFormatter??(u=>`(${u.x}, ${u.y})`)})]})),seriesOrder:e}),bue=Tue,wue=(t,e,n,i)=>{const r=i==null?void 0:i.colorScale,s=n==null?void 0:n.colorScale,o=e==null?void 0:e.colorScale;return r?a=>{var c,d;if(((c=i==null?void 0:i.data)==null?void 0:c[a])!==void 0){const h=r((d=i==null?void 0:i.data)==null?void 0:d[a]);if(h!==null)return h}const l=t.data[a],u=l===null?t.color:r(l.z);return u===null?t.color:u}:s?a=>{const l=t.data[a],u=l===null?t.color:s(l.y);return u===null?t.color:u}:o?a=>{const l=t.data[a],u=l===null?t.color:o(l.x);return u===null?t.color:u}:()=>t.color},Eue=wue,Cue={seriesType:"scatter",seriesFormatter:bue,colorProcessor:Eue,xExtremumGetter:xue,yExtremumGetter:Sue},Aue=t=>{const{axis:e}=t,n=Math.min(...e.data??[]),i=Math.max(...e.data??[]);return[n,i]};function Mue(t,e,n){return e.reduce((i,r,s)=>{const[o,a]=t(r);return n&&(!n({y:o,x:null},s)||!n({y:a,x:null},s))?i:[Math.min(o,a,i[0]),Math.max(o,a,i[1])]},[1/0,-1/0])}const Pue=t=>{const{series:e,axis:n,isDefaultAxis:i,getFilters:r}=t;return Object.keys(e).filter(s=>{const o=e[s].yAxisId??e[s].yAxisKey;return o===n.id||i&&o===void 0}).reduce((s,o)=>{const{area:a,stackedData:l}=e[o],u=a!==void 0,c=r==null?void 0:r({currentAxisId:n.id,isDefaultAxis:i,seriesXAxisId:e[o].xAxisId??e[o].xAxisKey,seriesYAxisId:e[o].yAxisId??e[o].yAxisKey}),d=u&&n.scaleType!=="log"&&typeof e[o].baseline!="string"?v=>v:v=>[v[1],v[1]],h=Mue(d,l,c),[m,g]=h;return[Math.min(m,s[0]),Math.max(g,s[1])]},[1/0,-1/0])},Iue=(t,e)=>{const{seriesOrder:n,series:i}=t,r=A7(ve({},t,{defaultStrategy:{stackOffset:"none"}})),s=e??[];n.forEach(a=>{const l=i[a].data;l!==void 0&&l.forEach((u,c)=>{s.length<=c?s.push({[a]:u}):s[c][a]=u})});const o={};return r.forEach(a=>{const{ids:l,stackingOrder:u,stackingOffset:c}=a,d=XH().keys(l.map(h=>{const m=i[h].dataKey;return i[h].data===void 0&&m!==void 0?m:h})).value((h,m)=>h[m]??0).order(u).offset(c)(s);l.forEach((h,m)=>{const g=i[h].dataKey;o[h]=ve({},i[h],{data:g?e.map(v=>{const _=v[g];return typeof _!="number"?null:_}):i[h].data,stackedData:d[m].map(([v,_])=>[v,_])})})}),{seriesOrder:n,stackingGroups:r,series:M7(o,a=>a==null?"":a.toLocaleString())}},Rue=Iue,Due=(t,e,n)=>{const i=n==null?void 0:n.colorScale,r=e==null?void 0:e.colorScale;return i?s=>{const o=t.data[s],a=o===null?t.color:i(o);return a===null?t.color:a}:r?s=>{var l;const o=(l=e.data)==null?void 0:l[s],a=o===null?t.color:r(o);return a===null?t.color:a}:()=>t.color},ik=Due,kue={seriesType:"line",colorProcessor:ik,seriesFormatter:Rue,xExtremumGetter:Aue,yExtremumGetter:Pue};function fu(t,e){return typeof t=="function"?t(e):t}const Lue=(t="none")=>{if(typeof t=="function")return t;switch(t){case"none":return null;case"desc":return(e,n)=>n-e;case"asc":return(e,n)=>e-n;default:return null}},Nue=t=>{const{seriesOrder:e,series:n}=t,i={};return e.forEach(r=>{const s=$se().startAngle(2*Math.PI*(n[r].startAngle??0)/360).endAngle(2*Math.PI*(n[r].endAngle??360)/360).padAngle(2*Math.PI*(n[r].paddingAngle??0)/360).sortValues(Lue(n[r].sortingValues??"none"))(n[r].data.map(o=>o.value));i[r]=ve({valueFormatter:o=>o.value.toLocaleString()},n[r],{data:n[r].data.map((o,a)=>ve({},o,{id:o.id??`auto-generated-pie-id-${r}-${a}`},s[a])).map((o,a)=>{var l,u;return ve({},o,{formattedValue:((u=(l=n[r]).valueFormatter)==null?void 0:u.call(l,ve({},o,{label:fu(o.label,"arc")}),{dataIndex:a}))??o.value.toLocaleString()})})})}),{seriesOrder:e,series:i}},Oue=Nue,Uue=t=>e=>t.data[e].color,Fue=Uue,Bue={seriesType:"pie",colorProcessor:Fue,seriesFormatter:Oue},zue=[_ue,Cue,kue,Bue];function Hue(t){const e=t??zue,n={},i={},r={},s={},o={},a={};for(let l=0;l<e.length;l+=1){const u=e[l],c=u.seriesType;n[c]=u.seriesFormatter,i[c]=u.colorProcessor,u.xExtremumGetter&&(r[c]=u.xExtremumGetter),u.yExtremumGetter&&(s[c]=u.yExtremumGetter),u.rotationExtremumGetter&&(o[c]=u.rotationExtremumGetter),u.radiusExtremumGetter&&(a[c]=u.radiusExtremumGetter)}return{seriesFormatters:n,colorProcessors:i,xExtremumGetters:r,yExtremumGetters:s,rotationExtremumGetters:o,radiusExtremumGetters:a}}function Vue(t){const{children:e,plugins:n}=t,i=U.useMemo(()=>({isInitialized:!0,data:Hue(n)}),[n]);return $(f_.Provider,{value:i,children:e})}function P7(t){const{isInitialized:e,data:n}=U.useContext(f_);if(!e)throw new Error(["MUI X: Could not find the plugin context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t?n.colorProcessors[t]:n.colorProcessors}function $ue(t){const{isInitialized:e,data:n}=U.useContext(f_);if(!e)throw new Error(["MUI X: Could not find the plugin context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t?n.seriesFormatters[t]:n.seriesFormatters}function Gue(t){const{isInitialized:e,data:n}=U.useContext(f_);if(!e)throw new Error(["MUI X: Could not find the plugin context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t?n.xExtremumGetters[t]:n.xExtremumGetters}function Wue(t){const{isInitialized:e,data:n}=U.useContext(f_);if(!e)throw new Error(["MUI X: Could not find the plugin context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t?n.yExtremumGetters[t]:n.yExtremumGetters}function jue(t){const{series:e,dataset:n,colors:i=hue,children:r}=t,s=$ue(),o=hg(),a=U.useMemo(()=>({isInitialized:!0,data:uue({series:e,colors:typeof i=="function"?i(o.palette.mode):i,seriesFormatters:s,dataset:n})}),[e,i,o.palette.mode,s,n]);return $(w7.Provider,{value:a,children:r})}function ad(){const{isInitialized:t,data:e}=U.useContext(w7);if(!t)throw new Error(["MUI X: Could not find the series ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return e}function ow(){const t=ad();return U.useMemo(()=>t.line,[t.line])}const I7=U.createContext({isInitialized:!1,data:{xAxis:{},yAxis:{},xAxisIds:[],yAxisIds:[]}});function que(t){const{xAxis:e,yAxis:n,children:i}=t,r=ad(),s=Ls(),o=Gue(),a=Wue(),l=U.useMemo(()=>nU({drawingArea:s,formattedSeries:r,axis:e,extremumGetters:o,axisDirection:"x"}),[s,r,e,o]),u=U.useMemo(()=>nU({drawingArea:s,formattedSeries:r,axis:n,extremumGetters:a,axisDirection:"y"}),[s,r,n,a]),c=U.useMemo(()=>({isInitialized:!0,data:{xAxis:l.axis,yAxis:u.axis,xAxisIds:l.axisIds,yAxisIds:u.axisIds}}),[l,u]);return $(I7.Provider,{value:c,children:i})}const Ns=()=>{const{data:t}=U.useContext(I7);return t},Ou=U.createContext({item:null,axis:{x:null,y:null},useVoronoiInteraction:!1,dispatch:()=>null}),Xue=(t,e)=>{switch(e.type){case"enterItem":return ve({},t,{item:e.data});case"exitChart":return t.item===null&&t.axis.x===null&&t.axis.y===null?t:ve({},t,{axis:{x:null,y:null},item:null});case"updateVoronoiUsage":return ve({},t,{useVoronoiInteraction:e.useVoronoiInteraction});case"leaveItem":return t.item===null||Object.keys(e.data).some(n=>e.data[n]!==t.item[n])?t:ve({},t,{item:null});case"updateAxis":return e.data.x===t.axis.x&&e.data.y===t.axis.y?t:ve({},t,{axis:e.data});default:return t}};function Yue(t){const{children:e}=t,[n,i]=U.useReducer(Xue,{item:null,axis:{x:null,y:null},useVoronoiInteraction:!1}),r=U.useMemo(()=>ve({},n,{dispatch:i}),[n]);return $(Ou.Provider,{value:r,children:e})}const R7=U.createContext({isInitialized:!1,data:{highlightedItem:null,setHighlighted:()=>{},clearHighlighted:()=>{},isHighlighted:()=>!1,isFaded:()=>!1}}),Kue=(t,e)=>n=>t?t.fade==="series"?n.seriesId===(e==null?void 0:e.seriesId)&&n.dataIndex!==(e==null?void 0:e.dataIndex):t.fade==="global"?n.seriesId!==(e==null?void 0:e.seriesId)||n.dataIndex!==(e==null?void 0:e.dataIndex):!1:!1,Que=(t,e)=>n=>t?t.highlight==="series"?n.seriesId===(e==null?void 0:e.seriesId):t.highlight==="item"?n.dataIndex===(e==null?void 0:e.dataIndex)&&n.seriesId===(e==null?void 0:e.seriesId):!1:!1,Zue=["highlighted","faded"],Jue=t=>{const e=t??{},{highlighted:n,faded:i}=e,r=kn(e,Zue);return ve({highlight:n,fade:i},r)};function ece({children:t,highlightedItem:e,onHighlightChange:n}){const[i,r]=hre({controlled:e,default:null,name:"HighlightedProvider",state:"highlightedItem"}),s=ad(),o=U.useMemo(()=>{const u=new Map;return Object.keys(s).forEach(c=>{const d=s[c];Object.keys((d==null?void 0:d.series)??{}).forEach(h=>{const m=d==null?void 0:d.series[h];u.set(h,Jue(m==null?void 0:m.highlightScope))})}),u},[s]),a=i&&i.seriesId?o.get(i.seriesId)??void 0:void 0,l=U.useMemo(()=>({isInitialized:!0,data:{highlightScope:a,highlightedItem:i,setHighlighted:u=>{r(u),n==null||n(u)},clearHighlighted:()=>{r(null),n==null||n(null)},isHighlighted:Que(a,i),isFaded:Kue(a,i)}}),[i,a,r,n]);return $(R7.Provider,{value:l,children:t})}function D7(){const{isInitialized:t,data:e}=U.useContext(R7);if(!t)throw new Error(["MUI X: Could not find the highlighted ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return e}function aw(t){const e=D7();if(!t)return{isHighlighted:!1,isFaded:!1};const n=e.isHighlighted(t),i=!n&&e.isFaded(t);return{isHighlighted:n,isFaded:i}}const rk=U.createContext({zAxis:{},zAxisIds:[]});function tce(t){const{zAxis:e,dataset:n,children:i}=t,r=U.useMemo(()=>e==null?void 0:e.map(o=>{const a=o.dataKey;if(a===void 0||o.data!==void 0)return o;if(n===void 0)throw new Error("MUI X: z-axis uses `dataKey` but no `dataset` is provided.");return ve({},o,{data:n.map(l=>l[a])})}),[e,n]),s=U.useMemo(()=>{const o=(r==null?void 0:r.map((l,u)=>ve({id:`defaultized-z-axis-${u}`},l)))??[],a={};return o.forEach(l=>{a[l.id]=ve({},l,{colorScale:l.colorMap&&(l.colorMap.type==="ordinal"&&l.data?NT(ve({values:l.data},l.colorMap)):kS(l.colorMap.type==="continuous"?ve({min:l.min,max:l.max},l.colorMap):l.colorMap))})}),{zAxis:a,zAxisIds:o.map(({id:l})=>l)}},[r]);return $(rk.Provider,{value:s,children:i})}const lw=t=>{const{dispatch:e}=U.useContext(Ou),{setHighlighted:n,clearHighlighted:i}=D7();return t?()=>({}):s=>({onPointerEnter:()=>{e({type:"enterItem",data:s}),n({seriesId:s.seriesId,dataIndex:s.dataIndex})},onPointerLeave:u=>{u.currentTarget.releasePointerCapture(u.pointerId),e({type:"leaveItem",data:s}),i()},onPointerDown:u=>{u.currentTarget.hasPointerCapture(u.pointerId)&&u.currentTarget.releasePointerCapture(u.pointerId)}})};var sk=m_(),Qt=t=>p_(t,sk),ok=m_();Qt.write=t=>p_(t,ok);var uw=m_();Qt.onStart=t=>p_(t,uw);var ak=m_();Qt.onFrame=t=>p_(t,ak);var lk=m_();Qt.onFinish=t=>p_(t,lk);var hm=[];Qt.setTimeout=(t,e)=>{const n=Qt.now()+e,i=()=>{const s=hm.findIndex(o=>o.cancel==i);~s&&hm.splice(s,1),Oc-=~s?1:0},r={time:n,handler:t,cancel:i};return hm.splice(k7(n),0,r),Oc+=1,L7(),r};var k7=t=>~(~hm.findIndex(e=>e.time>t)||~hm.length);Qt.cancel=t=>{uw.delete(t),ak.delete(t),lk.delete(t),sk.delete(t),ok.delete(t)};Qt.sync=t=>{XP=!0,Qt.batchedUpdates(t),XP=!1};Qt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Qt.onStart(n)}return i.handler=t,i.cancel=()=>{uw.delete(n),e=null},i};var uk=typeof window<"u"?window.requestAnimationFrame:()=>{};Qt.use=t=>uk=t;Qt.now=typeof performance<"u"?()=>performance.now():Date.now;Qt.batchedUpdates=t=>t();Qt.catch=console.error;Qt.frameLoop="always";Qt.advance=()=>{Qt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):O7()};var Nc=-1,Oc=0,XP=!1;function p_(t,e){XP?(e.delete(t),t(0)):(e.add(t),L7())}function L7(){Nc<0&&(Nc=0,Qt.frameLoop!=="demand"&&uk(N7))}function nce(){Nc=-1}function N7(){~Nc&&(uk(N7),Qt.batchedUpdates(O7))}function O7(){const t=Nc;Nc=Qt.now();const e=k7(Nc);if(e&&(U7(hm.splice(0,e),n=>n.handler()),Oc-=e),!Oc){nce();return}uw.flush(),sk.flush(t?Math.min(64,Nc-t):16.667),ak.flush(),ok.flush(),lk.flush()}function m_(){let t=new Set,e=t;return{add(n){Oc+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Oc-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Oc-=e.size,U7(e,i=>i(n)&&t.add(i)),Oc+=t.size,e=t)}}}function U7(t,e){t.forEach(n=>{try{e(n)}catch(i){Qt.catch(i)}})}var ice=Object.defineProperty,rce=(t,e)=>{for(var n in e)ice(t,n,{get:e[n],enumerable:!0})},qo={};rce(qo,{assign:()=>oce,colors:()=>qc,createStringInterpolator:()=>dk,skipAnimation:()=>B7,to:()=>F7,willAdvance:()=>hk});function YP(){}var sce=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Ze={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Kl(t,e){if(Ze.arr(t)){if(!Ze.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Wt=(t,e)=>t.forEach(e);function xl(t,e,n){if(Ze.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Jr=t=>Ze.und(t)?[]:Ze.arr(t)?t:[t];function my(t,e){if(t.size){const n=Array.from(t);t.clear(),Wt(n,e)}}var K0=(t,...e)=>my(t,n=>n(...e)),ck=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),dk,F7,qc=null,B7=!1,hk=YP,oce=t=>{t.to&&(F7=t.to),t.now&&(Qt.now=t.now),t.colors!==void 0&&(qc=t.colors),t.skipAnimation!=null&&(B7=t.skipAnimation),t.createStringInterpolator&&(dk=t.createStringInterpolator),t.requestAnimationFrame&&Qt.use(t.requestAnimationFrame),t.batchedUpdates&&(Qt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(hk=t.willAdvance),t.frameLoop&&(Qt.frameLoop=t.frameLoop)},gy=new Set,Oo=[],eA=[],UT=0,cw={get idle(){return!gy.size&&!Oo.length},start(t){UT>t.priority?(gy.add(t),Qt.onStart(ace)):(z7(t),Qt(KP))},advance:KP,sort(t){if(UT)Qt.onFrame(()=>cw.sort(t));else{const e=Oo.indexOf(t);~e&&(Oo.splice(e,1),H7(t))}},clear(){Oo=[],gy.clear()}};function ace(){gy.forEach(z7),gy.clear(),Qt(KP)}function z7(t){Oo.includes(t)||H7(t)}function H7(t){Oo.splice(lce(Oo,e=>e.priority>t.priority),0,t)}function KP(t){const e=eA;for(let n=0;n<Oo.length;n++){const i=Oo[n];UT=i.priority,i.idle||(hk(i),i.advance(t),i.idle||e.push(i))}return UT=0,eA=Oo,eA.length=0,Oo=e,Oo.length>0}function lce(t,e){const n=t.findIndex(e);return n<0?t.length:n}var uce=(t,e,n)=>Math.min(Math.max(n,t),e),cce={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ta="[-+]?\\d*\\.?\\d+",FT=Ta+"%";function dw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var dce=new RegExp("rgb"+dw(Ta,Ta,Ta)),hce=new RegExp("rgba"+dw(Ta,Ta,Ta,Ta)),fce=new RegExp("hsl"+dw(Ta,FT,FT)),pce=new RegExp("hsla"+dw(Ta,FT,FT,Ta)),mce=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gce=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yce=/^#([0-9a-fA-F]{6})$/,vce=/^#([0-9a-fA-F]{8})$/;function _ce(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=yce.exec(t))?parseInt(e[1]+"ff",16)>>>0:qc&&qc[t]!==void 0?qc[t]:(e=dce.exec(t))?(np(e[1])<<24|np(e[2])<<16|np(e[3])<<8|255)>>>0:(e=hce.exec(t))?(np(e[1])<<24|np(e[2])<<16|np(e[3])<<8|oU(e[4]))>>>0:(e=mce.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=vce.exec(t))?parseInt(e[1],16)>>>0:(e=gce.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=fce.exec(t))?(rU(sU(e[1]),s1(e[2]),s1(e[3]))|255)>>>0:(e=pce.exec(t))?(rU(sU(e[1]),s1(e[2]),s1(e[3]))|oU(e[4]))>>>0:null}function tA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function rU(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=tA(r,i,t+1/3),o=tA(r,i,t),a=tA(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function np(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function sU(t){return(parseFloat(t)%360+360)%360/360}function oU(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function s1(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function aU(t){let e=_ce(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var mv=(t,e,n)=>{if(Ze.fun(t))return t;if(Ze.arr(t))return mv({range:t,output:e,extrapolate:n});if(Ze.str(t.output[0]))return dk(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=Sce(u,s);return xce(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function xce(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function Sce(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Tce=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return uce(0,1,r/t)},BT=1.70158,o1=BT*1.525,lU=BT+1,uU=2*Math.PI/3,cU=2*Math.PI/4.5,a1=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,bce={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>lU*t*t*t-BT*t*t,easeOutBack:t=>1+lU*Math.pow(t-1,3)+BT*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((o1+1)*2*t-o1)/2:(Math.pow(2*t-2,2)*((o1+1)*(t*2-2)+o1)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*uU),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*uU)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*cU))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*cU)/2+1,easeInBounce:t=>1-a1(1-t),easeOutBounce:a1,easeInOutBounce:t=>t<.5?(1-a1(1-2*t))/2:(1+a1(2*t-1))/2,steps:Tce},gv=Symbol.for("FluidValue.get"),Om=Symbol.for("FluidValue.observers"),Lo=t=>!!(t&&t[gv]),ys=t=>t&&t[gv]?t[gv]():t,dU=t=>t[Om]||null;function wce(t,e){t.eventObserved?t.eventObserved(e):t(e)}function yv(t,e){const n=t[Om];n&&n.forEach(i=>{wce(i,e)})}var V7=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Ece(this,t)}},Ece=(t,e)=>$7(t,gv,e);function fg(t,e){if(t[gv]){let n=t[Om];n||$7(t,Om,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function vv(t,e){const n=t[Om];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Om]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var $7=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),LS=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Cce=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,hU=new RegExp(`(${LS.source})(%|[a-z]+)`,"i"),Ace=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,hw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,G7=t=>{const[e,n]=Mce(t);if(!e||ck())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&hw.test(n))return G7(n);if(n)return n}return t},Mce=t=>{const e=hw.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},nA,Pce=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,W7=t=>{nA||(nA=qc?new RegExp(`(${Object.keys(qc).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ys(s).replace(hw,G7).replace(Cce,aU).replace(nA,aU)),n=e.map(s=>s.match(LS).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>mv({...t,output:s}));return s=>{var l;const o=!hU.test(e[0])&&((l=e.find(u=>hU.test(u)))==null?void 0:l.replace(LS,""));let a=0;return e[0].replace(LS,()=>`${r[a++](s)}${o||""}`).replace(Ace,Pce)}},fk="react-spring: ",j7=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${fk}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Ice=j7(console.warn);function Rce(){Ice(`${fk}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Dce=j7(console.warn);function kce(){Dce(`${fk}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function fw(t){return Ze.str(t)&&(t[0]=="#"||/\d/.test(t)||!ck()&&hw.test(t)||t in(qc||{}))}var Uc=ck()?U.useEffect:U.useLayoutEffect,Lce=()=>{const t=U.useRef(!1);return Uc(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function pk(){const t=U.useState()[1],e=Lce();return()=>{e.current&&t(Math.random())}}function Nce(t,e){const[n]=U.useState(()=>({inputs:e,result:t()})),i=U.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Oce(e,s.inputs)||(s={inputs:e,result:t()}):s=n,U.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Oce(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var mk=t=>U.useEffect(t,Uce),Uce=[];function QP(t){const e=U.useRef();return U.useEffect(()=>{e.current=t}),e.current}var _v=Symbol.for("Animated:node"),Fce=t=>!!t&&t[_v]===t,Ka=t=>t&&t[_v],gk=(t,e)=>sce(t,_v,e),pw=t=>t&&t[_v]&&t[_v].getPayload(),q7=class{constructor(){gk(this,this)}getPayload(){return this.payload||[]}},g_=class extends q7{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Ze.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new g_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return Ze.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Ze.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},xv=class extends g_{constructor(t){super(0),this._string=null,this._toString=mv({output:[t,t]})}static create(t){return new xv(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Ze.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=mv({output:[this.getValue(),t]})),this._value=0,super.reset()}},zT={dependencies:null},mw=class extends q7{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return xl(this.source,(n,i)=>{Fce(n)?e[i]=n.getValue(t):Lo(n)?e[i]=ys(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Wt(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return xl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){zT.dependencies&&Lo(t)&&zT.dependencies.add(t);const e=pw(t);e&&Wt(e,n=>this.add(n))}},X7=class extends mw{constructor(t){super(t)}static create(t){return new X7(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Bce)),!0)}};function Bce(t){return(fw(t)?xv:g_).create(t)}function ZP(t){const e=Ka(t);return e?e.constructor:Ze.arr(t)?X7:fw(t)?xv:g_}var fU=(t,e)=>{const n=!Ze.fun(t)||t.prototype&&t.prototype.isReactComponent;return U.forwardRef((i,r)=>{const s=U.useRef(null),o=n&&U.useCallback(g=>{s.current=Vce(r,g)},[r]),[a,l]=Hce(i,e),u=pk(),c=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&u()},d=new zce(c,l),h=U.useRef();Uc(()=>(h.current=d,Wt(l,g=>fg(g,d)),()=>{h.current&&(Wt(h.current.deps,g=>vv(g,h.current)),Qt.cancel(h.current.update))})),U.useEffect(c,[]),mk(()=>()=>{const g=h.current;Wt(g.deps,v=>vv(v,g))});const m=e.getComponentProps(a.getValue());return U.createElement(t,{...m,ref:o})})},zce=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Qt.write(this.update)}};function Hce(t,e){const n=new Set;return zT.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new mw(t),zT.dependencies=null,[t,n]}function Vce(t,e){return t&&(Ze.fun(t)?t(e):t.current=e),e}var pU=Symbol.for("AnimatedComponent"),$ce=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new mw(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=mU(o)||"Anonymous";return Ze.str(o)?o=s[o]||(s[o]=fU(o,r)):o=o[pU]||(o[pU]=fU(o,r)),o.displayName=`Animated(${a})`,o};return xl(t,(o,a)=>{Ze.arr(t)&&(a=mU(o)),s[a]=s(o)}),{animated:s}},mU=t=>Ze.str(t)?t:t&&Ze.str(t.displayName)?t.displayName:Ze.fun(t)&&t.name||null;function vs(t,...e){return Ze.fun(t)?t(...e):t}var yy=(t,e)=>t===!0||!!(e&&t&&(Ze.fun(t)?t(e):Jr(t).includes(e))),Y7=(t,e)=>Ze.obj(t)?e&&t[e]:t,K7=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Gce=t=>t,gw=(t,e=Gce)=>{let n=Wce;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);Ze.und(s)||(i[r]=s)}return i},Wce=["config","onProps","onStart","onChange","onPause","onResume","onRest"],jce={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function qce(t){const e={};let n=0;if(xl(t,(i,r)=>{jce[r]||(e[r]=i,n++)}),n)return e}function yk(t){const e=qce(t);if(e){const n={to:e};return xl(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Sv(t){return t=ys(t),Ze.arr(t)?t.map(Sv):fw(t)?qo.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Q7(t){for(const e in t)return!0;return!1}function JP(t){return Ze.fun(t)||Ze.arr(t)&&Ze.obj(t[0])}function eI(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Z7(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Xce={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tI={...Xce.default,mass:1,damping:1,easing:bce.linear,clamp:!1},Yce=class{constructor(){this.velocity=0,Object.assign(this,tI)}};function Kce(t,e,n){n&&(n={...n},gU(n,e),e={...n,...e}),gU(t,e),Object.assign(t,e);for(const o in tI)t[o]==null&&(t[o]=tI[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return Ze.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function gU(t,e){if(!Ze.und(e.decay))t.duration=void 0;else{const n=!Ze.und(e.tension)||!Ze.und(e.friction);(n||!Ze.und(e.frequency)||!Ze.und(e.damping)||!Ze.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var yU=[],Qce=class{constructor(){this.changed=!1,this.values=yU,this.toValues=null,this.fromValues=yU,this.config=new Yce,this.immediate=!1}};function J7(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=yy(n.cancel??(i==null?void 0:i.cancel),e);if(c)m();else{Ze.und(n.pause)||(r.paused=yy(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||yy(g,e)),l=vs(n.delay||0,e),g?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Qt.now()}function h(){l>0&&!qo.skipAnimation?(r.delayed=!0,u=Qt.setTimeout(m,l),r.pauseQueue.add(d),r.timeouts.add(u)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(g){a(g)}}})}var vk=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?fm(t.get()):e.every(n=>n.noop)?eV(t.get()):_a(t.get(),e.every(n=>n.finished)),eV=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),_a=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),fm=t=>({value:t,cancelled:!0,finished:!1});function tV(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=gw(e,(_,y)=>y==="onRest"?void 0:_);let c,d;const h=new Promise((_,y)=>(c=_,d=y)),m=_=>{const y=r<=(n.cancelId||0)&&fm(i)||r!==n.asyncId&&_a(i,!1);if(y)throw _.result=y,d(_),_},g=(_,y)=>{const S=new vU,x=new _U;return(async()=>{if(qo.skipAnimation)throw Tv(n),x.result=_a(i,!1),d(x),x;m(S);const w=Ze.obj(_)?{..._}:{...y,to:_};w.parentId=r,xl(u,(A,D)=>{Ze.und(w[D])&&(w[D]=A)});const P=await i.start(w);return m(S),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),P})()};let v;if(qo.skipAnimation)return Tv(n),_a(i,!1);try{let _;Ze.arr(t)?_=(async y=>{for(const S of y)await g(S)})(t):_=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([_.then(c),h]),v=_a(i.get(),!0,!1)}catch(_){if(_ instanceof vU)v=_.result;else if(_ instanceof _U)v=_.result;else throw _}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Ze.fun(o)&&Qt.batchedUpdates(()=>{o(v,i,i.item)}),v})()}function Tv(t,e){my(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var vU=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},_U=class extends Error{constructor(){super("SkipAnimationSignal")}},nI=t=>t instanceof _k,Zce=1,_k=class extends V7{constructor(){super(...arguments),this.id=Zce++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ka(this);return t&&t.getValue()}to(...t){return qo.to(this,t)}interpolate(...t){return Rce(),qo.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){yv(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||cw.sort(this),yv(this,{type:"priority",parent:this,priority:t})}},jh=Symbol.for("SpringPhase"),nV=1,iI=2,rI=4,iA=t=>(t[jh]&nV)>0,cc=t=>(t[jh]&iI)>0,y0=t=>(t[jh]&rI)>0,xU=(t,e)=>e?t[jh]|=iI|nV:t[jh]&=~iI,SU=(t,e)=>e?t[jh]|=rI:t[jh]&=~rI,Jce=class extends _k{constructor(t,e){if(super(),this.animation=new Qce,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ze.und(t)||!Ze.und(e)){const n=Ze.obj(t)?{...t}:{...e,from:t};Ze.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(cc(this)||this._state.asyncTo)||y0(this)}get goal(){return ys(this.animation.to)}get velocity(){const t=Ka(this);return t instanceof g_?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return iA(this)}get isAnimating(){return cc(this)}get isPaused(){return y0(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=pw(i.to);!o&&Lo(i.to)&&(r=Jr(ys(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==xv?1:o?o[c].lastPosition:r[c];let h=i.immediate,m=d;if(!h){if(m=u.lastPosition,s.tension<=0){u.done=!0;return}let g=u.elapsedTime+=t;const v=i.fromValues[c],_=u.v0!=null?u.v0:u.v0=Ze.arr(s.velocity)?s.velocity[c]:s.velocity;let y;const S=s.precision||(v==d?.005:Math.min(1,Math.abs(d-v)*.001));if(Ze.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,w=Math.exp(-(1-x)*g);m=v+_/(1-x)*(1-w),h=Math.abs(u.lastPosition-m)<=S,y=_*w}else{y=u.lastVelocity==null?_:u.lastVelocity;const x=s.restVelocity||S/10,w=s.clamp?0:s.bounce,P=!Ze.und(w),A=v==d?u.v0>0:v<d;let D,O=!1;const H=1,E=Math.ceil(t/H);for(let k=0;k<E&&(D=Math.abs(y)>x,!(!D&&(h=Math.abs(d-m)<=S,h)));++k){P&&(O=m==d||m>d==A,O&&(y=-y*w,m=d));const W=-s.tension*1e-6*(m-d),G=-s.friction*.001*y,Y=(W+G)/s.mass;y=y+Y*H,m=m+y*H}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,g=u.elapsedTime+=t)),x=(s.progress||0)+g/this._memoizedDuration,x=x>1?1:x<0?0:x,u.durationProgress=x),m=v+s.easing(x)*(d-v),y=(m-u.lastPosition)/t,h=x==1}u.lastVelocity=y,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(m,s.round)&&(n=!0)});const a=Ka(this),l=a.getValue();if(e){const u=ys(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Qt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(cc(this)){const{to:t,config:e}=this.animation;Qt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return Ze.und(t)?(n=this.queue||[],this.queue=[]):n=[Ze.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>vk(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Tv(this._state,t&&this._lastCallId),Qt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=Ze.obj(n)?n[e]:n,(n==null||JP(n))&&(n=void 0),i=Ze.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return iA(this)||(t.reverse&&([n,i]=[i,n]),i=ys(i),Ze.und(i)?Ka(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,gw(t,(o,a)=>/^on/.test(a)?Y7(o,n):o)),bU(this,t,"onProps"),_0(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return J7(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{y0(this)||(SU(this,!0),K0(s.pauseQueue),_0(this,"onPause",_a(this,v0(this,this.animation.to)),this))},resume:()=>{y0(this)&&(SU(this,!1),cc(this)&&this._resume(),K0(s.resumeQueue),_0(this,"onResume",_a(this,v0(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=iV(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(fm(this));const i=!Ze.und(t.to),r=!Ze.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(fm(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||Ze.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Kl(d,u);h&&(a.from=d),d=ys(d);const m=!Kl(c,l);m&&this._focus(c);const g=JP(e.to),{config:v}=a,{decay:_,velocity:y}=v;(i||r)&&(v.velocity=0),e.config&&!g&&Kce(v,vs(e.config,s),e.config!==o.config?vs(o.config,s):void 0);let S=Ka(this);if(!S||Ze.und(c))return n(_a(this,!0));const x=Ze.und(e.reset)?r&&!e.default:!Ze.und(d)&&yy(e.reset,s),w=x?d:this.get(),P=Sv(c),A=Ze.num(P)||Ze.arr(P)||fw(P),D=!g&&(!A||yy(o.immediate||e.immediate,s));if(m){const k=ZP(c);if(k!==S.constructor)if(D)S=this._set(P);else throw Error(`Cannot animate between ${S.constructor.name} and ${k.name}, as the "to" prop suggests`)}const O=S.constructor;let H=Lo(c),E=!1;if(!H){const k=x||!iA(this)&&h;(m||k)&&(E=Kl(Sv(w),P),H=!E),(!Kl(a.immediate,D)&&!D||!Kl(v.decay,_)||!Kl(v.velocity,y))&&(H=!0)}if(E&&cc(this)&&(a.changed&&!x?H=!0:H||this._stop(l)),!g&&((H||Lo(l))&&(a.values=S.getPayload(),a.toValues=Lo(c)?null:O==xv?[1]:Jr(P)),a.immediate!=D&&(a.immediate=D,!D&&!x&&this._set(l)),H)){const{onRest:k}=a;Wt(tde,G=>bU(this,e,G));const W=_a(this,v0(this,l));K0(this._pendingCalls,W),this._pendingCalls.add(n),a.changed&&Qt.batchedUpdates(()=>{var G;a.changed=!x,k==null||k(W,this),x?vs(o.onRest,W):(G=a.onStart)==null||G.call(a,W,this)})}x&&this._set(w),g?n(tV(e.to,e,this._state,this)):H?this._start():cc(this)&&!m?this._pendingCalls.add(n):n(eV(w))}_focus(t){const e=this.animation;t!==e.to&&(dU(this)&&this._detach(),e.to=t,dU(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Lo(e)&&(fg(e,this),nI(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Lo(t)&&vv(t,this)}_set(t,e=!0){const n=ys(t);if(!Ze.und(n)){const i=Ka(this);if(!i||!Kl(n,i.getValue())){const r=ZP(n);!i||i.constructor!=r?gk(this,r.create(n)):i.setValue(n),i&&Qt.batchedUpdates(()=>{this._onChange(n,e)})}}return Ka(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,_0(this,"onStart",_a(this,v0(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),vs(this.animation.onChange,t,this)),vs(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ka(this).reset(ys(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),cc(this)||(xU(this,!0),y0(this)||this._resume())}_resume(){qo.skipAnimation?this.finish():cw.start(this)}_stop(t,e){if(cc(this)){xU(this,!1);const n=this.animation;Wt(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),yv(this,{type:"idle",parent:this});const i=e?fm(this.get()):_a(this.get(),v0(this,t??n.to));K0(this._pendingCalls,i),n.changed&&(n.changed=!1,_0(this,"onRest",i,this))}}};function v0(t,e){const n=Sv(e),i=Sv(t.get());return Kl(i,n)}function iV(t,e=t.loop,n=t.to){const i=vs(e);if(i){const r=i!==!0&&yk(i),s=(r||t).reverse,o=!r||r.reset;return bv({...t,loop:e,default:!1,pause:void 0,to:!s||JP(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function bv(t){const{to:e,from:n}=t=yk(t),i=new Set;return Ze.obj(e)&&TU(e,i),Ze.obj(n)&&TU(n,i),t.keys=i.size?Array.from(i):null,t}function ede(t){const e=bv(t);return Ze.und(e.default)&&(e.default=gw(e)),e}function TU(t,e){xl(t,(n,i)=>n!=null&&e.add(i))}var tde=["onStart","onRest","onChange","onPause","onResume"];function bU(t,e,n){t.animation[n]=e[n]!==K7(e,n)?Y7(e[n],t.key):void 0}function _0(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var nde=["onStart","onChange","onRest"],ide=1,rV=class{constructor(t,e){this.id=ide++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];Ze.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(bv(t)),this}start(t){let{queue:e}=this;return t?e=Jr(t).map(bv):this.queue=[],this._flush?this._flush(this,e):(uV(this,e),sI(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Wt(Jr(e),i=>n[i].stop(!!t))}else Tv(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(Ze.und(t))this.start({pause:!0});else{const e=this.springs;Wt(Jr(t),n=>e[n].pause())}return this}resume(t){if(Ze.und(t))this.start({pause:!1});else{const e=this.springs;Wt(Jr(t),n=>e[n].resume())}return this}each(t){xl(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,my(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&my(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,my(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Qt.onFrame(this._onFrame)}};function sI(t,e){return Promise.all(e.map(n=>sV(t,n))).then(n=>vk(t,n))}async function sV(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=Ze.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const c=Ze.arr(r)||Ze.fun(r)?r:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Wt(nde,v=>{const _=e[v];if(Ze.fun(_)){const y=t._events[v];e[v]=({finished:S,cancelled:x})=>{const w=y.get(_);w?(S||(w.finished=!1),x&&(w.cancelled=!0)):y.set(_,{value:null,finished:S||!1,cancelled:x||!1})},u&&(u[v]=e[v])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,K0(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(v=>t.springs[v].start(e)),m=e.cancel===!0||K7(e,"cancel")===!0;(c||m&&d.asyncId)&&h.push(J7(++t._lastAsyncId,{props:e,state:d,actions:{pause:YP,resume:YP,start(v,_){m?(Tv(d,t._lastAsyncId),_(fm(t))):(v.onRest=a,_(tV(c,v,d,t)))}}})),d.paused&&await new Promise(v=>{d.resumeQueue.add(v)});const g=vk(t,await Promise.all(h));if(o&&g.finished&&!(n&&g.noop)){const v=iV(e,o,r);if(v)return uV(t,[v]),sV(t,v,!0)}return l&&Qt.batchedUpdates(()=>l(g,t,t.item)),g}function oI(t,e){const n={...t.springs};return e&&Wt(Jr(e),i=>{Ze.und(i.keys)&&(i=bv(i)),Ze.obj(i.to)||(i={...i,to:void 0}),lV(n,i,r=>aV(r))}),oV(t,n),n}function oV(t,e){xl(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,fg(n,t))})}function aV(t,e){const n=new Jce;return n.key=t,e&&fg(n,e),n}function lV(t,e,n){e.keys&&Wt(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function uV(t,e){Wt(e,n=>{lV(t.springs,n,i=>aV(i,t))})}var y_=({children:t,...e})=>{const n=U.useContext(HT),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Nce(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=HT;return U.createElement(s,{value:e},t)},HT=rde(y_,{});y_.Provider=HT.Provider;y_.Consumer=HT.Consumer;function rde(t,e){return Object.assign(t,U.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var cV=()=>{const t=[],e=function(i){kce();const r=[];return Wt(t,(s,o)=>{if(Ze.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return Wt(t,i=>i.pause(...arguments)),this},e.resume=function(){return Wt(t,i=>i.resume(...arguments)),this},e.set=function(i){Wt(t,(r,s)=>{const o=Ze.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return Wt(t,(s,o)=>{if(Ze.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Wt(t,i=>i.stop(...arguments)),this},e.update=function(i){return Wt(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return Ze.fun(i)?i(s,r):i};return e._getProps=n,e};function sde(t,e,n){const i=Ze.fun(e)&&e;i&&!n&&(n=[]);const r=U.useMemo(()=>i||arguments.length==3?cV():void 0,[]),s=U.useRef(0),o=pk(),a=U.useMemo(()=>({ctrls:[],queue:[],flush(y,S){const x=oI(y,S);return s.current>0&&!a.queue.length&&!Object.keys(x).some(P=>!y.springs[P])?sI(y,S):new Promise(P=>{oV(y,x),a.queue.push(()=>{P(sI(y,S))}),o()})}}),[]),l=U.useRef([...a.ctrls]),u=[],c=QP(t)||0;U.useMemo(()=>{Wt(l.current.slice(t,c),y=>{eI(y,r),y.stop(!0)}),l.current.length=t,d(c,t)},[t]),U.useMemo(()=>{d(0,Math.min(c,t))},n);function d(y,S){for(let x=y;x<S;x++){const w=l.current[x]||(l.current[x]=new rV(null,a.flush)),P=i?i(x,w):e[x];P&&(u[x]=ede(P))}}const h=l.current.map((y,S)=>oI(y,u[S])),m=U.useContext(y_),g=QP(m),v=m!==g&&Q7(m);Uc(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],Wt(y,S=>S())),Wt(l.current,(S,x)=>{r==null||r.add(S),v&&S.start({default:m});const w=u[x];w&&(Z7(S,w.ref),S.ref?S.queue.push(w):S.start(w))})}),mk(()=>()=>{Wt(a.ctrls,y=>y.stop(!0))});const _=h.map(y=>({...y}));return r?[_,r]:_}function dV(t,e){const n=Ze.fun(t),[[i],r]=sde(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}function xk(t,e,n){const i=Ze.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=i?i():e,h=U.useMemo(()=>i||arguments.length==3?cV():void 0,[]),m=Jr(t),g=[],v=U.useRef(null),_=r?null:v.current;Uc(()=>{v.current=g}),mk(()=>(Wt(g,Y=>{h==null||h.add(Y.ctrl),Y.ctrl.ref=h}),()=>{Wt(v.current,Y=>{Y.expired&&clearTimeout(Y.expirationId),eI(Y.ctrl,h),Y.ctrl.stop(!0)})}));const y=ade(m,i?i():e,_),S=r&&v.current||[];Uc(()=>Wt(S,({ctrl:Y,item:ie,key:Q})=>{eI(Y,h),vs(u,ie,Q)}));const x=[];if(_&&Wt(_,(Y,ie)=>{Y.expired?(clearTimeout(Y.expirationId),S.push(Y)):(ie=x[ie]=y.indexOf(Y.key),~ie&&(g[ie]=Y))}),Wt(m,(Y,ie)=>{g[ie]||(g[ie]={key:y[ie],item:Y,phase:"mount",ctrl:new rV},g[ie].ctrl.item=Y)}),x.length){let Y=-1;const{leave:ie}=i?i():e;Wt(x,(Q,oe)=>{const z=_[oe];~Q?(Y=g.indexOf(z),g[Y]={...z,item:m[Q]}):ie&&g.splice(++Y,0,z)})}Ze.fun(s)&&g.sort((Y,ie)=>s(Y.item,ie.item));let w=-o;const P=pk(),A=gw(e),D=new Map,O=U.useRef(new Map),H=U.useRef(!1);Wt(g,(Y,ie)=>{const Q=Y.key,oe=Y.phase,z=i?i():e;let ee,te;const ce=vs(z.delay||0,Q);if(oe=="mount")ee=z.enter,te="enter";else{const xe=y.indexOf(Q)<0;if(oe!="leave")if(xe)ee=z.leave,te="leave";else if(ee=z.update)te="update";else return;else if(!xe)ee=z.enter,te="enter";else return}if(ee=vs(ee,Y.item,ie),ee=Ze.obj(ee)?yk(ee):{to:ee},!ee.config){const xe=d||A.config;ee.config=vs(xe,Y.item,ie,te)}w+=o;const Te={...A,delay:ce+w,ref:c,immediate:z.immediate,reset:!1,...ee};if(te=="enter"&&Ze.und(Te.from)){const xe=i?i():e,Fe=Ze.und(xe.initial)||_?xe.from:xe.initial;Te.from=vs(Fe,Y.item,ie)}const{onResolve:Ue}=Te;Te.onResolve=xe=>{vs(Ue,xe);const Fe=v.current,He=Fe.find(ot=>ot.key===Q);if(He&&!(xe.cancelled&&He.phase!="update")&&He.ctrl.idle){const ot=Fe.every(Ae=>Ae.ctrl.idle);if(He.phase=="leave"){const Ae=vs(a,He.item);if(Ae!==!1){const Ge=Ae===!0?0:Ae;if(He.expired=!0,!ot&&Ge>0){Ge<=2147483647&&(He.expirationId=setTimeout(P,Ge));return}}}ot&&Fe.some(Ae=>Ae.expired)&&(O.current.delete(He),l&&(H.current=!0),P())}};const he=oI(Y.ctrl,Te);te==="leave"&&l?O.current.set(Y,{phase:te,springs:he,payload:Te}):D.set(Y,{phase:te,springs:he,payload:Te})});const E=U.useContext(y_),k=QP(E),W=E!==k&&Q7(E);Uc(()=>{W&&Wt(g,Y=>{Y.ctrl.start({default:E})})},[E]),Wt(D,(Y,ie)=>{if(O.current.size){const Q=g.findIndex(oe=>oe.key===ie.key);g.splice(Q,1)}}),Uc(()=>{Wt(O.current.size?O.current:D,({phase:Y,payload:ie},Q)=>{const{ctrl:oe}=Q;Q.phase=Y,h==null||h.add(oe),W&&Y=="enter"&&oe.start({default:E}),ie&&(Z7(oe,ie.ref),(oe.ref||h)&&!H.current?oe.update(ie):(oe.start(ie),H.current&&(H.current=!1)))})},r?void 0:n);const G=Y=>U.createElement(U.Fragment,null,g.map((ie,Q)=>{const{springs:oe}=D.get(ie)||ie.ctrl,z=Y({...oe},ie.item,ie,Q);return z&&z.type?U.createElement(z.type,{...z.props,key:Ze.str(ie.key)||Ze.num(ie.key)?ie.key:ie.ctrl.id,ref:z.ref}):z}));return h?[G,h]:G}var ode=1;function ade(t,{key:e,keys:n=e},i){if(n===null){const r=new Set;return t.map(s=>{const o=i&&i.find(a=>a.item===s&&a.phase!=="leave"&&!r.has(a));return o?(r.add(o),o.key):ode++})}return Ze.und(n)?t:Ze.fun(n)?t.map(n):Jr(n)}var hV=class extends _k{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=mv(...e);const n=this._get(),i=ZP(n);gk(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Kl(e,n)||(Ka(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&wU(this._active)&&rA(this)}_get(){const t=Ze.arr(this.source)?this.source.map(ys):Jr(ys(this.source));return this.calc(...t)}_start(){this.idle&&!wU(this._active)&&(this.idle=!1,Wt(pw(this),t=>{t.done=!1}),qo.skipAnimation?(Qt.batchedUpdates(()=>this.advance()),rA(this)):cw.start(this))}_attach(){let t=1;Wt(Jr(this.source),e=>{Lo(e)&&fg(e,this),nI(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Wt(Jr(this.source),t=>{Lo(t)&&vv(t,this)}),this._active.clear(),rA(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Jr(this.source).reduce((e,n)=>Math.max(e,(nI(n)?n.priority:0)+1),0))}};function lde(t){return t.idle!==!1}function wU(t){return!t.size||Array.from(t).every(lde)}function rA(t){t.idle||(t.idle=!0,Wt(pw(t),e=>{e.done=!0}),yv(t,{type:"idle",parent:t}))}var EU=(t,...e)=>new hV(t,e);qo.assign({createStringInterpolator:W7,to:(t,e)=>new hV(t,e)});var fV=/^--/;function ude(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!fV.test(t)&&!(vy.hasOwnProperty(t)&&vy[t])?e+"px":(""+e).trim()}var CU={};function cde(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=e,c=Object.values(u),d=Object.keys(u).map(h=>n||t.hasAttribute(h)?h:CU[h]||(CU[h]=h.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const m=ude(h,r[h]);fV.test(h)?t.style.setProperty(h,m):t.style[h]=m}d.forEach((h,m)=>{t.setAttribute(h,c[m])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var vy={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dde=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),hde=["Webkit","Ms","Moz","O"];vy=Object.keys(vy).reduce((t,e)=>(hde.forEach(n=>t[dde(n,e)]=t[e]),t),vy);var fde=/^(matrix|translate|scale|rotate|skew)/,pde=/^(translate)/,mde=/^(rotate|skew)/,sA=(t,e)=>Ze.num(t)&&t!==0?t+e:t,NS=(t,e)=>Ze.arr(t)?t.every(n=>NS(n,e)):Ze.num(t)?t===e:parseFloat(t)===e,gde=class extends mw{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>sA(a,"px")).join(",")})`,NS(o,0)])),xl(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(fde.test(a)){if(delete i[a],Ze.und(o))return;const l=pde.test(a)?"px":mde.test(a)?"deg":"";r.push(Jr(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${sA(h,l)})`,NS(h,0)]:u=>[`${a}(${u.map(c=>sA(c,l)).join(",")})`,NS(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new yde(r,s)),super(i)}},yde=class extends V7{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Wt(this.inputs,(n,i)=>{const r=ys(n[0]),[s,o]=this.transforms[i](Ze.arr(r)?r:n.map(ys));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Wt(this.inputs,e=>Wt(e,n=>Lo(n)&&fg(n,this)))}observerRemoved(t){t==0&&Wt(this.inputs,e=>Wt(e,n=>Lo(n)&&vv(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),yv(this,t)}},vde=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];qo.assign({batchedUpdates:x2.unstable_batchedUpdates,createStringInterpolator:W7,colors:cce});var _de=$ce(vde,{applyAnimatedValues:cde,createAnimatedStyle:t=>new gde(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),v_=_de.animated;function xde(t){const e=U.useRef({currentPath:t,previousPath:void 0});return e.current.currentPath!==t&&(e.current={currentPath:t,previousPath:e.current.currentPath}),e.current}const pV=t=>{const e=xde(t);return U.useMemo(()=>e.previousPath?r7(e.previousPath,e.currentPath):()=>e.currentPath,[e.currentPath,e.previousPath])};function mV(t){return t.replace(" ","_")}function gV(){const{chartId:t}=U.useContext(sw);return U.useMemo(()=>t,[t])}function Um(t){return Wh(t)?e=>(t(e)??0)+t.bandwidth()/2:e=>t(e)}function Sk(){const{isInitialized:t,data:e}=U.useContext(b7);if(!t)throw new Error(["MUI X: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return e}function yV(t){const e=Ls(),n=gV(),i=xk([e],{from:s=>({animatedWidth:s.left}),enter:s=>({animatedWidth:s.width+s.left+s.right}),leave:s=>({animatedWidth:s.width+s.left+s.right}),reset:!1,immediate:t.skipAnimation}),r=mV(`${n}-${t.id}`);return Nt(U.Fragment,{children:[$("clipPath",{id:r,children:i(s=>$(v_.rect,{x:0,y:0,width:s.animatedWidth,height:e.top+e.height+e.bottom}))}),$("g",{clipPath:`url(#${r})`,children:t.children})]})}const Sde=["d","skipAnimation","ownerState"],Tde=mi(v_.path,{name:"MuiAreaElement",slot:"Root",overridesResolver:(t,e)=>e.root})(({ownerState:t})=>({stroke:"none",fill:t.gradientId&&`url(#${t.gradientId})`||t.isHighlighted&&Zc(t.color).brighter(1).formatHex()||Zc(t.color).brighter(.5).formatHex(),transition:"opacity 0.2s ease-in, fill 0.2s ease-in",opacity:t.isFaded?.3:1}));function bde(t){const{d:e,skipAnimation:n,ownerState:i}=t,r=kn(t,Sde),s=pV(e),o=xk([s],{from:{value:0},to:{value:1},enter:{value:1},reset:!1,immediate:n});return $(yV,{skipAnimation:n,id:`${i.id}-area-clip`,children:o((a,l)=>$(Tde,ve({},r,{ownerState:i,d:a.value.to(l)})))})}const wde=["id","classes","color","gradientId","slots","slotProps","onClick"];function Ede(t){return Jo("MuiAreaElement",t)}La("MuiAreaElement",["root","highlighted","faded"]);const Cde=t=>{const{classes:e,id:n,isFaded:i,isHighlighted:r}=t,s={root:["root",`series-${n}`,r&&"highlighted",i&&"faded"]};return ea(s,Ede,e)};function Ade(t){const{id:e,classes:n,color:i,gradientId:r,slots:s,slotProps:o,onClick:a}=t,l=kn(t,wde),u=lw(),{isFaded:c,isHighlighted:d}=aw({seriesId:e}),h={id:e,classes:n,color:i,gradientId:r,isFaded:c,isHighlighted:d},m=Cde(h),g=(s==null?void 0:s.area)??bde,v=Vo({elementType:g,externalSlotProps:o==null?void 0:o.area,additionalProps:ve({},u({type:"line",seriesId:e}),{onClick:a,cursor:a?"pointer":"unset"}),className:m.root,ownerState:h});return $(g,ve({},l,v))}function vV(t){switch(t){case"catmullRom":return roe.alpha(.5);case"linear":return UD;case"monotoneX":return _4;case"monotoneY":return soe;case"natural":return ooe;case"step":return aoe;case"stepBefore":return loe;case"stepAfter":return uoe;default:return _4}}function AU(t){const{isReversed:e,gradientId:n,size:i,direction:r,scale:s,colorMap:o}=t;return $("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${e?1:2}`]:`${i}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((a,l)=>{const u=s(a);if(u===void 0)return null;const c=e?1-u/i:u/i;return Nt(U.Fragment,{children:[$("stop",{offset:c,stopColor:o.colors[l],stopOpacity:1}),$("stop",{offset:c,stopColor:o.colors[l+1],stopOpacity:1})]},a.toString()+l)})})}const Mde=10;function MU(t){const{gradientUnits:e,isReversed:n,gradientId:i,size:r,direction:s,scale:o,colorScale:a,colorMap:l}=t,u=[l.min??0,l.max??100],c=u.map(o).filter(g=>g!==void 0);if(c.length!==2)return null;const d=typeof u[0]=="number"?fv(u[0],u[1]):i7(u[0],u[1]),h=Math.round((Math.max(...c)-Math.min(...c))/Mde),m=`${u[0]}-${u[1]}-`;return $("linearGradient",{id:i,x1:"0",x2:"0",y1:"0",y2:"0",[`${s}${n?1:2}`]:e==="objectBoundingBox"?1:`${r}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:h+1},(g,v)=>{const _=d(v/h);if(_===void 0)return null;const y=o(_);if(y===void 0)return null;const S=n?1-y/r:y/r,x=a(_);return x===null?null:$("stop",{offset:S,stopColor:x,stopOpacity:1},m+v)})})}function Tk(){const{chartId:t}=U.useContext(sw);return U.useCallback((e,n)=>`${t}-gradient-${n}-${e}`,[t])}function Pde(){const{top:t,height:e,bottom:n,left:i,width:r,right:s}=Ls(),o=t+e+n,a=i+r+s,l=Tk(),{xAxisIds:u,xAxis:c,yAxisIds:d,yAxis:h}=Ns();return Nt("defs",{children:[d.filter(m=>h[m].colorMap!==void 0).map(m=>{const g=l(m,"y"),{colorMap:v,scale:_,colorScale:y,reverse:S}=h[m];return(v==null?void 0:v.type)==="piecewise"?$(AU,{isReversed:!S,scale:_,colorMap:v,size:o,gradientId:g,direction:"y"},g):(v==null?void 0:v.type)==="continuous"?$(MU,{isReversed:!S,scale:_,colorScale:y,colorMap:v,size:o,gradientId:g,direction:"y"},g):null}),u.filter(m=>c[m].colorMap!==void 0).map(m=>{const g=l(m,"x"),{colorMap:v,scale:_,reverse:y,colorScale:S}=c[m];return(v==null?void 0:v.type)==="piecewise"?$(AU,{isReversed:y,scale:_,colorMap:v,size:a,gradientId:g,direction:"x"},g):(v==null?void 0:v.type)==="continuous"?$(MU,{isReversed:y,scale:_,colorScale:S,colorMap:v,size:a,gradientId:g,direction:"x"},g):null})]})}const _V=U.createContext({isInitialized:!1,data:{skipAnimation:void 0}});function Ide(t){const{children:e,skipAnimation:n}=t,i=typeof window>"u"||!(window!=null&&window.matchMedia),[r,s]=U.useState(i||void 0);Uc(()=>{var u;if(i)return;const a=c=>{const d=c.matches||void 0;s(d),qo.assign({skipAnimation:d})},l=window.matchMedia("(prefers-reduced-motion)");return a(l),(u=l==null?void 0:l.addEventListener)==null||u.call(l,"change",a),()=>{var c;(c=l==null?void 0:l.removeEventListener)==null||c.call(l,"change",a)}},[]);const o=U.useMemo(()=>({isInitialized:!0,data:{skipAnimation:n||r}}),[r,n]);return $(_V.Provider,{value:o,children:e})}function bk(t){const{isInitialized:e,data:n}=U.useContext(_V);if(!e)throw new Error(["MUI X: Could not find the animation ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t||n.skipAnimation}const Rde=["slots","slotProps","onItemClick","skipAnimation"],Dde=()=>{const t=ow(),e=Ns();return U.useMemo(()=>{if(t===void 0)return[];const{series:i,stackingGroups:r}=t,{xAxis:s,yAxis:o,xAxisIds:a,yAxisIds:l}=e,u=a[0],c=l[0];return r.flatMap(({ids:d})=>[...d].reverse().map(h=>{const{xAxisId:m,yAxisId:g,xAxisKey:v=u,yAxisKey:_=c,stackedData:y,data:S,connectNulls:x,baseline:w}=i[h],P=m??v,A=g??_,D=Um(s[P].scale),O=o[A].scale,H=s[P].data,E=o[A].colorScale&&[A,"y"]||s[P].colorScale&&[P,"x"]||void 0,k=zse().x(Q=>D(Q.x)).defined((Q,oe)=>x||S[oe]!=null).y0(Q=>{if(typeof w=="number")return O(w);if(w==="max")return O.range()[1];if(w==="min")return O.range()[0];const oe=Q.y&&O(Q.y[0]);return Number.isNaN(oe)?O.range()[0]:oe}).y1(Q=>Q.y&&O(Q.y[1])),W=vV(i[h].curve),G=(H==null?void 0:H.map((Q,oe)=>({x:Q,y:y[oe]})))??[],Y=x?G.filter((Q,oe)=>S[oe]!=null):G,ie=k.curve(W)(Y)||"";return ve({},i[h],{gradientUsed:E,d:ie,seriesId:h})}))},[t,e])};function kde(t){const{slots:e,slotProps:n,onItemClick:i,skipAnimation:r}=t,s=kn(t,Rde),o=bk(r),a=Tk(),l=Dde();return $("g",ve({},s,{children:l.map(({d:u,seriesId:c,color:d,area:h,gradientUsed:m})=>!!h&&$(Ade,{id:c,d:u,color:d,gradientId:m&&a(...m),slots:e,slotProps:n,onClick:i&&(g=>i(g,{type:"line",seriesId:c})),skipAnimation:o},c))}))}const Lde=["d","skipAnimation","ownerState"],Nde=mi(v_.path,{name:"MuiLineElement",slot:"Root",overridesResolver:(t,e)=>e.root})(({ownerState:t})=>({strokeWidth:2,strokeLinejoin:"round",fill:"none",stroke:t.gradientId&&`url(#${t.gradientId})`||t.isHighlighted&&Zc(t.color).brighter(.5).formatHex()||t.color,transition:"opacity 0.2s ease-in, stroke 0.2s ease-in",opacity:t.isFaded?.3:1}));function Ode(t){const{d:e,skipAnimation:n,ownerState:i}=t,r=kn(t,Lde),s=pV(e),o=xk([s],{from:{value:0},to:{value:1},enter:{value:1},reset:!1,immediate:n});return $(yV,{skipAnimation:n,id:`${i.id}-line-clip`,children:o((a,l)=>$(Nde,ve({},r,{ownerState:i,d:a.value.to(l)})))})}const Ude=["id","classes","color","gradientId","slots","slotProps","onClick"];function Fde(t){return Jo("MuiLineElement",t)}La("MuiLineElement",["root","highlighted","faded"]);const Bde=t=>{const{classes:e,id:n,isFaded:i,isHighlighted:r}=t,s={root:["root",`series-${n}`,r&&"highlighted",i&&"faded"]};return ea(s,Fde,e)};function zde(t){const{id:e,classes:n,color:i,gradientId:r,slots:s,slotProps:o,onClick:a}=t,l=kn(t,Ude),u=lw(),{isFaded:c,isHighlighted:d}=aw({seriesId:e}),h={id:e,classes:n,color:i,gradientId:r,isFaded:c,isHighlighted:d},m=Bde(h),g=(s==null?void 0:s.line)??Ode,v=Vo({elementType:g,externalSlotProps:o==null?void 0:o.line,additionalProps:ve({},u({type:"line",seriesId:e}),{onClick:a,cursor:a?"pointer":"unset"}),className:m.root,ownerState:h});return $(g,ve({},l,v))}const Hde=["slots","slotProps","skipAnimation","onItemClick"],Vde=()=>{const t=ow(),e=Ns();return U.useMemo(()=>{if(t===void 0)return[];const{series:i,stackingGroups:r}=t,{xAxis:s,yAxis:o,xAxisIds:a,yAxisIds:l}=e,u=a[0],c=l[0];return r.flatMap(({ids:d})=>d.flatMap(h=>{const{xAxisId:m,yAxisId:g,xAxisKey:v=u,yAxisKey:_=c,stackedData:y,data:S,connectNulls:x}=i[h],w=m??v,P=g??_,A=Um(s[w].scale),D=o[P].scale,O=s[w].data,H=o[P].colorScale&&[P,"y"]||s[w].colorScale&&[w,"x"]||void 0,E=zH().x(Y=>A(Y.x)).defined((Y,ie)=>x||S[ie]!=null).y(Y=>D(Y.y[1])),k=(O==null?void 0:O.map((Y,ie)=>({x:Y,y:y[ie]})))??[],W=x?k.filter((Y,ie)=>S[ie]!=null):k,G=E.curve(vV(i[h].curve))(W)||"";return ve({},i[h],{gradientUsed:H,d:G,seriesId:h})}))},[t,e])};function $de(t){const{slots:e,slotProps:n,skipAnimation:i,onItemClick:r}=t,s=kn(t,Hde),o=bk(i),a=Tk(),l=Vde();return $("g",ve({},s,{children:l.map(({d:u,seriesId:c,color:d,gradientUsed:h})=>$(zde,{id:c,d:u,color:d,gradientId:h&&a(...h),skipAnimation:o,slots:e,slotProps:n,onClick:r&&(m=>r(m,{type:"line",seriesId:c}))},c))}))}function Gde(t,e){const n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())}function ip(t){return t instanceof Date?t.getTime():t}const Wde=t=>{const e=Sk(),n=Ls(),{xAxis:i,yAxis:r,xAxisIds:s,yAxisIds:o}=Ns(),{dispatch:a}=U.useContext(Ou),l=s[0],u=o[0],c=U.useRef({isInChart:!1,x:-1,y:-1});U.useEffect(()=>{const d=e.current;if(d===null||t)return()=>{};function h(_,y){const{scale:S,data:x,reverse:w}=_;if(!Wh(S)){const A=S.invert(y);if(x===void 0)return{value:A,index:-1};const D=ip(A),O=x==null?void 0:x.findIndex((H,E)=>{const k=ip(H);return k>D&&(E===0||Math.abs(D-k)<=Math.abs(D-ip(x[E-1])))||k<=D&&(E===x.length-1||Math.abs(ip(A)-k)<Math.abs(ip(A)-ip(x[E+1])))});return{value:O!==void 0&&O>=0?x[O]:A,index:O}}const P=S.bandwidth()===0?Math.floor((y-Math.min(...S.range())+S.step()/2)/S.step()):Math.floor((y-Math.min(...S.range()))/S.step());if(P<0||P>=x.length)return null;if(w){const A=x.length-1-P;return{index:A,value:x[A]}}return{index:P,value:x[P]}}const m=()=>{c.current={isInChart:!1,x:-1,y:-1},a({type:"exitChart"})},g=_=>{const y="targetTouches"in _?_.targetTouches[0]:_,S=Gde(d,y);if(c.current.x=S.x,c.current.y=S.y,!n.isPointInside(S,{targetElement:_.target})){c.current.isInChart&&(a({type:"exitChart"}),c.current.isInChart=!1);return}c.current.isInChart=!0;const x=h(i[l],S.x),w=h(r[u],S.y);a({type:"updateAxis",data:{x,y:w}})},v=_=>{const y=_.currentTarget;y&&y.hasPointerCapture(_.pointerId)&&y.releasePointerCapture(_.pointerId)};return d.addEventListener("pointerdown",v),d.addEventListener("pointermove",g),d.addEventListener("pointerout",m),d.addEventListener("pointercancel",m),d.addEventListener("pointerleave",m),()=>{d.removeEventListener("pointerdown",v),d.removeEventListener("pointermove",g),d.removeEventListener("pointerout",m),d.removeEventListener("pointercancel",m),d.removeEventListener("pointerleave",m)}},[e,a,u,r,l,i,t,n])},jde=["children","width","height","viewBox","disableAxisListener","className","title","desc"],qde=mi("svg",{name:"MuiChartsSurface",slot:"Root"})(()=>({touchAction:"none"})),Xde=U.forwardRef(function(e,n){const i=af({props:e,name:"MuiChartsSurface"}),{children:r,width:s,height:o,viewBox:a,disableAxisListener:l=!1,className:u,title:c,desc:d}=i,h=kn(i,jde),m=ve({width:s,height:o,x:0,y:0},a);return Wde(l),Nt(qde,ve({width:s,height:o,viewBox:`${m.x} ${m.y} ${m.width} ${m.height}`,ref:n,className:u},h,{children:[$("title",{children:c}),$("desc",{children:d}),r]}))}),PU=(t,e,n)=>{const i=n==="x"?rw:nue;return[...(t==null?void 0:t.map((r,s)=>ve({id:`defaultized-${n}-axis-${s}`},r)))??[],...t===void 0||t.findIndex(({id:r})=>r===i)===-1?[{id:i,scaleType:"linear"}]:[]].map(r=>{const s=r.dataKey;if(s===void 0||r.data!==void 0)return r;if(e===void 0)throw new Error(`MUI X: ${n}-axis uses \`dataKey\` but no \`dataset\` is provided.`);return ve({},r,{data:e.map(o=>o[s])})})},Yde=(t,e,n)=>{const i=U.useMemo(()=>PU(t,n,"x"),[t,n]),r=U.useMemo(()=>PU(e,n,"y"),[e,n]);return[i,r]},Kde=["width","height","series","margin","xAxis","yAxis","zAxis","colors","dataset","sx","title","desc","disableAxisListener","highlightedItem","onHighlightChange","plugins","children","skipAnimation"],Qde=(t,e)=>{const{width:n,height:i,series:r,margin:s,xAxis:o,yAxis:a,zAxis:l,colors:u,dataset:c,sx:d,title:h,desc:m,disableAxisListener:g,highlightedItem:v,onHighlightChange:_,plugins:y,children:S,skipAnimation:x}=t,w=kn(t,Kde),P=U.useRef(null),A=uv(e,P),[D,O]=Yde(o,a,c),H={width:n,height:i,margin:s,svgRef:P},E={skipAnimation:x},k={plugins:y},W={series:r,colors:u,dataset:c},G={xAxis:D,yAxis:O,dataset:c},Y={zAxis:l,dataset:c},ie={highlightedItem:v,onHighlightChange:_},Q=ve({},w,{width:n,height:i,ref:A,sx:d,title:h,desc:m,disableAxisListener:g});return{children:S,drawingProviderProps:H,seriesProviderProps:W,cartesianProviderProps:G,zAxisContextProps:Y,highlightedProviderProps:ie,chartsSurfaceProps:Q,pluginProviderProps:k,animationProviderProps:E,xAxis:D,yAxis:O}},Zde=U.forwardRef(function(e,n){const{children:i,drawingProviderProps:r,seriesProviderProps:s,cartesianProviderProps:o,zAxisContextProps:a,highlightedProviderProps:l,chartsSurfaceProps:u,pluginProviderProps:c,animationProviderProps:d}=Qde(e,n);return $(oue,ve({},r,{children:$(Vue,ve({},c,{children:$(jue,ve({},s,{children:$(que,ve({},o,{children:$(tce,ve({},a,{children:$(Yue,{children:$(ece,ve({},l,{children:Nt(Xde,ve({},u,{children:[$(Pde,{}),$(Ide,ve({},d,{children:i}))]}))}))})}))}))}))}))}))}),Jde=mi("div",{name:"MuiResponsiveChart",slot:"Container"})(({ownerState:t})=>({width:t.width??"100%",height:t.height??"100%",display:"flex",position:"relative",flexGrow:1,flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden","&>svg":{width:"100%",height:"100%"}})),ehe=(t,e,n)=>{const i=U.useRef({displayError:!1,initialCompute:!0,computeRun:0}),r=U.useRef(null),[s,o]=U.useState(0),[a,l]=U.useState(0),u=U.useCallback(()=>{const c=r==null?void 0:r.current;if(!c)return{};const h=ure(c).getComputedStyle(c),m=Math.floor(parseFloat(h.height))||0,g=Math.floor(parseFloat(h.width))||0;return o(g),l(m),{width:g,height:m}},[]);return U.useEffect(()=>{i.current.displayError=!0},[]),Kc(()=>{if(!n||!i.current.initialCompute||i.current.computeRun>20)return;const c=u();c.width!==s||c.height!==a?i.current.computeRun+=1:i.current.initialCompute&&(i.current.initialCompute=!1)},[s,a,u,n]),Kc(()=>{if(t!==void 0&&e!==void 0)return()=>{};u();const c=r.current;if(typeof ResizeObserver>"u")return()=>{};let d;const h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{u()})});return c&&h.observe(c),()=>{d&&cancelAnimationFrame(d),c&&h.unobserve(c)}},[u,e,t]),{containerRef:r,width:t??s,height:e??a}},the=["width","height","resolveSizeBeforeRender","margin","children","series","colors","dataset","desc","disableAxisListener","highlightedItem","onHighlightChange","plugins","sx","title","viewBox","xAxis","yAxis","zAxis","skipAnimation"],nhe=(t,e)=>{const{width:n,height:i,resolveSizeBeforeRender:r,margin:s,children:o,series:a,colors:l,dataset:u,desc:c,disableAxisListener:d,highlightedItem:h,onHighlightChange:m,plugins:g,sx:v,title:_,viewBox:y,xAxis:S,yAxis:x,zAxis:w,skipAnimation:P}=t,A=kn(t,the),{containerRef:D,width:O,height:H}=ehe(n,i,r),E=ve({},A,{ownerState:{width:n,height:i},ref:D});return{hasIntrinsicSize:O&&H,chartContainerProps:{margin:s,children:o,series:a,colors:l,dataset:u,desc:c,disableAxisListener:d,highlightedItem:h,onHighlightChange:m,plugins:g,sx:v,title:_,viewBox:y,xAxis:S,yAxis:x,zAxis:w,skipAnimation:P,width:O,height:H,ref:e},resizableChartContainerProps:E}},ihe=U.forwardRef(function(e,n){const{hasIntrinsicSize:i,chartContainerProps:r,resizableChartContainerProps:s}=nhe(e,n);return $(Jde,ve({},s,{children:i?$(Zde,ve({},r)):null}))});function rhe(t){return Jo("MuiMarkElement",t)}La("MuiMarkElement",["root","highlighted","faded"]);const xV=t=>{const{classes:e,id:n,isFaded:i,isHighlighted:r}=t,s={root:["root",`series-${n}`,r&&"highlighted",i&&"faded"]};return ea(s,rhe,e)},she=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","shape"];function ohe(t){var x;const{x:e,y:n,id:i,classes:r,color:s,dataIndex:o,onClick:a,skipAnimation:l,shape:u}=t,c=kn(t,she),d=hg(),h=lw(),{isFaded:m,isHighlighted:g}=aw({seriesId:i}),{axis:v}=U.useContext(Ou),_=dV({to:{x:e,y:n},immediate:l}),y={id:i,classes:r,isHighlighted:((x=v.x)==null?void 0:x.index)===o||g,isFaded:m,color:s},S=xV(y);return $(v_.circle,ve({},c,{cx:_.x,cy:_.y,r:5,fill:(d.vars||d).palette.background.paper,stroke:s,strokeWidth:2,className:S.root,onClick:a,cursor:a?"pointer":"unset"},h({type:"line",seriesId:i,dataIndex:o})))}function ahe(t){return"circle cross diamond square star triangle wye".split(/ /).indexOf(t)||0}const lhe=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation"],uhe=mi(v_.path,{name:"MuiMarkElement",slot:"Root",overridesResolver:(t,e)=>e.root})(({ownerState:t,theme:e})=>({fill:(e.vars||e).palette.background.paper,stroke:t.color,strokeWidth:2}));function che(t){var S;const{x:e,y:n,id:i,classes:r,color:s,shape:o,dataIndex:a,onClick:l,skipAnimation:u}=t,c=kn(t,lhe),d=lw(),{isFaded:h,isHighlighted:m}=aw({seriesId:i}),{axis:g}=U.useContext(Ou),v=dV({to:{x:e,y:n},immediate:u}),_={id:i,classes:r,isHighlighted:((S=g.x)==null?void 0:S.index)===a||m,isFaded:h,color:s},y=xV(_);return $(uhe,ve({},c,{style:{transform:EU([v.x,v.y],(x,w)=>`translate(${x}px, ${w}px)`),transformOrigin:EU([v.x,v.y],(x,w)=>`${x}px ${w}px`)},ownerState:_,className:y.root,d:noe(toe[ahe(o)])(),onClick:l,cursor:l?"pointer":"unset"},d({type:"line",seriesId:i,dataIndex:a})))}const dhe=["slots","slotProps","skipAnimation","onItemClick","experimentalRendering"];function hhe(t){const{slots:e,slotProps:n,skipAnimation:i,onItemClick:r,experimentalRendering:s}=t,o=kn(t,dhe),a=bk(i),l=ow(),u=Ns(),c=gV(),d=Ls(),h=(e==null?void 0:e.mark)??(s?ohe:che);if(l===void 0)return null;const{series:m,stackingGroups:g}=l,{xAxis:v,yAxis:_,xAxisIds:y,yAxisIds:S}=u,x=y[0],w=S[0];return $("g",ve({},o,{children:g.flatMap(({ids:P})=>P.map(A=>{const{xAxisId:D,yAxisId:O,xAxisKey:H=x,yAxisKey:E=w,stackedData:k,data:W,showMark:G=!0}=m[A];if(G===!1)return null;const Y=D??H,ie=O??E,Q=Um(v[Y].scale),oe=_[ie].scale,z=v[Y].data;if(z===void 0)throw new Error(`MUI X: ${Y===rw?"The first `xAxis`":`The x-axis with id "${Y}"`} should have data property to be able to display a line plot.`);const ee=mV(`${c}-${A}-line-clip`),te=ik(m[A],v[Y],_[ie]);return $("g",{clipPath:`url(#${ee})`,children:z==null?void 0:z.map((ce,Te)=>{const Ue=W[Te]==null?null:k[Te][1];return{x:Q(ce),y:Ue===null?null:oe(Ue),position:ce,value:Ue,index:Te}}).filter(({x:ce,y:Te,index:Ue,position:he,value:xe})=>xe===null||Te===null||!d.isPointInside({x:ce,y:Te})?!1:G===!0?!0:G({x:ce,y:Te,index:Ue,position:he,value:xe})).map(({x:ce,y:Te,index:Ue})=>$(h,ve({id:A,dataIndex:Ue,shape:"circle",color:te(Ue),x:ce,y:Te,skipAnimation:a,onClick:r&&(he=>r(he,{type:"line",seriesId:A,dataIndex:Ue}))},n==null?void 0:n.mark),`${A}-${Ue}`))},A)}))}))}function SV(t){return Jo("MuiChartsAxis",t)}const l1=La("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right"]),TV=mi("g",{name:"MuiChartsAxis",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({[`& .${l1.tickLabel}`]:ve({},t.typography.caption,{fill:(t.vars||t).palette.text.primary}),[`& .${l1.label}`]:ve({},t.typography.body1,{fill:(t.vars||t).palette.text.primary}),[`& .${l1.line}`]:{stroke:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${l1.tick}`]:{stroke:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges"}}));function fhe(){return typeof window>"u"}const zd={widthCache:{},cacheCount:0},phe=2e3,mhe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ghe=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],IU="mui_measurement_span";function bV(t,e){return ghe.indexOf(t)>=0&&e===+e?`${e}px`:e}function wV(t){return t.split("").reduce((i,r)=>r===r.toUpperCase()?[...i,"-",r.toLowerCase()]:[...i,r],[]).join("")}const yhe=t=>Object.keys(t).sort().reduce((e,n)=>`${e}${wV(n)}:${bV(n,t[n])};`,"");let oA;const vhe=(t,e={})=>{if(t==null||fhe())return{width:0,height:0};const n=`${t}`,i=yhe(e),r=`${n}-${i}`;if(zd.widthCache[r])return zd.widthCache[r];try{let s=document.getElementById(IU);s===null&&(s=document.createElement("span"),s.setAttribute("id",IU),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=ve({},mhe,e);Object.keys(o).map(u=>(s.style[wV(u)]=bV(u,o[u]),u)),s.textContent=n;const a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return zd.widthCache[r]=l,zd.cacheCount+1>phe?(zd.cacheCount=0,zd.widthCache={}):zd.cacheCount+=1,oA&&clearTimeout(oA),oA=setTimeout(()=>{s.textContent=""},0),l}catch{return{width:0,height:0}}};function wk({style:t,needsComputation:e,text:n}){return n.split(`
`).map(i=>ve({text:i},e?vhe(i,t):{width:0,height:0}))}const _he=["x","y","style","text","ownerState"],xhe=["angle","textAnchor","dominantBaseline"];function wv(t){const{x:e,y:n,style:i,text:r}=t,s=kn(t,_he),o=i??{},{angle:a,textAnchor:l,dominantBaseline:u}=o,c=kn(o,xhe),d=U.useMemo(()=>wk({style:c,needsComputation:r.includes(`
`),text:r}),[c,r]);let h;switch(u){case"hanging":h=0;break;case"central":h=(d.length-1)/2*-d[0].height;break;default:h=(d.length-1)*-d[0].height;break}const m=[];return a&&m.push(`rotate(${a}, ${e}, ${n})`),$("text",ve({},s,{transform:m.length>0?m.join(" "):void 0,x:e,y:n,textAnchor:l,dominantBaseline:u,style:c,children:d.map((g,v)=>$("tspan",{x:e,dy:`${v===0?h:d[0].height}px`,dominantBaseline:u,children:g.text},v))}))}const RU=5;function She(t,e,n=0){const i=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(i<RU)return t;if(i>90-RU)return e;const r=i*Math.PI/180,s=Math.atan2(e,t);return r<s?t/Math.cos(r):e/Math.sin(r)}function The(t=!1){const[e,n]=U.useState(!1);return Kc(()=>{t||n(!0)},[t]),U.useEffect(()=>{t&&n(!0)},[t]),e}const bhe=["scale","tickNumber","reverse"],whe=t=>{const{classes:e,position:n}=t;return ea({root:["root","directionX",n],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]},SV,e)};function Ehe(t,{tickLabelStyle:e,tickLabelInterval:n,reverse:i,isMounted:r}){const s=t.map(u=>{if(!r||u.formattedValue===void 0)return ve({},u,{width:0,height:0});const c=wk({style:e,needsComputation:!0,text:u.formattedValue});return ve({},u,{width:Math.max(...c.map(d=>d.width)),height:Math.max(c.length*c[0].height)})});if(typeof n=="function")return s.map((u,c)=>ve({},u,{skipLabel:!n(u.value,c)}));let o=0,a=0;const l=i?-1:1;return s.map((u,c)=>{const{width:d,offset:h,labelOffset:m,height:g}=u,v=She(d,g,e==null?void 0:e.angle),_=h+m,y=1.2;return o=_-l*(y*v)/2,c>0&&l*o<l*a?ve({},u,{skipLabel:!0}):(a=_+l*(y*v)/2,u)})}const Che=mi(TV,{name:"MuiChartsXAxis",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Ahe={position:"bottom",disableLine:!1,disableTicks:!1,tickSize:6};function DU(t){const{xAxisIds:e,xAxis:n}=Ns(),i=n[t.axisId??e[0]],{scale:r,tickNumber:s,reverse:o}=i,a=kn(i,bhe),l=The(),u=af({props:ve({},a,t),name:"MuiChartsXAxis"}),c=ve({},Ahe,u),{position:d,disableLine:h,disableTicks:m,tickLabelStyle:g,label:v,labelStyle:_,tickFontSize:y,labelFontSize:S,tickSize:x,valueFormatter:w,slots:P,slotProps:A,tickInterval:D,tickLabelInterval:O,tickPlacement:H,tickLabelPlacement:E,sx:k}=c,W=hg(),G=whe(ve({},c,{theme:W})),{left:Y,top:ie,width:Q,height:oe,isPointInside:z}=Ls(),ee=m?4:x,te=d==="bottom"?1:-1,ce=(P==null?void 0:P.axisLine)??"line",Te=(P==null?void 0:P.axisTick)??"line",Ue=(P==null?void 0:P.axisTickLabel)??wv,he=(P==null?void 0:P.axisLabel)??wv,xe=Vo({elementType:Ue,externalSlotProps:A==null?void 0:A.axisTickLabel,additionalProps:{style:ve({textAnchor:"middle",dominantBaseline:d==="bottom"?"hanging":"auto",fontSize:y??12},g)},className:G.tickLabel,ownerState:{}}),Fe=iw({scale:r,tickNumber:s,valueFormatter:w,tickInterval:D,tickPlacement:H,tickLabelPlacement:E}),He=Ehe(Fe,{tickLabelStyle:xe.style,tickLabelInterval:O,reverse:o,isMounted:l}),ot={x:Y+Q/2,y:te*(ee+22)},Ae=Vo({elementType:he,externalSlotProps:A==null?void 0:A.axisLabel,additionalProps:{style:ve({fontSize:S??14,textAnchor:"middle",dominantBaseline:d==="bottom"?"hanging":"auto"},_)},ownerState:{}}),Ge=r.domain(),Le=Wh(r);return Le&&Ge.length===0||!Le&&Ge.some(nk)?null:Nt(Che,{transform:`translate(0, ${d==="bottom"?ie+oe:ie})`,className:G.root,sx:k,children:[!h&&$(ce,ve({x1:Y,x2:Y+Q,className:G.line},A==null?void 0:A.axisLine)),He.map(({formattedValue:le,offset:j,labelOffset:Me,skipLabel:Re},Be)=>{const We=Me??0,rt=te*(ee+3),st=z({x:j,y:-1},{direction:"x"}),q=z({x:j+We,y:-1},{direction:"x"});return Nt("g",{transform:`translate(${j}, 0)`,className:G.tickContainer,children:[!m&&st&&$(Te,ve({y2:te*ee,className:G.tick},A==null?void 0:A.axisTick)),le!==void 0&&!Re&&q&&$(Ue,ve({x:We,y:rt},xe,{text:le.toString()}))]},Be)}),v&&$("g",{className:G.label,children:$(he,ve({},ot,Ae,{text:v}))})]})}const Mhe=["scale","tickNumber"],Phe=t=>{const{classes:e,position:n}=t;return ea({root:["root","directionY",n],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]},SV,e)},Ihe=mi(TV,{name:"MuiChartsYAxis",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Rhe={position:"left",disableLine:!1,disableTicks:!1,tickFontSize:12,labelFontSize:14,tickSize:6};function kU(t){const{yAxisIds:e,yAxis:n}=Ns(),i=n[t.axisId??e[0]],{scale:r,tickNumber:s}=i,o=kn(i,Mhe),a=af({props:ve({},o,t),name:"MuiChartsYAxis"}),l=ve({},Rhe,a),{position:u,disableLine:c,disableTicks:d,tickFontSize:h,label:m,labelFontSize:g,labelStyle:v,tickLabelStyle:_,tickSize:y,valueFormatter:S,slots:x,slotProps:w,tickPlacement:P,tickLabelPlacement:A,tickInterval:D,tickLabelInterval:O,sx:H}=l,E=hg(),k=RD(),W=Phe(ve({},l,{theme:E})),{left:G,top:Y,width:ie,height:Q,isPointInside:oe}=Ls(),z=d?4:y,ee=iw({scale:r,tickNumber:s,valueFormatter:S,tickPlacement:P,tickLabelPlacement:A,tickInterval:D}),te=u==="right"?1:-1,ce={x:te*(h+z+10),y:Y+Q/2},Te=(x==null?void 0:x.axisLine)??"line",Ue=(x==null?void 0:x.axisTick)??"line",he=(x==null?void 0:x.axisTickLabel)??wv,xe=(x==null?void 0:x.axisLabel)??wv,Fe=!k&&u==="right"||k&&u!=="right",He=Vo({elementType:he,externalSlotProps:w==null?void 0:w.axisTickLabel,additionalProps:{style:ve({fontSize:h,textAnchor:Fe?"start":"end",dominantBaseline:"central"},_)},className:W.tickLabel,ownerState:{}}),ot=Vo({elementType:xe,externalSlotProps:w==null?void 0:w.axisLabel,additionalProps:{style:ve({fontSize:g,angle:te*90,textAnchor:"middle",dominantBaseline:"auto"},v)},ownerState:{}}),Ae=Vo({elementType:Te,externalSlotProps:w==null?void 0:w.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Ge=r.domain(),Le=Wh(r);return Le&&Ge.length===0||!Le&&Ge.some(nk)?null:Nt(Ihe,{transform:`translate(${u==="right"?G+ie:G}, 0)`,className:W.root,sx:H,children:[!c&&$(Te,ve({y1:Y,y2:Y+Q,className:W.line},Ae)),ee.map(({formattedValue:le,offset:j,labelOffset:Me,value:Re},Be)=>{const We=te*(z+2),rt=Me,st=typeof O=="function"&&!(O!=null&&O(Re,Be));return oe({x:-1,y:j},{direction:"y"})?Nt("g",{transform:`translate(0, ${j})`,className:W.tickContainer,children:[!d&&$(Ue,ve({x2:te*z,className:W.tick},w==null?void 0:w.axisTick)),le!==void 0&&!st&&$(he,ve({x:We,y:rt,text:le.toString()},He))]},Be):null}),m&&$("g",{className:W.label,children:$(xe,ve({},ce,ot,{text:m}))})]})}const u1=(t,e)=>t==null?null:typeof t=="object"?t.axisId??e??null:t,c1=(t,e,n)=>typeof t=="object"?ve({},t,{slots:ve({},e,t==null?void 0:t.slots),slotProps:ve({},n,t==null?void 0:t.slotProps)}):{slots:e,slotProps:n};function Dhe(t){const{topAxis:e,leftAxis:n,rightAxis:i,bottomAxis:r,slots:s,slotProps:o}=t,{xAxis:a,xAxisIds:l,yAxis:u,yAxisIds:c}=Ns(),d=u1(n===void 0?c[0]:n,c[0]),h=u1(r===void 0?l[0]:r,l[0]),m=u1(e,l[0]),g=u1(i,c[0]);if(m!==null&&!a[m])throw new Error([`MUI X: id used for top axis "${m}" is not defined.`,`Available ids are: ${l.join(", ")}.`].join(`
`));if(d!==null&&!u[d])throw new Error([`MUI X: id used for left axis "${d}" is not defined.`,`Available ids are: ${c.join(", ")}.`].join(`
`));if(g!==null&&!u[g])throw new Error([`MUI X: id used for right axis "${g}" is not defined.`,`Available ids are: ${c.join(", ")}.`].join(`
`));if(h!==null&&!a[h])throw new Error([`MUI X: id used for bottom axis "${h}" is not defined.`,`Available ids are: ${l.join(", ")}.`].join(`
`));const v=c1(e,s,o),_=c1(r,s,o),y=c1(n,s,o),S=c1(i,s,o);return Nt(U.Fragment,{children:[m&&$(DU,ve({},v,{position:"top",axisId:m})),h&&$(DU,ve({},_,{position:"bottom",axisId:h})),d&&$(kU,ve({},y,{position:"left",axisId:d})),g&&$(kU,ve({},S,{position:"right",axisId:g}))]})}var Is="top",Xo="bottom",Yo="right",Rs="left",Ek="auto",__=[Is,Xo,Yo,Rs],Fm="start",Ev="end",khe="clippingParents",EV="viewport",x0="popper",Lhe="reference",LU=__.reduce(function(t,e){return t.concat([e+"-"+Fm,e+"-"+Ev])},[]),CV=[].concat(__,[Ek]).reduce(function(t,e){return t.concat([e,e+"-"+Fm,e+"-"+Ev])},[]),Nhe="beforeRead",Ohe="read",Uhe="afterRead",Fhe="beforeMain",Bhe="main",zhe="afterMain",Hhe="beforeWrite",Vhe="write",$he="afterWrite",Ghe=[Nhe,Ohe,Uhe,Fhe,Bhe,zhe,Hhe,Vhe,$he];function Sl(t){return t?(t.nodeName||"").toLowerCase():null}function lo(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function qh(t){var e=lo(t).Element;return t instanceof e||t instanceof Element}function $o(t){var e=lo(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Ck(t){if(typeof ShadowRoot>"u")return!1;var e=lo(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Whe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!$o(s)||!Sl(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function jhe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!$o(r)||!Sl(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const qhe={name:"applyStyles",enabled:!0,phase:"write",fn:Whe,effect:jhe,requires:["computeStyles"]};function pl(t){return t.split("-")[0]}var Mh=Math.max,VT=Math.min,Bm=Math.round;function aI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function AV(){return!/^((?!chrome|android).)*safari/i.test(aI())}function zm(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&$o(t)&&(r=t.offsetWidth>0&&Bm(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Bm(i.height)/t.offsetHeight||1);var o=qh(t)?lo(t):window,a=o.visualViewport,l=!AV()&&n,u=(i.left+(l&&a?a.offsetLeft:0))/r,c=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function Ak(t){var e=zm(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function MV(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ck(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Cu(t){return lo(t).getComputedStyle(t)}function Xhe(t){return["table","td","th"].indexOf(Sl(t))>=0}function ld(t){return((qh(t)?t.ownerDocument:t.document)||window.document).documentElement}function yw(t){return Sl(t)==="html"?t:t.assignedSlot||t.parentNode||(Ck(t)?t.host:null)||ld(t)}function NU(t){return!$o(t)||Cu(t).position==="fixed"?null:t.offsetParent}function Yhe(t){var e=/firefox/i.test(aI()),n=/Trident/i.test(aI());if(n&&$o(t)){var i=Cu(t);if(i.position==="fixed")return null}var r=yw(t);for(Ck(r)&&(r=r.host);$o(r)&&["html","body"].indexOf(Sl(r))<0;){var s=Cu(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function x_(t){for(var e=lo(t),n=NU(t);n&&Xhe(n)&&Cu(n).position==="static";)n=NU(n);return n&&(Sl(n)==="html"||Sl(n)==="body"&&Cu(n).position==="static")?e:n||Yhe(t)||e}function Mk(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function _y(t,e,n){return Mh(t,VT(e,n))}function Khe(t,e,n){var i=_y(t,e,n);return i>n?n:i}function PV(){return{top:0,right:0,bottom:0,left:0}}function IV(t){return Object.assign({},PV(),t)}function RV(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var Qhe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,IV(typeof e!="number"?e:RV(e,__))};function Zhe(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=pl(n.placement),l=Mk(a),u=[Rs,Yo].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var d=Qhe(r.padding,n),h=Ak(s),m=l==="y"?Is:Rs,g=l==="y"?Xo:Yo,v=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],_=o[l]-n.rects.reference[l],y=x_(s),S=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,x=v/2-_/2,w=d[m],P=S-h[c]-d[g],A=S/2-h[c]/2+x,D=_y(w,A,P),O=l;n.modifiersData[i]=(e={},e[O]=D,e.centerOffset=D-A,e)}}function Jhe(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||MV(e.elements.popper,r)&&(e.elements.arrow=r))}const efe={name:"arrow",enabled:!0,phase:"main",fn:Zhe,effect:Jhe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Hm(t){return t.split("-")[1]}var tfe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nfe(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Bm(n*r)/r||0,y:Bm(i*r)/r||0}}function OU(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,h=o.x,m=h===void 0?0:h,g=o.y,v=g===void 0?0:g,_=typeof c=="function"?c({x:m,y:v}):{x:m,y:v};m=_.x,v=_.y;var y=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),x=Rs,w=Is,P=window;if(u){var A=x_(n),D="clientHeight",O="clientWidth";if(A===lo(n)&&(A=ld(n),Cu(A).position!=="static"&&a==="absolute"&&(D="scrollHeight",O="scrollWidth")),A=A,r===Is||(r===Rs||r===Yo)&&s===Ev){w=Xo;var H=d&&A===P&&P.visualViewport?P.visualViewport.height:A[D];v-=H-i.height,v*=l?1:-1}if(r===Rs||(r===Is||r===Xo)&&s===Ev){x=Yo;var E=d&&A===P&&P.visualViewport?P.visualViewport.width:A[O];m-=E-i.width,m*=l?1:-1}}var k=Object.assign({position:a},u&&tfe),W=c===!0?nfe({x:m,y:v},lo(n)):{x:m,y:v};if(m=W.x,v=W.y,l){var G;return Object.assign({},k,(G={},G[w]=S?"0":"",G[x]=y?"0":"",G.transform=(P.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",G))}return Object.assign({},k,(e={},e[w]=S?v+"px":"",e[x]=y?m+"px":"",e.transform="",e))}function ife(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:pl(e.placement),variation:Hm(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,OU(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,OU(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const rfe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ife,data:{}};var d1={passive:!0};function sfe(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=lo(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,d1)}),a&&l.addEventListener("resize",n.update,d1),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,d1)}),a&&l.removeEventListener("resize",n.update,d1)}}const ofe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:sfe,data:{}};var afe={left:"right",right:"left",bottom:"top",top:"bottom"};function OS(t){return t.replace(/left|right|bottom|top/g,function(e){return afe[e]})}var lfe={start:"end",end:"start"};function UU(t){return t.replace(/start|end/g,function(e){return lfe[e]})}function Pk(t){var e=lo(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Ik(t){return zm(ld(t)).left+Pk(t).scrollLeft}function ufe(t,e){var n=lo(t),i=ld(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var u=AV();(u||!u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Ik(t),y:l}}function cfe(t){var e,n=ld(t),i=Pk(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Mh(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Mh(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Ik(t),l=-i.scrollTop;return Cu(r||n).direction==="rtl"&&(a+=Mh(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Rk(t){var e=Cu(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function DV(t){return["html","body","#document"].indexOf(Sl(t))>=0?t.ownerDocument.body:$o(t)&&Rk(t)?t:DV(yw(t))}function xy(t,e){var n;e===void 0&&(e=[]);var i=DV(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=lo(i),o=r?[s].concat(s.visualViewport||[],Rk(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(xy(yw(o)))}function lI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function dfe(t,e){var n=zm(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function FU(t,e,n){return e===EV?lI(ufe(t,n)):qh(e)?dfe(e,n):lI(cfe(ld(t)))}function hfe(t){var e=xy(yw(t)),n=["absolute","fixed"].indexOf(Cu(t).position)>=0,i=n&&$o(t)?x_(t):t;return qh(i)?e.filter(function(r){return qh(r)&&MV(r,i)&&Sl(r)!=="body"}):[]}function ffe(t,e,n,i){var r=e==="clippingParents"?hfe(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,u){var c=FU(t,u,i);return l.top=Mh(c.top,l.top),l.right=VT(c.right,l.right),l.bottom=VT(c.bottom,l.bottom),l.left=Mh(c.left,l.left),l},FU(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function kV(t){var e=t.reference,n=t.element,i=t.placement,r=i?pl(i):null,s=i?Hm(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case Is:l={x:o,y:e.y-n.height};break;case Xo:l={x:o,y:e.y+e.height};break;case Yo:l={x:e.x+e.width,y:a};break;case Rs:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=r?Mk(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Fm:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Ev:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function Cv(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?khe:a,u=n.rootBoundary,c=u===void 0?EV:u,d=n.elementContext,h=d===void 0?x0:d,m=n.altBoundary,g=m===void 0?!1:m,v=n.padding,_=v===void 0?0:v,y=IV(typeof _!="number"?_:RV(_,__)),S=h===x0?Lhe:x0,x=t.rects.popper,w=t.elements[g?S:h],P=ffe(qh(w)?w:w.contextElement||ld(t.elements.popper),l,c,o),A=zm(t.elements.reference),D=kV({reference:A,element:x,strategy:"absolute",placement:r}),O=lI(Object.assign({},x,D)),H=h===x0?O:A,E={top:P.top-H.top+y.top,bottom:H.bottom-P.bottom+y.bottom,left:P.left-H.left+y.left,right:H.right-P.right+y.right},k=t.modifiersData.offset;if(h===x0&&k){var W=k[r];Object.keys(E).forEach(function(G){var Y=[Yo,Xo].indexOf(G)>=0?1:-1,ie=[Is,Xo].indexOf(G)>=0?"y":"x";E[G]+=W[ie]*Y})}return E}function pfe(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?CV:l,c=Hm(i),d=c?a?LU:LU.filter(function(g){return Hm(g)===c}):__,h=d.filter(function(g){return u.indexOf(g)>=0});h.length===0&&(h=d);var m=h.reduce(function(g,v){return g[v]=Cv(t,{placement:v,boundary:r,rootBoundary:s,padding:o})[pl(v)],g},{});return Object.keys(m).sort(function(g,v){return m[g]-m[v]})}function mfe(t){if(pl(t)===Ek)return[];var e=OS(t);return[UU(t),e,UU(e)]}function gfe(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,g=m===void 0?!0:m,v=n.allowedAutoPlacements,_=e.options.placement,y=pl(_),S=y===_,x=l||(S||!g?[OS(_)]:mfe(_)),w=[_].concat(x).reduce(function(he,xe){return he.concat(pl(xe)===Ek?pfe(e,{placement:xe,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:v}):xe)},[]),P=e.rects.reference,A=e.rects.popper,D=new Map,O=!0,H=w[0],E=0;E<w.length;E++){var k=w[E],W=pl(k),G=Hm(k)===Fm,Y=[Is,Xo].indexOf(W)>=0,ie=Y?"width":"height",Q=Cv(e,{placement:k,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),oe=Y?G?Yo:Rs:G?Xo:Is;P[ie]>A[ie]&&(oe=OS(oe));var z=OS(oe),ee=[];if(s&&ee.push(Q[W]<=0),a&&ee.push(Q[oe]<=0,Q[z]<=0),ee.every(function(he){return he})){H=k,O=!1;break}D.set(k,ee)}if(O)for(var te=g?3:1,ce=function(xe){var Fe=w.find(function(He){var ot=D.get(He);if(ot)return ot.slice(0,xe).every(function(Ae){return Ae})});if(Fe)return H=Fe,"break"},Te=te;Te>0;Te--){var Ue=ce(Te);if(Ue==="break")break}e.placement!==H&&(e.modifiersData[i]._skip=!0,e.placement=H,e.reset=!0)}}const yfe={name:"flip",enabled:!0,phase:"main",fn:gfe,requiresIfExists:["offset"],data:{_skip:!1}};function BU(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function zU(t){return[Is,Yo,Xo,Rs].some(function(e){return t[e]>=0})}function vfe(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Cv(e,{elementContext:"reference"}),a=Cv(e,{altBoundary:!0}),l=BU(o,i),u=BU(a,r,s),c=zU(l),d=zU(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const _fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:vfe};function xfe(t,e,n){var i=pl(t),r=[Rs,Is].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Rs,Yo].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Sfe(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=CV.reduce(function(c,d){return c[d]=xfe(d,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}const Tfe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Sfe};function bfe(t){var e=t.state,n=t.name;e.modifiersData[n]=kV({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const wfe={name:"popperOffsets",enabled:!0,phase:"read",fn:bfe,data:{}};function Efe(t){return t==="x"?"y":"x"}function Cfe(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,m=h===void 0?!0:h,g=n.tetherOffset,v=g===void 0?0:g,_=Cv(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),y=pl(e.placement),S=Hm(e.placement),x=!S,w=Mk(y),P=Efe(w),A=e.modifiersData.popperOffsets,D=e.rects.reference,O=e.rects.popper,H=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,E=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(A){if(s){var G,Y=w==="y"?Is:Rs,ie=w==="y"?Xo:Yo,Q=w==="y"?"height":"width",oe=A[w],z=oe+_[Y],ee=oe-_[ie],te=m?-O[Q]/2:0,ce=S===Fm?D[Q]:O[Q],Te=S===Fm?-O[Q]:-D[Q],Ue=e.elements.arrow,he=m&&Ue?Ak(Ue):{width:0,height:0},xe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:PV(),Fe=xe[Y],He=xe[ie],ot=_y(0,D[Q],he[Q]),Ae=x?D[Q]/2-te-ot-Fe-E.mainAxis:ce-ot-Fe-E.mainAxis,Ge=x?-D[Q]/2+te+ot+He+E.mainAxis:Te+ot+He+E.mainAxis,Le=e.elements.arrow&&x_(e.elements.arrow),le=Le?w==="y"?Le.clientTop||0:Le.clientLeft||0:0,j=(G=k==null?void 0:k[w])!=null?G:0,Me=oe+Ae-j-le,Re=oe+Ge-j,Be=_y(m?VT(z,Me):z,oe,m?Mh(ee,Re):ee);A[w]=Be,W[w]=Be-oe}if(a){var We,rt=w==="x"?Is:Rs,st=w==="x"?Xo:Yo,q=A[P],V=P==="y"?"height":"width",_e=q+_[rt],De=q-_[st],Ve=[Is,Rs].indexOf(y)!==-1,Ne=(We=k==null?void 0:k[P])!=null?We:0,dt=Ve?_e:q-D[V]-O[V]-Ne+E.altAxis,qe=Ve?q+D[V]+O[V]-Ne-E.altAxis:De,Qe=m&&Ve?Khe(dt,q,qe):_y(m?dt:_e,q,m?qe:De);A[P]=Qe,W[P]=Qe-q}e.modifiersData[i]=W}}const Afe={name:"preventOverflow",enabled:!0,phase:"main",fn:Cfe,requiresIfExists:["offset"]};function Mfe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Pfe(t){return t===lo(t)||!$o(t)?Pk(t):Mfe(t)}function Ife(t){var e=t.getBoundingClientRect(),n=Bm(e.width)/t.offsetWidth||1,i=Bm(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Rfe(t,e,n){n===void 0&&(n=!1);var i=$o(e),r=$o(e)&&Ife(e),s=ld(e),o=zm(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Sl(e)!=="body"||Rk(s))&&(a=Pfe(e)),$o(e)?(l=zm(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Ik(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Dfe(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function kfe(t){var e=Dfe(t);return Ghe.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Lfe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Nfe(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var HU={placement:"bottom",modifiers:[],strategy:"absolute"};function VU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ofe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?HU:r;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},HU,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,m={state:c,setOptions:function(y){var S=typeof y=="function"?y(c.options):y;v(),c.options=Object.assign({},s,c.options,S),c.scrollParents={reference:qh(a)?xy(a):a.contextElement?xy(a.contextElement):[],popper:xy(l)};var x=kfe(Nfe([].concat(i,c.options.modifiers)));return c.orderedModifiers=x.filter(function(w){return w.enabled}),g(),m.update()},forceUpdate:function(){if(!h){var y=c.elements,S=y.reference,x=y.popper;if(VU(S,x)){c.rects={reference:Rfe(S,x_(x),c.options.strategy==="fixed"),popper:Ak(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(E){return c.modifiersData[E.name]=Object.assign({},E.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var P=c.orderedModifiers[w],A=P.fn,D=P.options,O=D===void 0?{}:D,H=P.name;typeof A=="function"&&(c=A({state:c,options:O,name:H,instance:m})||c)}}}},update:Lfe(function(){return new Promise(function(_){m.forceUpdate(),_(c)})}),destroy:function(){v(),h=!0}};if(!VU(a,l))return m;m.setOptions(u).then(function(_){!h&&u.onFirstUpdate&&u.onFirstUpdate(_)});function g(){c.orderedModifiers.forEach(function(_){var y=_.name,S=_.options,x=S===void 0?{}:S,w=_.effect;if(typeof w=="function"){var P=w({state:c,name:y,instance:m,options:x}),A=function(){};d.push(P||A)}})}function v(){d.forEach(function(_){return _()}),d=[]}return m}}var Ufe=[ofe,wfe,rfe,qhe,Tfe,yfe,Afe,efe,_fe],Ffe=Ofe({defaultModifiers:Ufe});function Bfe(t){return typeof t=="function"?t():t}const zfe=U.forwardRef(function(e,n){const{children:i,container:r,disablePortal:s=!1}=e,[o,a]=U.useState(null),l=uv(U.isValidElement(i)?vre(i):null,n);if(Kc(()=>{s||a(Bfe(r)||document.body)},[r,s]),Kc(()=>{if(o&&!s)return UP(n,o),()=>{UP(n,null)}},[n,o,s]),s){if(U.isValidElement(i)){const u={ref:l};return U.cloneElement(i,u)}return $(U.Fragment,{children:i})}return $(U.Fragment,{children:o&&x2.createPortal(i,o)})}),Hfe=zfe;function Vfe(t){return Jo("MuiPopper",t)}La("MuiPopper",["root"]);function $fe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function uI(t){return typeof t=="function"?t():t}function Gfe(t){return t.nodeType!==void 0}const Wfe=t=>{const{classes:e}=t;return ea({root:["root"]},Vfe,e)},jfe={},qfe=U.forwardRef(function(e,n){const{anchorEl:i,children:r,direction:s,disablePortal:o,modifiers:a,open:l,placement:u,popperOptions:c,popperRef:d,slotProps:h={},slots:m={},TransitionProps:g,ownerState:v,..._}=e,y=U.useRef(null),S=uv(y,n),x=U.useRef(null),w=uv(x,d),P=U.useRef(w);Kc(()=>{P.current=w},[w]),U.useImperativeHandle(d,()=>x.current,[]);const A=$fe(u,s),[D,O]=U.useState(A),[H,E]=U.useState(uI(i));U.useEffect(()=>{x.current&&x.current.forceUpdate()}),U.useEffect(()=>{i&&E(uI(i))},[i]),Kc(()=>{if(!H||!l)return;const ie=z=>{O(z.placement)};let Q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:z})=>{ie(z)}}];a!=null&&(Q=Q.concat(a)),c&&c.modifiers!=null&&(Q=Q.concat(c.modifiers));const oe=Ffe(H,y.current,{placement:A,...c,modifiers:Q});return P.current(oe),()=>{oe.destroy(),P.current(null)}},[H,o,a,l,c,A]);const k={placement:D};g!==null&&(k.TransitionProps=g);const W=Wfe(e),G=m.root??"div",Y=Vo({elementType:G,externalSlotProps:h.root,externalForwardedProps:_,additionalProps:{role:"tooltip",ref:S},ownerState:e,className:W.root});return $(G,{...Y,children:typeof r=="function"?r(k):r})}),Xfe=U.forwardRef(function(e,n){const{anchorEl:i,children:r,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:u,open:c,placement:d="bottom",popperOptions:h=jfe,popperRef:m,style:g,transition:v=!1,slotProps:_={},slots:y={},...S}=e,[x,w]=U.useState(!0),P=()=>{w(!1)},A=()=>{w(!0)};if(!l&&!c&&(!v||x))return null;let D;if(s)D=s;else if(i){const E=uI(i);D=E&&Gfe(E)?OP(E).body:OP(null).body}const O=!c&&l&&(!v||x)?"none":void 0,H=v?{in:c,onEnter:P,onExited:A}:void 0;return $(Hfe,{disablePortal:a,container:D,children:$(qfe,{anchorEl:i,direction:o,disablePortal:a,modifiers:u,ref:n,open:v?!x:c,placement:d,popperOptions:h,popperRef:m,slotProps:_,slots:y,...S,style:{position:"fixed",top:0,left:0,display:O,...g},TransitionProps:H,children:r})})}),Yfe=Xfe;function Kfe(){return Hie}function LV(t){return Are(t)}const Qfe=mi(Yfe,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Zfe=U.forwardRef(function(e,n){const i=RD(),r=LV({props:e,name:"MuiPopper"}),{anchorEl:s,component:o,components:a,componentsProps:l,container:u,disablePortal:c,keepMounted:d,modifiers:h,open:m,placement:g,popperOptions:v,popperRef:_,transition:y,slots:S,slotProps:x,...w}=r,P=(S==null?void 0:S.root)??(a==null?void 0:a.Root),A={anchorEl:s,container:u,disablePortal:c,keepMounted:d,modifiers:h,open:m,placement:g,popperOptions:v,popperRef:_,transition:y,...w};return $(Qfe,{as:o,direction:i?"rtl":"ltr",slots:{root:P},slotProps:x??l,...A,ref:n})}),Jfe=Zfe;function NV(t){const{children:e,defer:n=!1,fallback:i=null}=t,[r,s]=U.useState(!1);return Kc(()=>{n||s(!0)},[n]),U.useEffect(()=>{n&&s(!0)},[n]),$(U.Fragment,{children:r?e:i})}function epe(t){if(t===null)return{getBoundingClientRect:()=>({width:0,height:0,x:0,y:0,top:0,right:0,bottom:0,left:0,toJSON:()=>""})};const{x:e,y:n}=t,i={width:0,height:0,x:e,y:n,top:n,right:e,bottom:n,left:e};return{getBoundingClientRect:()=>ve({},i,{toJSON:()=>JSON.stringify(i)})}}function tpe(){const t=Sk(),[e,n]=U.useState(null);return U.useEffect(()=>{const i=t.current;if(i===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&n(null)},s=o=>{n({x:o.clientX,y:o.clientY,height:o.height,pointerType:o.pointerType})};return i.addEventListener("pointerdown",s),i.addEventListener("pointermove",s),i.addEventListener("pointerup",r),()=>{i.removeEventListener("pointerdown",s),i.removeEventListener("pointermove",s),i.removeEventListener("pointerup",r)}},[t]),e}function npe(t,e){if(t==="item")return e!==null;const n=e.x!==null,i=e.y!==null;return n||i}function ipe(t){return t instanceof Date?t.toUTCString():t.toLocaleString()}function rpe(t){return Jo("MuiChartsTooltip",t)}const $U=La("MuiChartsTooltip",["root","paper","table","row","cell","mark","markCell","labelCell","valueCell"]),OV=mi("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(t,e)=>e.paper})(({theme:t})=>({boxShadow:t.shadows[1],backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),borderRadius:t.shape.borderRadius})),UV=mi("table",{name:"MuiChartsTooltip",slot:"Table",overridesResolver:(t,e)=>e.table})(({theme:t})=>({borderSpacing:0,"& thead td":{borderBottom:`solid ${(t.vars||t).palette.divider} 1px`}})),cI=mi("tr",{name:"MuiChartsTooltip",slot:"Row",overridesResolver:(t,e)=>e.row})(({theme:t})=>({"tr:first-of-type& td":{paddingTop:t.spacing(1)},"tr:last-of-type& td":{paddingBottom:t.spacing(1)}})),gh=mi("td",{name:"MuiChartsTooltip",slot:"Cell",overridesResolver:(t,e)=>e.cell})(({theme:t})=>({verticalAlign:"middle",color:(t.vars||t).palette.text.secondary,[`&.${$U.labelCell}`]:{paddingLeft:t.spacing(1)},[`&.${$U.valueCell}`]:{paddingLeft:t.spacing(4),color:(t.vars||t).palette.text.primary},"td:first-of-type&":{paddingLeft:t.spacing(2)},"td:last-of-type&":{paddingRight:t.spacing(2)}})),FV=mi("div",{name:"MuiChartsTooltip",slot:"Mark",overridesResolver:(t,e)=>e.mark,shouldForwardProp:t=>IS(t)&&t!=="color"})(({theme:t,color:e})=>({width:t.spacing(1),height:t.spacing(1),borderRadius:"50%",boxShadow:t.shadows[1],backgroundColor:e,borderColor:(t.vars||t).palette.background.paper,border:`solid ${(t.vars||t).palette.background.paper} ${t.spacing(.25)}`,boxSizing:"content-box"}));function spe(t){var c;const{series:e,itemData:n,sx:i,classes:r,getColor:s}=t;if(n.dataIndex===void 0||!e.data[n.dataIndex])return null;const{displayedLabel:o,color:a}=e.type==="pie"?{color:s(n.dataIndex),displayedLabel:fu(e.data[n.dataIndex].label,"tooltip")}:{color:s(n.dataIndex),displayedLabel:fu(e.label,"tooltip")},l=e.type==="pie"?ve({},e.data[n.dataIndex],{label:fu(e.data[n.dataIndex].label,"tooltip")}):e.data[n.dataIndex],u=(c=e.valueFormatter)==null?void 0:c.call(e,l,{dataIndex:n.dataIndex});return $(OV,{sx:i,className:r.paper,children:$(UV,{className:r.table,children:$("tbody",{children:Nt(cI,{className:r.row,children:[$(gh,{className:hl(r.markCell,r.cell),children:$(FV,{color:a,className:r.mark})}),$(gh,{className:hl(r.labelCell,r.cell),children:o}),$(gh,{className:hl(r.valueCell,r.cell),children:u})]})})})})}function ope(t){var w;const{content:e,itemData:n,sx:i,classes:r,contentProps:s}=t,o=ad()[n.type].series[n.seriesId],{xAxis:a,yAxis:l,xAxisIds:u,yAxisIds:c}=Ns(),{zAxis:d,zAxisIds:h}=U.useContext(rk),m=P7(),g=o.xAxisId??o.xAxisKey??u[0],v=o.yAxisId??o.yAxisKey??c[0],_=o.zAxisId??o.zAxisKey??h[0],y=((w=m[o.type])==null?void 0:w.call(m,o,g&&a[g],v&&l[v],_&&d[_]))??(()=>""),S=e??spe,x=Vo({elementType:S,externalSlotProps:s,additionalProps:{itemData:n,series:o,sx:i,classes:r,getColor:y},ownerState:{}});return $(S,ve({},x))}const ape=Mre,lpe=ape;function upe(t){return typeof t.main=="string"}function cpe(t,e=[]){if(!upe(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function dpe(t=[]){return([,e])=>e&&cpe(e,t)}function hpe(t){return Jo("MuiTypography",t)}La("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const fpe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},ppe=Kfe(),mpe=t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${lv(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return ea(a,hpe,o)},gpe=mi("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${lv(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(lpe(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,i])=>n!=="inherit"&&i&&typeof i=="object").map(([n,i])=>({props:{variant:n},style:i})),...Object.entries(t.palette).filter(dpe()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${lv(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),GU={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ype=U.forwardRef(function(e,n){const{color:i,...r}=LV({props:e,name:"MuiTypography"}),s=!fpe[i],o=ppe({...r,...s&&{color:i}}),{align:a="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:d=!1,paragraph:h=!1,variant:m="body1",variantMapping:g=GU,...v}=o,_={...o,align:a,color:i,className:l,component:u,gutterBottom:c,noWrap:d,paragraph:h,variant:m,variantMapping:g},y=u||(h?"p":g[m]||GU[m])||"span",S=mpe(_);return $(gpe,{as:y,ref:n,className:hl(S.root,l),...v,ownerState:_,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...v.style}})}),aA=ype;let WU;class vpe{constructor(){if(this.types=new Set,WU)throw new Error("You can only create one instance!");WU=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const vw=new vpe;vw.addType("bar");vw.addType("line");vw.addType("scatter");function BV(t){return vw.getTypes().has(t)}function _pe(t){return BV(t.type)}function xpe(t){const{series:e,axis:n,dataIndex:i,axisValue:r,sx:s,classes:o}=t;if(i==null)return null;const a=n.valueFormatter??(l=>n.scaleType==="utc"?ipe(l):l.toLocaleString());return $(OV,{sx:s,className:o.paper,children:Nt(UV,{className:o.table,children:[r!=null&&!n.hideTooltip&&$("thead",{children:$(cI,{children:$(gh,{colSpan:3,children:$(aA,{children:a(r,{location:"tooltip"})})})})}),$("tbody",{children:e.filter(_pe).map(({id:l,label:u,valueFormatter:c,data:d,getColor:h})=>{const m=c(d[i]??null,{dataIndex:i});if(m==null)return null;const g=fu(u,"tooltip"),v=h(i);return Nt(cI,{className:o.row,children:[$(gh,{className:hl(o.markCell,o.cell),children:v&&$(FV,{color:v,className:o.mark})}),$(gh,{className:hl(o.labelCell,o.cell),children:g?$(aA,{children:g}):null}),$(gh,{className:hl(o.valueCell,o.cell),children:$(aA,{children:m})})]},l)})})]})})}function Spe(t){const{content:e,contentProps:n,axisData:i,sx:r,classes:s}=t,o=i.x&&i.x.index!==-1,a=o?i.x&&i.x.index:i.y&&i.y.index,l=o?i.x&&i.x.value:i.y&&i.y.value,{xAxisIds:u,xAxis:c,yAxisIds:d,yAxis:h}=Ns(),{zAxisIds:m,zAxis:g}=U.useContext(rk),v=ad(),_=P7(),y=o?u[0]:d[0],S=U.useMemo(()=>{const A=[];return Object.keys(v).filter(BV).forEach(D=>{v[D].seriesOrder.forEach(O=>{var G;const H=v[D].series[O],E=H.xAxisId??H.xAxisKey,k=H.yAxisId??H.yAxisKey,W=o?E:k;if(W===void 0||W===y){const Y=v[D].series[O],ie=E??u[0],Q=k??d[0],oe=Y.zAxisId??Y.zAxisKey??m[0],z=((G=_[D])==null?void 0:G.call(_,Y,c[ie],h[Q],oe&&g[oe]))??(()=>"");A.push(ve({},Y,{getColor:z}))}})}),A},[y,_,o,v,c,u,h,d,g,m]),x=U.useMemo(()=>o?c[y]:h[y],[y,o,c,h]),w=e??xpe,P=Vo({elementType:w,externalSlotProps:n,additionalProps:{axisData:i,series:S,axis:x,dataIndex:a,axisValue:l,sx:r,classes:s},ownerState:{}});return $(w,ve({},P))}const Tpe=t=>{const{classes:e}=t;return ea({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markCell:["markCell"],labelCell:["labelCell"],valueCell:["valueCell"]},rpe,e)},bpe=mi(Jfe,{name:"MuiChartsTooltip",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({pointerEvents:"none",zIndex:t.zIndex.modal}));function wpe(t){const e=af({props:t,name:"MuiChartsTooltip"}),{trigger:n="axis",itemContent:i,axisContent:r,slots:s,slotProps:o}=e,a=tpe(),{item:l,axis:u}=U.useContext(Ou),c=n==="item"?l:u,d=npe(n,c),h=a!==null&&d,m=Tpe({classes:e.classes}),g=(s==null?void 0:s.popper)??bpe,v=Vo({elementType:g,externalSlotProps:o==null?void 0:o.popper,additionalProps:{open:h,placement:(a==null?void 0:a.pointerType)==="mouse"?"right-start":"top",anchorEl:epe(a),modifiers:[{name:"offset",options:{offset:[0,(a==null?void 0:a.pointerType)==="touch"?40-a.height:0]}}]},ownerState:{}});return n==="none"?null:$(NV,{children:h&&$(g,ve({},v,{className:m.root,children:n==="item"?$(ope,{itemData:c,content:(s==null?void 0:s.itemContent)??i,contentProps:o==null?void 0:o.itemContent,sx:{mx:2},classes:m}):$(Spe,{axisData:c,content:(s==null?void 0:s.axisContent)??r,contentProps:o==null?void 0:o.axisContent,sx:{mx:2},classes:m})}))})}const Epe=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((i,r)=>{const s=fu(n[r].label,"legend");return s===void 0||i.push({id:r,seriesId:r,color:n[r].color,label:s}),i},[])},Cpe=Epe,Ape=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((i,r)=>{const s=fu(n[r].label,"legend");return s===void 0||i.push({id:r,seriesId:r,color:n[r].color,label:s}),i},[])},Mpe=Ape,Ppe=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((i,r)=>{const s=fu(n[r].label,"legend");return s===void 0||i.push({id:r,seriesId:r,color:n[r].color,label:s}),i},[])},Ipe=Ppe,Rpe=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((i,r)=>(n[r].data.forEach(s=>{const o=fu(s.label,"legend");o!==void 0&&i.push({id:s.id,seriesId:r,color:s.color,label:o,itemId:s.id})}),i),[])},Dpe=Rpe,kpe={bar:Cpe,scatter:Mpe,line:Ipe,pie:Dpe};function Lpe(t){return Object.keys(t).flatMap(e=>{const n=kpe[e];return n===void 0?[]:n(t[e])})}function Npe(t){return Jo("MuiChartsLegend",t)}La("MuiChartsLegend",["root","series","itemBackground","mark","label","column","row"]);const Ope=["label"];function Upe(t,e,n,i,r,s,o){let a=0,l=0,u=0,c=0,d=0;const h=[0];return[t.map(g=>{let{label:v}=g,_=kn(g,Ope);const y=e(v,n),S=ve({},_,{label:v,positionX:a,positionY:l,innerHeight:y.innerHeight,innerWidth:y.innerWidth,outerHeight:y.outerHeight,outerWidth:y.outerWidth,rowIndex:d});return i==="row"&&(a+y.innerWidth>r&&(a=0,l+=h[d],d+=1,h.length<=d&&h.push(0),S.positionX=a,S.positionY=l,S.rowIndex=d),u=Math.max(u,a+y.outerWidth),c=Math.max(c,l+y.outerHeight),h[d]=Math.max(h[d],y.outerHeight),a+=y.outerWidth),i==="column"&&(l+y.innerHeight>s&&(a=u+o,l=0,d=0,S.positionX=a,S.positionY=l,S.rowIndex=d),h.length<=d&&h.push(0),u=Math.max(u,a+y.outerWidth),c=Math.max(c,l+y.outerHeight),d+=1,l+=y.outerHeight),S}).map(g=>ve({},g,{positionY:g.positionY+(i==="row"?h[g.rowIndex]/2:g.outerHeight/2)})),u,c]}function Fpe(t){const e=RD(),{id:n,positionY:i,label:r,positionX:s,innerHeight:o,innerWidth:a,legendWidth:l,color:u,gapX:c,gapY:d,itemMarkHeight:h,itemMarkWidth:m,markGap:g,labelStyle:v,classes:_,onClick:y}=t;return Nt("g",{className:hl(_==null?void 0:_.series,`${_==null?void 0:_.series}-${n}`),transform:`translate(${c+(e?l-s:s)} ${d+i})`,children:[$("rect",{x:e?-(a+2):-2,y:-h/2-2,width:a+4,height:o+4,fill:"transparent",className:_==null?void 0:_.itemBackground,onClick:y,style:{pointerEvents:y?"all":"none",cursor:y?"pointer":"unset"}}),$("rect",{className:_==null?void 0:_.mark,x:e?-m:0,y:-h/2,width:m,height:h,fill:u,style:{pointerEvents:"none"}}),$(wv,{style:ve({pointerEvents:"none"},v),text:r,x:(e?-1:1)*(m+g),y:0})]})}const Bpe=["rotate","dominantBaseline"],zpe=mi("g",{name:"MuiChartsLegend",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Hpe=t=>typeof t=="number"?{left:t,right:t,top:t,bottom:t}:ve({left:0,right:0,top:0,bottom:0},t);function Vpe(t){const{position:e,direction:n,itemsToDisplay:i,classes:r,itemMarkWidth:s=20,itemMarkHeight:o=20,markGap:a=5,itemGap:l=10,padding:u=10,labelStyle:c,onItemClick:d}=t,h=hg(),m=Ls(),g=U.useMemo(()=>ve({},h.typography.subtitle1,{color:"inherit",dominantBaseline:"central",textAnchor:"start",fill:(h.vars||h).palette.text.primary,lineHeight:1},c),[c,h]),v=U.useMemo(()=>Hpe(u),[u]),_=U.useCallback((E,k={})=>{const W=kn(k,Bpe),G=wk({style:W,needsComputation:!0,text:E}),Y={innerWidth:s+a+Math.max(...G.map(ie=>ie.width)),innerHeight:Math.max(o,G.length*G[0].height)};return ve({},Y,{outerWidth:Y.innerWidth+l,outerHeight:Y.innerHeight+l})},[l,o,s,a]),y=m.left+m.width+m.right,S=m.top+m.height+m.bottom,x=y-v.left-v.right,w=S-v.top-v.bottom,[P,A,D]=U.useMemo(()=>Upe(i,_,g,n,x,w,l),[i,_,g,n,x,w,l]),O=U.useMemo(()=>{switch(e.horizontal){case"left":return v.left;case"right":return y-v.right-A;default:return(y-A)/2}},[e.horizontal,v.left,v.right,y,A]),H=U.useMemo(()=>{switch(e.vertical){case"top":return v.top;case"bottom":return S-v.bottom-D;default:return(S-D)/2}},[e.vertical,v.top,v.bottom,S,D]);return $(NV,{children:$(zpe,{className:r==null?void 0:r.root,children:P.map((E,k)=>U.createElement(Fpe,ve({},E,{key:E.id,gapX:O,gapY:H,legendWidth:A,itemMarkHeight:o,itemMarkWidth:s,markGap:a,labelStyle:g,classes:r,onClick:d?W=>d(W,k):void 0})))})})}const $pe=["drawingArea","seriesToDisplay","hidden","onItemClick"],Gpe=t=>({type:"series",color:t.color,label:t.label,seriesId:t.seriesId,itemId:t.itemId});function Wpe(t){const{seriesToDisplay:e,hidden:n,onItemClick:i}=t,r=kn(t,$pe);return n?null:$(Vpe,ve({},r,{itemsToDisplay:e,onItemClick:i?(s,o)=>i(s,Gpe(e[o]),o):void 0}))}const jpe=["slots","slotProps"],qpe=t=>{const{classes:e,direction:n}=t;return ea({root:["root",n],mark:["mark"],label:["label"],series:["series"],itemBackground:["itemBackground"]},Npe,e)};function Xpe(t){const e=af({props:t,name:"MuiChartsLegend"}),n=ve({direction:"row"},e,{position:ve({horizontal:"middle",vertical:"top"},e.position)}),{slots:i,slotProps:r}=n,s=kn(n,jpe),o=hg(),a=qpe(ve({},n,{theme:o})),l=Ls(),u=ad(),c=Lpe(u),d=(i==null?void 0:i.legend)??Wpe,h=Vo({elementType:d,externalSlotProps:r==null?void 0:r.legend,additionalProps:ve({},s,{classes:a,drawingArea:l,series:u,seriesToDisplay:c}),ownerState:{}});return $(d,ve({},h))}function Ype(t){return Jo("MuiChartsAxisHighlight",t)}La("MuiChartsAxisHighlight",["root"]);const Kpe=()=>ea({root:["root"]},Ype),h1=mi("path",{name:"MuiChartsAxisHighlight",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:ve({fill:"white",fillOpacity:.1},t.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:ve({strokeDasharray:"5 2",stroke:"#ffffff"},t.applyStyles("light",{stroke:"#000000"}))}]}));function Qpe(t){const{x:e,y:n}=t,{xAxisIds:i,xAxis:r,yAxisIds:s,yAxis:o}=Ns(),a=Kpe(),l=i[0],u=s[0],c=r[l].scale,d=o[u].scale,{axis:h}=U.useContext(Ou),m=Um(c),g=Um(d),v=h.x,_=h.y,y=e==="band"&&v!==null&&Wh(c),S=n==="band"&&_!==null&&Wh(d);return Nt(U.Fragment,{children:[y&&c(v.value)!==void 0&&$(h1,{d:`M ${c(v.value)-(c.step()-c.bandwidth())/2} ${d.range()[0]} l ${c.step()} 0 l 0 ${d.range()[1]-d.range()[0]} l ${-c.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),S&&d(_.value)!==void 0&&$(h1,{d:`M ${c.range()[0]} ${d(_.value)-(d.step()-d.bandwidth())/2} l 0 ${d.step()} l ${c.range()[1]-c.range()[0]} 0 l 0 ${-d.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),e==="line"&&h.x!==null&&$(h1,{d:`M ${m(h.x.value)} ${d.range()[0]} L ${m(h.x.value)} ${d.range()[1]}`,className:a.root,ownerState:{axisHighlight:"line"}}),n==="line"&&h.y!==null&&$(h1,{d:`M ${c.range()[0]} ${g(h.y.value)} L ${c.range()[1]} ${g(h.y.value)}`,className:a.root,ownerState:{axisHighlight:"line"}})]})}function Zpe(t){const{id:e,offset:n}=t,{left:i,top:r,width:s,height:o}=Ls(),a=ve({top:0,right:0,bottom:0,left:0},n);return $("clipPath",{id:e,children:$("rect",{x:i-a.left,y:r-a.top,width:s+a.left+a.right,height:o+a.top+a.bottom})})}const Jpe=["x","y","id","classes","color"];function eme(t){return Jo("MuiHighlightElement",t)}La("MuiHighlightElement",["root"]);const tme=t=>{const{classes:e,id:n}=t,i={root:["root",`series-${n}`]};return ea(i,eme,e)},nme=mi("circle",{name:"MuiHighlightElement",slot:"Root",overridesResolver:(t,e)=>e.root})(({ownerState:t})=>({transform:`translate(${t.x}px, ${t.y}px)`,transformOrigin:`${t.x}px ${t.y}px`,fill:t.color}));function ime(t){const{x:e,y:n,id:i,classes:r,color:s}=t,o=kn(t,Jpe),a={id:i,classes:r,color:s,x:e,y:n},l=tme(a);return $(nme,ve({pointerEvents:"none",ownerState:a,className:l.root,cx:0,cy:0,r:o.r===void 0?5:o.r},o))}const rme=["slots","slotProps"];function sme(t){var S;const{slots:e,slotProps:n}=t,i=kn(t,rme),r=ow(),s=Ns(),o=Ls(),{axis:a}=U.useContext(Ou),l=(S=a.x)==null?void 0:S.index;if(l===void 0||r===void 0)return null;const{series:u,stackingGroups:c}=r,{xAxis:d,yAxis:h,xAxisIds:m,yAxisIds:g}=s,v=m[0],_=g[0],y=(e==null?void 0:e.lineHighlight)??ime;return $("g",ve({},i,{children:c.flatMap(({ids:x})=>x.flatMap(w=>{const{xAxisId:P,yAxisId:A,xAxisKey:D=v,yAxisKey:O=_,stackedData:H,data:E,disableHighlight:k}=u[w],W=P??D,G=A??O;if(k||E[l]==null)return null;const Y=Um(d[W].scale),ie=h[G].scale,Q=d[W].data;if(Q===void 0)throw new Error(`MUI X: ${W===rw?"The first `xAxis`":`The x-axis with id "${W}"`} should have data property to be able to display a line plot.`);const oe=Y(Q[l]),z=ie(H[l][1]);if(!o.isPointInside({x:oe,y:z}))return null;const ee=ik(u[w],d[W],h[G]);return $(y,ve({id:w,color:ee(l),x:oe,y:z},n==null?void 0:n.lineHighlight),`${w}`)}))}))}function ome(t){return Jo("MuiChartsGrid",t)}const jU=La("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),ame=mi("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(t,e)=>[{[`&.${jU.verticalLine}`]:e.verticalLine},{[`&.${jU.horizontalLine}`]:e.horizontalLine},e.root]})({}),zV=mi("line",{name:"MuiChartsGrid",slot:"Line",overridesResolver:(t,e)=>e.line})(({theme:t})=>({stroke:(t.vars||t).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function lme(t){const{axis:e,drawingArea:n,classes:i}=t,{scale:r,tickNumber:s,tickInterval:o}=e,a=iw({scale:r,tickNumber:s,tickInterval:o});return $(U.Fragment,{children:a.map(({formattedValue:l,offset:u})=>$(zV,{y1:n.top,y2:n.top+n.height,x1:u,x2:u,className:i.verticalLine},`vertical-${l}`))})}function ume(t){const{axis:e,drawingArea:n,classes:i}=t,{scale:r,tickNumber:s,tickInterval:o}=e,a=iw({scale:r,tickNumber:s,tickInterval:o});return $(U.Fragment,{children:a.map(({formattedValue:l,offset:u})=>$(zV,{y1:u,y2:u,x1:n.left,x2:n.left+n.width,className:i.horizontalLine},`horizontal-${l}`))})}const cme=["vertical","horizontal"],dme=({classes:t})=>ea({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},ome,t);function hme(t){const e=af({props:t,name:"MuiChartsGrid"}),n=Ls(),{vertical:i,horizontal:r}=e,s=kn(e,cme),{xAxis:o,xAxisIds:a,yAxis:l,yAxisIds:u}=Ns(),c=dme(e),d=l[u[0]],h=o[a[0]];return Nt(ame,ve({},s,{className:c.root,children:[i&&$(lme,{axis:h,drawingArea:n,classes:c}),r&&$(ume,{axis:d,drawingArea:n,classes:c})]}))}function fme(t){const{onAxisClick:e}=t,n=Sk(),i=ad(),{axis:r}=U.useContext(Ou),{xAxisIds:s,xAxis:o,yAxisIds:a,yAxis:l}=Ns();return U.useEffect(()=>{const u=n.current;if(u===null||!e)return()=>{};const c=d=>{var y;d.preventDefault();const h=r.x&&r.x.index!==-1,m=h?s[0]:a[0],g=h?r.x&&r.x.index:r.y&&r.y.index;if(g==null)return;const v={};Object.keys(i).filter(S=>["bar","line"].includes(S)).forEach(S=>{var x;(x=i[S])==null||x.seriesOrder.forEach(w=>{const P=i[S].series[w],A=P.xAxisId??P.xAxisKey,D=P.yAxisId??P.yAxisKey,O=h?A:D;(O===void 0||O===m)&&(v[w]=P.data[g])})});const _=(y=(h?o:l)[m].data)==null?void 0:y[g];e(d,{dataIndex:g,axisValue:_,seriesValues:v})};return u.addEventListener("click",c),()=>{u.removeEventListener("click",c)}},[r.x,r.y,e,i,n,o,s,l,a]),$(U.Fragment,{})}const pme=["message"],mme=mi("text")(({theme:t})=>ve({},t.typography.body2,{stroke:"none",fill:t.palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function gme(t){const{message:e}=t,n=kn(t,pme),{top:i,left:r,height:s,width:o}=Ls();return $(mme,ve({x:r+o/2,y:i+s/2},n,{children:e??"Loading data"}))}const yme=["message"],vme=mi("text")(({theme:t})=>ve({},t.typography.body2,{stroke:"none",fill:t.palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function _me(t){const{message:e}=t,n=kn(t,yme),{top:i,left:r,height:s,width:o}=Ls();return $(vme,ve({x:r+o/2,y:i+s/2},n,{children:e??"No data to display"}))}function xme(){const t=ad();return Object.values(t).every(e=>{if(!e)return!0;const{series:n,seriesOrder:i}=e;return i.every(r=>n[r].data.length===0)})}function Sme(t){var n,i,r,s;const e=xme();if(t.loading){const o=((n=t.slots)==null?void 0:n.loadingOverlay)??gme;return $(o,ve({},(i=t.slotProps)==null?void 0:i.loadingOverlay))}if(e){const o=((r=t.slots)==null?void 0:r.noDataOverlay)??_me;return $(o,ve({},(s=t.slotProps)==null?void 0:s.noDataOverlay))}return null}const Tme=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","tooltip","onAxisClick","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","legend","grid","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","experimentalMarkRendering"],bme=t=>{const{xAxis:e,yAxis:n,series:i,width:r,height:s,margin:o,colors:a,dataset:l,sx:u,tooltip:c,onAxisClick:d,onAreaClick:h,onLineClick:m,onMarkClick:g,axisHighlight:v,disableLineItemHighlight:_,legend:y,grid:S,topAxis:x,leftAxis:w,rightAxis:P,bottomAxis:A,children:D,slots:O,slotProps:H,skipAnimation:E,loading:k,highlightedItem:W,onHighlightChange:G,className:Y,experimentalMarkRendering:ie}=t,Q=kn(t,Tme),z=`${wH()}-clip-path`,ee=ve({},Q,{series:i.map(j=>ve({disableHighlight:!!_,type:"line"},j)),width:r,height:s,margin:o,colors:a,dataset:l,xAxis:e??[{id:rw,scaleType:"point",data:Array.from({length:Math.max(...i.map(j=>(j.data??l??[]).length))},(j,Me)=>Me)}],yAxis:n,sx:u,highlightedItem:W,onHighlightChange:G,disableAxisListener:(c==null?void 0:c.trigger)!=="axis"&&(v==null?void 0:v.x)==="none"&&(v==null?void 0:v.y)==="none"&&!d,className:Y,skipAnimation:E}),te={onAxisClick:d},ce={vertical:S==null?void 0:S.vertical,horizontal:S==null?void 0:S.horizontal},Te={clipPath:`url(#${z})`},Ue={id:z},he={slots:O,slotProps:H,onItemClick:h},xe={slots:O,slotProps:H,onItemClick:m},Fe={slots:O,slotProps:H,onItemClick:g,skipAnimation:E,experimentalRendering:ie},He={slots:O,slotProps:H,loading:k},ot={topAxis:x,leftAxis:w,rightAxis:P,bottomAxis:A,slots:O,slotProps:H},Ae=ve({x:"line"},v),Ge={slots:O,slotProps:H},Le=ve({},y,{slots:O,slotProps:H}),le=ve({},c,{slots:O,slotProps:H});return{chartContainerProps:ee,axisClickHandlerProps:te,gridProps:ce,clipPathProps:Ue,clipPathGroupProps:Te,areaPlotProps:he,linePlotProps:xe,markPlotProps:Fe,overlayProps:He,chartsAxisProps:ot,axisHighlightProps:Ae,lineHighlightPlotProps:Ge,legendProps:Le,tooltipProps:le,children:D}},$T=U.forwardRef(function(e,n){const i=af({props:e,name:"MuiLineChart"}),{chartContainerProps:r,axisClickHandlerProps:s,gridProps:o,clipPathProps:a,clipPathGroupProps:l,areaPlotProps:u,linePlotProps:c,markPlotProps:d,overlayProps:h,chartsAxisProps:m,axisHighlightProps:g,lineHighlightPlotProps:v,legendProps:_,tooltipProps:y,children:S}=bme(i);return Nt(ihe,ve({ref:n},r,{children:[i.onAxisClick&&$(fme,ve({},s)),$(hme,ve({},o)),Nt("g",ve({},l,{children:[$(kde,ve({},u)),$($de,ve({},c)),$(Sme,ve({},h)),$(Qpe,ve({},g))]})),$(Dhe,ve({},m)),$("g",{"data-drawing-container":!0,children:$(hhe,ve({},d))}),$(sme,ve({},v)),$(Xpe,ve({},_)),!i.loading&&$(wpe,ve({},y)),$(Zpe,ve({},a)),S]}))}),qU=()=>{const[t]=U.useState([]);return $("div",{children:$($T,{dataset:t,xAxis:[{dataKey:"x"}],yAxis:[{min:0,max:10}],series:[{dataKey:"y",label:"Wheel speed",color:"blue"}],height:300,margin:{left:30,right:30,top:30,bottom:30},grid:{vertical:!0,horizontal:!0},skipAnimation:!0})})},wme=({connected:t,ws:e})=>{const[n,i]=U.useState([]);return U.useEffect(()=>{if(!t||!e){i([]);return}const r=s=>{try{const o=JSON.parse(s.data);o.type==="IMU"&&i(a=>{const l={x:a.length>0?a[a.length-1].x+1:0,y1:o.pitch,y2:o.yaw,y3:o.roll},u=10;return a.length>=u?[...a.slice(1),l]:[...a,l]})}catch(o){console.error("Error parsing message:",o)}};return e.addEventListener("message",r),()=>{e.removeEventListener("message",r)}},[t,e]),t?Nt("div",{children:[$("h3",{children:"IMU Data"}),$($T,{dataset:n,xAxis:[{dataKey:"x"}],yAxis:[{min:-180,max:180}],series:[{dataKey:"y1",label:"Pitch",color:"black",showDots:!1},{dataKey:"y2",label:"Yaw",color:"red",showDots:!1},{dataKey:"y3",label:"Roll",color:"blue",showDots:!1}],height:300,margin:{left:30,right:30,top:30,bottom:30},grid:{vertical:!0,horizontal:!0},skipAnimation:!0})]}):$("div",{children:$($T,{dataset:[],xAxis:[{dataKey:"x"}],yAxis:[{min:-180,max:180}],series:[],height:300,margin:{left:30,right:30,top:30,bottom:30},grid:{vertical:!0,horizontal:!0},skipAnimation:!0})})},Eme=()=>{const[t]=U.useState([]);return $("div",{children:$($T,{dataset:t,xAxis:[{dataKey:"x"}],yAxis:[{min:0,max:10}],series:[{dataKey:"y",label:"Wheel speed",color:"blue"}],height:300,margin:{left:30,right:30,top:30,bottom:30},grid:{vertical:!0,horizontal:!0},skipAnimation:!0})})},Cme=Y2({palette:{mode:"dark"}}),Ame=Y2({palette:{mode:"light"}}),Mme=()=>{const{darkMode:t}=U.useContext(E2),{connected:e,setConnected:n,ws:i}=U.useContext(C2);return Nt(Ose,{theme:t?Cme:Ame,children:[$(of,{}),Nt("div",{className:"graphsContainer",children:[$("div",{className:"graph1Container",children:$(wme,{connected:e,ws:i})}),$("div",{className:"graph2Container",children:$(Eme,{})}),$("div",{className:"graph3Container",children:$(qU,{name:"Latency"})}),$("div",{className:"graph4Container",children:$(qU,{name:"graph4"})})]})]})};var Q0;typeof window<"u"?Q0=window:typeof GS<"u"?Q0=GS:typeof self<"u"?Q0=self:Q0={};var _w=Q0;const se=ka(_w),Pme={},Ime=Object.freeze(Object.defineProperty({__proto__:null,default:Pme},Symbol.toStringTag,{value:"Module"})),Rme=w8(Ime);var XU=typeof GS<"u"?GS:typeof window<"u"?window:{},Dme=Rme,Z0;typeof document<"u"?Z0=document:(Z0=XU["__GLOBAL_DOCUMENT_CACHE@4"],Z0||(Z0=XU["__GLOBAL_DOCUMENT_CACHE@4"]=Dme));var HV=Z0;const Je=ka(HV);var Dk={exports:{}};const kme=w8(DZ);var Lme=Ome,Nme=Object.prototype.toString;function Ome(t){if(!t)return!1;var e=Nme.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}function Ume(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=Fme(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fme(t,e){if(t){if(typeof t=="string")return YU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YU(t,e)}}function YU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Bme=function(){function t(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(i,r){this.typeToInterceptorsMap_.has(i)||this.typeToInterceptorsMap_.set(i,new Set);var s=this.typeToInterceptorsMap_.get(i);return s.has(r)?!1:(s.add(r),!0)},e.removeInterceptor=function(i,r){var s=this.typeToInterceptorsMap_.get(i);return s&&s.has(r)?(s.delete(r),!0):!1},e.clearInterceptorsByType=function(i){var r=this.typeToInterceptorsMap_.get(i);return r?(this.typeToInterceptorsMap_.delete(i),this.typeToInterceptorsMap_.set(i,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(i){return this.typeToInterceptorsMap_.get(i)||new Set},e.execute=function(i,r){for(var s=this.getForType(i),o=Ume(s),a;!(a=o()).done;){var l=a.value;try{r=l(r)}catch{}}return r},t}(),zme=Bme,Hme=function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(i){this.maxAttempts_=i},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(i){this.delayFactor_=i},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(i){this.fuzzFactor_=i},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(i){this.initialDelay_=i},e.createRetry=function(i){var r=i===void 0?{}:i,s=r.maxAttempts,o=r.delayFactor,a=r.fuzzFactor,l=r.initialDelay;return new Vme({maxAttempts:s||this.maxAttempts_,delayFactor:o||this.delayFactor_,fuzzFactor:a||this.fuzzFactor_,initialDelay:l||this.initialDelay_})},t}(),Vme=function(){function t(n){this.maxAttempts_=n.maxAttempts,this.delayFactor_=n.delayFactor,this.fuzzFactor_=n.fuzzFactor,this.currentDelay_=n.initialDelay,this.currentAttempt_=1}var e=t.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var i=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+i},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var i=this.getCurrentMinPossibleDelay(),r=this.getCurrentMaxPossibleDelay();return i+Math.random()*(r-i)},t}(),$me=Hme,Gme=_w,Wme=function(e,n){return n===void 0&&(n=!1),function(i,r,s){if(i){e(i);return}if(r.statusCode>=400&&r.statusCode<=599){var o=s;if(n)if(Gme.TextDecoder){var a=jme(r.headers&&r.headers["content-type"]);try{o=new TextDecoder(a).decode(s)}catch{}}else o=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:o});return}e(null,s)}};function jme(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,n){var i=n.split("="),r=i[0],s=i[1];return r.trim()==="charset"?s.trim():e},"utf-8")}var qme=Wme,VV=_w,Xme=kme,Yme=Lme,$V=zme,Kme=$me;Ei.httpHandler=qme;Ei.requestInterceptorsStorage=new $V;Ei.responseInterceptorsStorage=new $V;Ei.retryManager=new Kme;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var Qme=function(e){var n={};return e&&e.trim().split(`
`).forEach(function(i){var r=i.indexOf(":"),s=i.slice(0,r).trim().toLowerCase(),o=i.slice(r+1).trim();typeof n[s]>"u"?n[s]=o:Array.isArray(n[s])?n[s].push(o):n[s]=[n[s],o]}),n};Dk.exports=Ei;Dk.exports.default=Ei;Ei.XMLHttpRequest=VV.XMLHttpRequest||tge;Ei.XDomainRequest="withCredentials"in new Ei.XMLHttpRequest?Ei.XMLHttpRequest:VV.XDomainRequest;Zme(["get","put","post","patch","head","delete"],function(t){Ei[t==="delete"?"del":t]=function(e,n,i){return n=GV(e,n,i),n.method=t.toUpperCase(),kk(n)}});function Zme(t,e){for(var n=0;n<t.length;n++)e(t[n])}function Jme(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function GV(t,e,n){var i=t;return Yme(e)?(n=e,typeof t=="string"&&(i={uri:t})):i=Xme({},e,{uri:t}),i.callback=n,i}function Ei(t,e,n){return e=GV(t,e,n),kk(e)}function kk(t){if(typeof t.callback>"u")throw new Error("callback argument missing");if(t.requestType&&Ei.requestInterceptorsStorage.getIsEnabled()){var e={uri:t.uri||t.url,headers:t.headers||{},body:t.body,metadata:t.metadata||{},retry:t.retry,timeout:t.timeout},n=Ei.requestInterceptorsStorage.execute(t.requestType,e);t.uri=n.uri,t.headers=n.headers,t.body=n.body,t.metadata=n.metadata,t.retry=n.retry,t.timeout=n.timeout}var i=!1,r=function(P,A,D){i||(i=!0,t.callback(P,A,D))};function s(){u.readyState===4&&!Ei.responseInterceptorsStorage.getIsEnabled()&&setTimeout(l,0)}function o(){var w=void 0;if(u.response?w=u.response:w=u.responseText||ege(u),y)try{w=JSON.parse(w)}catch{}return w}function a(w){if(clearTimeout(S),clearTimeout(t.retryTimeout),w instanceof Error||(w=new Error(""+(w||"Unknown XMLHttpRequest Error"))),w.statusCode=0,!d&&Ei.retryManager.getIsEnabled()&&t.retry&&t.retry.shouldRetry()){t.retryTimeout=setTimeout(function(){t.retry.moveToNextAttempt(),t.xhr=u,kk(t)},t.retry.getCurrentFuzzedDelay());return}if(t.requestType&&Ei.responseInterceptorsStorage.getIsEnabled()){var P={headers:x.headers||{},body:x.body,responseUrl:u.responseURL,responseType:u.responseType},A=Ei.responseInterceptorsStorage.execute(t.requestType,P);x.body=A.body,x.headers=A.headers}return r(w,x)}function l(){if(!d){var w;clearTimeout(S),clearTimeout(t.retryTimeout),t.useXDR&&u.status===void 0?w=200:w=u.status===1223?204:u.status;var P=x,A=null;if(w!==0?(P={body:o(),statusCode:w,method:m,headers:{},url:h,rawRequest:u},u.getAllResponseHeaders&&(P.headers=Qme(u.getAllResponseHeaders()))):A=new Error("Internal XMLHttpRequest Error"),t.requestType&&Ei.responseInterceptorsStorage.getIsEnabled()){var D={headers:P.headers||{},body:P.body,responseUrl:u.responseURL,responseType:u.responseType},O=Ei.responseInterceptorsStorage.execute(t.requestType,D);P.body=O.body,P.headers=O.headers}return r(A,P,P.body)}}var u=t.xhr||null;u||(t.cors||t.useXDR?u=new Ei.XDomainRequest:u=new Ei.XMLHttpRequest);var c,d,h=u.url=t.uri||t.url,m=u.method=t.method||"GET",g=t.body||t.data,v=u.headers=t.headers||{},_=!!t.sync,y=!1,S,x={body:void 0,headers:{},statusCode:0,method:m,url:h,rawRequest:u};if("json"in t&&t.json!==!1&&(y=!0,v.accept||v.Accept||(v.Accept="application/json"),m!=="GET"&&m!=="HEAD"&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),g=JSON.stringify(t.json===!0?g:t.json))),u.onreadystatechange=s,u.onload=l,u.onerror=a,u.onprogress=function(){},u.onabort=function(){d=!0,clearTimeout(t.retryTimeout)},u.ontimeout=a,u.open(m,h,!_,t.username,t.password),_||(u.withCredentials=!!t.withCredentials),!_&&t.timeout>0&&(S=setTimeout(function(){if(!d){d=!0,u.abort("timeout");var w=new Error("XMLHttpRequest timeout");w.code="ETIMEDOUT",a(w)}},t.timeout)),u.setRequestHeader)for(c in v)v.hasOwnProperty(c)&&u.setRequestHeader(c,v[c]);else if(t.headers&&!Jme(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(u),u.send(g||null),u}function ege(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function tge(){}var nge=Dk.exports;const WV=ka(nge);var jV={exports:{}},KU=HV,Lk=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function eo(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}eo.prototype=Lk(Error.prototype);eo.prototype.constructor=eo;eo.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Nk(t){function e(i,r,s,o){return(i|0)*3600+(r|0)*60+(s|0)+(o|0)/1e3}var n=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function Sy(){this.values=Lk(null)}Sy.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function J0(t,e,n,i){var r=i?t.split(i):[t];for(var s in r)if(typeof r[s]=="string"){var o=r[s].split(n);if(o.length===2){var a=o[0].trim(),l=o[1].trim();e(a,l)}}}function ige(t,e,n){var i=t;function r(){var a=Nk(t);if(a===null)throw new eo(eo.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){var u=new Sy;J0(a,function(c,d){switch(c){case"region":for(var h=n.length-1;h>=0;h--)if(n[h].id===d){u.set(c,n[h].region);break}break;case"vertical":u.alt(c,d,["rl","lr"]);break;case"line":var m=d.split(","),g=m[0];u.integer(c,g),u.percent(c,g)&&u.set("snapToLines",!1),u.alt(c,g,["auto"]),m.length===2&&u.alt("lineAlign",m[1],["start","center","end"]);break;case"position":m=d.split(","),u.percent(c,m[0]),m.length===2&&u.alt("positionAlign",m[1],["start","center","end"]);break;case"size":u.percent(c,d);break;case"align":u.alt(c,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=r(),o(),t.substr(0,3)!=="-->")throw new eo(eo.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);t=t.substr(3),o(),e.endTime=r(),o(),s(t,e)}var lA=KU.createElement&&KU.createElement("textarea"),rge={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},QU={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},sge={v:"title",lang:"lang"},ZU={rt:"ruby"};function qV(t,e){function n(){if(!e)return null;function g(_){return e=e.substr(_.length),_}var v=e.match(/^([^<]*)(<[^>]*>?)?/);return g(v[1]?v[1]:v[2])}function i(g){return lA.innerHTML=g,g=lA.textContent,lA.textContent="",g}function r(g,v){return!ZU[v.localName]||ZU[v.localName]===g.localName}function s(g,v){var _=rge[g];if(!_)return null;var y=t.document.createElement(_),S=sge[g];return S&&v&&(y[S]=v.trim()),y}for(var o=t.document.createElement("div"),a=o,l,u=[];(l=n())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),a=a.parentNode);continue}var c=Nk(l.substr(1,l.length-2)),d;if(c){d=t.document.createProcessingInstruction("timestamp",c),a.appendChild(d);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h||(d=s(h[1],h[3]),!d)||!r(a,d))continue;if(h[2]){var m=h[2].split(".");m.forEach(function(g){var v=/^bg_/.test(g),_=v?g.slice(3):g;if(QU.hasOwnProperty(_)){var y=v?"background-color":"color",S=QU[_];d.style[y]=S}}),d.className=m.join(" ")}u.push(h[1]),a.appendChild(d),a=d;continue}a.appendChild(t.document.createTextNode(i(l)))}return o}var JU=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function oge(t){for(var e=0;e<JU.length;e++){var n=JU[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function age(t){var e=[],n="",i;if(!t||!t.childNodes)return"ltr";function r(a,l){for(var u=l.childNodes.length-1;u>=0;u--)a.push(l.childNodes[u])}function s(a){if(!a||!a.length)return null;var l=a.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(a.length=0,c[0]):u}if(l.tagName==="ruby")return s(a);if(l.childNodes)return r(a,l),s(a)}for(r(e,t);n=s(e);)for(var o=0;o<n.length;o++)if(i=n.charCodeAt(o),oge(i))return"rtl";return"ltr"}function lge(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,r=0;r<n.length&&n[r]!==e;r++)n[r].mode==="showing"&&i++;return++i*-1}function xw(){}xw.prototype.applyStyles=function(t,e){e=e||this.div;for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};xw.prototype.formatStyle=function(t,e){return t===0?0:t+e};function GT(t,e,n){xw.call(this),this.cue=e,this.cueDiv=qV(t,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=t.document.createElement("div"),i={direction:age(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":case"line-left":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":case"line-right":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}GT.prototype=Lk(xw.prototype);GT.prototype.constructor=GT;function Yr(t){var e,n,i,r;if(t.div){n=t.div.offsetHeight,i=t.div.offsetWidth,r=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||n,this.bottom=t.bottom||r+(t.height||n),this.width=t.width||i,this.lineHeight=e!==void 0?e:t.lineHeight}Yr.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Yr.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};Yr.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};Yr.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};Yr.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};Yr.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),n=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),i=e*n;return i/(this.height*this.width)};Yr.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};Yr.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var r={left:t.left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n};return r};function uge(t,e,n,i){function r(_,y){for(var S,x=new Yr(_),w=1,P=0;P<y.length;P++){for(;_.overlapsOppositeAxis(n,y[P])||_.within(n)&&_.overlapsAny(i);)_.move(y[P]);if(_.within(n))return _;var A=_.intersectPercentage(n);w>A&&(S=new Yr(_),w=A),_=new Yr(x)}return S||x}var s=new Yr(e),o=e.cue,a=lge(o),l=[];if(o.snapToLines){var u;switch(o.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=s.lineHeight,d=c*Math.round(a),h=n[u]+c,m=l[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/c)*c),a<0&&(d+=o.vertical===""?n.height:n.width,l=l.reverse()),s.move(m,d)}else{var g=s.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=g/2;break;case"end":a-=g;break}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")});break}l=["+y","-x","+x","-y"],s=new Yr(e)}var v=r(s,l);e.move(v.toCSSCompatValues(n))}function pg(){}pg.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};pg.convertCueToDOMTree=function(t,e){return!t||!e?null:qV(t,e)};var cge=.05,dge="sans-serif",hge="1.5%";pg.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=t.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=hge,n.appendChild(i);function r(c){for(var d=0;d<c.length;d++)if(c[d].hasBeenReset||!c[d].displayState)return!0;return!1}if(!r(e)){for(var s=0;s<e.length;s++)i.appendChild(e[s].displayState);return}var o=[],a=Yr.getSimpleBoxPosition(i),l=Math.round(a.height*cge*100)/100,u={font:l+"px "+dge};(function(){for(var c,d,h=0;h<e.length;h++)d=e[h],c=new GT(t,d,u),i.appendChild(c.div),uge(t,c,a,o),d.displayState=c.div,o.push(Yr.getSimpleBoxPosition(c))})()};pg.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]};pg.Parser.prototype={reportOrThrowError:function(t){if(t instanceof eo)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function n(){for(var c=e.buffer,d=0;d<c.length&&c[d]!=="\r"&&c[d]!==`
`;)++d;var h=c.substr(0,d);return c[d]==="\r"&&++d,c[d]===`
`&&++d,e.buffer=c.substr(d),h}function i(c){var d=new Sy;if(J0(c,function(m,g){switch(m){case"id":d.set(m,g);break;case"width":d.percent(m,g);break;case"lines":d.integer(m,g);break;case"regionanchor":case"viewportanchor":var v=g.split(",");if(v.length!==2)break;var _=new Sy;if(_.percent("x",v[0]),_.percent("y",v[1]),!_.has("x")||!_.has("y"))break;d.set(m+"X",_.get("x")),d.set(m+"Y",_.get("y"));break;case"scroll":d.alt(m,g,["up"]);break}},/=/,/\s/),d.has("id")){var h=new(e.vttjs.VTTRegion||e.window.VTTRegion);h.width=d.get("width",100),h.lines=d.get("lines",3),h.regionAnchorX=d.get("regionanchorX",0),h.regionAnchorY=d.get("regionanchorY",100),h.viewportAnchorX=d.get("viewportanchorX",0),h.viewportAnchorY=d.get("viewportanchorY",100),h.scroll=d.get("scroll",""),e.onregion&&e.onregion(h),e.regionList.push({id:d.get("id"),region:h})}}function r(c){var d=new Sy;J0(c,function(h,m){switch(h){case"MPEGT":d.integer(h+"S",m);break;case"LOCA":d.set(h+"L",Nk(m));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function s(c){c.match(/X-TIMESTAMP-MAP/)?J0(c,function(d,h){switch(d){case"X-TIMESTAMP-MAP":r(h);break}},/=/):J0(c,function(d,h){switch(d){case"Region":i(h);break}},/:/)}try{var o;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;o=n();var a=o.match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new eo(eo.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:o=n(),e.state){case"HEADER":/:/.test(o)?s(o):o||(e.state="ID");continue;case"NOTE":o||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){e.state="NOTE";break}if(!o)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",o.indexOf("-->")===-1){e.cue.id=o;continue}case"CUE":try{ige(o,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=o.indexOf("-->")!==-1;if(!o||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=o.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":o||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new eo(eo.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var fge=pg,pge="auto",mge={"":1,lr:1,rl:1},gge={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function yge(t){if(typeof t!="string")return!1;var e=mge[t.toLowerCase()];return e?t.toLowerCase():!1}function uA(t){if(typeof t!="string")return!1;var e=gge[t.toLowerCase()];return e?t.toLowerCase():!1}function XV(t,e,n){this.hasBeenReset=!1;var i="",r=!1,s=t,o=e,a=n,l=null,u="",c=!0,d="auto",h="start",m="auto",g="auto",v=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(y){i=""+y}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(y){r=!!y}},startTime:{enumerable:!0,get:function(){return s},set:function(y){if(typeof y!="number")throw new TypeError("Start time must be set to a number.");s=y,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(y){if(typeof y!="number")throw new TypeError("End time must be set to a number.");o=y,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(y){a=""+y,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(y){l=y,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(y){var S=yge(y);if(S===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=S,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(y){c=!!y,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(y){if(typeof y!="number"&&y!==pge)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=y,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(y){var S=uA(y);S?(h=S,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(y){if(y<0||y>100)throw new Error("Position must be between 0 and 100.");m=y,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(y){var S=uA(y);S?(g=S,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(y){if(y<0||y>100)throw new Error("Size must be between 0 and 100.");v=y,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(y){var S=uA(y);if(!S)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=S,this.hasBeenReset=!0}}}),this.displayState=void 0}XV.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var vge=XV,_ge={"":!0,up:!0};function xge(t){if(typeof t!="string")return!1;var e=_ge[t.toLowerCase()];return e?t.toLowerCase():!1}function S0(t){return typeof t=="number"&&t>=0&&t<=100}function Sge(){var t=100,e=3,n=0,i=100,r=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(a){if(!S0(a))throw new Error("Width must be between 0 and 100.");t=a}},lines:{enumerable:!0,get:function(){return e},set:function(a){if(typeof a!="number")throw new TypeError("Lines must be set to a number.");e=a}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(a){if(!S0(a))throw new Error("RegionAnchorX must be between 0 and 100.");i=a}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(a){if(!S0(a))throw new Error("RegionAnchorY must be between 0 and 100.");n=a}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(a){if(!S0(a))throw new Error("ViewportAnchorY must be between 0 and 100.");s=a}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(a){if(!S0(a))throw new Error("ViewportAnchorX must be between 0 and 100.");r=a}},scroll:{enumerable:!0,get:function(){return o},set:function(a){var l=xge(a);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):o=l}}})}var Tge=Sge,Au=_w,cf=jV.exports={WebVTT:fge,VTTCue:vge,VTTRegion:Tge};Au.vttjs=cf;Au.WebVTT=cf.WebVTT;var bge=cf.VTTCue,wge=cf.VTTRegion,Ege=Au.VTTCue,Cge=Au.VTTRegion;cf.shim=function(){Au.VTTCue=bge,Au.VTTRegion=wge};cf.restore=function(){Au.VTTCue=Ege,Au.VTTRegion=Cge};Au.VTTCue||cf.shim();var Age=jV.exports;const eF=ka(Age);var tF="https://example.com",Sw=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=se.location&&se.location.href||"");var i=/^\/\//.test(e),r=!se.location&&!/\/\//i.test(e);e=new se.URL(e,se.location||tF);var s=new URL(n,e);return r?s.href.slice(tF.length):i?s.href.slice(s.protocol.length):s.href},Ok=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},e.trigger=function(i){var r=this.listeners[i];if(r)if(arguments.length===2)for(var s=r.length,o=0;o<s;++o)r[o].call(this,arguments[1]);else for(var a=Array.prototype.slice.call(arguments,1),l=r.length,u=0;u<l;++u)r[u].apply(this,a)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},t}(),Mge=function(e){return se.atob?se.atob(e):Buffer.from(e,"base64").toString("binary")};function YV(t){for(var e=Mge(t),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class Pge extends Ok{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const Ige=String.fromCharCode(9),cA=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},Rge=function(){const t="[^=]*",e='"[^"]*"|[^,]*',n="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+n+")")},$r=function(t){const e={};if(!t)return e;const n=t.split(Rge());let i=n.length,r;for(;i--;)n[i]!==""&&(r=/([^=]*)=(.*)/.exec(n[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e},nF=t=>{const e=t.split("x"),n={};return e[0]&&(n.width=parseInt(e[0],10)),e[1]&&(n.height=parseInt(e[1],10)),n};class Dge extends Ok{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,o)=>{const a=o(e);return a===e?s:s.concat([a])},[e]).forEach(s=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),n=/^#EXTM3U/.exec(s),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),n){i={type:"tag",tagType:"inf"},n[1]&&(i.duration=parseFloat(n[1])),n[2]&&(i.title=n[2]),this.trigger("data",i);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),n){i={type:"tag",tagType:"targetduration"},n[1]&&(i.duration=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),n){i={type:"tag",tagType:"version"},n[1]&&(i.version=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),n){i={type:"tag",tagType:"media-sequence"},n[1]&&(i.number=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),n){i={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(i.number=parseInt(n[1],10)),this.trigger("data",i);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),n){i={type:"tag",tagType:"playlist-type"},n[1]&&(i.playlistType=n[1]),this.trigger("data",i);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),n){i=ve(cA(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),n){i={type:"tag",tagType:"allow-cache"},n[1]&&(i.allowed=!/NO/.test(n[1])),this.trigger("data",i);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(s),n){if(i={type:"tag",tagType:"map"},n[1]){const o=$r(n[1]);o.URI&&(i.uri=o.URI),o.BYTERANGE&&(i.byterange=cA(o.BYTERANGE))}this.trigger("data",i);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),n){i={type:"tag",tagType:"stream-inf"},n[1]&&(i.attributes=$r(n[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=nF(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(s),n){i={type:"tag",tagType:"media"},n[1]&&(i.attributes=$r(n[1])),this.trigger("data",i);return}if(n=/^#EXT-X-ENDLIST/.exec(s),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(s),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),n){i={type:"tag",tagType:"program-date-time"},n[1]&&(i.dateTimeString=n[1],i.dateTimeObject=new Date(n[1])),this.trigger("data",i);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(s),n){i={type:"tag",tagType:"key"},n[1]&&(i.attributes=$r(n[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(n=/^#EXT-X-START:(.*)$/.exec(s),n){i={type:"tag",tagType:"start"},n[1]&&(i.attributes=$r(n[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),n){i={type:"tag",tagType:"cue-out-cont"},n[1]?i.data=n[1]:i.data="",this.trigger("data",i);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),n){i={type:"tag",tagType:"cue-out"},n[1]?i.data=n[1]:i.data="",this.trigger("data",i);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),n){i={type:"tag",tagType:"cue-in"},n[1]?i.data=n[1]:i.data="",this.trigger("data",i);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"skip"},i.attributes=$r(n[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Ige)),this.trigger("data",i);return}if(n=/^#EXT-X-PART:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"part"},i.attributes=$r(n[1]),["DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/.test(i.attributes[o]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=cA(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"server-control"},i.attributes=$r(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/.test(i.attributes[o]))}),this.trigger("data",i);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"part-inf"},i.attributes=$r(n[1]),["PART-TARGET"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),this.trigger("data",i);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=$r(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(i.attributes.hasOwnProperty(o)){i.attributes[o]=parseInt(i.attributes[o],10);const a=o==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[a]=i.attributes[o],delete i.attributes[o]}}),this.trigger("data",i);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=$r(n[1]),["LAST-MSN","LAST-PART"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseInt(i.attributes[o],10))}),this.trigger("data",i);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(s),n&&n[1]){i={type:"tag",tagType:"daterange"},i.attributes=$r(n[1]),["ID","CLASS"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=String(i.attributes[a]))}),["START-DATE","END-DATE"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=new Date(i.attributes[a]))}),["DURATION","PLANNED-DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["END-ON-NEXT"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/i.test(i.attributes[a]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=i.attributes[a].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const a in i.attributes){if(!o.test(a))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[a]),u=/^\d+(\.\d+)?$/.test(i.attributes[a]);i.attributes[a]=l?i.attributes[a].toString(16):u?parseFloat(i.attributes[a]):String(i.attributes[a])}this.trigger("data",i);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(s),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),n){i={type:"tag",tagType:"content-steering"},i.attributes=$r(n[1]),this.trigger("data",i);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),n){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=$r(n[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=nF(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(s),n){i={type:"tag",tagType:"define"},i.attributes=$r(n[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:n,dataParser:i,segment:r}){typeof i!="function"&&(i=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:i(s),customType:n,segment:r}),!0})}addTagMapper({expression:e,map:n}){const i=r=>e.test(r)?n(r):r;this.tagMappers.push(i)}}const kge=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),dc=function(t){const e={};return Object.keys(t).forEach(function(n){e[kge(n)]=t[n]}),e},dA=function(t){const{serverControl:e,targetDuration:n,partTargetDuration:i}=t;if(!e)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",a=n&&n*3,l=i&&i*2;n&&!e.hasOwnProperty(s)&&(e[s]=a,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&e[s]<a&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${a})`}),e[s]=a),i&&!e.hasOwnProperty(o)&&(e[o]=i*3,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),i&&e[o]<l&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${l}).`}),e[o]=l)};class Lge extends Ok{constructor(e={}){super(),this.lineStream=new Pge,this.parseStream=new Dge,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,i=[];let r={},s,o,a=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let h=0,m=0;const g={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&s&&(r.map=s),!r.key&&o&&(r.key=o),!r.timeline&&typeof d=="number"&&(r.timeline=d),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(v){let _,y;if(n.manifest.definitions){for(const S in n.manifest.definitions)if(v.uri&&(v.uri=v.uri.replace(`{$${S}}`,n.manifest.definitions[S])),v.attributes)for(const x in v.attributes)typeof v.attributes[x]=="string"&&(v.attributes[x]=v.attributes[x].replace(`{$${S}}`,n.manifest.definitions[S]))}({tag(){({version(){v.version&&(this.manifest.version=v.version)},"allow-cache"(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const S={};"length"in v&&(r.byterange=S,S.length=v.length,"offset"in v||(v.offset=h)),"offset"in v&&(r.byterange=S,S.offset=v.offset),h=S.offset+S.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.title&&(r.title=v.title),v.duration>0&&(r.duration=v.duration),v.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){o=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:YV(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV<"u"&&(o.iv=v.attributes.IV)},"media-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,d=v.number},"playlist-type"(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map(){s={},v.uri&&(s.uri=v.uri),v.byterange&&(s.byterange=v.byterange),o&&(s.key=o)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),ve(r.attributes,v.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const S=this.manifest.mediaGroups[v.attributes.TYPE];S[v.attributes["GROUP-ID"]]=S[v.attributes["GROUP-ID"]]||{},_=S[v.attributes["GROUP-ID"]],y={default:/yes/i.test(v.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(y.language=v.attributes.LANGUAGE),v.attributes.URI&&(y.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(y.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(y.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(y.forced=/yes/i.test(v.attributes.FORCED)),_[v.attributes.NAME]=y},discontinuity(){d+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),r.dateTimeString=v.dateTimeString,r.dateTimeObject=v.dateTimeObject;const{lastProgramDateTime:S}=this;this.lastProgramDateTime=new Date(v.dateTimeString).getTime(),S===null&&this.manifest.segments.reduceRight((x,w)=>(w.programDateTime=x-w.duration*1e3,w.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,dA.call(this,this.manifest)},start(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out"(){r.cueOut=v.data},"cue-out-cont"(){r.cueOutCont=v.data},"cue-in"(){r.cueIn=v.data},skip(){this.manifest.skip=dc(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const S=this.manifest.segments.length,x=dc(v.attributes);r.parts=r.parts||[],r.parts.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=m),m=x.byterange.offset+x.byterange.length);const w=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${w} for segment #${S}`,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((P,A)=>{P.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${A} lacks required attribute(s): LAST-PART`})})},"server-control"(){const S=this.manifest.serverControl=dc(v.attributes);S.hasOwnProperty("canBlockReload")||(S.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),dA.call(this,this.manifest),S.canSkipDateranges&&!S.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const S=this.manifest.segments.length,x=dc(v.attributes),w=x.type&&x.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=w?m:0,w&&(m=x.byterange.offset+x.byterange.length)));const P=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${P} for segment #${S}`,v.attributes,["TYPE","URI"]),!!x.type)for(let A=0;A<r.preloadHints.length-1;A++){const D=r.preloadHints[A];D.type&&D.type===x.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${P} for segment #${S} has the same TYPE ${x.type} as preload hint #${A}`})}},"rendition-report"(){const S=dc(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(S);const x=this.manifest.renditionReports.length-1,w=["LAST-MSN","URI"];a&&w.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${x}`,v.attributes,w)},"part-inf"(){this.manifest.partInf=dc(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),dA.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(dc(v.attributes));const S=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${S}`,v.attributes,["ID","START-DATE"]);const x=this.manifest.dateRanges[S];x.endDate&&x.startDate&&new Date(x.endDate)<new Date(x.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),x.duration&&x.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),x.plannedDuration&&x.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const w=!!x.endOnNext;if(w&&!x.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),w&&(x.duration||x.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),x.duration&&x.endDate){const A=x.startDate.getTime()+x.duration*1e3;this.manifest.dateRanges[S].endDate=new Date(A)}if(!g[x.id])g[x.id]=x;else{for(const A in g[x.id])if(x[A]&&JSON.stringify(g[x.id][A])!==JSON.stringify(x[A])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const P=this.manifest.dateRanges.findIndex(A=>A.id===x.id);this.manifest.dateRanges[P]=ve(this.manifest.dateRanges[P],x),g[x.id]=ve(g[x.id],x),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=dc(v.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",v.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const S=(x,w)=>{if(x in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${x}`});return}this.manifest.definitions[x]=w};if("QUERYPARAM"in v.attributes){if("NAME"in v.attributes||"IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const x=this.params.get(v.attributes.QUERYPARAM);if(!x){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${v.attributes.QUERYPARAM}`});return}S(v.attributes.QUERYPARAM,decodeURIComponent(x));return}if("NAME"in v.attributes){if("IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in v.attributes)||typeof v.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${v.attributes.NAME}`});return}S(v.attributes.NAME,v.attributes.VALUE);return}if("IMPORT"in v.attributes){if(!this.mainDefinitions[v.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${v.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}S(v.attributes.IMPORT,this.mainDefinitions[v.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:v.attributes,uri:v.uri,timeline:d}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",v.attributes,["BANDWIDTH","URI"])}}[v.tagType]||l).call(n)},uri(){r.uri=v.uri,i.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),o&&(r.key=o),r.timeline=d,s&&(r.map=s),m=0,this.lastProgramDateTime!==null&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=r.duration*1e3),r={}},comment(){},custom(){v.segment?(r.custom=r.custom||{},r.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(n)})}requiredCompatibilityversion(e,n){(e<n||!e)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(e,n,i){const r=[];i.forEach(function(s){n.hasOwnProperty(s)||r.push(s)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Ph={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Nge=["video","audio","text"],iF=["Video","Audio","Text"],KV=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,i,r){var s=("00"+Number(i).toString(16)).slice(-2),o=("00"+Number(r).toString(16)).slice(-2);return"avc1."+s+"00"+o})},Qa=function(e){e===void 0&&(e="");var n=e.split(","),i=[];return n.forEach(function(r){r=r.trim();var s;Nge.forEach(function(o){var a=Ph[o].exec(r.toLowerCase());if(!(!a||a.length<=1)){s=o;var l=r.substring(0,a[1].length),u=r.replace(l,"");i.push({type:l,details:u,mediaType:o})}}),s||i.push({type:r,details:"",mediaType:"unknown"})}),i},Oge=function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var i=e.mediaGroups.AUDIO[n];if(!i)return null;for(var r in i){var s=i[r];if(s.default&&s.playlists)return Qa(s.playlists[0].attributes.CODECS)}return null},QV=function(e){return e===void 0&&(e=""),Ph.audio.test(e.trim().toLowerCase())},Uge=function(e){return e===void 0&&(e=""),Ph.text.test(e.trim().toLowerCase())},Vm=function(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(s){return KV(s.trim())}),i="video";n.length===1&&QV(n[0])?i="audio":n.length===1&&Uge(n[0])&&(i="application");var r="mp4";return n.every(function(s){return Ph.mp4.test(s)})?r="mp4":n.every(function(s){return Ph.webm.test(s)})?r="webm":n.every(function(s){return Ph.ogg.test(s)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},Ty=function(e,n){return e===void 0&&(e=""),n===void 0&&(n=!1),se.MediaSource&&se.MediaSource.isTypeSupported&&se.MediaSource.isTypeSupported(Vm(e))||n&&se.ManagedMediaSource&&se.ManagedMediaSource.isTypeSupported&&se.ManagedMediaSource.isTypeSupported(Vm(e))||!1},hA=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var i=0;i<iF.length;i++){var r=iF[i];if(Ph["muxer"+r].test(n))return!0}return!1})},rF="mp4a.40.2",Fge="avc1.4d400d",Bge=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,zge=/^application\/dash\+xml/i,ZV=function(e){return Bge.test(e)?"hls":zge.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Hge=function(e){return e.toString(2).length},Vge=function(e){return Math.ceil(Hge(e)/8)},JV=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},$ge=function(e){return JV(e)},Lt=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!$ge(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},gr=se.BigInt||Number,dI=[gr("0x1"),gr("0x100"),gr("0x10000"),gr("0x1000000"),gr("0x100000000"),gr("0x10000000000"),gr("0x1000000000000"),gr("0x100000000000000"),gr("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Gge=function(e,n){var i=n===void 0?{}:n,r=i.signed,s=r===void 0?!1:r,o=i.le,a=o===void 0?!1:o;e=Lt(e);var l=a?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(h,m,g){var v=a?g:Math.abs(g+1-e.length);return h+gr(m)*dI[v]},gr(0));if(s){var d=dI[e.length]/gr(2)-gr(1);c=gr(c),c>d&&(c-=d,c-=d,c-=gr(2))}return Number(c)},Wge=function(e,n){var i=n===void 0?{}:n,r=i.le,s=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=gr(e);for(var o=Vge(e),a=new Uint8Array(new ArrayBuffer(o)),l=0;l<o;l++){var u=s?l:Math.abs(l+1-a.length);a[u]=Number(e/dI[l]&gr(255)),e<0&&(a[u]=Math.abs(~a[u]),a[u]-=l===0?1:2)}return a},e$=function(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},jge=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n=n.filter(function(a){return a&&(a.byteLength||a.length)&&typeof a!="string"}),n.length<=1)return Lt(n[0]);var r=n.reduce(function(a,l,u){return a+(l.byteLength||l.length)},0),s=new Uint8Array(r),o=0;return n.forEach(function(a){a=Lt(a),s.set(a,o),o+=a.byteLength}),s},ii=function(e,n,i){var r=i===void 0?{}:i,s=r.offset,o=s===void 0?0:s,a=r.mask,l=a===void 0?[]:a;e=Lt(e),n=Lt(n);var u=n.every?n.every:Array.prototype.every;return n.length&&e.length-o>=n.length&&u.call(n,function(c,d){var h=l[d]?l[d]&e[o+d]:e[o+d];return c===h})},qge=function(e,n,i){n.forEach(function(r){for(var s in e.mediaGroups[r])for(var o in e.mediaGroups[r][s]){var a=e.mediaGroups[r][s][o];i(a,r,s,o)}})},ud={},Uu={};function Xge(t,e,n){if(n===void 0&&(n=Array.prototype),t&&typeof n.find=="function")return n.find.call(t,e);for(var i=0;i<t.length;i++)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];if(e.call(void 0,r,i,t))return r}}function Uk(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function Yge(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var t$=Uk({HTML:"text/html",isHTML:function(t){return t===t$.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n$=Uk({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===n$.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Uu.assign=Yge;Uu.find=Xge;Uu.freeze=Uk;Uu.MIME_TYPE=t$;Uu.NAMESPACE=n$;var i$=Uu,ml=i$.find,Av=i$.NAMESPACE;function Kge(t){return t!==""}function Qge(t){return t?t.split(/[\t\n\f\r ]+/).filter(Kge):[]}function Zge(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function sF(t){if(!t)return[];var e=Qge(t);return Object.keys(e.reduce(Zge,{}))}function Jge(t){return function(e){return t&&t.indexOf(e)!==-1}}function S_(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function Os(t,e){var n=t.prototype;if(!(n instanceof e)){let r=function(){};var i=r;r.prototype=e.prototype,r=new r,S_(n,r),t.prototype=n=r}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var Us={},Ca=Us.ELEMENT_NODE=1,$m=Us.ATTRIBUTE_NODE=2,WT=Us.TEXT_NODE=3,r$=Us.CDATA_SECTION_NODE=4,s$=Us.ENTITY_REFERENCE_NODE=5,e0e=Us.ENTITY_NODE=6,o$=Us.PROCESSING_INSTRUCTION_NODE=7,a$=Us.COMMENT_NODE=8,l$=Us.DOCUMENT_NODE=9,u$=Us.DOCUMENT_TYPE_NODE=10,Mu=Us.DOCUMENT_FRAGMENT_NODE=11,t0e=Us.NOTATION_NODE=12,Fr={},ar={};Fr.INDEX_SIZE_ERR=(ar[1]="Index size error",1);Fr.DOMSTRING_SIZE_ERR=(ar[2]="DOMString size error",2);var xs=Fr.HIERARCHY_REQUEST_ERR=(ar[3]="Hierarchy request error",3);Fr.WRONG_DOCUMENT_ERR=(ar[4]="Wrong document",4);Fr.INVALID_CHARACTER_ERR=(ar[5]="Invalid character",5);Fr.NO_DATA_ALLOWED_ERR=(ar[6]="No data allowed",6);Fr.NO_MODIFICATION_ALLOWED_ERR=(ar[7]="No modification allowed",7);var c$=Fr.NOT_FOUND_ERR=(ar[8]="Not found",8);Fr.NOT_SUPPORTED_ERR=(ar[9]="Not supported",9);var oF=Fr.INUSE_ATTRIBUTE_ERR=(ar[10]="Attribute in use",10);Fr.INVALID_STATE_ERR=(ar[11]="Invalid state",11);Fr.SYNTAX_ERR=(ar[12]="Syntax error",12);Fr.INVALID_MODIFICATION_ERR=(ar[13]="Invalid modification",13);Fr.NAMESPACE_ERR=(ar[14]="Invalid namespace",14);Fr.INVALID_ACCESS_ERR=(ar[15]="Invalid access",15);function Ai(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,ar[t]),this.message=ar[t],Error.captureStackTrace&&Error.captureStackTrace(this,Ai);return n.code=t,e&&(this.message=this.message+": "+e),n}Ai.prototype=Error.prototype;S_(Fr,Ai);function pu(){}pu.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var n=[],i=0;i<this.length;i++)qp(this[i],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Gm(t,e){this._node=t,this._refresh=e,Fk(this)}function Fk(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var n=t._refresh(t._node);if(T$(t,"length",n.length),!t.$$length||n.length<t.$$length)for(var i=n.length;i in t;i++)Object.prototype.hasOwnProperty.call(t,i)&&delete t[i];S_(n,t),t._inc=e}}Gm.prototype.item=function(t){return Fk(this),this[t]||null};Os(Gm,pu);function jT(){}function d$(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function aF(t,e,n,i){if(i?e[d$(e,i)]=n:e[e.length++]=n,t){n.ownerElement=t;var r=t.ownerDocument;r&&(i&&p$(r,t,i),n0e(r,t,n))}}function lF(t,e,n){var i=d$(e,n);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,t){var s=t.ownerDocument;s&&(p$(s,t,n),n.ownerElement=null)}}else throw new Ai(c$,new Error(t.tagName+"@"+n))}jT.prototype={length:0,item:pu.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Ai(oF);var n=this.getNamedItem(t.nodeName);return aF(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new Ai(oF);return n=this.getNamedItemNS(t.namespaceURI,t.localName),aF(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return lF(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return lF(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var i=this[n];if(i.localName==e&&i.namespaceURI==t)return i}return null}};function h$(){}h$.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var i=new T_;if(i.implementation=this,i.childNodes=new pu,i.doctype=n||null,n&&i.appendChild(n),e){var r=i.createElementNS(t,e);i.appendChild(r)}return i},createDocumentType:function(t,e,n){var i=new Tw;return i.name=t,i.nodeName=t,i.publicId=e||"",i.systemId=n||"",i}};function Dn(){}Dn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return qT(this,t,e)},replaceChild:function(t,e){qT(this,t,e,g$),e&&this.removeChild(e)},removeChild:function(t){return m$(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return hI(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==WT&&t.nodeType==WT?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===t)return i}e=e.nodeType==$m?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==$m?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function f$(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}S_(Us,Dn);S_(Us,Dn.prototype);function Mv(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Mv(t,e))return!0;while(t=t.nextSibling)}function T_(){this.ownerDocument=this}function n0e(t,e,n){t&&t._inc++;var i=n.namespaceURI;i===Av.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function p$(t,e,n,i){t&&t._inc++;var r=n.namespaceURI;r===Av.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function Bk(t,e,n){if(t&&t._inc){t._inc++;var i=e.childNodes;if(n)i[i.length++]=n;else{for(var r=e.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function m$(t,e){var n=e.previousSibling,i=e.nextSibling;return n?n.nextSibling=i:t.firstChild=i,i?i.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Bk(t.ownerDocument,t),e}function i0e(t){return t&&(t.nodeType===Dn.DOCUMENT_NODE||t.nodeType===Dn.DOCUMENT_FRAGMENT_NODE||t.nodeType===Dn.ELEMENT_NODE)}function r0e(t){return t&&(gl(t)||zk(t)||Pu(t)||t.nodeType===Dn.DOCUMENT_FRAGMENT_NODE||t.nodeType===Dn.COMMENT_NODE||t.nodeType===Dn.PROCESSING_INSTRUCTION_NODE)}function Pu(t){return t&&t.nodeType===Dn.DOCUMENT_TYPE_NODE}function gl(t){return t&&t.nodeType===Dn.ELEMENT_NODE}function zk(t){return t&&t.nodeType===Dn.TEXT_NODE}function uF(t,e){var n=t.childNodes||[];if(ml(n,gl)||Pu(e))return!1;var i=ml(n,Pu);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function cF(t,e){var n=t.childNodes||[];function i(s){return gl(s)&&s!==e}if(ml(n,i))return!1;var r=ml(n,Pu);return!(e&&r&&n.indexOf(r)>n.indexOf(e))}function s0e(t,e,n){if(!i0e(t))throw new Ai(xs,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new Ai(c$,"child not in parent");if(!r0e(e)||Pu(e)&&t.nodeType!==Dn.DOCUMENT_NODE)throw new Ai(xs,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function o0e(t,e,n){var i=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===Dn.DOCUMENT_FRAGMENT_NODE){var s=r.filter(gl);if(s.length>1||ml(r,zk))throw new Ai(xs,"More than one element or text in fragment");if(s.length===1&&!uF(t,n))throw new Ai(xs,"Element in fragment can not be inserted before doctype")}if(gl(e)&&!uF(t,n))throw new Ai(xs,"Only one element can be added and only after doctype");if(Pu(e)){if(ml(i,Pu))throw new Ai(xs,"Only one doctype is allowed");var o=ml(i,gl);if(n&&i.indexOf(o)<i.indexOf(n))throw new Ai(xs,"Doctype can only be inserted before an element");if(!n&&o)throw new Ai(xs,"Doctype can not be appended since element is present")}}function g$(t,e,n){var i=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===Dn.DOCUMENT_FRAGMENT_NODE){var s=r.filter(gl);if(s.length>1||ml(r,zk))throw new Ai(xs,"More than one element or text in fragment");if(s.length===1&&!cF(t,n))throw new Ai(xs,"Element in fragment can not be inserted before doctype")}if(gl(e)&&!cF(t,n))throw new Ai(xs,"Only one element can be added and only after doctype");if(Pu(e)){let l=function(u){return Pu(u)&&u!==n};var a=l;if(ml(i,l))throw new Ai(xs,"Only one doctype is allowed");var o=ml(i,gl);if(n&&i.indexOf(o)<i.indexOf(n))throw new Ai(xs,"Doctype can only be inserted before an element")}}function qT(t,e,n,i){s0e(t,e,n),t.nodeType===Dn.DOCUMENT_NODE&&(i||o0e)(t,e,n);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Mu){var s=e.firstChild;if(s==null)return e;var o=e.lastChild}else s=o=e;var a=n?n.previousSibling:t.lastChild;s.previousSibling=a,o.nextSibling=n,a?a.nextSibling=s:t.firstChild=s,n==null?t.lastChild=o:n.previousSibling=o;do s.parentNode=t;while(s!==o&&(s=s.nextSibling));return Bk(t.ownerDocument||t,t),e.nodeType==Mu&&(e.firstChild=e.lastChild=null),e}function a0e(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Bk(t.ownerDocument,t,e),e}T_.prototype={nodeName:"#document",nodeType:l$,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Mu){for(var n=t.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,e),n=i}return t}return qT(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Ca&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),m$(this,t)},replaceChild:function(t,e){qT(this,t,e,g$),t.ownerDocument=this,e&&this.removeChild(e),gl(t)&&(this.documentElement=t)},importNode:function(t,e){return S$(this,t,e)},getElementById:function(t){var e=null;return Mv(this.documentElement,function(n){if(n.nodeType==Ca&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=sF(t);return new Gm(this,function(n){var i=[];return e.length>0&&Mv(n.documentElement,function(r){if(r!==n&&r.nodeType===Ca){var s=r.getAttribute("class");if(s){var o=t===s;if(!o){var a=sF(s);o=e.every(Jge(a))}o&&i.push(r)}}}),i})},createElement:function(t){var e=new Xh;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new pu;var n=e.attributes=new jT;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new bw;return t.ownerDocument=this,t.childNodes=new pu,t},createTextNode:function(t){var e=new Hk;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Vk;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new $k;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new Wk;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new XT;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Gk;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new Xh,i=e.split(":"),r=n.attributes=new jT;return n.childNodes=new pu,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,i.length==2?(n.prefix=i[0],n.localName=i[1]):n.localName=e,r._ownerElement=n,n},createAttributeNS:function(t,e){var n=new XT,i=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,i.length==2?(n.prefix=i[0],n.localName=i[1]):n.localName=e,n}};Os(T_,Dn);function Xh(){this._nsMap={}}Xh.prototype={nodeType:Ca,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Mu?this.insertBefore(t,null):a0e(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var i=this.ownerDocument.createAttributeNS(t,e);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Gm(this,function(e){var n=[];return Mv(e,function(i){i!==e&&i.nodeType==Ca&&(t==="*"||i.tagName==t)&&n.push(i)}),n})},getElementsByTagNameNS:function(t,e){return new Gm(this,function(n){var i=[];return Mv(n,function(r){r!==n&&r.nodeType===Ca&&(t==="*"||r.namespaceURI===t)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};T_.prototype.getElementsByTagName=Xh.prototype.getElementsByTagName;T_.prototype.getElementsByTagNameNS=Xh.prototype.getElementsByTagNameNS;Os(Xh,Dn);function XT(){}XT.prototype.nodeType=$m;Os(XT,Dn);function b_(){}b_.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(ar[xs])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var i=this.data.substring(0,t),r=this.data.substring(t+e);n=i+n+r,this.nodeValue=this.data=n,this.length=n.length}};Os(b_,Dn);function Hk(){}Hk.prototype={nodeName:"#text",nodeType:WT,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};Os(Hk,b_);function Vk(){}Vk.prototype={nodeName:"#comment",nodeType:a$};Os(Vk,b_);function $k(){}$k.prototype={nodeName:"#cdata-section",nodeType:r$};Os($k,b_);function Tw(){}Tw.prototype.nodeType=u$;Os(Tw,Dn);function y$(){}y$.prototype.nodeType=t0e;Os(y$,Dn);function v$(){}v$.prototype.nodeType=e0e;Os(v$,Dn);function Gk(){}Gk.prototype.nodeType=s$;Os(Gk,Dn);function bw(){}bw.prototype.nodeName="#document-fragment";bw.prototype.nodeType=Mu;Os(bw,Dn);function Wk(){}Wk.prototype.nodeType=o$;Os(Wk,Dn);function _$(){}_$.prototype.serializeToString=function(t,e,n){return x$.call(t,e,n)};Dn.prototype.toString=x$;function x$(t,e){var n=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&r==null){var r=i.lookupPrefix(s);if(r==null)var o=[{namespace:s,prefix:null}]}return qp(this,n,t,e,o),n.join("")}function dF(t,e,n){var i=t.prefix||"",r=t.namespaceURI;if(!r||i==="xml"&&r===Av.XML||r===Av.XMLNS)return!1;for(var s=n.length;s--;){var o=n[s];if(o.prefix===i)return o.namespace!==r}return!0}function fA(t,e,n){t.push(" ",e,'="',n.replace(/[<>&"\t\n\r]/g,f$),'"')}function qp(t,e,n,i,r){if(r||(r=[]),i)if(t=i(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Ca:var s=t.attributes,o=s.length,y=t.firstChild,a=t.tagName;n=Av.isHTML(t.namespaceURI)||n;var l=a;if(!n&&!t.prefix&&t.namespaceURI){for(var u,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){u=s.item(c).value;break}if(!u)for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.prefix===""&&h.namespace===t.namespaceURI){u=h.namespace;break}}if(u!==t.namespaceURI)for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.namespace===t.namespaceURI){h.prefix&&(l=h.prefix+":"+a);break}}}e.push("<",l);for(var m=0;m<o;m++){var g=s.item(m);g.prefix=="xmlns"?r.push({prefix:g.localName,namespace:g.value}):g.nodeName=="xmlns"&&r.push({prefix:"",namespace:g.value})}for(var m=0;m<o;m++){var g=s.item(m);if(dF(g,n,r)){var v=g.prefix||"",_=g.namespaceURI;fA(e,v?"xmlns:"+v:"xmlns",_),r.push({prefix:v,namespace:_})}qp(g,e,n,i,r)}if(a===l&&dF(t,n,r)){var v=t.prefix||"",_=t.namespaceURI;fA(e,v?"xmlns:"+v:"xmlns",_),r.push({prefix:v,namespace:_})}if(y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),n&&/^script$/i.test(a))for(;y;)y.data?e.push(y.data):qp(y,e,n,i,r.slice()),y=y.nextSibling;else for(;y;)qp(y,e,n,i,r.slice()),y=y.nextSibling;e.push("</",l,">")}else e.push("/>");return;case l$:case Mu:for(var y=t.firstChild;y;)qp(y,e,n,i,r.slice()),y=y.nextSibling;return;case $m:return fA(e,t.name,t.value);case WT:return e.push(t.data.replace(/[<&>]/g,f$));case r$:return e.push("<![CDATA[",t.data,"]]>");case a$:return e.push("<!--",t.data,"-->");case u$:var S=t.publicId,x=t.systemId;if(e.push("<!DOCTYPE ",t.name),S)e.push(" PUBLIC ",S),x&&x!="."&&e.push(" ",x),e.push(">");else if(x&&x!=".")e.push(" SYSTEM ",x,">");else{var w=t.internalSubset;w&&e.push(" [",w,"]"),e.push(">")}return;case o$:return e.push("<?",t.target," ",t.data,"?>");case s$:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function S$(t,e,n){var i;switch(e.nodeType){case Ca:i=e.cloneNode(!1),i.ownerDocument=t;case Mu:break;case $m:n=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,n)for(var r=e.firstChild;r;)i.appendChild(S$(t,r,n)),r=r.nextSibling;return i}function hI(t,e,n){var i=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=i[r]&&(i[r]=s)}switch(e.childNodes&&(i.childNodes=new pu),i.ownerDocument=t,i.nodeType){case Ca:var o=e.attributes,a=i.attributes=new jT,l=o.length;a._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(hI(t,o.item(u),!0));break;case $m:n=!0}if(n)for(var c=e.firstChild;c;)i.appendChild(hI(t,c,n)),c=c.nextSibling;return i}function T$(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Ca:case Mu:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};var xPe=t;Object.defineProperty(Gm.prototype,"length",{get:function(){return Fk(this),this.$$length}}),Object.defineProperty(Dn.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Ca:case Mu:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),T$=function(e,n,i){e["$$"+n]=i}}}catch{}ud.DocumentType=Tw;ud.DOMException=Ai;ud.DOMImplementation=h$;ud.Element=Xh;ud.Node=Dn;ud.NodeList=pu;ud.XMLSerializer=_$;var ww={},b$={};(function(t){var e=Uu.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(b$);var jk={},Pv=Uu.NAMESPACE,fI=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,hF=new RegExp("[\\-\\.0-9"+fI.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),fF=new RegExp("^"+fI.source+hF.source+"*(?::"+fI.source+hF.source+"*)?$"),T0=0,hc=1,rp=2,b0=3,sp=4,op=5,w0=6,f1=7;function Wm(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Wm)}Wm.prototype=new Error;Wm.prototype.name=Wm.name;function w$(){}w$.prototype={parse:function(t,e,n){var i=this.domBuilder;i.startDocument(),E$(e,e={}),l0e(t,e,n,i,this.errorHandler),i.endDocument()}};function l0e(t,e,n,i,r){function s(Q){if(Q>65535){Q-=65536;var oe=55296+(Q>>10),z=56320+(Q&1023);return String.fromCharCode(oe,z)}else return String.fromCharCode(Q)}function o(Q){var oe=Q.slice(1,-1);return Object.hasOwnProperty.call(n,oe)?n[oe]:oe.charAt(0)==="#"?s(parseInt(oe.substr(1).replace("x","0x"))):(r.error("entity not found:"+Q),Q)}function a(Q){if(Q>v){var oe=t.substring(v,Q).replace(/&#?\w+;/g,o);h&&l(v),i.characters(oe,0,Q-v),v=Q}}function l(Q,oe){for(;Q>=c&&(oe=d.exec(t));)u=oe.index,c=u+oe[0].length,h.lineNumber++;h.columnNumber=Q-u+1}for(var u=0,c=0,d=/.*(?:\r\n?|\n)|.*$/g,h=i.locator,m=[{currentNSMap:e}],g={},v=0;;){try{var _=t.indexOf("<",v);if(_<0){if(!t.substr(v).match(/^\s*$/)){var y=i.doc,S=y.createTextNode(t.substr(v));y.appendChild(S),i.currentElement=S}return}switch(_>v&&a(_),t.charAt(_+1)){case"/":var k=t.indexOf(">",_+3),x=t.substring(_+2,k).replace(/[ \t\n\r]+$/g,""),w=m.pop();k<0?(x=t.substring(_+2).replace(/[\s<].*/,""),r.error("end tag name: "+x+" is not complete:"+w.tagName),k=_+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,""),r.error("end tag name: "+x+" maybe not complete"),k=_+1+x.length);var P=w.localNSMap,A=w.tagName==x,D=A||w.tagName&&w.tagName.toLowerCase()==x.toLowerCase();if(D){if(i.endElement(w.uri,w.localName,x),P)for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&i.endPrefixMapping(O);A||r.fatalError("end tag name: "+x+" is not match the current start tagName:"+w.tagName)}else m.push(w);k++;break;case"?":h&&l(_),k=f0e(t,_,i);break;case"!":h&&l(_),k=h0e(t,_,i,r);break;default:h&&l(_);var H=new C$,E=m[m.length-1].currentNSMap,k=u0e(t,_,H,E,o,r),W=H.length;if(!H.closed&&d0e(t,k,H.tagName,g)&&(H.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),h&&W){for(var G=pF(h,{}),Y=0;Y<W;Y++){var ie=H[Y];l(ie.offset),ie.locator=pF(h,{})}i.locator=G,mF(H,i,E)&&m.push(H),i.locator=h}else mF(H,i,E)&&m.push(H);Pv.isHTML(H.uri)&&!H.closed?k=c0e(t,k,H.tagName,o,i):k++}}catch(Q){if(Q instanceof Wm)throw Q;r.error("element parse error: "+Q),k=-1}k>v?v=k:a(Math.max(_,v)+1)}}function pF(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function u0e(t,e,n,i,r,s){function o(h,m,g){n.attributeNames.hasOwnProperty(h)&&s.fatalError("Attribute "+h+" redefined"),n.addValue(h,m.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),g)}for(var a,l,u=++e,c=T0;;){var d=t.charAt(u);switch(d){case"=":if(c===hc)a=t.slice(e,u),c=b0;else if(c===rp)c=b0;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===b0||c===hc)if(c===hc&&(s.warning('attribute value must after "="'),a=t.slice(e,u)),e=u+1,u=t.indexOf(d,e),u>0)l=t.slice(e,u),o(a,l,e-1),c=op;else throw new Error("attribute value no end '"+d+"' match");else if(c==sp)l=t.slice(e,u),o(a,l,e),s.warning('attribute "'+a+'" missed start quot('+d+")!!"),e=u+1,c=op;else throw new Error('attribute value must after "="');break;case"/":switch(c){case T0:n.setTagName(t.slice(e,u));case op:case w0:case f1:c=f1,n.closed=!0;case sp:case hc:break;case rp:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==T0&&n.setTagName(t.slice(e,u)),u;case">":switch(c){case T0:n.setTagName(t.slice(e,u));case op:case w0:case f1:break;case sp:case hc:l=t.slice(e,u),l.slice(-1)==="/"&&(n.closed=!0,l=l.slice(0,-1));case rp:c===rp&&(l=a),c==sp?(s.warning('attribute "'+l+'" missed quot(")!'),o(a,l,e)):((!Pv.isHTML(i[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),o(l,l,e));break;case b0:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(c){case T0:n.setTagName(t.slice(e,u)),c=w0;break;case hc:a=t.slice(e,u),c=rp;break;case sp:var l=t.slice(e,u);s.warning('attribute "'+l+'" missed quot(")!!'),o(a,l,e);case op:c=w0;break}else switch(c){case rp:n.tagName,(!Pv.isHTML(i[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,e),e=u,c=hc;break;case op:s.warning('attribute space is required"'+a+'"!!');case w0:c=hc,e=u;break;case b0:c=sp,e=u;break;case f1:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function mF(t,e,n){for(var i=t.tagName,r=null,d=t.length;d--;){var s=t[d],o=s.qName,a=s.value,h=o.indexOf(":");if(h>0)var l=s.prefix=o.slice(0,h),u=o.slice(h+1),c=l==="xmlns"&&u;else u=o,l=null,c=o==="xmlns"&&"";s.localName=u,c!==!1&&(r==null&&(r={},E$(n,n={})),n[c]=r[c]=a,s.uri=Pv.XMLNS,e.startPrefixMapping(c,a))}for(var d=t.length;d--;){s=t[d];var l=s.prefix;l&&(l==="xml"&&(s.uri=Pv.XML),l!=="xmlns"&&(s.uri=n[l||""]))}var h=i.indexOf(":");h>0?(l=t.prefix=i.slice(0,h),u=t.localName=i.slice(h+1)):(l=null,u=t.localName=i);var m=t.uri=n[l||""];if(e.startElement(m,u,i,t),t.closed){if(e.endElement(m,u,i),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=n,t.localNSMap=r,!0}function c0e(t,e,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),o=t.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(r.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),s)}return e+1}function d0e(t,e,n,i){var r=i[n];return r==null&&(r=t.lastIndexOf("</"+n+">"),r<e&&(r=t.lastIndexOf("</"+n)),i[n]=r),r<e}function E$(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function h0e(t,e,n,i){var r=t.charAt(e+2);switch(r){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(n.comment(t,e+4,s-e-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,s-e-9),n.endCDATA(),s+3}var o=p0e(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],u=!1,c=!1;a>3&&(/^public$/i.test(o[2][0])?(u=o[3][0],c=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(c=o[3][0]));var d=o[a-1];return n.startDTD(l,u,c),n.endDTD(),d.index+d[0].length}}return-1}function f0e(t,e,n){var i=t.indexOf("?>",e);if(i){var r=t.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,n.processingInstruction(r[1],r[2]),i+2):-1}return-1}function C$(){this.attributeNames={}}C$.prototype={setTagName:function(t){if(!fF.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!fF.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function p0e(t,e){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(t);n=r.exec(t);)if(i.push(n),n[1])return i}jk.XMLReader=w$;jk.ParseError=Wm;var m0e=Uu,g0e=ud,gF=b$,A$=jk,y0e=g0e.DOMImplementation,yF=m0e.NAMESPACE,v0e=A$.ParseError,_0e=A$.XMLReader;function M$(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function P$(t){this.options=t||{locator:{}}}P$.prototype.parseFromString=function(t,e){var n=this.options,i=new _0e,r=n.domBuilder||new w_,s=n.errorHandler,o=n.locator,a=n.xmlns||{},l=/\/x?html?$/.test(e),u=l?gF.HTML_ENTITIES:gF.XML_ENTITIES;o&&r.setDocumentLocator(o),i.errorHandler=x0e(s,r,o),i.domBuilder=n.domBuilder||r,l&&(a[""]=yF.HTML),a.xml=a.xml||yF.XML;var c=n.normalizeLineEndings||M$;return t&&typeof t=="string"?i.parse(c(t),a,u):i.errorHandler.error("invalid doc source"),r.doc};function x0e(t,e,n){if(!t){if(e instanceof w_)return e;t=e}var i={},r=t instanceof Function;n=n||{};function s(o){var a=t[o];!a&&r&&(a=t.length==2?function(l){t(o,l)}:t),i[o]=a&&function(l){a("[xmldom "+o+"]	"+l+pI(n))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function w_(){this.cdata=!1}function ap(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}w_.prototype={startDocument:function(){this.doc=new y0e().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,i){var r=this.doc,s=r.createElementNS(t,n||e),o=i.length;p1(this,s),this.currentElement=s,this.locator&&ap(this.locator,s);for(var a=0;a<o;a++){var t=i.getURI(a),l=i.getValue(a),n=i.getQName(a),u=r.createAttributeNS(t,n);this.locator&&ap(i.getLocator(a),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(t,e,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&ap(this.locator,n),p1(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=vF.apply(this,arguments),t){if(this.cdata)var i=this.doc.createCDATASection(t);else var i=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(t)&&this.doc.appendChild(i),this.locator&&ap(this.locator,i)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=vF.apply(this,arguments);var i=this.doc.createComment(t);this.locator&&ap(this.locator,i),p1(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(t,e,n);this.locator&&ap(this.locator,r),p1(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]	"+t,pI(this.locator))},error:function(t){console.error("[xmldom error]	"+t,pI(this.locator))},fatalError:function(t){throw new v0e(t,this.locator)}};function pI(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function vF(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){w_.prototype[t]=function(){return null}});function p1(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}ww.__DOMHandler=w_;ww.normalizeLineEndings=M$;ww.DOMParser=P$;var S0e=ww.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const _F=t=>!!t&&typeof t=="object",rr=(...t)=>t.reduce((e,n)=>(typeof n!="object"||Object.keys(n).forEach(i=>{Array.isArray(e[i])&&Array.isArray(n[i])?e[i]=e[i].concat(n[i]):_F(e[i])&&_F(n[i])?e[i]=rr(e[i],n[i]):e[i]=n[i]}),e),{}),I$=t=>Object.keys(t).map(e=>t[e]),T0e=(t,e)=>{const n=[];for(let i=t;i<e;i++)n.push(i);return n},jm=t=>t.reduce((e,n)=>e.concat(n),[]),R$=t=>{if(!t.length)return[];const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e},b0e=(t,e)=>t.reduce((n,i,r)=>(i[e]&&n.push(r),n),[]),w0e=(t,e)=>I$(t.reduce((n,i)=>(i.forEach(r=>{n[e(r)]=r}),n),{}));var qm={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Iv=({baseUrl:t="",source:e="",range:n="",indexRange:i=""})=>{const r={uri:e,resolvedUri:Sw(t||"",e)};if(n||i){const o=(n||i).split("-");let a=se.BigInt?se.BigInt(o[0]):parseInt(o[0],10),l=se.BigInt?se.BigInt(o[1]):parseInt(o[1],10);a<Number.MAX_SAFE_INTEGER&&typeof a=="bigint"&&(a=Number(a)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof a=="bigint"?u=se.BigInt(l)-se.BigInt(a)+se.BigInt(1):u=l-a+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),r.byterange={length:u,offset:a}}return r},E0e=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=se.BigInt(t.offset)+se.BigInt(t.length)-se.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},xF=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),C0e={static(t){const{duration:e,timescale:n=1,sourceDuration:i,periodDuration:r}=t,s=xF(t.endNumber),o=e/n;return typeof s=="number"?{start:0,end:s}:typeof r=="number"?{start:0,end:r/o}:{start:0,end:i/o}},dynamic(t){const{NOW:e,clientOffset:n,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:o=0,minimumUpdatePeriod:a=0,timeShiftBufferDepth:l=1/0}=t,u=xF(t.endNumber),c=(e+n)/1e3,d=i+o,m=c+a-d,g=Math.ceil(m*r/s),v=Math.floor((c-d-l)*r/s),_=Math.floor((c-d)*r/s);return{start:Math.max(0,v),end:typeof u=="number"?u:Math.min(g,_)}}},A0e=t=>e=>{const{duration:n,timescale:i=1,periodStart:r,startNumber:s=1}=t;return{number:s+e,duration:n/i,timeline:r,time:e*n}},qk=t=>{const{type:e,duration:n,timescale:i=1,periodDuration:r,sourceDuration:s}=t,{start:o,end:a}=C0e[e](t),l=T0e(o,a).map(A0e(t));if(e==="static"){const u=l.length-1,c=typeof r=="number"?r:s;l[u].duration=c-n/i*u}return l},D$=t=>{const{baseUrl:e,initialization:n={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:o,number:a=0,duration:l}=t;if(!e)throw new Error(qm.NO_BASE_URL);const u=Iv({baseUrl:e,source:n.sourceURL,range:n.range}),c=Iv({baseUrl:e,source:e,indexRange:r});if(c.map=u,l){const d=qk(t);d.length&&(c.duration=d[0].duration,c.timeline=d[0].timeline)}else i&&(c.duration=i,c.timeline=s);return c.presentationTime=o||s,c.number=a,[c]},Xk=(t,e,n)=>{const i=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,s=t.timeline||0,o=t.sidx.byterange,a=o.offset+o.length,l=e.timescale,u=e.references.filter(_=>_.referenceType!==1),c=[],d=t.endList?"static":"dynamic",h=t.sidx.timeline;let m=h,g=t.mediaSequence||0,v;typeof e.firstOffset=="bigint"?v=se.BigInt(a)+e.firstOffset:v=a+e.firstOffset;for(let _=0;_<u.length;_++){const y=e.references[_],S=y.referencedSize,x=y.subsegmentDuration;let w;typeof v=="bigint"?w=v+se.BigInt(S)-se.BigInt(1):w=v+S-1;const P=`${v}-${w}`,D=D$({baseUrl:n,timescale:l,timeline:s,periodStart:h,presentationTime:m,number:g,duration:x,sourceDuration:r,indexRange:P,type:d})[0];i&&(D.map=i),c.push(D),typeof v=="bigint"?v+=se.BigInt(S):v+=S,m+=x/l,g++}return t.segments=c,t},M0e=["AUDIO","SUBTITLES"],P0e=1/60,k$=t=>w0e(t,({timeline:e})=>e).sort((e,n)=>e.timeline>n.timeline?1:-1),I0e=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null},SF=t=>{let e=[];return qge(t,M0e,(n,i,r,s)=>{e=e.concat(n.playlists||[])}),e},TF=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((n,i)=>{n.number=t.mediaSequence+i})},R0e=({oldPlaylists:t,newPlaylists:e,timelineStarts:n})=>{e.forEach(i=>{i.discontinuitySequence=n.findIndex(function({timeline:l}){return l===i.timeline});const r=I0e(t,i.attributes.NAME);if(!r||i.sidx)return;const s=i.segments[0],o=r.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<P0e});if(o===-1){TF({playlist:i,mediaSequence:r.mediaSequence+r.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!r.segments.length&&i.timeline>r.timeline||r.segments.length&&i.timeline>r.segments[r.segments.length-1].timeline)&&i.discontinuitySequence--;return}r.segments[o].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),TF({playlist:i,mediaSequence:r.segments[o].number})})},D0e=({oldManifest:t,newManifest:e})=>{const n=t.playlists.concat(SF(t)),i=e.playlists.concat(SF(e));return e.timelineStarts=k$([t.timelineStarts,e.timelineStarts]),R0e({oldPlaylists:n,newPlaylists:i,timelineStarts:e.timelineStarts}),e},Ew=t=>t&&t.uri+"-"+E0e(t.byterange),pA=t=>{const e=t.reduce(function(i,r){return i[r.attributes.baseUrl]||(i[r.attributes.baseUrl]=[]),i[r.attributes.baseUrl].push(r),i},{});let n=[];return Object.values(e).forEach(i=>{const r=I$(i.reduce((s,o)=>{const a=o.attributes.id+(o.attributes.lang||"");return s[a]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),s[a].segments.push(...o.segments)),o.attributes.contentProtection&&(s[a].attributes.contentProtection=o.attributes.contentProtection)):(s[a]=o,s[a].attributes.timelineStarts=[]),s[a].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),s},{}));n=n.concat(r)}),n.map(i=>(i.discontinuityStarts=b0e(i.segments||[],"discontinuity"),i))},Yk=(t,e)=>{const n=Ew(t.sidx),i=n&&e[n]&&e[n].sidx;return i&&Xk(t,i,t.sidx.resolvedUri),t},k0e=(t,e={})=>{if(!Object.keys(e).length)return t;for(const n in t)t[n]=Yk(t[n],e);return t},L0e=({attributes:t,segments:e,sidx:n,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},o)=>{const a={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:t.timelineStarts,mediaSequence:i,segments:e};return t.contentProtection&&(a.contentProtection=t.contentProtection),t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),n&&(a.sidx=n),o&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a},N0e=({attributes:t,segments:e,mediaSequence:n,discontinuityStarts:i,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const s={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(s.CODECS=t.codecs);const o={attributes:s,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:n,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o},O0e=(t,e={},n=!1)=>{let i;const r=t.reduce((s,o)=>{const a=o.attributes.role&&o.attributes.role.value||"",l=o.attributes.lang||"";let u=o.attributes.label||"main";if(l&&!o.attributes.label){const d=a?` (${a})`:"";u=`${o.attributes.lang}${d}`}s[u]||(s[u]={language:l,autoselect:!0,default:a==="main",playlists:[],uri:""});const c=Yk(L0e(o,n),e);return s[u].playlists.push(c),typeof i>"u"&&a==="main"&&(i=o,i.default=!0),s},{});if(!i){const s=Object.keys(r)[0];r[s].default=!0}return r},U0e=(t,e={})=>t.reduce((n,i)=>{const r=i.attributes.label||i.attributes.lang||"text",s=i.attributes.lang||"und";return n[r]||(n[r]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),n[r].playlists.push(Yk(N0e(i),e)),n},{}),F0e=t=>t.reduce((e,n)=>(n&&n.forEach(i=>{const{channel:r,language:s}=i;e[s]={autoselect:!1,default:!1,instreamId:r,language:s},i.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[s]["3D"]=i["3D"])}),e),{}),B0e=({attributes:t,segments:e,sidx:n,discontinuityStarts:i})=>{const r={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:i,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(r.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(r.contentProtection=t.contentProtection),t.serviceLocation&&(r.attributes.serviceLocation=t.serviceLocation),n&&(r.sidx=n),r},z0e=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",H0e=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",V0e=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",$0e=(t,e)=>{t.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:i}){return i===n.timeline}),n.segments&&n.segments.forEach((i,r)=>{i.number=r})})},bF=t=>t?Object.keys(t).reduce((e,n)=>{const i=t[n];return e.concat(i.playlists)},[]):[],G0e=({dashPlaylists:t,locations:e,contentSteering:n,sidxMapping:i={},previousManifest:r,eventStream:s})=>{if(!t.length)return{};const{sourceDuration:o,type:a,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=t[0].attributes,c=pA(t.filter(z0e)).map(B0e),d=pA(t.filter(H0e)),h=pA(t.filter(V0e)),m=t.map(w=>w.attributes.captionServices).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:k0e(c,i)};u>=0&&(g.minimumUpdatePeriod=u*1e3),e&&(g.locations=e),n&&(g.contentSteering=n),a==="dynamic"&&(g.suggestedPresentationDelay=l),s&&s.length>0&&(g.eventStream=s);const v=g.playlists.length===0,_=d.length?O0e(d,i,v):null,y=h.length?U0e(h,i):null,S=c.concat(bF(_),bF(y)),x=S.map(({timelineStarts:w})=>w);return g.timelineStarts=k$(x),$0e(S,g.timelineStarts),_&&(g.mediaGroups.AUDIO.audio=_),y&&(g.mediaGroups.SUBTITLES.subs=y),m.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=F0e(m)),r?D0e({oldManifest:r,newManifest:g}):g},W0e=(t,e,n)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:o=1,periodStart:a=0,minimumUpdatePeriod:l=0}=t,u=(i+r)/1e3,c=s+a,h=u+l-c;return Math.ceil((h*o-e)/n)},L$=(t,e)=>{const{type:n,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:o=1,startNumber:a=1,periodStart:l}=t,u=[];let c=-1;for(let d=0;d<e.length;d++){const h=e[d],m=h.d,g=h.r||0,v=h.t||0;c<0&&(c=v),v&&v>c&&(c=v);let _;if(g<0){const x=d+1;x===e.length?n==="dynamic"&&i>0&&r.indexOf("$Number$")>0?_=W0e(t,c,m):_=(s*o-c)/m:_=(e[x].t-c)/m}else _=g+1;const y=a+u.length+_;let S=a+u.length;for(;S<y;)u.push({number:S,duration:m/o,time:c,timeline:l}),c+=m,S++}return u},j0e=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,q0e=t=>(e,n,i,r)=>{if(e==="$$")return"$";if(typeof t[n]>"u")return e;const s=""+t[n];return n==="RepresentationID"||(i?r=parseInt(r,10):r=1,s.length>=r)?s:`${new Array(r-s.length+1).join("0")}${s}`},wF=(t,e)=>t.replace(j0e,q0e(e)),X0e=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?qk(t):L$(t,e),Y0e=(t,e)=>{const n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=t,r=Iv({baseUrl:t.baseUrl,source:wF(i.sourceURL,n),range:i.range});return X0e(t,e).map(o=>{n.Number=o.number,n.Time=o.time;const a=wF(t.media||"",n),l=t.timescale||1,u=t.presentationTimeOffset||0,c=t.periodStart+(o.time-u)/l;return{uri:a,timeline:o.timeline,duration:o.duration,resolvedUri:Sw(t.baseUrl||"",a),map:r,number:o.number,presentationTime:c}})},K0e=(t,e)=>{const{baseUrl:n,initialization:i={}}=t,r=Iv({baseUrl:n,source:i.sourceURL,range:i.range}),s=Iv({baseUrl:n,source:e.media,range:e.mediaRange});return s.map=r,s},Q0e=(t,e)=>{const{duration:n,segmentUrls:i=[],periodStart:r}=t;if(!n&&!e||n&&e)throw new Error(qm.SEGMENT_TIME_UNSPECIFIED);const s=i.map(l=>K0e(t,l));let o;return n&&(o=qk(t)),e&&(o=L$(t,e)),o.map((l,u)=>{if(s[u]){const c=s[u],d=t.timescale||1,h=t.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=r+(l.time-h)/d,c}}).filter(l=>l)},Z0e=({attributes:t,segmentInfo:e})=>{let n,i;e.template?(i=Y0e,n=rr(t,e.template)):e.base?(i=D$,n=rr(t,e.base)):e.list&&(i=Q0e,n=rr(t,e.list));const r={attributes:t};if(!i)return r;const s=i(n,e.segmentTimeline);if(n.duration){const{duration:o,timescale:a=1}=n;n.duration=o/a}else s.length?n.duration=s.reduce((o,a)=>Math.max(o,Math.ceil(a.duration)),0):n.duration=0;return r.attributes=n,r.segments=s,e.base&&n.indexRange&&(r.sidx=s[0],r.segments=[]),r},J0e=t=>t.map(Z0e),ri=(t,e)=>R$(t.childNodes).filter(({tagName:n})=>n===e),E_=t=>t.textContent.trim(),eye=t=>parseFloat(t.split("/").reduce((e,n)=>e/n)),lp=t=>{const a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!a)return 0;const[l,u,c,d,h,m]=a.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(d||0)*3600+parseFloat(h||0)*60+parseFloat(m||0)},tye=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),EF={mediaPresentationDuration(t){return lp(t)},availabilityStartTime(t){return tye(t)/1e3},minimumUpdatePeriod(t){return lp(t)},suggestedPresentationDelay(t){return lp(t)},type(t){return t},timeShiftBufferDepth(t){return lp(t)},start(t){return lp(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return eye(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?lp(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Ni=t=>t&&t.attributes?R$(t.attributes).reduce((e,n)=>{const i=EF[n.name]||EF.DEFAULT;return e[n.name]=i(n.value),e},{}):{},nye={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Cw=(t,e)=>e.length?jm(t.map(function(n){return e.map(function(i){const r=E_(i),s=Sw(n.baseUrl,r),o=rr(Ni(i),{baseUrl:s});return s!==r&&!o.serviceLocation&&n.serviceLocation&&(o.serviceLocation=n.serviceLocation),o})})):t,Kk=t=>{const e=ri(t,"SegmentTemplate")[0],n=ri(t,"SegmentList")[0],i=n&&ri(n,"SegmentURL").map(d=>rr({tag:"SegmentURL"},Ni(d))),r=ri(t,"SegmentBase")[0],s=n||e,o=s&&ri(s,"SegmentTimeline")[0],a=n||r||e,l=a&&ri(a,"Initialization")[0],u=e&&Ni(e);u&&l?u.initialization=l&&Ni(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:o&&ri(o,"S").map(d=>Ni(d)),list:n&&rr(Ni(n),{segmentUrls:i,initialization:Ni(l)}),base:r&&rr(Ni(r),{initialization:Ni(l)})};return Object.keys(c).forEach(d=>{c[d]||delete c[d]}),c},iye=(t,e,n)=>i=>{const r=ri(i,"BaseURL"),s=Cw(e,r),o=rr(t,Ni(i)),a=Kk(i);return s.map(l=>({segmentInfo:rr(n,a),attributes:rr(o,l)}))},rye=t=>t.reduce((e,n)=>{const i=Ni(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const r=nye[i.schemeIdUri];if(r){e[r]={attributes:i};const s=ri(n,"cenc:pssh")[0];if(s){const o=E_(s);e[r].pssh=o&&YV(o)}}return e},{}),sye=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{let i,r;return r=n,/^CC\d=/.test(n)?[i,r]=n.split("="):/^CC\d$/.test(n)&&(i=n),{channel:i,language:r}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[r,s=""]=n.split("=");i.channel=r,i.language=n,s.split(",").forEach(o=>{const[a,l]=o.split(":");a==="lang"?i.language=l:a==="er"?i.easyReader=Number(l):a==="war"?i.aspectRatio=Number(l):a==="3D"&&(i["3D"]=Number(l))})}else i.language=n;return i.channel&&(i.channel="SERVICE"+i.channel),i})},oye=t=>jm(ri(t.node,"EventStream").map(e=>{const n=Ni(e),i=n.schemeIdUri;return ri(e,"Event").map(r=>{const s=Ni(r),o=s.presentationTime||0,a=n.timescale||1,l=s.duration||0,u=o/a+t.attributes.start;return{schemeIdUri:i,value:n.value,id:s.id,start:u,end:u+l/a,messageData:E_(r)||s.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),aye=(t,e,n)=>i=>{const r=Ni(i),s=Cw(e,ri(i,"BaseURL")),o=ri(i,"Role")[0],a={role:Ni(o)};let l=rr(t,r,a);const u=ri(i,"Accessibility")[0],c=sye(Ni(u));c&&(l=rr(l,{captionServices:c}));const d=ri(i,"Label")[0];if(d&&d.childNodes.length){const _=d.childNodes[0].nodeValue.trim();l=rr(l,{label:_})}const h=rye(ri(i,"ContentProtection"));Object.keys(h).length&&(l=rr(l,{contentProtection:h}));const m=Kk(i),g=ri(i,"Representation"),v=rr(n,m);return jm(g.map(iye(l,s,v)))},lye=(t,e)=>(n,i)=>{const r=Cw(e,ri(n.node,"BaseURL")),s=rr(t,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(s.periodDuration=n.attributes.duration);const o=ri(n.node,"AdaptationSet"),a=Kk(n.node);return jm(o.map(aye(s,r,a)))},uye=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const n=rr({serverURL:E_(t[0])},Ni(t[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},cye=({attributes:t,priorPeriodAttributes:e,mpdType:n})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&n==="static"?0:null,dye=(t,e={})=>{const{manifestUri:n="",NOW:i=Date.now(),clientOffset:r=0,eventHandler:s=function(){}}=e,o=ri(t,"Period");if(!o.length)throw new Error(qm.INVALID_NUMBER_OF_PERIOD);const a=ri(t,"Location"),l=Ni(t),u=Cw([{baseUrl:n}],ri(t,"BaseURL")),c=ri(t,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=r,a.length&&(l.locations=a.map(E_));const d=[];return o.forEach((h,m)=>{const g=Ni(h),v=d[m-1];g.start=cye({attributes:g,priorPeriodAttributes:v?v.attributes:null,mpdType:l.type}),d.push({node:h,attributes:g})}),{locations:l.locations,contentSteeringInfo:uye(c,s),representationInfo:jm(d.map(lye(l,u))),eventStream:jm(d.map(oye))}},N$=t=>{if(t==="")throw new Error(qm.DASH_EMPTY_MANIFEST);const e=new S0e;let n,i;try{n=e.parseFromString(t,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(qm.DASH_INVALID_XML);return i},hye=t=>{const e=ri(t,"UTCTiming")[0];if(!e)return null;const n=Ni(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(qm.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},fye=(t,e={})=>{const n=dye(N$(t),e),i=J0e(n.representationInfo);return G0e({dashPlaylists:i,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})},pye=t=>hye(N$(t));var O$=Math.pow(2,32),mye=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n;return e.getBigUint64?(n=e.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):e.getUint32(0)*O$+e.getUint32(4)},gye={getUint64:mye,MAX_UINT32:O$},CF=gye.getUint64,yye=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;n.version===0?(n.earliestPresentationTime=e.getUint32(i),n.firstOffset=e.getUint32(i+4),i+=8):(n.earliestPresentationTime=CF(t.subarray(i)),n.firstOffset=CF(t.subarray(i+8)),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)n.references.push({referenceType:(t[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(t[i+8]&128),sapType:(t[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return n},vye=yye;const _ye=ka(vye);var xye=Lt([73,68,51]),Sye=function(e,n){n===void 0&&(n=0),e=Lt(e);var i=e[n+5],r=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],s=(i&16)>>4;return s?r+20:r+10},ey=function t(e,n){return n===void 0&&(n=0),e=Lt(e),e.length-n<10||!ii(e,xye,{offset:n})?n:(n+=Sye(e,n),t(e,n))},AF=function(e){return typeof e=="string"?e$(e):e},Tye=function(e){return Array.isArray(e)?e.map(function(n){return AF(n)}):[AF(e)]},bye=function t(e,n,i){i===void 0&&(i=!1),n=Tye(n),e=Lt(e);var r=[];if(!n.length)return r;for(var s=0;s<e.length;){var o=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,a=e.subarray(s+4,s+8);if(o===0)break;var l=s+o;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(s+8,l);ii(a,n[0])&&(n.length===1?r.push(u):r.push.apply(r,t(u,n.slice(1),i))),s=l}return r},m1={EBML:Lt([26,69,223,163]),DocType:Lt([66,130]),Segment:Lt([24,83,128,103]),SegmentInfo:Lt([21,73,169,102]),Tracks:Lt([22,84,174,107]),Track:Lt([174]),TrackNumber:Lt([215]),DefaultDuration:Lt([35,227,131]),TrackEntry:Lt([174]),TrackType:Lt([131]),FlagDefault:Lt([136]),CodecID:Lt([134]),CodecPrivate:Lt([99,162]),VideoTrack:Lt([224]),AudioTrack:Lt([225]),Cluster:Lt([31,67,182,117]),Timestamp:Lt([231]),TimestampScale:Lt([42,215,177]),BlockGroup:Lt([160]),BlockDuration:Lt([155]),Block:Lt([161]),SimpleBlock:Lt([163])},mI=[128,64,32,16,8,4,2,1],wye=function(e){for(var n=1,i=0;i<mI.length&&!(e&mI[i]);i++)n++;return n},YT=function(e,n,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var s=wye(e[n]),o=e.subarray(n,n+s);return i&&(o=Array.prototype.slice.call(e,n,n+s),o[0]^=mI[s-1]),{length:s,value:Gge(o,{signed:r}),bytes:o}},MF=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return t(n)}):typeof e=="number"?Wge(e):e},Eye=function(e){return Array.isArray(e)?e.map(function(n){return MF(n)}):[MF(e)]},Cye=function t(e,n,i){if(i>=n.length)return n.length;var r=YT(n,i,!1);if(ii(e.bytes,r.bytes))return i;var s=YT(n,i+r.length);return t(e,n,i+s.length+s.value+r.length)},PF=function t(e,n){n=Eye(n),e=Lt(e);var i=[];if(!n.length)return i;for(var r=0;r<e.length;){var s=YT(e,r,!1),o=YT(e,r+s.length),a=r+s.length+o.length;o.value===127&&(o.value=Cye(s,e,a),o.value!==e.length&&(o.value-=a));var l=a+o.value>e.length?e.length:a+o.value,u=e.subarray(a,l);ii(n[0],s.bytes)&&(n.length===1?i.push(u):i=i.concat(t(u,n.slice(1))));var c=s.length+o.length+u.length;r+=c}return i},Aye=Lt([0,0,0,1]),Mye=Lt([0,0,1]),Pye=Lt([0,0,3]),Iye=function(e){for(var n=[],i=1;i<e.length-2;)ii(e.subarray(i,i+3),Pye)&&(n.push(i+2),i++),i++;if(n.length===0)return e;var r=e.length-n.length,s=new Uint8Array(r),o=0;for(i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),s[i]=e[o];return s},U$=function(e,n,i,r){r===void 0&&(r=1/0),e=Lt(e),i=[].concat(i);for(var s=0,o,a=0;s<e.length&&(a<r||o);){var l=void 0;if(ii(e.subarray(s),Aye)?l=4:ii(e.subarray(s),Mye)&&(l=3),!l){s++;continue}if(a++,o)return Iye(e.subarray(o,s));var u=void 0;n==="h264"?u=e[s+l]&31:n==="h265"&&(u=e[s+l]>>1&63),i.indexOf(u)!==-1&&(o=s+l),s+=l+(n==="h264"?1:2)}return e.subarray(0,0)},Rye=function(e,n,i){return U$(e,"h264",n,i)},Dye=function(e,n,i){return U$(e,"h265",n,i)},Gr={webm:Lt([119,101,98,109]),matroska:Lt([109,97,116,114,111,115,107,97]),flac:Lt([102,76,97,67]),ogg:Lt([79,103,103,83]),ac3:Lt([11,119]),riff:Lt([82,73,70,70]),avi:Lt([65,86,73]),wav:Lt([87,65,86,69]),"3gp":Lt([102,116,121,112,51,103]),mp4:Lt([102,116,121,112]),fmp4:Lt([115,116,121,112]),mov:Lt([102,116,121,112,113,116]),moov:Lt([109,111,111,118]),moof:Lt([109,111,111,102])},Xm={aac:function(e){var n=ey(e);return ii(e,[255,16],{offset:n,mask:[255,22]})},mp3:function(e){var n=ey(e);return ii(e,[255,2],{offset:n,mask:[255,6]})},webm:function(e){var n=PF(e,[m1.EBML,m1.DocType])[0];return ii(n,Gr.webm)},mkv:function(e){var n=PF(e,[m1.EBML,m1.DocType])[0];return ii(n,Gr.matroska)},mp4:function(e){if(Xm["3gp"](e)||Xm.mov(e))return!1;if(ii(e,Gr.mp4,{offset:4})||ii(e,Gr.fmp4,{offset:4})||ii(e,Gr.moof,{offset:4})||ii(e,Gr.moov,{offset:4}))return!0},mov:function(e){return ii(e,Gr.mov,{offset:4})},"3gp":function(e){return ii(e,Gr["3gp"],{offset:4})},ac3:function(e){var n=ey(e);return ii(e,Gr.ac3,{offset:n})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function(e){var n=ey(e);return ii(e,Gr.flac,{offset:n})},ogg:function(e){return ii(e,Gr.ogg)},avi:function(e){return ii(e,Gr.riff)&&ii(e,Gr.avi,{offset:8})},wav:function(e){return ii(e,Gr.riff)&&ii(e,Gr.wav,{offset:8})},h264:function(e){return Rye(e,7,3).length},h265:function(e){return Dye(e,[32,33],3).length}},gI=Object.keys(Xm).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);gI.forEach(function(t){var e=Xm[t];Xm[t]=function(n){return e(Lt(n))}});var kye=Xm,Qk=function(e){e=Lt(e);for(var n=0;n<gI.length;n++){var i=gI[n];if(kye[i](e))return i}return""},Lye=function(e){return bye(e,["moof"]).length>0},Zk=9e4,Jk,e3,Aw,t3,F$,B$,z$;Jk=function(t){return t*Zk};e3=function(t,e){return t*e};Aw=function(t){return t/Zk};t3=function(t,e){return t/e};F$=function(t,e){return Jk(t3(t,e))};B$=function(t,e){return e3(Aw(t),e)};z$=function(t,e,n){return Aw(n?t:t-e)};var yh={ONE_SECOND_IN_TS:Zk,secondsToVideoTs:Jk,secondsToAudioTs:e3,videoTsToSeconds:Aw,audioTsToSeconds:t3,audioTsToVideoTs:F$,videoTsToAudioTs:B$,metadataTsToSeconds:z$};/**
 * @license
 * Video.js 8.19.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var yI="8.19.1";const eu={},Jc=function(t,e){return eu[t]=eu[t]||[],e&&(eu[t]=eu[t].concat(e)),eu[t]},Nye=function(t,e){Jc(t,e)},H$=function(t,e){const n=Jc(t).indexOf(e);return n<=-1?!1:(eu[t]=eu[t].slice(),eu[t].splice(n,1),!0)},Oye=function(t,e){Jc(t,[].concat(e).map(n=>{const i=(...r)=>(H$(t,i),n(...r));return i}))},KT={prefixed:!0},US=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],IF=US[0];let ty;for(let t=0;t<US.length;t++)if(US[t][1]in Je){ty=US[t];break}if(ty){for(let t=0;t<ty.length;t++)KT[IF[t]]=ty[t];KT.prefixed=ty[0]!==IF[0]}let gs=[];const Uye=(t,e,n)=>(i,r,s)=>{const o=e.levels[r],a=new RegExp(`^(${o})$`);let l=t;if(i!=="log"&&s.unshift(i.toUpperCase()+":"),n&&(l=`%c${t}`,s.unshift(n)),s.unshift(l+":"),gs){gs.push([].concat(s));const c=gs.length-1e3;gs.splice(0,c>0?c:0)}if(!se.console)return;let u=se.console[i];!u&&i==="debug"&&(u=se.console.info||se.console.log),!(!u||!o||!a.test(i))&&u[Array.isArray(s)?"apply":"call"](se.console,s)};function vI(t,e=":",n=""){let i="info",r;function s(...o){r("log",i,o)}return r=Uye(t,s,n),s.createLogger=(o,a,l)=>{const u=a!==void 0?a:e,c=l!==void 0?l:n,d=`${t} ${u} ${o}`;return vI(d,u,c)},s.createNewLogger=(o,a,l)=>vI(o,a,l),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},s.level=o=>{if(typeof o=="string"){if(!s.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);i=o}return i},s.history=()=>gs?[].concat(gs):[],s.history.filter=o=>(gs||[]).filter(a=>new RegExp(`.*${o}.*`).test(a[0])),s.history.clear=()=>{gs&&(gs.length=0)},s.history.disable=()=>{gs!==null&&(gs.length=0,gs=null)},s.history.enable=()=>{gs===null&&(gs=[])},s.error=(...o)=>r("error",i,o),s.warn=(...o)=>r("warn",i,o),s.debug=(...o)=>r("debug",i,o),s}const an=vI("VIDEOJS"),V$=an.createLogger,Fye=Object.prototype.toString,$$=function(t){return Tl(t)?Object.keys(t):[]};function pm(t,e){$$(t).forEach(n=>e(t[n],n))}function G$(t,e,n=0){return $$(t).reduce((i,r)=>e(i,t[r],r),n)}function Tl(t){return!!t&&typeof t=="object"}function Ym(t){return Tl(t)&&Fye.call(t)==="[object Object]"&&t.constructor===Object}function Bn(...t){const e={};return t.forEach(n=>{n&&pm(n,(i,r)=>{if(!Ym(i)){e[r]=i;return}Ym(e[r])||(e[r]={}),e[r]=Bn(e[r],i)})}),e}function W$(t={}){const e=[];for(const n in t)if(t.hasOwnProperty(n)){const i=t[n];e.push(i)}return e}function Mw(t,e,n,i=!0){const r=o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const o=n();return r(o),o}};return i&&(s.set=r),Object.defineProperty(t,e,s)}var Bye=Object.freeze({__proto__:null,each:pm,reduce:G$,isObject:Tl,isPlain:Ym,merge:Bn,values:W$,defineLazyProperty:Mw});let n3=!1,j$=null,bl=!1,q$,X$=!1,mm=!1,gm=!1,wl=!1,i3=null,Pw=null;const zye=!!(se.cast&&se.cast.framework&&se.cast.framework.CastReceiverContext);let Y$=null,QT=!1,Iw=!1,ZT=!1,Rw=!1,JT=!1,eb=!1,tb=!1;const Rv=!!(mg()&&("ontouchstart"in se||se.navigator.maxTouchPoints||se.DocumentTouch&&se.document instanceof se.DocumentTouch)),fc=se.navigator&&se.navigator.userAgentData;fc&&fc.platform&&fc.brands&&(bl=fc.platform==="Android",mm=!!fc.brands.find(t=>t.brand==="Microsoft Edge"),gm=!!fc.brands.find(t=>t.brand==="Chromium"),wl=!mm&&gm,i3=Pw=(fc.brands.find(t=>t.brand==="Chromium")||{}).version||null,Iw=fc.platform==="Windows");if(!gm){const t=se.navigator&&se.navigator.userAgent||"";n3=/iPod/i.test(t),j$=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),bl=/Android/i.test(t),q$=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return n&&i?parseFloat(e[1]+"."+e[2]):n||null}(),X$=/Firefox/i.test(t),mm=/Edg/i.test(t),gm=/Chrome/i.test(t)||/CriOS/i.test(t),wl=!mm&&gm,i3=Pw=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Y$=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(n=11),n}(),JT=/Tizen/i.test(t),eb=/Web0S/i.test(t),tb=JT||eb,QT=/Safari/i.test(t)&&!wl&&!bl&&!mm&&!tb,Iw=/Windows/i.test(t),ZT=/iPad/i.test(t)||QT&&Rv&&!/iPhone/i.test(t),Rw=/iPhone/i.test(t)&&!ZT}const ts=Rw||ZT||n3,Dw=(QT||ts)&&!wl;var K$=Object.freeze({__proto__:null,get IS_IPOD(){return n3},get IOS_VERSION(){return j$},get IS_ANDROID(){return bl},get ANDROID_VERSION(){return q$},get IS_FIREFOX(){return X$},get IS_EDGE(){return mm},get IS_CHROMIUM(){return gm},get IS_CHROME(){return wl},get CHROMIUM_VERSION(){return i3},get CHROME_VERSION(){return Pw},IS_CHROMECAST_RECEIVER:zye,get IE_VERSION(){return Y$},get IS_SAFARI(){return QT},get IS_WINDOWS(){return Iw},get IS_IPAD(){return ZT},get IS_IPHONE(){return Rw},get IS_TIZEN(){return JT},get IS_WEBOS(){return eb},get IS_SMART_TV(){return tb},TOUCH_ENABLED:Rv,IS_IOS:ts,IS_ANY_SAFARI:Dw});function RF(t){return typeof t=="string"&&!!t.trim()}function Hye(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function mg(){return Je===se.document}function gg(t){return Tl(t)&&t.nodeType===1}function Q$(){try{return se.parent!==se.self}catch{return!0}}function Z$(t){return function(e,n){if(!RF(e))return Je[t](null);RF(n)&&(n=Je.querySelector(n));const i=gg(n)?n:Je;return i[t]&&i[t](e)}}function Ht(t="div",e={},n={},i){const r=Je.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(s){const o=e[s];s==="textContent"?cd(r,o):(r[s]!==o||s==="tabIndex")&&(r[s]=o)}),Object.getOwnPropertyNames(n).forEach(function(s){r.setAttribute(s,n[s])}),i&&r3(r,i),r}function cd(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function _I(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function by(t,e){return Hye(e),t.classList.contains(e)}function Ih(t,...e){return t.classList.add(...e.reduce((n,i)=>n.concat(i.split(/\s+/)),[])),t}function kw(t,...e){return t?(t.classList.remove(...e.reduce((n,i)=>n.concat(i.split(/\s+/)),[])),t):(an.warn("removeClass was called with an element that doesn't exist"),null)}function J$(t,e,n){return typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=void 0),e.split(/\s+/).forEach(i=>t.classList.toggle(i,n)),t}function eG(t,e){Object.getOwnPropertyNames(e).forEach(function(n){const i=e[n];i===null||typeof i>"u"||i===!1?t.removeAttribute(n):t.setAttribute(n,i===!0?"":i)})}function Ac(t){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const i=t.attributes;for(let r=i.length-1;r>=0;r--){const s=i[r].name;let o=i[r].value;n.includes(s)&&(o=o!==null),e[s]=o}}return e}function tG(t,e){return t.getAttribute(e)}function Km(t,e,n){t.setAttribute(e,n)}function Lw(t,e){t.removeAttribute(e)}function nG(){Je.body.focus(),Je.onselectstart=function(){return!1}}function iG(){Je.onselectstart=function(){return!0}}function Qm(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(n[i]=e[i])}),n.height||(n.height=parseFloat(Zm(t,"height"))),n.width||(n.width=parseFloat(Zm(t,"width"))),n}}function Dv(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,n=t.offsetHeight;let i=0,r=0;for(;t.offsetParent&&t!==Je[KT.fullscreenElement];)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:i,top:r,width:e,height:n}}function Nw(t,e){const n={x:0,y:0};if(ts){let c=t;for(;c&&c.nodeName.toLowerCase()!=="html";){const d=Zm(c,"transform");if(/^matrix/.test(d)){const h=d.slice(7,-1).split(/,\s/).map(Number);n.x+=h[4],n.y+=h[5]}else if(/^matrix3d/.test(d)){const h=d.slice(9,-1).split(/,\s/).map(Number);n.x+=h[12],n.y+=h[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&se.WebKitCSSMatrix){const h=se.getComputedStyle(c.assignedSlot.parentElement).transform,m=new se.WebKitCSSMatrix(h);n.x+=m.m41,n.y+=m.m42}c=c.parentNode||c.host}}const i={},r=Dv(e.target),s=Dv(t),o=s.width,a=s.height;let l=e.offsetY-(s.top-r.top),u=e.offsetX-(s.left-r.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,ts&&(u-=n.x,l-=n.y)),i.y=1-Math.max(0,Math.min(1,l/a)),i.x=Math.max(0,Math.min(1,u/o)),i}function rG(t){return Tl(t)&&t.nodeType===3}function Ow(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function sG(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),gg(e)||rG(e))return e;if(typeof e=="string"&&/\S/.test(e))return Je.createTextNode(e)}).filter(e=>e)}function r3(t,e){return sG(e).forEach(n=>t.appendChild(n)),t}function oG(t,e){return r3(Ow(t),e)}function kv(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const ed=Z$("querySelector"),aG=Z$("querySelectorAll");function Zm(t,e){if(!t||!e)return"";if(typeof se.getComputedStyle=="function"){let n;try{n=se.getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function lG(t){[...Je.styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(r=>r.cssText).join(""),i=Je.createElement("style");i.textContent=n,t.document.head.appendChild(i)}catch{const i=Je.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,t.document.head.appendChild(i)}})}var uG=Object.freeze({__proto__:null,isReal:mg,isEl:gg,isInFrame:Q$,createEl:Ht,textContent:cd,prependTo:_I,hasClass:by,addClass:Ih,removeClass:kw,toggleClass:J$,setAttributes:eG,getAttributes:Ac,getAttribute:tG,setAttribute:Km,removeAttribute:Lw,blockTextSelection:nG,unblockTextSelection:iG,getBoundingClientRect:Qm,findPosition:Dv,getPointerPosition:Nw,isTextNode:rG,emptyEl:Ow,normalizeContent:sG,appendContent:r3,insertContent:oG,isSingleLeftClick:kv,$:ed,$$:aG,computedStyle:Zm,copyStyleSheetsToWindow:lG});let cG=!1,xI;const Vye=function(){if(xI.options.autoSetup===!1)return;const t=Array.prototype.slice.call(Je.getElementsByTagName("video")),e=Array.prototype.slice.call(Je.getElementsByTagName("audio")),n=Array.prototype.slice.call(Je.getElementsByTagName("video-js")),i=t.concat(e,n);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const o=i[r];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&xI(o);else{SI(1);break}}else cG||SI(1)};function SI(t,e){mg()&&(e&&(xI=e),se.setTimeout(Vye,t))}function TI(){cG=!0,se.removeEventListener("load",TI)}mg()&&(Je.readyState==="complete"?TI():se.addEventListener("load",TI));const dG=function(t){const e=Je.createElement("style");return e.className=t,e},hG=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var Kr=new WeakMap;const $ye=3;let Gye=$ye;function Ko(){return Gye++}function DF(t,e){if(!Kr.has(t))return;const n=Kr.get(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&Kr.delete(t)}function s3(t,e,n,i){n.forEach(function(r){t(e,r,i)})}function Uw(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const i=t||se.event;t={};const r=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in i)r.includes(s)||s==="returnValue"&&i.preventDefault||(t[s]=i[s]);if(t.target||(t.target=t.srcElement||Je),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){const s=Je.documentElement,o=Je.body;t.pageX=t.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let g1;const Wye=function(){if(typeof g1!="boolean"){g1=!1;try{const t=Object.defineProperty({},"passive",{get(){g1=!0}});se.addEventListener("test",null,t),se.removeEventListener("test",null,t)}catch{}}return g1},jye=["touchstart","touchmove"];function uo(t,e,n){if(Array.isArray(e))return s3(uo,t,e,n);Kr.has(t)||Kr.set(t,{});const i=Kr.get(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),n.guid||(n.guid=Ko()),i.handlers[e].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(r,s){if(i.disabled)return;r=Uw(r);const o=i.handlers[r.type];if(o){const a=o.slice(0);for(let l=0,u=a.length;l<u&&!r.isImmediatePropagationStopped();l++)try{a[l].call(t,r,s)}catch(c){an.error(c)}}}),i.handlers[e].length===1)if(t.addEventListener){let r=!1;Wye()&&jye.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,i.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function kr(t,e,n){if(!Kr.has(t))return;const i=Kr.get(t);if(!i.handlers)return;if(Array.isArray(e))return s3(kr,t,e,n);const r=function(o,a){i.handlers[a]=[],DF(o,a)};if(e===void 0){for(const o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(t,o);return}const s=i.handlers[e];if(s){if(!n){r(t,e);return}if(n.guid)for(let o=0;o<s.length;o++)s[o].guid===n.guid&&s.splice(o--,1);DF(t,e)}}function yg(t,e,n){const i=Kr.has(t)?Kr.get(t):{},r=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Uw(e),i.dispatcher&&i.dispatcher.call(t,e,n),r&&!e.isPropagationStopped()&&e.bubbles===!0)yg.call(null,r,e,n);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){Kr.has(e.target)||Kr.set(e.target,{});const s=Kr.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Fw(t,e,n){if(Array.isArray(e))return s3(Fw,t,e,n);const i=function(){kr(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Ko(),uo(t,e,i)}function o3(t,e,n){const i=function(){kr(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Ko(),uo(t,e,i)}var qye=Object.freeze({__proto__:null,fixEvent:Uw,on:uo,off:kr,trigger:yg,one:Fw,any:o3});const Qo=30,Wn=function(t,e,n){e.guid||(e.guid=Ko());const i=e.bind(t);return i.guid=n?n+"_"+e.guid:e.guid,i},El=function(t,e){let n=se.performance.now();return function(...r){const s=se.performance.now();s-n>=e&&(t(...r),n=s)}},fG=function(t,e,n,i=se){let r;const s=()=>{i.clearTimeout(r),r=null},o=function(){const a=this,l=arguments;let u=function(){r=null,u=null,n||t.apply(a,l)};!r&&n&&t.apply(a,l),i.clearTimeout(r),r=i.setTimeout(u,e)};return o.cancel=s,o};var Xye=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Qo,bind_:Wn,throttle:El,debounce:fG});let E0;class co{on(e,n){const i=this.addEventListener;this.addEventListener=()=>{},uo(this,e,n),this.addEventListener=i}off(e,n){kr(this,e,n)}one(e,n){const i=this.addEventListener;this.addEventListener=()=>{},Fw(this,e,n),this.addEventListener=i}any(e,n){const i=this.addEventListener;this.addEventListener=()=>{},o3(this,e,n),this.addEventListener=i}trigger(e){const n=e.type||e;typeof e=="string"&&(e={type:n}),e=Uw(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),yg(this,e)}queueTrigger(e){E0||(E0=new Map);const n=e.type||e;let i=E0.get(this);i||(i=new Map,E0.set(this,i));const r=i.get(n);i.delete(n),se.clearTimeout(r);const s=se.setTimeout(()=>{i.delete(n),i.size===0&&(i=null,E0.delete(this)),this.trigger(e)},0);i.set(n,s)}}co.prototype.allowedEvents_={};co.prototype.addEventListener=co.prototype.on;co.prototype.removeEventListener=co.prototype.off;co.prototype.dispatchEvent=co.prototype.trigger;const Bw=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,mu=t=>t instanceof co||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),Yye=(t,e)=>{mu(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},bI=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,nb=(t,e,n)=>{if(!t||!t.nodeName&&!mu(t))throw new Error(`Invalid target for ${Bw(e)}#${n}; must be a DOM node or evented object.`)},pG=(t,e,n)=>{if(!bI(t))throw new Error(`Invalid event type for ${Bw(e)}#${n}; must be a non-empty string or array.`)},mG=(t,e,n)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${Bw(e)}#${n}; must be a function.`)},mA=(t,e,n)=>{const i=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let r,s,o;return i?(r=t.eventBusEl_,e.length>=3&&e.shift(),[s,o]=e):(r=e[0],s=e[1],o=e[2]),nb(r,t,n),pG(s,t,n),mG(o,t,n),o=Wn(t,o),{isTargetingSelf:i,target:r,type:s,listener:o}},Hd=(t,e,n,i)=>{nb(t,t,e),t.nodeName?qye[e](t,n,i):t[e](n,i)},Kye={on(...t){const{isTargetingSelf:e,target:n,type:i,listener:r}=mA(this,t,"on");if(Hd(n,"on",i,r),!e){const s=()=>this.off(n,i,r);s.guid=r.guid;const o=()=>this.off("dispose",s);o.guid=r.guid,Hd(this,"on","dispose",s),Hd(n,"on","dispose",o)}},one(...t){const{isTargetingSelf:e,target:n,type:i,listener:r}=mA(this,t,"one");if(e)Hd(n,"one",i,r);else{const s=(...o)=>{this.off(n,i,s),r.apply(null,o)};s.guid=r.guid,Hd(n,"one",i,s)}},any(...t){const{isTargetingSelf:e,target:n,type:i,listener:r}=mA(this,t,"any");if(e)Hd(n,"any",i,r);else{const s=(...o)=>{this.off(n,i,s),r.apply(null,o)};s.guid=r.guid,Hd(n,"any",i,s)}},off(t,e,n){if(!t||bI(t))kr(this.eventBusEl_,t,e);else{const i=t,r=e;nb(i,this,"off"),pG(r,this,"off"),mG(n,this,"off"),n=Wn(this,n),this.off("dispose",n),i.nodeName?(kr(i,r,n),kr(i,"dispose",n)):mu(i)&&(i.off(r,n),i.off("dispose",n))}},trigger(t,e){nb(this.eventBusEl_,this,"trigger");const n=t&&typeof t!="string"?t.type:t;if(!bI(n))throw new Error(`Invalid event type for ${Bw(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return yg(this.eventBusEl_,t,e)}};function a3(t,e={}){const{eventBusKey:n}=e;if(n){if(!t[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);t.eventBusEl_=t[n]}else t.eventBusEl_=Ht("span",{className:"vjs-event-bus"});return Object.assign(t,Kye),t.eventedCallbacks&&t.eventedCallbacks.forEach(i=>{i()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(i){i&&Kr.has(i)&&Kr.delete(i)}),se.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const Qye={state:{},setState(t){typeof t=="function"&&(t=t());let e;return pm(t,(n,i)=>{this.state[i]!==n&&(e=e||{},e[i]={from:this.state[i],to:n}),this.state[i]=n}),e&&mu(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function gG(t,e){return Object.assign(t,Qye),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&mu(t)&&t.on("statechanged",t.handleStateChanged),t}const wy=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},Si=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},yG=function(t,e){return Si(t)===Si(e)};var Zye=Object.freeze({__proto__:null,toLowerCase:wy,toTitleCase:Si,titleCaseEquals:yG});class ke{constructor(e,n,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Bn({},this.options_),n=this.options_=Bn(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const r=e&&e.id&&e.id()||"no_player";this.id_=`${r}_component_${Ko()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(r=>this.addClass(r)),["on","off","one","any","trigger"].forEach(r=>{this[r]=void 0}),n.evented!==!1&&(a3(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),gG(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Bn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,i){return Ht(e,n,i)}localize(e,n,i=e){const r=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),o=s&&s[r],a=r&&r.split("-")[0],l=s&&s[a];let u=i;return o&&o[e]?u=o[e]:l&&l[e]&&(u=l[e]),n&&(u=u.replace(/\{(\d+)\}/g,function(c,d){const h=n[d-1];let m=h;return typeof h>"u"&&(m=c),m})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,r)=>i.concat(r),[]);let n=this;for(let i=0;i<e.length;i++)if(n=n.getChild(e[i]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",r=Ht("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Je.createElementNS(i,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const o=Je.createElementNS(i,"use");return s.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),r.appendChild(s),this.iconIsSet_?n.replaceChild(r,n.querySelector(".vjs-icon-placeholder")):n.appendChild(r),this.iconIsSet_=!0,r}addChild(e,n={},i=this.children_.length){let r,s;if(typeof e=="string"){s=Si(e);const o=n.componentClass||s;n.name=s;const a=ke.getComponent(o);if(!a)throw new Error(`Component ${o} does not exist`);if(typeof a!="function")return null;r=new a(this.player_||this,n)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),s=s||r.name&&Si(r.name()),s&&(this.childNameIndex_[s]=r,this.childNameIndex_[wy(s)]=r),typeof r.el=="function"&&r.el()){let o=null;this.children_[i+1]&&(this.children_[i+1].el_?o=this.children_[i+1].el_:gg(this.children_[i+1])&&(o=this.children_[i+1])),this.contentEl().insertBefore(r.el(),o)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){n=!0,this.children_.splice(r,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Si(e.name())]=null,this.childNameIndex_[wy(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,i=o=>{const a=o.name;let l=o.opts;if(n[a]!==void 0&&(l=n[a]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(a,l);u&&(this[a]=u)};let r;const s=ke.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(o){return!r.some(function(a){return typeof a=="string"?o===a:o===a.name})})).map(o=>{let a,l;return typeof o=="string"?(a=o,l=e[a]||this.options_[a]||{}):(a=o.name,l=o),{name:a,opts:l}}).filter(o=>{const a=ke.getComponent(o.opts.componentClass||Si(o.name));return a&&!s.isTech(a)}).forEach(i)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return ed(e,n||this.contentEl())}$$(e,n){return aG(e,n||this.contentEl())}hasClass(e){return by(this.el_,e)}addClass(...e){Ih(this.el_,...e)}removeClass(...e){kw(this.el_,...e)}toggleClass(e,n){J$(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return tG(this.el_,e)}setAttribute(e,n){Km(this.el_,e,n)}removeAttribute(e){Lw(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,i){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[e]=n:n==="auto"?this.el_.style[e]="":this.el_.style[e]=n+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const r=this.el_.style[e],s=r.indexOf("px");return parseInt(s!==-1?r.slice(0,s):this.el_["offset"+Si(e)],10)}currentDimension(e){let n=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(n=Zm(this.el_,e),n=parseFloat(n),n===0||isNaN(n)){const i=`offset${Si(e)}`;n=this.el_[i]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:n,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,n=null;const i=10,r=200;let s;this.on("touchstart",function(a){a.touches.length===1&&(n={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY},e=se.performance.now(),s=!0)}),this.on("touchmove",function(a){if(a.touches.length>1)s=!1;else if(n){const l=a.touches[0].pageX-n.pageX,u=a.touches[0].pageY-n.pageY;Math.sqrt(l*l+u*u)>i&&(s=!1)}});const o=function(){s=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(a){n=null,s===!0&&se.performance.now()-e<r&&(a.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Wn(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const i=function(r){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,n){var i;return e=Wn(this,e),this.clearTimersOnDispose_(),i=se.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},n),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),se.clearTimeout(e)),e}setInterval(e,n){e=Wn(this,e),this.clearTimersOnDispose_();const i=se.setInterval(e,n);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),se.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var n;return e=Wn(this,e),n=se.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),n=Wn(this,n);const i=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),se.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((i,r)=>this[n](r))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function n(s){const o=se.getComputedStyle(s,null),a=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(a)}function i(s){return!(!n(s.parentElement)||!n(s)||s.style.opacity==="0"||se.getComputedStyle(s).height==="0px"||se.getComputedStyle(s).width==="0px")}function r(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const o={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(o.x<0||o.x>(Je.documentElement.clientWidth||se.innerWidth)||o.y<0||o.y>(Je.documentElement.clientHeight||se.innerHeight))return!1;let a=Je.elementFromPoint(o.x,o.y);for(;a;){if(a===s)return!0;if(a.parentNode)a=a.parentNode;else return!1}}return e||(e=this.el()),!!(r(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,n){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=ke.getComponent("Tech"),r=i&&i.isTech(n),s=ke===n||ke.prototype.isPrototypeOf(n.prototype);if(r||!s){let a;throw r?a="techs must be registered using Tech.registerTech()":a="must be a Component subclass",new Error(`Illegal component, "${e}"; ${a}.`)}e=Si(e),ke.components_||(ke.components_={});const o=ke.getComponent("Player");if(e==="Player"&&o&&o.players){const a=o.players,l=Object.keys(a);if(a&&l.length>0&&l.map(u=>a[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return ke.components_[e]=n,ke.components_[wy(e)]=n,n}static getComponent(e){if(!(!e||!ke.components_))return ke.components_[e]}}ke.registerComponent("Component",ke);function Jye(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}function kF(t,e,n,i){return Jye(t,i,n.length-1),n[i][e]}function gA(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:kF.bind(null,"start",0,t),end:kF.bind(null,"end",1,t)},se.Symbol&&se.Symbol.iterator&&(e[se.Symbol.iterator]=()=>(t||[]).values()),e}function Aa(t,e){return Array.isArray(t)?gA(t):t===void 0||e===void 0?gA():gA([[t,e]])}const vG=function(t,e){t=t<0?0:t;let n=Math.floor(t%60),i=Math.floor(t/60%60),r=Math.floor(t/3600);const s=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=i=n="-"),r=r>0||o>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n};let l3=vG;function _G(t){l3=t}function xG(){l3=vG}function Yh(t,e=t){return l3(t,e)}var eve=Object.freeze({__proto__:null,createTimeRanges:Aa,createTimeRange:Aa,setFormatTime:_G,resetFormatTime:xG,formatTime:Yh});function SG(t,e){let n=0,i,r;if(!e)return 0;(!t||!t.length)&&(t=Aa(0,0));for(let s=0;s<t.length;s++)i=t.start(s),r=t.end(s),r>e&&(r=e),n+=r-i;return n/e}function pi(t){if(t instanceof pi)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:Tl(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=pi.defaultMessages[this.code]||"")}pi.prototype.code=0;pi.prototype.message="";pi.prototype.status=null;pi.prototype.metadata=null;pi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];pi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};pi.MEDIA_ERR_CUSTOM=0;pi.prototype.MEDIA_ERR_CUSTOM=0;pi.MEDIA_ERR_ABORTED=1;pi.prototype.MEDIA_ERR_ABORTED=1;pi.MEDIA_ERR_NETWORK=2;pi.prototype.MEDIA_ERR_NETWORK=2;pi.MEDIA_ERR_DECODE=3;pi.prototype.MEDIA_ERR_DECODE=3;pi.MEDIA_ERR_SRC_NOT_SUPPORTED=4;pi.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;pi.MEDIA_ERR_ENCRYPTED=5;pi.prototype.MEDIA_ERR_ENCRYPTED=5;function Ey(t){return t!=null&&typeof t.then=="function"}function il(t){Ey(t)&&t.then(null,e=>{})}const wI=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,i,r)=>(t[i]&&(n[i]=t[i]),n),{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},tve=function(t){const e=t.$$("track"),n=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){const s=wI(r.track);return r.src&&(s.src=r.src),s}).concat(Array.prototype.filter.call(t.textTracks(),function(r){return n.indexOf(r)===-1}).map(wI))},nve=function(t,e){return t.forEach(function(n){const i=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(r=>i.addCue(r))}),e.textTracks()};var LF={textTracksToJson:tve,jsonToTextTracks:nve,trackToJson_:wI};const yA="vjs-modal-dialog";class vg extends ke{constructor(e,n){super(e,n),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ht("div",{className:`${yA}-content`},{role:"document"}),this.descEl_=Ht("p",{className:`${yA}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),cd(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${yA} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const n=this.closeable_=!!e;let i=this.getChild("closeButton");if(n&&!i){const r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close_)}!n&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),i=n.parentNode,r=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(n),this.empty(),oG(n,e),this.trigger("modalfill"),r?i.insertBefore(n,r):i.appendChild(n);const s=this.getChild("closeButton");s&&i.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Ow(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Je.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const n=this.focusableEls_(),i=this.el_.querySelector(":focus");let r;for(let s=0;s<n.length;s++)if(i===n[s]){r=s;break}Je.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof se.HTMLAnchorElement||n instanceof se.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof se.HTMLInputElement||n instanceof se.HTMLSelectElement||n instanceof se.HTMLTextAreaElement||n instanceof se.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof se.HTMLIFrameElement||n instanceof se.HTMLObjectElement||n instanceof se.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}vg.prototype.options_={pauseOnOpen:!0,temporary:!0};ke.registerComponent("ModalDialog",vg);class Jm extends co{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},mu(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){n=this[i],n.off&&n.off(),this.tracks_.splice(i,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){n=s;break}}return n}}Jm.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in Jm.prototype.allowedEvents_)Jm.prototype["on"+t]=null;const vA=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].enabled=!1)};class ive extends Jm{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){vA(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&vA(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,vA(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const _A=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].selected=!1)};class rve extends Jm{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){_A(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&_A(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,_A(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class TG extends Jm{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class sve{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,i=e.length;n<i;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){n=this.trackElements_[i];break}return n}removeTrackElement_(e){for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class ib{constructor(e){ib.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let i=0;const r=e.length;this.cues_=e,this.length_=e.length;const s=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(n<r)for(i=n;i<r;i++)s.call(this,i)}getCueById(e){let n=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){n=s;break}}return n}}const ove={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ave={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},lve={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},NF={disabled:"disabled",hidden:"hidden",showing:"showing"};class u3 extends co{constructor(e={}){super();const n={id:e.id||"vjs_track_"+Ko(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const r in n)Object.defineProperty(this,r,{get(){return n[r]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(r){r!==i&&(i=r,this.trigger("labelchange"))}})}}const c3=function(t){return new URL(t,Je.baseURI)},bG=function(t){return new URL(t,Je.baseURI).href},d3=function(t){if(typeof t=="string"){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},zw=function(t,e=se.location){return c3(t).origin!==e.origin};var uve=Object.freeze({__proto__:null,parseUrl:c3,getAbsoluteURL:bG,getFileExtension:d3,isCrossOrigin:zw});const OF=function(t,e){const n=new se.WebVTT.Parser(se,se.vttjs,se.WebVTT.StringDecoder()),i=[];n.oncue=function(r){e.addCue(r)},n.onparsingerror=function(r){i.push(r)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),i.length>0&&(se.console&&se.console.groupCollapsed&&se.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(r=>an.error(r)),se.console&&se.console.groupEnd&&se.console.groupEnd()),n.flush()},UF=function(t,e){const n={uri:t},i=zw(t);i&&(n.cors=i);const r=e.tech_.crossOrigin()==="use-credentials";r&&(n.withCredentials=r),WV(n,Wn(this,function(s,o,a){if(s)return an.error(s,o);e.loaded_=!0,typeof se.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){an.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return OF(a,e)}):OF(a,e)}))};class C_ extends u3{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=Bn(e,{kind:lve[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=NF[n.mode]||"disabled";const r=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(i="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new ib(this.cues_),o=new ib(this.activeCues_);let a=!1;this.timeupdateHandler=Wn(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return i},set(u){NF[u]&&i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&UF(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const u=this.tech_.currentTime(),c=[];for(let d=0,h=this.cues.length;d<h;d++){const m=this.cues[d];m.startTime<=u&&m.endTime>=u&&c.push(m)}if(a=!1,c.length!==this.activeCues_.length)a=!0;else for(let d=0;d<c.length;d++)this.activeCues_.indexOf(c[d])===-1&&(a=!0);return this.activeCues_=c,o.setCues_(this.activeCues_),o},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&UF(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new se.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const r in e)r in n||(n[r]=e[r]);n.id=e.id,n.originalCue_=e}const i=this.tech_.textTracks();for(let r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const i=this.cues_[n];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}C_.prototype.allowedEvents_={cuechange:"cuechange"};class wG extends u3{constructor(e={}){const n=Bn(e,{kind:ave[e.kind]||""});super(n);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class EG extends u3{constructor(e={}){const n=Bn(e,{kind:ove[e.kind]||""});super(n);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class Iu extends co{constructor(e={}){super();let n;const i=new C_(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return i}}}),n=Iu.NONE,i.addEventListener("loadeddata",()=>{n=Iu.LOADED,this.trigger({type:"load",target:this})})}}Iu.prototype.allowedEvents_={load:"load"};Iu.NONE=0;Iu.LOADING=1;Iu.LOADED=2;Iu.ERROR=3;const Go={audio:{ListClass:ive,TrackClass:wG,capitalName:"Audio"},video:{ListClass:rve,TrackClass:EG,capitalName:"Video"},text:{ListClass:TG,TrackClass:C_,capitalName:"Text"}};Object.keys(Go).forEach(function(t){Go[t].getterName=`${t}Tracks`,Go[t].privateName=`${t}Tracks_`});const eg={remoteText:{ListClass:TG,TrackClass:C_,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:sve,TrackClass:Iu,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Xr=Object.assign({},Go,eg);eg.names=Object.keys(eg);Go.names=Object.keys(Go);Xr.names=[].concat(eg.names).concat(Go.names);function cve(t,e,n,i,r={}){const s=t.textTracks();r.kind=e,n&&(r.label=n),i&&(r.language=i),r.tech=t;const o=new Xr.text.TrackClass(r);return s.addTrack(o),o}class Kt extends ke{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Xr.names.forEach(i=>{const r=Xr[i];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Xr.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Wn(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Aa(0,0)}bufferedPercent(){return SG(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Go.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(n=>{const i=this[`${n}Tracks`]()||[];let r=i.length;for(;r--;){const s=i[r];n==="text"&&this.removeRemoteTextTrack(s),i.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;){const i=e[n];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new pi(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Aa(0,0):Aa()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Go.names.forEach(e=>{const n=Go[e],i=()=>{this.trigger(`${e}trackchange`)},r=this[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),this.on("dispose",()=>{r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!se.WebVTT)if(Je.body.contains(this.el())){if(!this.options_["vtt.js"]&&Ym(eF)&&Object.keys(eF).length>0){this.trigger("vttjsloaded");return}const e=Je.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),se.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),i=a=>e.addTrack(a.track),r=a=>e.removeTrack(a.track);n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),o=()=>{s();for(let a=0;a<e.length;a++){const l=e[a];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",i),n.off("removetrack",r),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let a=0;a<e.length;a++)e[a].removeEventListener("cuechange",s)})}addTextTrack(e,n,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return cve(this,e,n,i)}createRemoteTextTrack(e){const n=Bn(e,{tech:this});return new eg.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const i=this.createRemoteTextTrack(e);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=Ko();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return Kt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Kt||e instanceof Kt||e===Kt}static registerTech(e,n){if(Kt.techs_||(Kt.techs_={}),!Kt.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!Kt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Kt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Si(e),Kt.techs_[e]=n,Kt.techs_[wy(e)]=n,e!=="Tech"&&Kt.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(Kt.techs_&&Kt.techs_[e])return Kt.techs_[e];if(e=Si(e),se&&se.videojs&&se.videojs[e])return an.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),se.videojs[e]}}}Xr.names.forEach(function(t){const e=Xr[t];Kt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Kt.prototype.featuresVolumeControl=!0;Kt.prototype.featuresMuteControl=!0;Kt.prototype.featuresFullscreenResize=!1;Kt.prototype.featuresPlaybackRate=!1;Kt.prototype.featuresProgressEvents=!1;Kt.prototype.featuresSourceset=!1;Kt.prototype.featuresTimeupdateEvents=!1;Kt.prototype.featuresNativeTextTracks=!1;Kt.prototype.featuresVideoFrameCallback=!1;Kt.withSourceHandlers=function(t){t.registerSourceHandler=function(n,i){let r=t.sourceHandlers;r||(r=t.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,n)},t.canPlayType=function(n){const i=t.sourceHandlers||[];let r;for(let s=0;s<i.length;s++)if(r=i[s].canPlayType(n),r)return r;return""},t.selectSourceHandler=function(n,i){const r=t.sourceHandlers||[];let s;for(let o=0;o<r.length;o++)if(s=r[o].canHandleSource(n,i),s)return r[o];return null},t.canPlaySource=function(n,i){const r=t.selectSourceHandler(n,i);return r?r.canHandleSource(n,i):""},["seekable","seeking","duration"].forEach(function(n){const i=this[n];typeof i=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){let i=t.selectSourceHandler(n,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:an.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=i.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};ke.registerComponent("Tech",Kt);Kt.registerTech("Tech",Kt);Kt.defaultTechOrder_=[];const Rh={},rb={},sb={};function dve(t,e){Rh[t]=Rh[t]||[],Rh[t].push(e)}function hve(t,e,n){t.setTimeout(()=>rh(e,Rh[e.type],n,t),1)}function fve(t,e){t.forEach(n=>n.setTech&&n.setTech(e))}function pve(t,e,n){return t.reduceRight(h3(n),e[n]())}function mve(t,e,n,i){return e[n](t.reduce(h3(n),i))}function FF(t,e,n,i=null){const r="call"+Si(n),s=t.reduce(h3(r),i),o=s===sb,a=o?null:e[n](s);return vve(t,n,a,o),a}const gve={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},yve={setCurrentTime:1,setMuted:1,setVolume:1},BF={play:1,pause:1};function h3(t){return(e,n)=>e===sb?sb:n[t]?n[t](e):e}function vve(t,e,n,i){for(let r=t.length-1;r>=0;r--){const s=t[r];s[e]&&s[e](i,n)}}function _ve(t){rb.hasOwnProperty(t.id())&&delete rb[t.id()]}function xve(t,e){const n=rb[t.id()];let i=null;if(n==null)return i=e(t),rb[t.id()]=[[e,i]],i;for(let r=0;r<n.length;r++){const[s,o]=n[r];s===e&&(i=o)}return i===null&&(i=e(t),n.push([e,i])),i}function rh(t={},e=[],n,i,r=[],s=!1){const[o,...a]=e;if(typeof o=="string")rh(t,Rh[o],n,i,r,s);else if(o){const l=xve(i,o);if(!l.setSource)return r.push(l),rh(t,a,n,i,r,s);l.setSource(Object.assign({},t),function(u,c){if(u)return rh(t,a,n,i,r,s);r.push(l),rh(c,t.type===c.type?a:Rh[c.type],n,i,r,s)})}else a.length?rh(t,a,n,i,r,s):s?n(t,r):rh(t,Rh["*"],n,i,r,!0)}const Sve={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ob=function(t=""){const e=d3(t);return Sve[e.toLowerCase()]||""},Tve=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const n=t.cache_.sources.filter(r=>r.src===e);if(n.length)return n[0].type;const i=t.$$("source");for(let r=0;r<i.length;r++){const s=i[r];if(s.type&&s.src&&s.src===e)return s.type}return ob(e)},CG=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(n){n=CG(n),Array.isArray(n)?e=e.concat(n):Tl(n)&&e.push(n)}),t=e}else typeof t=="string"&&t.trim()?t=[zF({src:t})]:Tl(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[zF(t)]:t=[];return t};function zF(t){if(!t.type){const e=ob(t.src);e&&(t.type=e)}return t}var bve=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const HF=JT?10009:eb?461:8,up={codes:{play:415,pause:19,ff:417,rw:412,back:HF},names:{415:"play",19:"pause",417:"ff",412:"rw",[HF]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},VF=5;class wve extends co{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const n=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const i=n.key.substring(5).toLowerCase();this.move(i)}else if(up.isEventKey(n,"play")||up.isEventKey(n,"pause")||up.isEventKey(n,"ff")||up.isEventKey(n,"rw")){n.preventDefault();const i=up.getEventName(n);this.performMediaAction_(i)}else up.isEventKey(n,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(n.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+VF);break;case"rw":this.userSeek_(this.player_.currentTime()-VF);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const n=e.relatedTarget;let i=null;const r=this.getCurrentComponent(e.target);n&&(i=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!n)&&(r&&r.name()==="CloseButton"?this.refocusComponent():(this.pause(),r&&r.el()&&(this.lastFocusedComponent_=r)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,n=[];function i(r){for(const s of r)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&n.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&i(s.children_)}return e.children_.forEach(r=>{if(r.hasOwnProperty("el_"))if(r.getIsFocusable&&r.getIsAvailableToBeFocused&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())){n.push(r);return}else r.hasOwnProperty("children_")&&r.children_.length>0?i(r.children_):r.hasOwnProperty("items")&&r.items.length>0?i(r.items):this.findSuitableDOMChild(r)&&n.push(r);if(r.name_==="ErrorDisplay"&&r.opened_){const s=r.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((a,l)=>{n.push({name:()=>"ModalButton"+(l+1),el:()=>a,getPositions:()=>{const u=a.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},d={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:d}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>a.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(e){function n(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let r=0;r<i.children.length;r++){const s=i.children[r],o=n(s);if(o)return o}return null}return e.el()?n(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const n=e||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===n)return i}}add(e){const n=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&n.push(e),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===e.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const n=this.getCurrentComponent();if(!n)return;const i=n.getPositions(),r=this.focusableComponents.filter(o=>o!==n&&this.isInDirection_(i.boundingClientRect,o.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(i.center,r,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:n})}findBestCandidate_(e,n,i){let r=1/0,s=null;for(const o of n){const a=o.getPositions().center,l=this.calculateDistance_(e,a,i);l<r&&(r=l,s=o)}return s}isInDirection_(e,n,i){switch(i){case"right":return n.left>=e.right;case"left":return n.right<=e.left;case"down":return n.top>=e.bottom;case"up":return n.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,n,i){const r=Math.abs(e.x-n.x),s=Math.abs(e.y-n.y);let o;switch(i){case"right":case"left":o=r+s*100;break;case"up":o=s*2+r*.5;break;case"down":o=s*5+r;break;default:o=r+s}return o}searchForTrackSelect_(){const e=this;for(const n of e.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){e.focus(n);break}}}class Eve extends ke{constructor(e,n,i){const r=Bn({createEl:!1},n);if(super(e,r,i),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let s=0,o=n.playerOptions.techOrder;s<o.length;s++){const a=Si(o[s]);let l=Kt.getTech(a);if(a||(l=ke.getComponent(a)),l&&l.isSupported()){e.loadTech_(a);break}}else e.src(n.playerOptions.sources)}}ke.registerComponent("MediaLoader",Eve);class Hw extends ke{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",n={},i={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&an.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=n.tabIndex;const r=Ht(e,n,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(Ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ht("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,cd(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}ke.registerComponent("ClickableComponent",Hw);class EI extends Hw{constructor(e,n){super(e,n),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ht("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Ht("picture",{className:"vjs-poster",tabIndex:-1},{},Ht("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?il(this.player_.play()):this.player_.pause())}}EI.prototype.crossorigin=EI.prototype.crossOrigin;ke.registerComponent("PosterImage",EI);const Po="#222",$F="#ccc",Cve={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function xA(t,e){let n;if(t.length===4)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)n=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function Xa(t,e,n){try{t.style[e]=n}catch{return}}function GF(t){return t?`${t}px`:""}class Ave extends ke{constructor(e,n,i){super(e,n,i);const r=o=>this.updateDisplay(o),s=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("texttrackchange",r),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(Wn(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const o=se.screen.orientation||se,a=se.screen.orientation?"change":"orientationchange";o.addEventListener(a,s),e.on("dispose",()=>o.removeEventListener(a,s));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let r,s,o;for(let a=0;a<n.length;a++){const l=n[a];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?o=l:o||(o=l):i&&!i.enabled?(o=null,r=null,s=null):l.default&&(l.kind==="descriptions"&&!r?r=l:l.kind in e&&!s&&(s=l))}o?o.mode="showing":s?s.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof se.WebVTT=="function"&&se.WebVTT.processCues(se,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const o=[];for(let a=0;a<e.length;++a){const l=e[a];l.mode==="showing"&&o.push(l)}this.updateForTrack(o);return}let i=null,r=null,s=e.length;for(;s--;){const o=e[s];o.mode==="showing"&&(o.kind==="descriptions"?i=o:r=o)}if(r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!se.CSS.supports("inset","10px")){const o=this.el_,a=o.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;o.style="",Xa(o,"position","relative"),Xa(o,"height",u-l+"px"),Xa(o,"top","unset"),tb?Xa(o,"bottom",u+"px"):Xa(o,"bottom","0px"),a.length>0&&a.forEach(c=>{if(c.style.inset){const d=c.style.inset.split(" ");d.length===3&&Object.assign(c.style,{top:d[0],right:d[1],bottom:d[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!se.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),i=e/n,r=this.player_.videoWidth()/this.player_.videoHeight();let s=0,o=0;Math.abs(i-r)>.1&&(i>r?s=Math.round((e-n*r)/2):o=Math.round((n-e/r)/2)),Xa(this.el_,"insetInline",GF(s)),Xa(this.el_,"insetBlock",GF(o))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),i=e.activeCues;let r=i.length;for(;r--;){const s=i[r];if(!s)continue;const o=s.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&Xa(o.firstChild,"color",xA(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Xa(o.firstChild,"backgroundColor",xA(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Xa(o,"backgroundColor",xA(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${Po}, 2px 2px 4px ${Po}, 2px 2px 5px ${Po}`:n.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${Po}, 2px 2px ${Po}, 3px 3px ${Po}`:n.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${$F}, 0 1px ${$F}, -1px -1px ${Po}, 0 -1px ${Po}`:n.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${Po}, 0 0 4px ${Po}, 0 0 4px ${Po}, 0 0 4px ${Po}`)),n.fontPercent&&n.fontPercent!==1){const a=se.parseFloat(o.style.fontSize);o.style.fontSize=a*n.fontPercent+"px",o.style.height="auto",o.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=Cve[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof se.WebVTT!="function"||e.every(i=>!i.activeCues))return;const n=[];for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s)n.push(r.activeCues[s])}se.WebVTT.processCues(se,n,this.el_);for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s){const o=r.activeCues[s].displayState;Ih(o,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:i)),r.language&&Km(o,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}}ke.registerComponent("TextTrackDisplay",Ave);class Mve extends ke{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),i=Ht("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}ke.registerComponent("LoadingSpinner",Mve);class Lr extends Hw{createEl(e,n={},i={}){e="button",n=Object.assign({className:this.buildCSSClass()},n),i=Object.assign({type:"button"},i);const r=Ht(e,n,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(Ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,n={}){const i=this.constructor.name;return an.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),ke.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}ke.registerComponent("Button",Lr);class AG extends Lr{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){il(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}const s=()=>r.focus();Ey(n)?n.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}AG.prototype.controlText_="Play Video";ke.registerComponent("BigPlayButton",AG);class Pve extends Lr{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}ke.registerComponent("CloseButton",Pve);class MG extends Lr{constructor(e,n={}){super(e,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),n.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?il(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}MG.prototype.controlText_="Play";ke.registerComponent("PlayToggle",MG);class _g extends ke{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=Ht("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return n.appendChild(i),this.contentEl_=Ht("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Yh(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,an.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Je.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}_g.prototype.labelText_="Time";_g.prototype.controlText_="Time";ke.registerComponent("TimeDisplay",_g);class f3 extends _g{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}f3.prototype.labelText_="Current Time";f3.prototype.controlText_="Current Time";ke.registerComponent("CurrentTimeDisplay",f3);class p3 extends _g{constructor(e,n){super(e,n);const i=r=>this.updateContent(r);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}p3.prototype.labelText_="Duration";p3.prototype.controlText_="Duration";ke.registerComponent("DurationDisplay",p3);class Ive extends ke{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return n.appendChild(i),e.appendChild(n),e}}ke.registerComponent("TimeDivider",Ive);class m3 extends _g{constructor(e,n){super(e,n),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Ht("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}m3.prototype.labelText_="Remaining Time";m3.prototype.controlText_="Remaining Time";ke.registerComponent("RemainingTimeDisplay",m3);class Rve extends ke{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ht("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ht("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Je.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}ke.registerComponent("LiveDisplay",Rve);class PG extends Lr{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ht("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}PG.prototype.controlText_="Seek to live, currently playing live";ke.registerComponent("SeekToLive",PG);function A_(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))}var Dve=Object.freeze({__proto__:null,clamp:A_});class g3 extends ke{constructor(e,n){super(e,n),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},i={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,n,i)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!wl&&e.preventDefault(),nG(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;iG(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(A_(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=Nw(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){const n=this.options_.playerOptions.spatialNavigation,i=n&&n.enabled,r=n&&n.horizontalSeek;i?r&&e.key==="ArrowLeft"||!r&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):r&&e.key==="ArrowRight"||!r&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}ke.registerComponent("Slider",g3);const SA=(t,e)=>A_(t/e*100,0,100).toFixed(2)+"%";class kve extends ke{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=Ht("span",{className:"vjs-control-text"}),i=Ht("span",{textContent:this.localize("Loaded")}),r=Je.createTextNode(": ");return this.percentageEl_=Ht("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,i=this.player_.buffered(),r=n&&n.isLive()?n.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),o=this.partEls_,a=SA(s,r);this.percent_!==a&&(this.el_.style.width=a,cd(this.percentageEl_,a),this.percent_=a);for(let l=0;l<i.length;l++){const u=i.start(l),c=i.end(l);let d=o[l];d||(d=this.el_.appendChild(Ht()),o[l]=d),!(d.dataset.start===u&&d.dataset.end===c)&&(d.dataset.start=u,d.dataset.end=c,d.style.left=SA(u,s),d.style.width=SA(c-u,s))}for(let l=o.length;l>i.length;l--)this.el_.removeChild(o[l-1]);o.length=i.length})}}ke.registerComponent("LoadProgressBar",kve);class Lve extends ke{constructor(e,n){super(e,n),this.update=El(Wn(this,this.update),Qo)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,i){const r=Dv(this.el_),s=Qm(this.player_.el()),o=e.width*n;if(!s||!r)return;let a=e.left-s.left+o,l=e.width-o+(s.right-e.right);l||(l=e.width-o,a=o);let u=r.width/2;a<u?u+=u-a:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){cd(this.el_,e)}updateTime(e,n,i,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const a=this.player_.liveTracker.liveWindow(),l=a-n*a;s=(l<1?"":"-")+Yh(l,a)}else s=Yh(i,o);this.update(e,n,s),r&&r()})}}ke.registerComponent("TimeTooltip",Lve);class y3 extends ke{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=El(Wn(this,this.update),Qo)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const i=this.getChild("timeTooltip");if(!i)return;const r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,n,r)}}y3.prototype.options_={children:[]};!ts&&!bl&&y3.prototype.options_.children.push("timeTooltip");ke.registerComponent("PlayProgressBar",y3);class IG extends ke{constructor(e,n){super(e,n),this.update=El(Wn(this,this.update),Qo)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const i=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,i,()=>{this.el_.style.left=`${e.width*n}px`})}}IG.prototype.options_={children:["timeTooltip"]};ke.registerComponent("MouseTimeDisplay",IG);const y1=5,WF=12;class v3 extends g3{constructor(e,n){super(e,n),this.setEventHandlers_()}setEventHandlers_(){this.update_=Wn(this,this.update),this.update=El(this.update_,Qo),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Je&&"visibilityState"in Je&&this.on(Je,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Je.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Qo))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Je.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let s=this.player_.duration();r&&r.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==i||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Yh(i,s),Yh(s,s)],"{1} of {2}")),this.currentTime_=i,this.duration_=s),this.bar&&this.bar.update(Qm(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let n;const i=this.player_.liveTracker;return i&&i.isLive()?(n=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){kv(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!kv(e)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const r=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())i=r*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(r>=.99){s.seekToLiveEdge();return}const o=s.seekableStart(),a=s.liveCurrentTime();if(i=o+r*s.liveWindow(),i>=a&&(i=a),i<=o&&(i=o+.1),i===1/0)return}this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?il(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+y1)}stepBack(){this.userSeek_(this.player_.currentTime()-y1)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const i=parseInt(e.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-y1*WF)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+y1*WF)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Je&&"visibilityState"in Je&&this.off(Je,"visibilitychange",this.toggleVisibility_),super.dispose()}}v3.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ts&&!bl&&v3.prototype.options_.children.splice(1,0,"mouseTimeDisplay");ke.registerComponent("SeekBar",v3);class RG extends ke{constructor(e,n){super(e,n),this.handleMouseMove=El(Wn(this,this.handleMouseMove),Qo),this.throttledHandleMouseSeek=El(Wn(this,this.handleMouseSeek),Qo),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const i=n.getChild("playProgressBar"),r=n.getChild("mouseTimeDisplay");if(!i&&!r)return;const s=n.el(),o=Dv(s);let a=Nw(s,e).x;a=A_(a,0,1),r&&r.update(o,a),i&&i.update(o,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&il(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}RG.prototype.options_={children:["seekBar"]};ke.registerComponent("ProgressControl",RG);class DG extends Lr{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Je.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in se?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Je.exitPictureInPicture=="function"&&super.show()}}DG.prototype.controlText_="Picture-in-Picture";ke.registerComponent("PictureInPictureToggle",DG);class kG extends Lr{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),Je[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}kG.prototype.controlText_="Fullscreen";ke.registerComponent("FullscreenToggle",kG);const Nve=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class Ove extends ke{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}ke.registerComponent("VolumeLevel",Ove);class Uve extends ke{constructor(e,n){super(e,n),this.update=El(Wn(this,this.update),Qo)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,i,r){if(!i){const s=Qm(this.el_),o=Qm(this.player_.el()),a=e.width*n;if(!o||!s)return;const l=e.left-o.left+a,u=e.width-a+(o.right-e.right);let c=s.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>s.width&&(c=s.width),this.el_.style.right=`-${c}px`}this.write(`${r}%`)}write(e){cd(this.el_,e)}updateVolume(e,n,i,r,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,i,r.toFixed(0)),s&&s()})}}ke.registerComponent("VolumeLevelTooltip",Uve);class LG extends ke{constructor(e,n){super(e,n),this.update=El(Wn(this,this.update),Qo)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,i){const r=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,i,r,()=>{i?this.el_.style.bottom=`${e.height*n}px`:this.el_.style.left=`${e.width*n}px`})}}LG.prototype.options_={children:["volumeLevelTooltip"]};ke.registerComponent("MouseVolumeLevelDisplay",LG);class Vw extends g3{constructor(e,n){super(e,n),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){kv(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const i=this.el(),r=Qm(i),s=this.vertical();let o=Nw(i,e);o=s?o.y:o.x,o=A_(o,0,1),n.update(r,o,s)}kv(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Vw.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ts&&!bl&&Vw.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Vw.prototype.playerEvent="volumechange";ke.registerComponent("VolumeBar",Vw);class NG extends ke{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||Ym(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),Nve(this,e),this.throttledHandleMouseMove=El(Wn(this,this.handleMouseMove),Qo),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}NG.prototype.options_={children:["volumeBar"]};ke.registerComponent("VolumeControl",NG);const Fve=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class OG extends Lr{constructor(e,n){super(e,n),Fve(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),i=this.player_.lastVolume_();if(n===0){const r=i<.1?.1:i;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),ts&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),kw(this.el_,[0,1,2,3].reduce((i,r)=>i+`${r?" ":""}vjs-vol-${r}`,"")),Ih(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}OG.prototype.controlText_="Mute";ke.registerComponent("MuteToggle",OG);class UG extends ke{constructor(e,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||Ym(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),uo(Je,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),kr(Je,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}UG.prototype.options_={children:["muteToggle","volumeControl"]};ke.registerComponent("VolumePanel",UG);class FG extends Lr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()?i.seekableEnd():this.player_.duration();let s;n+this.skipTime<=r?s=n+this.skipTime:s=r,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}FG.prototype.controlText_="Skip Forward";ke.registerComponent("SkipForward",FG);class BG extends Lr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()&&i.seekableStart();let s;r&&n-this.skipTime<=r?s=r:n>=this.skipTime?s=n-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}BG.prototype.controlText_="Skip Backward";ke.registerComponent("SkipBackward",BG);class zG extends ke{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof ke&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof ke&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ht(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),uo(n,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||Je.activeElement;if(!this.children().some(i=>i.el()===n)){const i=this.menuButton_;i&&i.buttonPressed_&&n!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const i=n.filter(r=>r.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}ke.registerComponent("Menu",zG);class _3 extends ke{constructor(e,n={}){super(e,n),this.menuButton_=new Lr(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Lr.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),uo(Je,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new zG(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=Ht("li",{className:"vjs-menu-title",textContent:Si(this.options_.title),tabIndex:-1}),i=new ke(this.player_,{el:n});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const n=Lr.prototype.buildCSSClass();return`vjs-menu-button ${e} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),kr(Je,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Esc"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Esc"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Esc"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ts&&Q$())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}ke.registerComponent("MenuButton",_3);class x3 extends _3{constructor(e,n){const i=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!i)return;const r=Wn(this,this.update);i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)})}}ke.registerComponent("TrackButton",x3);class M_ extends Hw{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,n,i){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),i),s=Ht("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(s):r.replaceChild(s,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}ke.registerComponent("MenuItem",M_);class P_ extends M_{constructor(e,n){const i=n.track,r=e.textTracks();n.label=i.label||i.language||"Unknown",n.selected=i.mode==="showing",super(e,n),this.track=i,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const s=(...a)=>{this.handleTracksChange.apply(this,a)},o=(...a)=>{this.handleSelectedLanguageChange.apply(this,a)};if(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",o)}),r.onchange===void 0){let a;this.on(["tap","click"],function(){if(typeof se.Event!="object")try{a=new se.Event("change")}catch{}a||(a=Je.createEvent("Event"),a.initEvent("change",!0,!0)),r.dispatchEvent(a)})}this.handleTracksChange()}handleClick(e){const n=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let r=0;r<i.length;r++){const s=i[r];this.kinds.indexOf(s.kind)!==-1&&(s===n?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}ke.registerComponent("TextTrackMenuItem",P_);class HG extends P_{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let i=!0;for(let r=0,s=n.length;r<s;r++){const o=n[r];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let i=!0;for(let r=0,s=n.length;r<s;r++){const o=n[r];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}ke.registerComponent("OffTextTrackMenuItem",HG);class xg extends x3{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=P_){let i;this.label_&&(i=`${this.label_} off`),e.push(new HG(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<r.length;s++){const o=r[s];if(this.kinds_.indexOf(o.kind)>-1){const a=new n(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass(`vjs-${o.kind}-menu-item`),e.push(a)}}return e}}ke.registerComponent("TextTrackButton",xg);class VG extends M_{constructor(e,n){const i=n.track,r=n.cue,s=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=r.text,n.selected=r.startTime<=s&&s<r.endTime,super(e,n),this.track=i,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}ke.registerComponent("ChaptersTrackMenuItem",VG);class S3 extends xg{constructor(e,n,i){super(e,n,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Si(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let i=0,r=n.length;i<r;i++){const s=n[i],o=new VG(this.player_,{track:this.track_,cue:s});e.push(o)}return e}}S3.prototype.kind_="chapters";S3.prototype.controlText_="Chapters";ke.registerComponent("ChaptersButton",S3);class T3 extends xg{constructor(e,n,i){super(e,n,i),this.setIcon("audio-description");const r=e.textTracks(),s=Wn(this,this.handleTracksChange);r.addEventListener("change",s),this.on("dispose",function(){r.removeEventListener("change",s)})}handleTracksChange(e){const n=this.player().textTracks();let i=!1;for(let r=0,s=n.length;r<s;r++){const o=n[r];if(o.kind!==this.kind_&&o.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}T3.prototype.kind_="descriptions";T3.prototype.controlText_="Descriptions";ke.registerComponent("DescriptionsButton",T3);class b3 extends xg{constructor(e,n,i){super(e,n,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}b3.prototype.kind_="subtitles";b3.prototype.controlText_="Subtitles";ke.registerComponent("SubtitlesButton",b3);class w3 extends P_{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}ke.registerComponent("CaptionSettingsMenuItem",w3);class E3 extends xg{constructor(e,n,i){super(e,n,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new w3(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}E3.prototype.kind_="captions";E3.prototype.controlText_="Captions";ke.registerComponent("CaptionsButton",E3);class $G extends P_{createEl(e,n,i){const r=super.createEl(e,n,i),s=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):s.appendChild(Ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ht("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}ke.registerComponent("SubsCapsMenuItem",$G);class C3 extends xg{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Si(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new w3(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,$G),e}}C3.prototype.kinds_=["captions","subtitles"];C3.prototype.controlText_="Subtitles";ke.registerComponent("SubsCapsButton",C3);class GG extends M_{constructor(e,n){const i=n.track,r=e.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,super(e,n),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const s=(...o)=>{this.handleTracksChange.apply(this,o)};r.addEventListener("change",s),this.on("dispose",()=>{r.removeEventListener("change",s)})}createEl(e,n,i){const r=super.createEl(e,n,i),s=r.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(Ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ht("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let i=0;i<n.length;i++){const r=n[i];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}ke.registerComponent("AudioTrackMenuItem",GG);class WG extends x3{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let i=0;i<n.length;i++){const r=n[i];e.push(new GG(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}WG.prototype.controlText_="Audio Track";ke.registerComponent("AudioTrackButton",WG);class A3 extends M_{constructor(e,n){const i=n.rate,r=parseFloat(i,10);n.label=i,n.selected=r===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=i,this.rate=r,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}A3.prototype.contentElType="button";ke.registerComponent("PlaybackRateMenuItem",A3);class jG extends _3{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ht("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let i=e.length-1;i>=0;i--)n.push(new A3(this.player(),{rate:e[i]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}jG.prototype.controlText_="Playback Rate";ke.registerComponent("PlaybackRateMenuButton",jG);class qG extends ke{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},i={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,i)}}ke.registerComponent("Spacer",qG);class Bve extends qG{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}ke.registerComponent("CustomControlSpacer",Bve);class XG extends ke{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}XG.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};ke.registerComponent("ControlBar",XG);class YG extends vg{constructor(e,n){super(e,n),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}YG.prototype.options_=Object.assign({},vg.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});ke.registerComponent("ErrorDisplay",YG);class KG extends ke{constructor(e,n={}){super(e,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ht("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Ko()}`)+"-"+n[1].replace(/\W+/g,""),r=Ht("option",{id:i,value:this.localize(n[0]),textContent:n[1]});return r.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),r}))}}ke.registerComponent("TextTrackSelect",KG);class Dh extends ke{constructor(e,n={}){super(e,n);const i=Ht("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const r=this.options_.selects;for(const s of r){const o=this.options_.selectConfigs[s],a=o.className,l=o.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${Ko()}`;if(this.options_.type==="colors"){u=Ht("span",{className:a});const h=Ht("label",{id:l,className:"vjs-label",textContent:o.label});h.setAttribute("for",c),u.appendChild(h)}const d=new KG(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(d),this.options_.type==="colors"&&(u.appendChild(d.el()),this.el().appendChild(u))}}createEl(){return Ht("fieldset",{className:this.options_.className})}}ke.registerComponent("TextTrackFieldset",Dh);class QG extends ke{constructor(e,n={}){super(e,n);const i=this.options_.textTrackComponentid,r=new Dh(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const s=new Dh(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const o=new Dh(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return Ht("div",{className:"vjs-track-settings-colors"})}}ke.registerComponent("TextTrackSettingsColors",QG);class ZG extends ke{constructor(e,n={}){super(e,n);const i=this.options_.textTrackComponentid,r=new Dh(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const s=new Dh(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const o=new Dh(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return Ht("div",{className:"vjs-track-settings-font"})}}ke.registerComponent("TextTrackSettingsFont",ZG);class JG extends ke{constructor(e,n={}){super(e,n);const i=this.localize("restore all settings to the default values"),r=new Lr(e,{controlText:i,className:"vjs-default-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Reset"),this.addChild(r);const s=new Lr(e,{controlText:i,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Done"),this.addChild(s)}createEl(){return Ht("div",{className:"vjs-track-settings-controls"})}}ke.registerComponent("TrackSettingsControls",JG);const TA="vjs-text-track-settings",jF=["#000","Black"],qF=["#00F","Blue"],XF=["#0FF","Cyan"],YF=["#0F0","Green"],KF=["#F0F","Magenta"],QF=["#F00","Red"],ZF=["#FFF","White"],JF=["#FF0","Yellow"],bA=["1","Opaque"],wA=["0.5","Semi-Transparent"],e5=["0","Transparent"],Mc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[jF,ZF,QF,YF,qF,JF,KF,XF],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[bA,wA,e5],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ZF,jF,QF,YF,qF,JF,KF,XF],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[bA,wA],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[e5,wA,bA],className:"vjs-window-opacity vjs-opacity"}};Mc.windowColor.options=Mc.backgroundColor.options;function eW(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function zve(t,e){const n=t.options[t.options.selectedIndex].value;return eW(n,e)}function Hve(t,e,n){if(e){for(let i=0;i<t.options.length;i++)if(eW(t.options[i].value,n)===e){t.selectedIndex=i;break}}}class Vve extends vg{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Ht("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const n=new QG(e,{textTrackComponentid:this.id_,selectConfigs:Mc,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const i=new ZG(e,{textTrackComponentid:this.id_,selectConfigs:Mc,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);const r=new JG(e);this.addChild(r)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),pm(Mc,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return G$(Mc,(e,n,i)=>{const r=zve(this.$(n.selector),n.parser);return r!==void 0&&(e[i]=r),e},{})}setValues(e){pm(Mc,(n,i)=>{Hve(this.$(n.selector),e[i],n.parser)})}setDefaults(){pm(Mc,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(se.localStorage.getItem(TA))}catch(n){an.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?se.localStorage.setItem(TA,JSON.stringify(e)):se.localStorage.removeItem(TA)}catch(n){an.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}ke.registerComponent("TextTrackSettings",Vve);class $ve extends ke{constructor(e,n){let i=n.ResizeObserver||se.ResizeObserver;n.ResizeObserver===null&&(i=!1);const r=Bn({createEl:!i,reportTouchActivity:!1},n);super(e,r),this.ResizeObserver=n.ResizeObserver||se.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=fG(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let o=this.unloadListener_=function(){kr(this,"resize",s),kr(this,"unload",o),o=null};uo(this.el_.contentWindow,"unload",o),uo(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}ke.registerComponent("ResizeManager",$ve);const Gve={trackingThreshold:20,liveTolerance:15};class Wve extends ke{constructor(e,n){const i=Bn(Gve,n,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(se.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+i;const r=this.liveCurrentTime(),s=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Qo),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let i=e?e.length:0;for(;i--;)n.push(e.end(i));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let i=e?e.length:0;for(;i--;)n.push(e.start(i));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}ke.registerComponent("LiveTracker",Wve);class jve extends ke{constructor(e,n){super(e,n),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ht("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Ko()}`}),description:Ht("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Ko()}`})},Ht("div",{className:"vjs-title-bar"},{},W$(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{const s=this.state[r],o=this.els[r],a=i[r];Ow(o),s&&cd(o,s),n&&(n.removeAttribute(a),s&&n.setAttribute(a,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}ke.registerComponent("TitleBar",jve);const qve={initialDisplay:4e3,position:[],takeFocus:!1};class Xve extends Lr{constructor(e,n){n=Bn(qve,n),super(e,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Ht("button",{},{type:"button",class:this.buildCSSClass()},Ht("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}ke.registerComponent("TransientButton",Xve);const CI=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const n=t.$$("source"),i=[];let r="";if(!n.length)return!1;for(let s=0;s<n.length;s++){const o=n[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(r=i[0]),t.triggerSourceset(r),!0):!1},Yve=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=Je.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const n=Je.createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",se.Element.prototype.appendChild.call(this,n),this.innerHTML}}),tW=(t,e)=>{let n={};for(let i=0;i<t.length&&(n=Object.getOwnPropertyDescriptor(t[i],e),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},Kve=t=>tW([t.el(),se.HTMLMediaElement.prototype,se.Element.prototype,Yve],"innerHTML"),t5=function(t){const e=t.el();if(e.resetSourceWatch_)return;const n={},i=Kve(t),r=s=>(...o)=>{const a=s.apply(e,o);return CI(t),a};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(n[s]=e[s],e[s]=r(n[s]))}),Object.defineProperty(e,"innerHTML",Bn(i,{set:r(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(s=>{e[s]=n[s]}),Object.defineProperty(e,"innerHTML",i)},t.one("sourceset",e.resetSourceWatch_)},Qve=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?bG(se.Element.prototype.getAttribute.call(this,"src")):""},set(t){return se.Element.prototype.setAttribute.call(this,"src",t),t}}),Zve=t=>tW([t.el(),se.HTMLMediaElement.prototype,Qve],"src"),Jve=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const n=Zve(t),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",Bn(n,{set:s=>{const o=n.set.call(e,s);return t.triggerSourceset(e.src),o}})),e.setAttribute=(s,o)=>{const a=i.call(e,s,o);return/src/i.test(s)&&t.triggerSourceset(e.src),a},e.load=()=>{const s=r.call(e);return CI(t)||(t.triggerSourceset(""),t5(t)),s},e.currentSrc?t.triggerSourceset(e.currentSrc):CI(t)||t5(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}};class _t extends Kt{constructor(e,n){super(e,n);const i=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let o=s.length;const a=[];for(;o--;){const l=s[o];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!r&&!this.el_.hasAttribute("crossorigin")&&zw(l.src)&&(r=!0)):a.push(l))}for(let l=0;l<a.length;l++)this.el_.removeChild(a[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&an.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Rv||Rw)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),_t.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){Jve(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const i=()=>{n=[];for(let s=0;s<e.length;s++){const o=e[s];o.kind==="metadata"&&n.push({track:o,storedMode:o.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const r=()=>{for(let s=0;s<n.length;s++){const o=n[s];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(r=>{this.el()[`${i}Tracks`].removeEventListener(r,this[`${i}TracksListeners_`][r])}),this[`featuresNative${e}Tracks`]=!n,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=Go[e],i=this.el()[n.getterName],r=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!i||!i.addEventListener)return;const s={change:a=>{const l={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(l),e==="text"&&this[eg.remoteText.getterName]().trigger(l)},addtrack(a){r.addTrack(a.track)},removetrack(a){r.removeTrack(a.track)}},o=function(){const a=[];for(let l=0;l<r.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===r[l]){u=!0;break}u||a.push(r[l])}for(;a.length;)r.removeTrack(a.shift())};this[n.getterName+"Listeners_"]=s,Object.keys(s).forEach(a=>{const l=s[a];i.addEventListener(a,l),this.on("dispose",u=>i.removeEventListener(a,l))}),this.on("loadstart",o),this.on("dispose",a=>this.off("loadstart",o))}proxyNativeTracks_(){Go.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),_t.disposeMediaElement(e),e=i}else{e=Je.createElement("video");const i=this.options_.tag&&Ac(this.options_.tag),r=Bn({},i);(!Rv||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,eG(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Km(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let i=0;i<n.length;i++){const r=n[i],s=this.options_[r];typeof s<"u"&&(s?Km(e,r,r):Lw(e,r),e[r]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const r=function(){i=!0};this.on("loadstart",r);const s=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",s),i||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Dw?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){an(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&bl&&wl&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)il(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,n){if(!e)return an.error("Invalid source URL."),!1;const i={src:e};n&&(i.type=n);const r=Ht("source",{},i);return this.el_.appendChild(r),!0}removeSourceElement(e){if(!e)return an.error("Source URL is required to remove the source element."),!1;const n=this.el_.querySelectorAll("source");for(const i of n)if(i.src===e)return this.el_.removeChild(i),!0;return an.warn(`No matching source element found with src: ${e}`),!1}reset(){_t.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,i):super.addTextTrack(e,n,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=Je.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const i=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let i=n.length;for(;i--;)(e===n[i]||e===n[i].track)&&this.el().removeChild(n[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),se.performance&&(e.creationTime=se.performance.now()),e}}Mw(_t,"TEST_VID",function(){if(!mg())return;const t=Je.createElement("video"),e=Je.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});_t.isSupported=function(){try{_t.TEST_VID.volume=.5}catch{return!1}return!!(_t.TEST_VID&&_t.TEST_VID.canPlayType)};_t.canPlayType=function(t){return _t.TEST_VID.canPlayType(t)};_t.canPlaySource=function(t,e){return _t.canPlayType(t.type)};_t.canControlVolume=function(){try{const t=_t.TEST_VID.volume;_t.TEST_VID.volume=t/2+.1;const e=t!==_t.TEST_VID.volume;return e&&ts?(se.setTimeout(()=>{_t&&_t.prototype&&(_t.prototype.featuresVolumeControl=t!==_t.TEST_VID.volume)}),!1):e}catch{return!1}};_t.canMuteVolume=function(){try{const t=_t.TEST_VID.muted;return _t.TEST_VID.muted=!t,_t.TEST_VID.muted?Km(_t.TEST_VID,"muted","muted"):Lw(_t.TEST_VID,"muted","muted"),t!==_t.TEST_VID.muted}catch{return!1}};_t.canControlPlaybackRate=function(){if(bl&&wl&&Pw<58)return!1;try{const t=_t.TEST_VID.playbackRate;return _t.TEST_VID.playbackRate=t/2+.1,t!==_t.TEST_VID.playbackRate}catch{return!1}};_t.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(Je.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(Je.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(Je.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(Je.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};_t.supportsNativeTextTracks=function(){return Dw||ts&&wl};_t.supportsNativeVideoTracks=function(){return!!(_t.TEST_VID&&_t.TEST_VID.videoTracks)};_t.supportsNativeAudioTracks=function(){return!!(_t.TEST_VID&&_t.TEST_VID.audioTracks)};_t.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){Mw(_t.prototype,t,()=>_t[e](),!0)});_t.prototype.featuresVolumeControl=_t.canControlVolume();_t.prototype.movingMediaElementInDOM=!ts;_t.prototype.featuresFullscreenResize=!0;_t.prototype.featuresProgressEvents=!0;_t.prototype.featuresTimeupdateEvents=!0;_t.prototype.featuresVideoFrameCallback=!!(_t.TEST_VID&&_t.TEST_VID.requestVideoFrameCallback);_t.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};_t.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let n=e.length;for(;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){_t.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){_t.prototype["set"+Si(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){_t.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){_t.prototype["set"+Si(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){_t.prototype[t]=function(){return this.el_[t]()}});Kt.withSourceHandlers(_t);_t.nativeSourceHandler={};_t.nativeSourceHandler.canPlayType=function(t){try{return _t.TEST_VID.canPlayType(t)}catch{return""}};_t.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return _t.nativeSourceHandler.canPlayType(t.type);if(t.src){const n=d3(t.src);return _t.nativeSourceHandler.canPlayType(`video/${n}`)}return""};_t.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)};_t.nativeSourceHandler.dispose=function(){};_t.registerSourceHandler(_t.nativeSourceHandler);Kt.registerTech("Html5",_t);const nW=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],EA={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},AI=["tiny","xsmall","small","medium","large","xlarge","huge"],FS={};AI.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;FS[t]=`vjs-layout-${e}`});const e_e={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Qn extends ke{constructor(e,n,i){if(e.id=e.id||n.id||`vjs_video_${Ko()}`,n=Object.assign(Qn.getTagSettings(e),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const o=e.closest("[lang]");o&&(n.language=o.getAttribute("lang"))}if(super(null,n,i),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=V$(this.id_),this.fsApi_=KT,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Ac(e),this.language(this.options_.language),n.languages){const o={};Object.getOwnPropertyNames(n.languages).forEach(function(a){o[a.toLowerCase()]=n.languages[a]}),this.languages_=o}else this.languages_=Qn.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),a3(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(uo(Je,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=Bn(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(o=>{this[o](n.plugins[o])}),n.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const a=new se.DOMParser().parseFromString(bve,"image/svg+xml");if(a.querySelector("parsererror"))an.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=a.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new wve(this),this.addClass("vjs-spatial-navigation-enabled")),Rv&&this.addClass("vjs-touch-enabled"),ts||this.addClass("vjs-workinghover"),Qn.players[this.id_]=this;const s=yI.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),kr(Je,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),kr(Je,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Qn.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),_ve(this),Xr.names.forEach(e=>{const n=Xr[e],i=this[n.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,n,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const r=this.tag.tagName.toLowerCase()==="video-js";i?n=this.el_=e.parentNode:r||(n=this.el_=super.createEl("div"));const s=Ac(e);if(r){for(n=this.el_=e,e=this.tag=Je.createElement("video");n.children.length;)e.appendChild(n.firstChild);by(n,"video-js")||Ih(n,"video-js"),n.appendChild(e),i=this.playerElIngest_=n,Object.keys(n).forEach(l=>{try{e[l]=n[l]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",wl&&Iw&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(l){r&&l==="class"||n.setAttribute(l,s[l]),r&&e.setAttribute(l,s[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>K$[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),se.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=dG("vjs-styles-dimensions");const l=ed(".vjs-styles-defaults"),u=ed("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const a=e.getElementsByTagName("a");for(let l=0;l<a.length;l++){const u=a.item(l);Ih(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(n,e),_I(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){an.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const i=e+"_";if(n===void 0)return this[i]||0;if(n===""||n==="auto"){this[i]=void 0,this.updateStyleEl_();return}const r=parseFloat(n);if(isNaN(r)){an.error(`Improper value "${n}" supplied for for ${e}`);return}this[i]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,mu(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Yye(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(se.VIDEOJS_NO_DYNAMIC_STYLE===!0){const a=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(a>=0&&(u.width=a),l>=0&&(u.height=l));return}let e,n,i,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const s=i.split(":"),o=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=e*o,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),hG(this.styleEl_,`
      .${r} {
        width: ${e}px;
        height: ${n}px;
      }

      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const i=Si(e),r=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Kt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const o={source:n,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Xr.names.forEach(l=>{const u=Xr[l];o[u.getterName]=this[u.privateName]}),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[r]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const a=Kt.getTech(e);if(!a)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new a(o),this.tech_.ready(Wn(this,this.handleTechReady_),!0),LF.jsonToTextTracks(this.textTracksJson_||[],this.tech_),nW.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Si(l)}_`](u))}),Object.keys(EA).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${EA[l]}_`].bind(this),event:u});return}this[`handleTech${EA[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&_I(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Xr.names.forEach(e=>{const n=Xr[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=LF.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&an.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":yI}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const n=()=>{const r=this.muted();this.muted(!0);const s=()=>{this.muted(r)};this.playTerminatedQueue_.push(s);const o=this.play();if(Ey(o))return o.catch(a=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${a||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),Ey(i)&&(i=i.catch(n))):e==="muted"&&!this.muted()?i=n():i=this.play(),!!Ey(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let n=e,i="";typeof n!="string"&&(n=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!i&&(i=Tve(this,n)),this.cache_.source=Bn({},e,{src:n,type:i});const r=this.cache_.sources.filter(l=>l.src&&l.src===n),s=[],o=this.$$("source"),a=[];for(let l=0;l<o.length;l++){const u=Ac(o[l]);s.push(u),u.src&&u.src===n&&a.push(u.src)}a.length&&!r.length?this.cache_.sources=s:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=s=>this.updateSourceCaches_(s);const i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=()=>{}),n(r),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?il(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Je.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const i=this.el();let r=Je[this.fsApi_.fullscreenElement]===i;!r&&i.matches&&(r=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in yve)return mve(this.middleware_,this.tech_,e,n);if(e in BF)return FF(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(i){throw an(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in gve)return pve(this.middleware_,this.tech_,e);if(e in BF)return FF(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(an(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(an(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(an(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=il){this.playCallbacks_.push(e);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(Dw||ts);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&i&&this.load();return}const r=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),r===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Aa(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Aa(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Aa(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return SG(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let i=e.end(e.length-1);return i>n&&(i=n),i}volume(e){let n;if(e!==void 0){n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((i,r)=>{function s(){n.off("fullscreenerror",a),n.off("fullscreenchange",o)}function o(){s(),i()}function a(u,c){s(),r(c)}n.one("fullscreenchange",o),n.one("fullscreenerror",a);const l=n.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(i,r))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(n=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](n);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,i)=>{function r(){e.off("fullscreenerror",o),e.off("fullscreenchange",s)}function s(){r(),n()}function o(l,u){r(),i(u)}e.one("fullscreenchange",s),e.one("fullscreenerror",o);const a=e.exitFullscreenHelper_();a&&(a.then(r,r),a.then(n,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Je[this.fsApi_.exitFullscreen]();return e&&il(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Je.documentElement.style.overflow,uo(Je,"keydown",this.boundFullWindowOnEscKey_),Je.documentElement.style.overflow="hidden",Ih(Je.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,kr(Je,"keydown",this.boundFullWindowOnEscKey_),Je.documentElement.style.overflow=this.docOrigOverflow,kw(Je.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&se.documentPictureInPicture){const e=Je.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ht("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),se.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(lG(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",i=>{const r=i.target.querySelector(".video-js");e.parentNode.replaceChild(r,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in Je&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(se.documentPictureInPicture&&se.documentPictureInPicture.window)return se.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Je)return Je.exitPictureInPicture()}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(r=>{const s=r.tagName.toLowerCase();if(r.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?o.indexOf(r.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=o=>e.key.toLowerCase()==="f",muteKey:r=o=>e.key.toLowerCase()==="m",playPauseKey:s=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=n;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const o=ke.getComponent("FullscreenToggle");Je[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),ke.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ke.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let i=0,r=this.options_.techOrder;i<r.length;i++){const s=r[i];let o=Kt.getTech(s);if(o||(o=ke.getComponent(s)),!o){an.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(n=o.canPlayType(e),n))return n}return""}selectSource(e){const n=this.options_.techOrder.map(a=>[a,Kt.getTech(a)]).filter(([a,l])=>l?l.isSupported():(an.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(a,l,u){let c;return a.some(d=>l.some(h=>{if(c=u(d,h),c)return!0})),c};let r;const s=a=>(l,u)=>a(u,l),o=([a,l],u)=>{if(l.canPlaySource(u,this.options_[a.toLowerCase()]))return{source:u,tech:a}};return this.options_.sourceOrder?r=i(e,n,s(o)):r=i(n,e,o),r||!1}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=CG(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),hve(this,i[0],(r,s)=>{if(this.middleware_=s,n||(this.cache_.sources=i),this.updateSourceCaches_(r),this.src_(r)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}fve(s,this.tech_)}),i.length>1){const r=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},s=()=>{this.off("error",r)};this.one("error",r),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return n?yG(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,n){return this.tech_?this.tech_.addSourceElement(e,n):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();il(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),mu(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:i,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:s}=i||{};e&&e.updateContent(),n&&n.updateContent(),r&&r.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Jc("beforeerror").forEach(n=>{const i=n(this,e);if(!(Tl(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const n=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new pi(e),this.addClass("vjs-error"),an.error(`(CODE:${this.error_.code} ${pi.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Jc("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,i;const r=Wn(this,this.reportUserActivity),s=function(d){(d.screenX!==n||d.screenY!==i)&&(n=d.screenX,i=d.screenY,r())},o=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},a=function(d){r(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",s),this.on("mouseup",a),this.on("mouseleave",a);const l=this.getChild("controlBar");l&&!ts&&!bl&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const d=this.options_.inactivityTimeout;d<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();e.forEach(r=>{r!==n&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,i){if(this.tech_)return this.tech_.addTextTrack(e,n,i)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),mu(this)&&this.trigger("languagechange"))}languages(){return Bn(Qn.prototype.options_.languages,this.languages_)}toJSON(){const e=Bn(this.options_),n=e.tracks;e.tracks=[];for(let i=0;i<n.length;i++){let r=n[i];r=Bn(r),r.player=void 0,e.tracks[i]=r}return e}createModal(e,n){n=n||{},n.content=e||"";const i=new vg(this,n);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let i=0;i<AI.length;i++){const r=AI[i],s=this.breakpoints_[r];if(n<=s){if(e===r)return;e&&this.removeClass(FS[e]),this.addClass(FS[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},e_e,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return FS[this.breakpoint_]||""}loadMedia(e,n){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=Bn(e);const{artist:r,artwork:s,description:o,poster:a,src:l,textTracks:u,title:c}=this.cache_.media;!s&&a&&(this.cache_.media.artwork=[{src:a,type:ob(a)}]),i&&this.crossOrigin(i),l&&this.src(l),a&&this.poster(a),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:c,description:o||r||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),n=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),r={src:n,textTracks:i};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:ob(r.poster)}]),r}return Bn(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},i=Ac(e),r=i["data-setup"];if(by(e,"vjs-fill")&&(i.fill=!0),by(e,"vjs-fluid")&&(i.fluid=!0),r!==null)try{Object.assign(i,JSON.parse(r||"{}"))}catch(s){an.error("data-setup",s)}if(Object.assign(n,i),e.hasChildNodes()){const s=e.childNodes;for(let o=0,a=s.length;o<a;o++){const l=s[o],u=l.nodeName.toLowerCase();u==="source"?n.sources.push(Ac(l)):u==="track"&&n.tracks.push(Ac(l))}}return n}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>typeof n=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Xr.names.forEach(function(t){const e=Xr[t];Qn.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Qn.prototype.crossorigin=Qn.prototype.crossOrigin;Qn.players={};const C0=se.navigator;Qn.prototype.options_={techOrder:Kt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:C0&&(C0.languages&&C0.languages[0]||C0.userLanguage||C0.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};nW.forEach(function(t){Qn.prototype[`handleTech${Si(t)}_`]=function(){return this.trigger(t)}});ke.registerComponent("Player",Qn);const ab="plugin",ym="activePlugins_",Xp={},lb=t=>Xp.hasOwnProperty(t),BS=t=>lb(t)?Xp[t]:void 0,iW=(t,e)=>{t[ym]=t[ym]||{},t[ym][e]=!0},ub=(t,e,n)=>{const i=(n?"before":"")+"pluginsetup";t.trigger(i,e),t.trigger(i+":"+e.name,e)},t_e=function(t,e){const n=function(){ub(this,{name:t,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return iW(this,t),ub(this,{name:t,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){n[i]=e[i]}),n},n5=(t,e)=>(e.prototype.name=t,function(...n){ub(this,{name:t,plugin:e,instance:null},!0);const i=new e(this,...n);return this[t]=()=>i,ub(this,i.getEventHash()),i});class Ds{constructor(e){if(this.constructor===Ds)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),a3(this),delete this.trigger,gG(this,this.constructor.defaultState),iW(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,n={}){return yg(this.eventBusEl_,e,this.getEventHash(n))}handleStateChanged(e){}dispose(){const{name:e,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[ym][e]=!1,this.player=this.state=null,n[e]=n5(e,Xp[e])}static isBasic(e){const n=typeof e=="string"?BS(e):e;return typeof n=="function"&&!Ds.prototype.isPrototypeOf(n.prototype)}static registerPlugin(e,n){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(lb(e))an.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Qn.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof n}.`);return Xp[e]=n,e!==ab&&(Ds.isBasic(n)?Qn.prototype[e]=t_e(e,n):Qn.prototype[e]=n5(e,n)),n}static deregisterPlugin(e){if(e===ab)throw new Error("Cannot de-register base plugin.");lb(e)&&(delete Xp[e],delete Qn.prototype[e])}static getPlugins(e=Object.keys(Xp)){let n;return e.forEach(i=>{const r=BS(i);r&&(n=n||{},n[i]=r)}),n}static getPluginVersion(e){const n=BS(e);return n&&n.VERSION||""}}Ds.getPlugin=BS;Ds.BASE_PLUGIN_NAME=ab;Ds.registerPlugin(ab,Ds);Qn.prototype.usingPlugin=function(t){return!!this[ym]&&this[ym][t]===!0};Qn.prototype.hasPlugin=function(t){return!!lb(t)};function n_e(t,e){let n=!1;return function(...i){return n||an.warn(t),n=!0,e.apply(this,i)}}function Oa(t,e,n,i){return n_e(`${e} is deprecated and will be removed in ${t}.0; please use ${n} instead.`,i)}var i_e={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const rW=t=>t.indexOf("#")===0?t.slice(1):t;function be(t,e,n){let i=be.getPlayer(t);if(i)return e&&an.warn(`Player "${t}" is already initialised. Options will not be applied.`),n&&i.ready(n),i;const r=typeof t=="string"?ed("#"+rW(t)):t;if(!gg(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in r?r.getRootNode()instanceof se.ShadowRoot:!1)?r.getRootNode():r.ownerDocument.body;(!r.ownerDocument.defaultView||!o.contains(r))&&an.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),Jc("beforesetup").forEach(l=>{const u=l(r,Bn(e));if(!Tl(u)||Array.isArray(u)){an.error("please return an object in beforesetup hooks");return}e=Bn(e,u)});const a=ke.getComponent("Player");return i=new a(r,e,n),Jc("setup").forEach(l=>l(i)),i}be.hooks_=eu;be.hooks=Jc;be.hook=Nye;be.hookOnce=Oye;be.removeHook=H$;if(se.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&mg()){let t=ed(".vjs-styles-defaults");if(!t){t=dG("vjs-styles-defaults");const e=ed("head");e&&e.insertBefore(t,e.firstChild),hG(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}SI(1,be);be.VERSION=yI;be.options=Qn.prototype.options_;be.getPlayers=()=>Qn.players;be.getPlayer=t=>{const e=Qn.players;let n;if(typeof t=="string"){const i=rW(t),r=e[i];if(r)return r;n=ed("#"+i)}else n=t;if(gg(n)){const{player:i,playerId:r}=n;if(i||e[r])return i||e[r]}};be.getAllPlayers=()=>Object.keys(Qn.players).map(t=>Qn.players[t]).filter(Boolean);be.players=Qn.players;be.getComponent=ke.getComponent;be.registerComponent=(t,e)=>(Kt.isTech(e)&&an.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),ke.registerComponent.call(ke,t,e));be.getTech=Kt.getTech;be.registerTech=Kt.registerTech;be.use=dve;Object.defineProperty(be,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(be.middleware,"TERMINATOR",{value:sb,writeable:!1,enumerable:!0});be.browser=K$;be.obj=Bye;be.mergeOptions=Oa(9,"videojs.mergeOptions","videojs.obj.merge",Bn);be.defineLazyProperty=Oa(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Mw);be.bind=Oa(9,"videojs.bind","native Function.prototype.bind",Wn);be.registerPlugin=Ds.registerPlugin;be.deregisterPlugin=Ds.deregisterPlugin;be.plugin=(t,e)=>(an.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ds.registerPlugin(t,e));be.getPlugins=Ds.getPlugins;be.getPlugin=Ds.getPlugin;be.getPluginVersion=Ds.getPluginVersion;be.addLanguage=function(t,e){return t=(""+t).toLowerCase(),be.options.languages=Bn(be.options.languages,{[t]:e}),be.options.languages[t]};be.log=an;be.createLogger=V$;be.time=eve;be.createTimeRange=Oa(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Aa);be.createTimeRanges=Oa(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Aa);be.formatTime=Oa(9,"videojs.formatTime","videojs.time.formatTime",Yh);be.setFormatTime=Oa(9,"videojs.setFormatTime","videojs.time.setFormatTime",_G);be.resetFormatTime=Oa(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",xG);be.parseUrl=Oa(9,"videojs.parseUrl","videojs.url.parseUrl",c3);be.isCrossOrigin=Oa(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",zw);be.EventTarget=co;be.any=o3;be.on=uo;be.one=Fw;be.off=kr;be.trigger=yg;be.xhr=WV;be.TextTrack=C_;be.AudioTrack=wG;be.VideoTrack=EG;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{be[t]=function(){return an.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),uG[t].apply(null,arguments)}});be.computedStyle=Oa(9,"videojs.computedStyle","videojs.dom.computedStyle",Zm);be.dom=uG;be.fn=Xye;be.num=Dve;be.str=Zye;be.url=uve;be.Error=i_e;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class r_e{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(i){n.enabled_(i)}}),n}}class cb extends be.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const i=this.levels_.length;return n=new r_e(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){n=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,i=this.length;n<i;n++){const r=this[n];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}cb.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in cb.prototype.allowedEvents_)cb.prototype["on"+t]=null;var sW="4.1.0";const s_e=function(t,e){const n=t.qualityLevels,i=new cb,r=function(){i.dispose(),t.qualityLevels=n,t.off("dispose",r)};return t.on("dispose",r),t.qualityLevels=()=>i,t.qualityLevels.VERSION=sW,i},oW=function(t){return s_e(this,be.obj.merge({},t))};be.registerPlugin("qualityLevels",oW);oW.VERSION=sW;/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const Ss=Sw,db=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,ta=t=>be.log.debug?be.log.debug.bind(be,"VHS:",`${t} >`):function(){};function In(...t){const e=be.obj||be;return(e.merge||e.mergeOptions).apply(e,t)}function vr(...t){const e=be.time||be;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function o_e(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let n=0;n<t.length;n++){const i=t.start(n),r=t.end(n);e+=`${i} --> ${r}. Duration (${r-i})
`}return e}const rl=1/30,sl=rl*3,aW=function(t,e){const n=[];let i;if(t&&t.length)for(i=0;i<t.length;i++)e(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return vr(n)},Yp=function(t,e){return aW(t,function(n,i){return n-sl<=e&&i+sl>=e})},v1=function(t,e){return aW(t,function(n){return n-rl>=e})},a_e=function(t){if(t.length<2)return vr();const e=[];for(let n=1;n<t.length;n++){const i=t.end(n-1),r=t.start(n);e.push([i,r])}return vr(e)},l_e=function(t,e){let n=null,i=null,r=0;const s=[],o=[];if(!t||!t.length||!e||!e.length)return vr();let a=t.length;for(;a--;)s.push({time:t.start(a),type:"start"}),s.push({time:t.end(a),type:"end"});for(a=e.length;a--;)s.push({time:e.start(a),type:"start"}),s.push({time:e.end(a),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),a=0;a<s.length;a++)s[a].type==="start"?(r++,r===2&&(n=s[a].time)):s[a].type==="end"&&(r--,r===1&&(i=s[a].time)),n!==null&&i!==null&&(o.push([n,i]),n=null,i=null);return vr(o)},lW=t=>{const e=[];if(!t||!t.length)return"";for(let n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},u_e=function(t,e,n=1){return((t.length?t.end(t.length-1):0)-e)/n},vh=t=>{const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},c_e=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1},CA=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},M3=function(t,e){let n=0;if(!t||!t.length)return n;for(let i=0;i<t.length;i++){const r=t.start(i),s=t.end(i);if(!(e>s)){if(e>r&&e<=s){n+=s-e;continue}n+=s-r}}return n},P3=(t,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(i){n+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=t.partTargetDuration)}),n},MI=t=>(t.segments||[]).reduce((e,n,i)=>(n.parts?n.parts.forEach(function(r,s){e.push({duration:r.duration,segmentIndex:i,partIndex:s,part:r,segment:n})}):e.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),e),[]),uW=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},cW=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:n}=t;let i=(n||[]).reduce((r,s)=>r+(s.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},dW=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const n=uW(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},d_e=function(t,e){let n=0,i=e-t.mediaSequence,r=t.segments[i];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=t.segments[i],typeof r.end<"u")return{result:n+r.end,precise:!0};if(n+=P3(t,r),typeof r.start<"u")return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},h_e=function(t,e){let n=0,i,r=e-t.mediaSequence;for(;r<t.segments.length;r++){if(i=t.segments[r],typeof i.start<"u")return{result:i.start-n,precise:!0};if(n+=P3(t,i),typeof i.end<"u")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},hW=function(t,e,n){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const i=d_e(t,e);if(i.precise)return i.result;const r=h_e(t,e);return r.precise?r.result:i.result+n},fW=function(t,e,n){if(!t)return 0;if(typeof n!="number"&&(n=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return se.Infinity}return hW(t,e,n)},Cy=function({defaultDuration:t,durationList:e,startIndex:n,endIndex:i}){let r=0;if(n>i&&([n,i]=[i,n]),n<0){for(let s=n;s<Math.min(0,i);s++)r+=t;n=0}for(let s=n;s<i;s++)r+=e[s].duration;return r},pW=function(t,e,n,i){if(!t||!t.segments)return null;if(t.endList)return fW(t);if(e===null)return null;e=e||0;let r=hW(t,t.mediaSequence+t.segments.length,e);return n&&(i=typeof i=="number"?i:dW(null,t),r-=i),Math.max(0,r)},f_e=function(t,e,n){const r=e||0;let s=pW(t,e,!0,n);return s===null?vr():(s<r&&(s=r),vr(r,s))},p_e=function({playlist:t,currentTime:e,startingSegmentIndex:n,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let o=e-r;const a=MI(t);let l=0;for(let u=0;u<a.length;u++){const c=a[u];if(n===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(o<0){if(l>0)for(let u=l-1;u>=0;u--){const c=a[u];if(o+=c.duration,s){if(o<0)continue}else if(o+rl<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:r-Cy({defaultDuration:t.targetDuration,durationList:a,startIndex:l,endIndex:u})}}return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(o-=t.targetDuration,o<0)return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<a.length;u++){const c=a[u];o-=c.duration;const d=c.duration>rl,h=o===0,m=d&&o+rl>=0;if(!((h||m)&&u!==a.length-1)){if(s){if(o>0)continue}else if(o-rl>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:r+Cy({defaultDuration:t.targetDuration,durationList:a,startIndex:l,endIndex:u})}}}return{segmentIndex:a[a.length-1].segmentIndex,partIndex:a[a.length-1].partIndex,startTime:e}},mW=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},I3=function(t){return t.excludeUntil&&t.excludeUntil===1/0},$w=function(t){const e=mW(t);return!t.disabled&&!e},m_e=function(t){return t.disabled},g_e=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},gW=function(t,e){return e.attributes&&e.attributes[t]},y_e=function(t,e,n,i=0){return gW("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-i*8)/e:NaN},PI=(t,e)=>{if(t.playlists.length===1)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(i=>$w(i)?(i.attributes.BANDWIDTH||0)<n:!1).length===0},R3=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),i5=function(t,e){const n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let i=!1;for(const r in n){for(const s in n[r])if(i=e(n[r][s]),i)break;if(i)break}return!!i},I_=t=>{if(!t||!t.playlists||!t.playlists.length)return i5(t,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<t.playlists.length;e++){const n=t.playlists[e],i=n.attributes&&n.attributes.CODECS;if(!(i&&i.split(",").every(s=>QV(s))||i5(t,s=>R3(n,s))))return!1}return!0};var Ts={liveEdgeDelay:dW,duration:fW,seekable:f_e,getMediaInfoForTime:p_e,isEnabled:$w,isDisabled:m_e,isExcluded:mW,isIncompatible:I3,playlistEnd:pW,isAes:g_e,hasAttribute:gW,estimateSegmentRequestTime:y_e,isLowestEnabledRendition:PI,isAudioOnly:I_,playlistMatch:R3,segmentDurationWithParts:P3};const{log:yW}=be,vm=(t,e)=>`${t}-${e}`,vW=(t,e,n)=>`placeholder-uri-${t}-${e}-${n}`,v_e=({onwarn:t,oninfo:e,manifestString:n,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const o=new Lge;t&&o.on("warn",t),e&&o.on("info",e),i.forEach(u=>o.addParser(u)),r.forEach(u=>o.addTagMapper(u)),o.push(n),o.end();const a=o.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){a.hasOwnProperty(u)&&delete a[u]}),a.segments&&a.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!a.targetDuration){let u=10;a.segments&&a.segments.length&&(u=a.segments.reduce((c,d)=>Math.max(c,d.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${u}`}),a.targetDuration=u}const l=uW(a);if(l.length&&!a.partTargetDuration){const u=l.reduce((c,d)=>Math.max(c,d.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${u}`}),yW.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),a.partTargetDuration=u}return a},Sg=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(t.mediaGroups[n])for(const i in t.mediaGroups[n])for(const r in t.mediaGroups[n][i]){const s=t.mediaGroups[n][i][r];e(s,n,i,r)}})},_W=({playlist:t,uri:e,id:n})=>{t.id=n,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},__e=t=>{let e=t.playlists.length;for(;e--;){const n=t.playlists[e];_W({playlist:n,id:vm(e,n.uri)}),n.resolvedUri=Ss(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||yW.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},x_e=t=>{Sg(t,e=>{e.uri&&(e.resolvedUri=Ss(t.uri,e.uri))})},S_e=(t,e)=>{const n=vm(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:se.location.href,resolvedUri:se.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[e]=i.playlists[0],i},xW=(t,e,n=vW)=>{t.uri=e;for(let r=0;r<t.playlists.length;r++)if(!t.playlists[r].uri){const s=`placeholder-uri-${r}`;t.playlists[r].uri=s}const i=I_(t);Sg(t,(r,s,o,a)=>{if(!r.playlists||!r.playlists.length){if(i&&s==="AUDIO"&&!r.uri)for(let l=0;l<t.playlists.length;l++){const u=t.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===o)return}r.playlists=[ve({},r)]}r.playlists.forEach(function(l,u){const c=n(s,o,a,l),d=vm(u,c);l.uri?l.resolvedUri=l.resolvedUri||Ss(t.uri,l.uri):(l.uri=u===0?c:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},t.playlists[l.id]=l,t.playlists[l.uri]=l})}),__e(t),x_e(t)};class r5{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[n]=e;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,i=n.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((r,s)=>(r.set(s.id,s),r),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},n=[];this.pendingDateRanges_.forEach((i,r)=>{if(!this.processedDateRanges_.has(r)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),n.push(i),!!i.class))if(e[i.class]){const s=e[i.class].push(i);i.classListIndex=s-1}else e[i.class]=[i],i.classListIndex=0});for(const i of n){const r=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&r[i.classListIndex+1]?i.endTime=r[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,r)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(r)})}}const SW=22,kh=({requestType:t,request:e,error:n,parseFailure:i})=>{const r=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:t},a=r&&!s||i;if(n&&s)o.error=ve({},n),o.errorType=be.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=be.Error.NetworkRequestAborted;else if(e.timedout)o.erroType=be.Error.NetworkRequestTimeout;else if(a){const l=i?be.Error.NetworkBodyParserFailed:be.Error.NetworkBadStatus;o.errorType=l,o.status=e.status,o.headers=e.headers}return o},{EventTarget:T_e}=be,b_e=(t,e)=>{if(e.endList||!e.serverControl)return t;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let r=e.mediaSequence+e.segments.length;if(i){const s=i.parts||[],o=cW(e)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&r--}n._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const i=new se.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){n.hasOwnProperty(r)&&i.searchParams.set(r,n[r])}),t=i.toString()}return t},w_e=(t,e)=>{if(!t)return e;const n=In(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(let i=0;i<e.parts.length;i++)t.parts&&t.parts[i]&&(n.parts[i]=In(t.parts[i],e.parts[i]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},E_e=(t,e,n)=>{const i=t.slice(),r=e.slice();n=n||0;const s=[];let o;for(let a=0;a<r.length;a++){const l=i[a+n],u=r[a];l?(o=l.map||o,s.push(w_e(l,u))):(o&&!u.map&&(u.map=o),s.push(u))}return s},TW=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=Ss(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Ss(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Ss(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Ss(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=Ss(e,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=Ss(e,n.uri))})},bW=function(t){const e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return e}n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},wW=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,II=(t,e,n=wW)=>{const i=In(t,{}),r=i.playlists[e.id];if(!r||n(r,e))return null;e.segments=bW(e);const s=In(r,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}s.segments=E_e(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}s.segments.forEach(o=>{TW(o,s.resolvedUri)});for(let o=0;o<i.playlists.length;o++)i.playlists[o].id===e.id&&(i.playlists[o]=s);return i.playlists[e.id]=s,i.playlists[e.uri]=s,Sg(t,(o,a,l,u)=>{if(o.playlists)for(let c=0;c<o.playlists.length;c++)e.id===o.playlists[c].id&&(o.playlists[c]=s)}),i},RI=(t,e)=>{const n=t.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return e&&s?s*1e3:(t.partTargetDuration||t.targetDuration||10)*500},s5=(t,e,n)=>{if(!t)return;const i=[];return t.forEach(r=>{if(!r.attributes)return;const{BANDWIDTH:s,RESOLUTION:o,CODECS:a}=r.attributes;i.push({id:r.id,bandwidth:s,resolution:o,codecs:a})}),{type:e,isLive:n,renditions:i}};class Kp extends T_e{constructor(e,n,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=ta("PlaylistLoader");const{withCredentials:r=!1}=i;this.src=e,this.vhs_=n,this.withCredentials=r,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const s=n.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new r5,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let n=Ss(this.main.uri,e.uri);this.llhls&&(n=b_e(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,r)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,i){const{uri:r,id:s}=n;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:kh({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:n}){try{return v_e({onwarn:({message:i})=>this.logger_(`m3u8-parser warn for ${e}: ${i}`),oninfo:({message:i})=>this.logger_(`m3u8-parser info for ${e}: ${i}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(i){this.error=i,this.error.metadata={errorType:be.Error.StreamingHlsPlaylistParserError,error:i}}}haveMetadata({playlistString:e,playlistObject:n,url:i,id:r}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:s});const o=n||this.parseManifest_({url:i,manifestString:e});o.lastRequest=Date.now(),_W({playlist:o,uri:i,id:r});const a=II(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,a?(this.main=a,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(RI(this.media(),!!a)),s.parsedPlaylist=s5(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),se.clearTimeout(this.mediaUpdateTimeout),se.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new r5,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(se.clearTimeout(this.finalRenditionTimeout),n){const a=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=se.setTimeout(this.media.bind(this,e,!1),a);return}const i=this.state,r=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(RI(e,!0)),!r)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=db(e.resolvedUri,l),a)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(se.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(se.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=se.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(se.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=se.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=se.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,i)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:kh({requestType:i.requestType,request:i,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=db(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});const r=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=s5(r.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,xW(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=bW(i),i.segments.forEach(r=>{TW(r,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||se.location.href;this.main=S_e(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,n){const i=this.main,r=e.ID;let s=i.playlists.length;for(;s--;){const o=i.playlists[s];if(o.attributes["PATHWAY-ID"]===r){const a=o.resolvedUri,l=o.id;if(n){const u=this.createCloneURI_(o.resolvedUri,e),c=vm(r,u),d=this.createCloneAttributes_(r,o.attributes),h=this.createClonePlaylist_(o,c,e,d);i.playlists[s]=h,i.playlists[c]=h,i.playlists[u]=h}else i.playlists.splice(s,1);delete i.playlists[l],delete i.playlists[a]}}this.updateOrDeleteCloneMedia(e,n)}updateOrDeleteCloneMedia(e,n){const i=this.main,r=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||!i.mediaGroups[s][r])){for(const o in i.mediaGroups[s])if(o===r){for(const a in i.mediaGroups[s][o])i.mediaGroups[s][o][a].playlists.forEach((u,c)=>{const d=i.playlists[u.id],h=d.id,m=d.resolvedUri;delete i.playlists[h],delete i.playlists[m]});delete i.mediaGroups[s][o]}}}),n&&this.createClonedMediaGroups_(e)}addClonePathway(e,n={}){const i=this.main,r=i.playlists.length,s=this.createCloneURI_(n.resolvedUri,e),o=vm(e.ID,s),a=this.createCloneAttributes_(e.ID,n.attributes),l=this.createClonePlaylist_(n,o,e,a);i.playlists[r]=l,i.playlists[o]=l,i.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const n=e.ID,i=e["BASE-ID"],r=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!r.mediaGroups[s]||r.mediaGroups[s][n]))for(const o in r.mediaGroups[s]){if(o===i)r.mediaGroups[s][n]={};else continue;for(const a in r.mediaGroups[s][o]){const l=r.mediaGroups[s][o][a];r.mediaGroups[s][n][a]=ve({},l);const u=r.mediaGroups[s][n][a],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((d,h)=>{const m=r.playlists[d.id],g=vW(s,n,a),v=vm(n,g);if(m&&!r.playlists[v]){const _=this.createClonePlaylist_(m,v,e),y=_.resolvedUri;r.playlists[v]=_,r.playlists[y]=_}u.playlists[h]=this.createClonePlaylist_(d,v,e)})}}})}createClonePlaylist_(e,n,i,r){const s=this.createCloneURI_(e.resolvedUri,i),o={resolvedUri:s,uri:s,id:n};return e.segments&&(o.segments=[]),r&&(o.attributes=r),In(e,o)}createCloneURI_(e,n){const i=new URL(e);i.hostname=n["URI-REPLACEMENT"].HOST;const r=n["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(r))i.searchParams.set(s,r[s]);return i.href}createCloneAttributes_(e,n){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{n[r]&&(i[r]=e)}),i}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const i in e.contentProtection){const r=e.contentProtection[i].attributes.keyId;r&&n.add(r.toLowerCase())}return n}}}const DI=function(t,e,n,i){const r=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),i(e,t)},C_e=(t,e)=>{if(!t||!t.size)return;let n=e;return t.forEach(i=>{n=i(n)}),n},A_e=(t,e,n,i)=>{!t||!t.size||t.forEach(r=>{r(e,n,i)})},EW=function(){const t=function e(n,i){n=In({timeout:45e3},n);const r=e.beforeRequest||be.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||be.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||be.Vhs.xhr._responseCallbackSet;r&&typeof r=="function"&&(be.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(r));const a=be.Vhs.xhr.original===!0?be.xhr:be.Vhs.xhr,l=C_e(s,n);s.delete(r);const u=a(l||n,function(d,h){return A_e(o,u,d,h),DI(u,d,h,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=n.uri,u.requestType=n.requestType,u.requestTime=Date.now(),u};return t.original=!0,t},M_e=function(t){let e;const n=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=se.BigInt(t.offset)+se.BigInt(t.length)-se.BigInt(1):e=t.offset+t.length-1,"bytes="+n+"-"+e},kI=function(t){const e={};return t.byterange&&(e.Range=M_e(t.byterange)),e},P_e=function(t,e){return t.start(e)+"-"+t.end(e)},I_e=function(t,e){const n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},R_e=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},CW=function(t){const e={};return Object.keys(t).forEach(n=>{const i=t[n];JV(i)?e[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[n]=i}),e},hb=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},AW=function(t){return t.resolvedUri},MW=t=>{const e=Array.prototype.slice.call(t),n=16;let i="",r,s;for(let o=0;o<e.length/n;o++)r=e.slice(o*n,o*n+n).map(I_e).join(""),s=e.slice(o*n,o*n+n).map(R_e).join(""),i+=r+" "+s+`
`;return i},D_e=({bytes:t})=>MW(t),k_e=t=>{let e="",n;for(n=0;n<t.length;n++)e+=P_e(t,n)+" ";return e};var L_e=Object.freeze({__proto__:null,createTransferableMessage:CW,initSegmentId:hb,segmentKeyId:AW,hexDump:MW,tagDump:D_e,textRanges:k_e});const PW=.25,N_e=(t,e)=>{if(!e.dateTimeObject)return null;const n=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+n,s=t-r;return new Date(e.dateTimeObject.getTime()+s*1e3)},O_e=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,U_e=(t,e)=>{let n;try{n=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(n<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(n<u)break}const r=e.segments[e.segments.length-1],s=r.dateTimeObject,o=r.videoTimingInfo?O_e(r.videoTimingInfo):r.duration+r.duration*PW,a=new Date(s.getTime()+o*1e3);return n>a?null:(n>new Date(s)&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Ts.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},F_e=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let n=0,i;for(let s=0;s<e.segments.length&&(i=e.segments[s],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(t<=n));s++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+r.duration*PW)return null;i=r}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},B_e=(t,e)=>{let n,i;try{n=new Date(t),i=new Date(e)}catch{}const r=n.getTime();return(i.getTime()-r)/1e3},z_e=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},H_e=({playlist:t,time:e=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const i=F_e(e,t);if(!i)return n({message:"valid programTime was not found"});if(i.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:e},s=N_e(e,i.segment);return s&&(r.programDateTime=s.toISOString()),n(null,r)},IW=({programTime:t,playlist:e,retryCount:n=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!i)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!z_e(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const a=U_e(t,e);if(!a)return o({message:`${t} was not found in the stream`});const l=a.segment,u=B_e(l.dateTimeObject,t);if(a.type==="estimate"){if(n===0)return o({message:`${t} is not buffered yet. Try again`});i(a.estimatedStart+u),s.one("seeked",()=>{IW({programTime:t,playlist:e,retryCount:n-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:o})});return}const c=l.start+u,d=()=>o(null,s.currentTime());s.one("seeked",d),r&&s.pause(),i(c)},AA=(t,e)=>{if(t.readyState===4)return e()},V_e=(t,e,n,i)=>{let r=[],s,o=!1;const a=function(d,h,m,g){return h.abort(),o=!0,n(d,h,m,g)},l=function(d,h){if(o)return;if(d)return d.metadata=kh({requestType:i,request:h,error:d}),a(d,h,"",r);const m=h.responseText.substring(r&&r.byteLength||0,h.responseText.length);if(r=jge(r,e$(m,!0)),s=s||ey(r),r.length<10||s&&r.length<s+2)return AA(h,()=>a(d,h,"",r));const g=Qk(r);return g==="ts"&&r.length<188?AA(h,()=>a(d,h,"",r)):!g&&r.length<376?AA(h,()=>a(d,h,"",r)):a(null,h,g,r)},c=e({uri:t,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:h,loaded:m}){return DI(d,null,{statusCode:d.status},l)})}},function(d,h){return DI(c,d,h,l)});return c},{EventTarget:$_e}=be,o5=function(t,e){if(!wW(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let n=0;n<t.segments.length;n++){const i=t.segments[n],r=e.segments[n];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,o=r.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}return!0},G_e=(t,e,n,i)=>{const r=i.attributes.NAME||n;return`placeholder-uri-${t}-${e}-${r}`},W_e=({mainXml:t,srcUrl:e,clientOffset:n,sidxMapping:i,previousManifest:r})=>{const s=fye(t,{manifestUri:e,clientOffset:n,sidxMapping:i,previousManifest:r});return xW(s,e,G_e),s},j_e=(t,e)=>{Sg(t,(n,i,r,s)=>{(!e.mediaGroups[i][r]||!(s in e.mediaGroups[i][r]))&&delete t.mediaGroups[i][r][s]})},q_e=(t,e,n)=>{let i=!0,r=In(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const o=e.playlists[s];if(o.sidx){const l=Ew(o.sidx);n&&n[l]&&n[l].sidx&&Xk(o,n[l].sidx,o.sidx.resolvedUri)}const a=II(r,o,o5);a&&(r=a,i=!1)}return Sg(e,(s,o,a,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=II(r,s.playlists[0],o5);c&&(r=c,l in r.mediaGroups[o][a]||(r.mediaGroups[o][a][l]=s),r.mediaGroups[o][a][l].playlists[0]=r.playlists[u],i=!1)}}),j_e(r,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(i=!1),i?null:r},X_e=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,a5=(t,e)=>{const n={};for(const i in t){const s=t[i].sidx;if(s){const o=Ew(s);if(!e[o])break;const a=e[o].sidxInfo;X_e(a,s)&&(n[o]=e[o])}}return n},Y_e=(t,e)=>{let i=a5(t.playlists,e);return Sg(t,(r,s,o,a)=>{if(r.playlists&&r.playlists.length){const l=r.playlists;i=In(i,a5(l,e))}}),i};class LI extends $_e{constructor(e,n,i={},r){super(),this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:s=!1}=i;if(this.vhs_=n,this.withCredentials=s,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=ta("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,n,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,n,i){const r=e.sidx&&Ew(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){this.mediaRequest_=se.setTimeout(()=>i(!1),0);return}const s=db(e.sidx.resolvedUri),o=(l,u)=>{if(this.requestErrored_(l,u,n))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:d}=u;let h;try{h=_ye(Lt(u.response).subarray(8))}catch(m){m.metadata=kh({requestType:d,request:u,parseFailure:!0}),this.requestErrored_(m,u,n);return}return c[r]={sidxInfo:e.sidx,sidx:h},Xk(e,h,e.sidx.resolvedUri),i(!0)},a="dash-sidx";this.request=V_e(s,this.vhs_.xhr,(l,u,c,d)=>{if(l)return o(l,u);if(!c||c!=="mp4"){const g=c||"unknown";return o({status:u.status,message:`Unsupported ${g} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:h,length:m}=e.sidx.byterange;if(d.length>=m+h)return o(l,{response:d.subarray(h,h+m),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:kI({byterange:e.sidx.byterange})},o)},a)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},se.clearTimeout(this.minimumUpdatePeriodTimeout_),se.clearTimeout(this.mediaRequest_),se.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,r=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),se.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(se.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){se.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=se.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=se.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,r)=>{if(i){const{requestType:o}=r;i.metadata=kh({requestType:o,request:r,error:i})}if(this.requestErrored_(i,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const s=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=db(this.mainPlaylistLoader_.srcUrl,r),s){this.handleMain_(),this.syncClientServerClock_(()=>e(r,s));return}return e(r,s)})}syncClientServerClock_(e){const n=pye(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Ss(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,r)=>{if(!this.request)return;if(i){const{requestType:o}=r;return this.error.metadata=kh({requestType:o,request:r,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;n.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(r.responseHeaders.date):s=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let i;try{i=W_e({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:be.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(i=q_e(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:s,endList:o}=i,a=[];i.playlists.forEach(u=>{a.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!o,renditions:a};n.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(se.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=se.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Y_e(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==n[e];if(i?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const r=()=>{this.media().endList||(this.mediaUpdateTimeout=se.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},RI(this.media(),!!i)))};r()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const i in e.contentProtection){const r=e.contentProtection[i].attributes["cenc:default_KID"];r&&n.add(r.replace(/-/g,"").toLowerCase())}return n}}}var ir={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const K_e=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer},RW=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},Q_e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}},DW=function(t){return function(){const e=Q_e(t),n=RW(new Worker(e));n.objURL=e;const i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},n}},kW=function(t){return`var browserWorkerPolyFill = ${RW.toString()};
browserWorkerPolyFill(self);
`+t},LW=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},Z_e=kW(LW(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var T={};this.on=function(M,R){T[M]||(T[M]=[]),T[M]=T[M].concat(R)},this.off=function(M,R){var I;return T[M]?(I=T[M].indexOf(R),T[M]=T[M].slice(),T[M].splice(I,1),I>-1):!1},this.trigger=function(M){var R,I,N,F;if(R=T[M],!!R)if(arguments.length===2)for(N=R.length,I=0;I<N;++I)R[I].call(this,arguments[1]);else{for(F=[],I=arguments.length,I=1;I<arguments.length;++I)F.push(arguments[I]);for(N=R.length,I=0;I<N;++I)R[I].apply(this,F)}},this.dispose=function(){T={}}}};e.prototype.pipe=function(T){return this.on("data",function(M){T.push(M)}),this.on("done",function(M){T.flush(M)}),this.on("partialdone",function(M){T.partialFlush(M)}),this.on("endedtimeline",function(M){T.endTimeline(M)}),this.on("reset",function(M){T.reset(M)}),T},e.prototype.push=function(T){this.trigger("data",T)},e.prototype.flush=function(T){this.trigger("done",T)},e.prototype.partialFlush=function(T){this.trigger("partialdone",T)},e.prototype.endTimeline=function(T){this.trigger("endedtimeline",T)},e.prototype.reset=function(T){this.trigger("reset",T)};var n=e,i=Math.pow(2,32),r=function(T){var M=new DataView(T.buffer,T.byteOffset,T.byteLength),R;return M.getBigUint64?(R=M.getBigUint64(0),R<Number.MAX_SAFE_INTEGER?Number(R):R):M.getUint32(0)*i+M.getUint32(4)},s={getUint64:r,MAX_UINT32:i},o=s.MAX_UINT32,a,l,u,c,d,h,m,g,v,_,y,S,x,w,P,A,D,O,H,E,k,W,G,Y,ie,Q,oe,z,ee,te,ce,Te,Ue,he,xe,Fe;(function(){var T;if(G={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(T in G)G.hasOwnProperty(T)&&(G[T]=[T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2),T.charCodeAt(3)]);Y=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Q=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ie=new Uint8Array([0,0,0,1]),oe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),z=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ee={video:oe,audio:z},Te=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ce=new Uint8Array([0,0,0,0,0,0,0,0]),Ue=new Uint8Array([0,0,0,0,0,0,0,0]),he=Ue,xe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Fe=Ue,te=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(T){var M=[],R=0,I,N,F;for(I=1;I<arguments.length;I++)M.push(arguments[I]);for(I=M.length;I--;)R+=M[I].byteLength;for(N=new Uint8Array(R+8),F=new DataView(N.buffer,N.byteOffset,N.byteLength),F.setUint32(0,N.byteLength),N.set(T,4),I=0,R=8;I<M.length;I++)N.set(M[I],R),R+=M[I].byteLength;return N},l=function(){return a(G.dinf,a(G.dref,Te))},u=function(T){return a(G.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,T.audioobjecttype<<3|T.samplingfrequencyindex>>>1,T.samplingfrequencyindex<<7|T.channelcount<<3,6,1,2]))},c=function(){return a(G.ftyp,Y,ie,Y,Q)},A=function(T){return a(G.hdlr,ee[T])},d=function(T){return a(G.mdat,T)},P=function(T){var M=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,T.duration>>>24&255,T.duration>>>16&255,T.duration>>>8&255,T.duration&255,85,196,0,0]);return T.samplerate&&(M[12]=T.samplerate>>>24&255,M[13]=T.samplerate>>>16&255,M[14]=T.samplerate>>>8&255,M[15]=T.samplerate&255),a(G.mdhd,M)},w=function(T){return a(G.mdia,P(T),A(T.type),m(T))},h=function(T){return a(G.mfhd,new Uint8Array([0,0,0,0,(T&4278190080)>>24,(T&16711680)>>16,(T&65280)>>8,T&255]))},m=function(T){return a(G.minf,T.type==="video"?a(G.vmhd,te):a(G.smhd,ce),l(),O(T))},g=function(T,M){for(var R=[],I=M.length;I--;)R[I]=E(M[I]);return a.apply(null,[G.moof,h(T)].concat(R))},v=function(T){for(var M=T.length,R=[];M--;)R[M]=S(T[M]);return a.apply(null,[G.moov,y(4294967295)].concat(R).concat(_(T)))},_=function(T){for(var M=T.length,R=[];M--;)R[M]=k(T[M]);return a.apply(null,[G.mvex].concat(R))},y=function(T){var M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(T&4278190080)>>24,(T&16711680)>>16,(T&65280)>>8,T&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(G.mvhd,M)},D=function(T){var M=T.samples||[],R=new Uint8Array(4+M.length),I,N;for(N=0;N<M.length;N++)I=M[N].flags,R[N+4]=I.dependsOn<<4|I.isDependedOn<<2|I.hasRedundancy;return a(G.sdtp,R)},O=function(T){return a(G.stbl,H(T),a(G.stts,Fe),a(G.stsc,he),a(G.stsz,xe),a(G.stco,Ue))},function(){var T,M;H=function(R){return a(G.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),R.type==="video"?T(R):M(R))},T=function(R){var I=R.sps||[],N=R.pps||[],F=[],K=[],Z,ne;for(Z=0;Z<I.length;Z++)F.push((I[Z].byteLength&65280)>>>8),F.push(I[Z].byteLength&255),F=F.concat(Array.prototype.slice.call(I[Z]));for(Z=0;Z<N.length;Z++)K.push((N[Z].byteLength&65280)>>>8),K.push(N[Z].byteLength&255),K=K.concat(Array.prototype.slice.call(N[Z]));if(ne=[G.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(R.width&65280)>>8,R.width&255,(R.height&65280)>>8,R.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(G.avcC,new Uint8Array([1,R.profileIdc,R.profileCompatibility,R.levelIdc,255].concat([I.length],F,[N.length],K))),a(G.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],R.sarRatio){var ae=R.sarRatio[0],pe=R.sarRatio[1];ne.push(a(G.pasp,new Uint8Array([(ae&4278190080)>>24,(ae&16711680)>>16,(ae&65280)>>8,ae&255,(pe&4278190080)>>24,(pe&16711680)>>16,(pe&65280)>>8,pe&255])))}return a.apply(null,ne)},M=function(R){return a(G.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(R.channelcount&65280)>>8,R.channelcount&255,(R.samplesize&65280)>>8,R.samplesize&255,0,0,0,0,(R.samplerate&65280)>>8,R.samplerate&255,0,0]),u(R))}}(),x=function(T){var M=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(T.id&4278190080)>>24,(T.id&16711680)>>16,(T.id&65280)>>8,T.id&255,0,0,0,0,(T.duration&4278190080)>>24,(T.duration&16711680)>>16,(T.duration&65280)>>8,T.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(T.width&65280)>>8,T.width&255,0,0,(T.height&65280)>>8,T.height&255,0,0]);return a(G.tkhd,M)},E=function(T){var M,R,I,N,F,K,Z;return M=a(G.tfhd,new Uint8Array([0,0,0,58,(T.id&4278190080)>>24,(T.id&16711680)>>16,(T.id&65280)>>8,T.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),K=Math.floor(T.baseMediaDecodeTime/o),Z=Math.floor(T.baseMediaDecodeTime%o),R=a(G.tfdt,new Uint8Array([1,0,0,0,K>>>24&255,K>>>16&255,K>>>8&255,K&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z&255])),F=32+20+8+16+8+8,T.type==="audio"?(I=W(T,F),a(G.traf,M,R,I)):(N=D(T),I=W(T,N.length+F),a(G.traf,M,R,I,N))},S=function(T){return T.duration=T.duration||4294967295,a(G.trak,x(T),w(T))},k=function(T){var M=new Uint8Array([0,0,0,0,(T.id&4278190080)>>24,(T.id&16711680)>>16,(T.id&65280)>>8,T.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return T.type!=="video"&&(M[M.length-1]=0),a(G.trex,M)},function(){var T,M,R;R=function(I,N){var F=0,K=0,Z=0,ne=0;return I.length&&(I[0].duration!==void 0&&(F=1),I[0].size!==void 0&&(K=2),I[0].flags!==void 0&&(Z=4),I[0].compositionTimeOffset!==void 0&&(ne=8)),[0,0,F|K|Z|ne,1,(I.length&4278190080)>>>24,(I.length&16711680)>>>16,(I.length&65280)>>>8,I.length&255,(N&4278190080)>>>24,(N&16711680)>>>16,(N&65280)>>>8,N&255]},M=function(I,N){var F,K,Z,ne,ae,pe;for(ne=I.samples||[],N+=8+12+16*ne.length,Z=R(ne,N),K=new Uint8Array(Z.length+ne.length*16),K.set(Z),F=Z.length,pe=0;pe<ne.length;pe++)ae=ne[pe],K[F++]=(ae.duration&4278190080)>>>24,K[F++]=(ae.duration&16711680)>>>16,K[F++]=(ae.duration&65280)>>>8,K[F++]=ae.duration&255,K[F++]=(ae.size&4278190080)>>>24,K[F++]=(ae.size&16711680)>>>16,K[F++]=(ae.size&65280)>>>8,K[F++]=ae.size&255,K[F++]=ae.flags.isLeading<<2|ae.flags.dependsOn,K[F++]=ae.flags.isDependedOn<<6|ae.flags.hasRedundancy<<4|ae.flags.paddingValue<<1|ae.flags.isNonSyncSample,K[F++]=ae.flags.degradationPriority&61440,K[F++]=ae.flags.degradationPriority&15,K[F++]=(ae.compositionTimeOffset&4278190080)>>>24,K[F++]=(ae.compositionTimeOffset&16711680)>>>16,K[F++]=(ae.compositionTimeOffset&65280)>>>8,K[F++]=ae.compositionTimeOffset&255;return a(G.trun,K)},T=function(I,N){var F,K,Z,ne,ae,pe;for(ne=I.samples||[],N+=8+12+8*ne.length,Z=R(ne,N),F=new Uint8Array(Z.length+ne.length*8),F.set(Z),K=Z.length,pe=0;pe<ne.length;pe++)ae=ne[pe],F[K++]=(ae.duration&4278190080)>>>24,F[K++]=(ae.duration&16711680)>>>16,F[K++]=(ae.duration&65280)>>>8,F[K++]=ae.duration&255,F[K++]=(ae.size&4278190080)>>>24,F[K++]=(ae.size&16711680)>>>16,F[K++]=(ae.size&65280)>>>8,F[K++]=ae.size&255;return a(G.trun,F)},W=function(I,N){return I.type==="audio"?T(I,N):M(I,N)}}();var He={ftyp:c,mdat:d,moof:g,moov:v,initSegment:function(T){var M=c(),R=v(T),I;return I=new Uint8Array(M.byteLength+R.byteLength),I.set(M),I.set(R,M.byteLength),I}},ot=function(T){var M,R,I=[],N=[];for(N.byteLength=0,N.nalCount=0,N.duration=0,I.byteLength=0,M=0;M<T.length;M++)R=T[M],R.nalUnitType==="access_unit_delimiter_rbsp"?(I.length&&(I.duration=R.dts-I.dts,N.byteLength+=I.byteLength,N.nalCount+=I.length,N.duration+=I.duration,N.push(I)),I=[R],I.byteLength=R.data.byteLength,I.pts=R.pts,I.dts=R.dts):(R.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(I.keyFrame=!0),I.duration=R.dts-I.dts,I.byteLength+=R.data.byteLength,I.push(R));return N.length&&(!I.duration||I.duration<=0)&&(I.duration=N[N.length-1].duration),N.byteLength+=I.byteLength,N.nalCount+=I.length,N.duration+=I.duration,N.push(I),N},Ae=function(T){var M,R,I=[],N=[];for(I.byteLength=0,I.nalCount=0,I.duration=0,I.pts=T[0].pts,I.dts=T[0].dts,N.byteLength=0,N.nalCount=0,N.duration=0,N.pts=T[0].pts,N.dts=T[0].dts,M=0;M<T.length;M++)R=T[M],R.keyFrame?(I.length&&(N.push(I),N.byteLength+=I.byteLength,N.nalCount+=I.nalCount,N.duration+=I.duration),I=[R],I.nalCount=R.length,I.byteLength=R.byteLength,I.pts=R.pts,I.dts=R.dts,I.duration=R.duration):(I.duration+=R.duration,I.nalCount+=R.length,I.byteLength+=R.byteLength,I.push(R));return N.length&&I.duration<=0&&(I.duration=N[N.length-1].duration),N.byteLength+=I.byteLength,N.nalCount+=I.nalCount,N.duration+=I.duration,N.push(I),N},Ge=function(T){var M;return!T[0][0].keyFrame&&T.length>1&&(M=T.shift(),T.byteLength-=M.byteLength,T.nalCount-=M.nalCount,T[0][0].dts=M.dts,T[0][0].pts=M.pts,T[0][0].duration+=M.duration),T},Le=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},le=function(T,M){var R=Le();return R.dataOffset=M,R.compositionTimeOffset=T.pts-T.dts,R.duration=T.duration,R.size=4*T.length,R.size+=T.byteLength,T.keyFrame&&(R.flags.dependsOn=2,R.flags.isNonSyncSample=0),R},j=function(T,M){var R,I,N,F,K,Z=M||0,ne=[];for(R=0;R<T.length;R++)for(F=T[R],I=0;I<F.length;I++)K=F[I],N=le(K,Z),Z+=N.size,ne.push(N);return ne},Me=function(T){var M,R,I,N,F,K,Z=0,ne=T.byteLength,ae=T.nalCount,pe=ne+4*ae,Ee=new Uint8Array(pe),lt=new DataView(Ee.buffer);for(M=0;M<T.length;M++)for(N=T[M],R=0;R<N.length;R++)for(F=N[R],I=0;I<F.length;I++)K=F[I],lt.setUint32(Z,K.data.byteLength),Z+=4,Ee.set(K.data,Z),Z+=K.data.byteLength;return Ee},Re=function(T,M){var R,I=M||0,N=[];return R=le(T,I),N.push(R),N},Be=function(T){var M,R,I=0,N=T.byteLength,F=T.length,K=N+4*F,Z=new Uint8Array(K),ne=new DataView(Z.buffer);for(M=0;M<T.length;M++)R=T[M],ne.setUint32(I,R.data.byteLength),I+=4,Z.set(R.data,I),I+=R.data.byteLength;return Z},We={groupNalsIntoFrames:ot,groupFramesIntoGops:Ae,extendFirstKeyFrame:Ge,generateSampleTable:j,concatenateNalData:Me,generateSampleTableForFrame:Re,concatenateNalDataForFrame:Be},rt=[33,16,5,32,164,27],st=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],q=function(T){for(var M=[];T--;)M.push(0);return M},V=function(T){return Object.keys(T).reduce(function(M,R){return M[R]=new Uint8Array(T[R].reduce(function(I,N){return I.concat(N)},[])),M},{})},_e,De=function(){if(!_e){var T={96e3:[rt,[227,64],q(154),[56]],88200:[rt,[231],q(170),[56]],64e3:[rt,[248,192],q(240),[56]],48e3:[rt,[255,192],q(268),[55,148,128],q(54),[112]],44100:[rt,[255,192],q(268),[55,163,128],q(84),[112]],32e3:[rt,[255,192],q(268),[55,234],q(226),[112]],24e3:[rt,[255,192],q(268),[55,255,128],q(268),[111,112],q(126),[224]],16e3:[rt,[255,192],q(268),[55,255,128],q(268),[111,255],q(269),[223,108],q(195),[1,192]],12e3:[st,q(268),[3,127,248],q(268),[6,255,240],q(268),[13,255,224],q(268),[27,253,128],q(259),[56]],11025:[st,q(268),[3,127,248],q(268),[6,255,240],q(268),[13,255,224],q(268),[27,255,192],q(268),[55,175,128],q(108),[112]],8e3:[st,q(268),[3,121,16],q(47),[7]]};_e=V(T)}return _e},Ve=9e4,Ne,dt,qe,Qe,Gt,Ke,ut;Ne=function(T){return T*Ve},dt=function(T,M){return T*M},qe=function(T){return T/Ve},Qe=function(T,M){return T/M},Gt=function(T,M){return Ne(Qe(T,M))},Ke=function(T,M){return dt(qe(T),M)},ut=function(T,M,R){return qe(R?T:T-M)};var ct={ONE_SECOND_IN_TS:Ve,secondsToVideoTs:Ne,secondsToAudioTs:dt,videoTsToSeconds:qe,audioTsToSeconds:Qe,audioTsToVideoTs:Gt,videoTsToAudioTs:Ke,metadataTsToSeconds:ut},Ot=De,ft=ct,de=function(T){var M,R,I=0;for(M=0;M<T.length;M++)R=T[M],I+=R.data.byteLength;return I},$e=function(T,M,R,I){var N,F=0,K=0,Z=0,ne=0,ae,pe,Ee;if(M.length&&(N=ft.audioTsToVideoTs(T.baseMediaDecodeTime,T.samplerate),F=Math.ceil(ft.ONE_SECOND_IN_TS/(T.samplerate/1024)),R&&I&&(K=N-Math.max(R,I),Z=Math.floor(K/F),ne=Z*F),!(Z<1||ne>ft.ONE_SECOND_IN_TS/2))){for(ae=Ot()[T.samplerate],ae||(ae=M[0].data),pe=0;pe<Z;pe++)Ee=M[0],M.splice(0,0,{data:ae,dts:Ee.dts-F,pts:Ee.pts-F});return T.baseMediaDecodeTime-=Math.floor(ft.videoTsToAudioTs(ne,T.samplerate)),ne}},at=function(T,M,R){return M.minSegmentDts>=R?T:(M.minSegmentDts=1/0,T.filter(function(I){return I.dts>=R?(M.minSegmentDts=Math.min(M.minSegmentDts,I.dts),M.minSegmentPts=M.minSegmentDts,!0):!1}))},ue=function(T){var M,R,I=[];for(M=0;M<T.length;M++)R=T[M],I.push({size:R.data.byteLength,duration:1024});return I},nt=function(T){var M,R,I=0,N=new Uint8Array(de(T));for(M=0;M<T.length;M++)R=T[M],N.set(R.data,I),I+=R.data.byteLength;return N},Pe={prefixWithSilence:$e,trimAdtsFramesByEarliestDts:at,generateSampleTable:ue,concatenateFrameData:nt},Ye=ct.ONE_SECOND_IN_TS,pt=function(T,M){typeof M.pts=="number"&&(T.timelineStartInfo.pts===void 0&&(T.timelineStartInfo.pts=M.pts),T.minSegmentPts===void 0?T.minSegmentPts=M.pts:T.minSegmentPts=Math.min(T.minSegmentPts,M.pts),T.maxSegmentPts===void 0?T.maxSegmentPts=M.pts:T.maxSegmentPts=Math.max(T.maxSegmentPts,M.pts)),typeof M.dts=="number"&&(T.timelineStartInfo.dts===void 0&&(T.timelineStartInfo.dts=M.dts),T.minSegmentDts===void 0?T.minSegmentDts=M.dts:T.minSegmentDts=Math.min(T.minSegmentDts,M.dts),T.maxSegmentDts===void 0?T.maxSegmentDts=M.dts:T.maxSegmentDts=Math.max(T.maxSegmentDts,M.dts))},mt=function(T){delete T.minSegmentDts,delete T.maxSegmentDts,delete T.minSegmentPts,delete T.maxSegmentPts},Vt=function(T,M){var R,I,N=T.minSegmentDts;return M||(N-=T.timelineStartInfo.dts),R=T.timelineStartInfo.baseMediaDecodeTime,R+=N,R=Math.max(0,R),T.type==="audio"&&(I=T.samplerate/Ye,R*=I,R=Math.floor(R)),R},dn={clearDtsInfo:mt,calculateTrackBaseMediaDecodeTime:Vt,collectDtsInfo:pt},jn=4,Jt=128,qn=function(T){for(var M=0,R={payloadType:-1,payloadSize:0},I=0,N=0;M<T.byteLength&&T[M]!==Jt;){for(;T[M]===255;)I+=255,M++;for(I+=T[M++];T[M]===255;)N+=255,M++;if(N+=T[M++],!R.payload&&I===jn){var F=String.fromCharCode(T[M+3],T[M+4],T[M+5],T[M+6]);if(F==="GA94"){R.payloadType=I,R.payloadSize=N,R.payload=T.subarray(M,M+N);break}else R.payload=void 0}M+=N,I=0,N=0}return R},Hi=function(T){return T.payload[0]!==181||(T.payload[1]<<8|T.payload[2])!==49||String.fromCharCode(T.payload[3],T.payload[4],T.payload[5],T.payload[6])!=="GA94"||T.payload[7]!==3?null:T.payload.subarray(8,T.payload.length-1)},gf=function(T,M){var R=[],I,N,F,K;if(!(M[0]&64))return R;for(N=M[0]&31,I=0;I<N;I++)F=I*3,K={type:M[F+2]&3,pts:T},M[F+2]&4&&(K.ccData=M[F+3]<<8|M[F+4],R.push(K));return R},yf=function(T){for(var M=T.byteLength,R=[],I=1,N,F;I<M-2;)T[I]===0&&T[I+1]===0&&T[I+2]===3?(R.push(I+2),I+=2):I++;if(R.length===0)return T;N=M-R.length,F=new Uint8Array(N);var K=0;for(I=0;I<N;K++,I++)K===R[0]&&(K++,R.shift()),F[I]=T[K];return F},go={parseSei:qn,parseUserData:Hi,parseCaptionPackets:gf,discardEmulationPreventionBytes:yf,USER_DATA_REGISTERED_ITU_T_T35:jn},za=n,na=go,Vi=function(T){T=T||{},Vi.prototype.init.call(this),this.parse708captions_=typeof T.parse708captions=="boolean"?T.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Se(0,0),new Se(0,1),new Se(1,0),new Se(1,1)],this.parse708captions_&&(this.cc708Stream_=new En({captionServices:T.captionServices})),this.reset(),this.ccStreams_.forEach(function(M){M.on("data",this.trigger.bind(this,"data")),M.on("partialdone",this.trigger.bind(this,"partialdone")),M.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Vi.prototype=new za,Vi.prototype.push=function(T){var M,R,I;if(T.nalUnitType==="sei_rbsp"&&(M=na.parseSei(T.escapedRBSP),!!M.payload&&M.payloadType===na.USER_DATA_REGISTERED_ITU_T_T35&&(R=na.parseUserData(M),!!R))){if(T.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(T.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}I=na.parseCaptionPackets(T.pts,R),this.captionPackets_=this.captionPackets_.concat(I),this.latestDts_!==T.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=T.dts}},Vi.prototype.flushCCStreams=function(T){this.ccStreams_.forEach(function(M){return T==="flush"?M.flush():M.partialFlush()},this)},Vi.prototype.flushStream=function(T){if(!this.captionPackets_.length){this.flushCCStreams(T);return}this.captionPackets_.forEach(function(M,R){M.presortIndex=R}),this.captionPackets_.sort(function(M,R){return M.pts===R.pts?M.presortIndex-R.presortIndex:M.pts-R.pts}),this.captionPackets_.forEach(function(M){M.type<2?this.dispatchCea608Packet(M):this.dispatchCea708Packet(M)},this),this.captionPackets_.length=0,this.flushCCStreams(T)},Vi.prototype.flush=function(){return this.flushStream("flush")},Vi.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Vi.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(T){T.reset()})},Vi.prototype.dispatchCea608Packet=function(T){this.setsTextOrXDSActive(T)?this.activeCea608Channel_[T.type]=null:this.setsChannel1Active(T)?this.activeCea608Channel_[T.type]=0:this.setsChannel2Active(T)&&(this.activeCea608Channel_[T.type]=1),this.activeCea608Channel_[T.type]!==null&&this.ccStreams_[(T.type<<1)+this.activeCea608Channel_[T.type]].push(T)},Vi.prototype.setsChannel1Active=function(T){return(T.ccData&30720)===4096},Vi.prototype.setsChannel2Active=function(T){return(T.ccData&30720)===6144},Vi.prototype.setsTextOrXDSActive=function(T){return(T.ccData&28928)===256||(T.ccData&30974)===4138||(T.ccData&30974)===6186},Vi.prototype.dispatchCea708Packet=function(T){this.parse708captions_&&this.cc708Stream_.push(T)};var yo={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},vf=function(T){var M=yo[T]||T;return T&4096&&T===M?"":String.fromCharCode(M)},ia=function(T){return 32<=T&&T<=127||160<=T&&T<=255},ls=function(T){this.windowNum=T,this.reset()};ls.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ls.prototype.getText=function(){return this.rows.join(`
`)},ls.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ls.prototype.newLine=function(T){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(T),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ls.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},ls.prototype.addText=function(T){this.rows[this.rowIdx]+=T},ls.prototype.backspace=function(){if(!this.isEmpty()){var T=this.rows[this.rowIdx];this.rows[this.rowIdx]=T.substr(0,T.length-1)}};var Ml=function(T,M,R){this.serviceNum=T,this.text="",this.currentWindow=new ls(-1),this.windows=[],this.stream=R,typeof M=="string"&&this.createTextDecoder(M)};Ml.prototype.init=function(T,M){this.startPts=T;for(var R=0;R<8;R++)this.windows[R]=new ls(R),typeof M=="function"&&(this.windows[R].beforeRowOverflow=M)},Ml.prototype.setCurrentWindow=function(T){this.currentWindow=this.windows[T]},Ml.prototype.createTextDecoder=function(T){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(T)}catch(M){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+T+" encoding. "+M})}};var En=function(T){T=T||{},En.prototype.init.call(this);var M=this,R=T.captionServices||{},I={},N;Object.keys(R).forEach(F=>{N=R[F],/^SERVICE/.test(F)&&(I[F]=N.encoding)}),this.serviceEncodings=I,this.current708Packet=null,this.services={},this.push=function(F){F.type===3?(M.new708Packet(),M.add708Bytes(F)):(M.current708Packet===null&&M.new708Packet(),M.add708Bytes(F))}};En.prototype=new za,En.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},En.prototype.add708Bytes=function(T){var M=T.ccData,R=M>>>8,I=M&255;this.current708Packet.ptsVals.push(T.pts),this.current708Packet.data.push(R),this.current708Packet.data.push(I)},En.prototype.push708Packet=function(){var T=this.current708Packet,M=T.data,R=null,I=null,N=0,F=M[N++];for(T.seq=F>>6,T.sizeCode=F&63;N<M.length;N++)F=M[N++],R=F>>5,I=F&31,R===7&&I>0&&(F=M[N++],R=F),this.pushServiceBlock(R,N,I),I>0&&(N+=I-1)},En.prototype.pushServiceBlock=function(T,M,R){var I,N=M,F=this.current708Packet.data,K=this.services[T];for(K||(K=this.initService(T,N));N<M+R&&N<F.length;N++)I=F[N],ia(I)?N=this.handleText(N,K):I===24?N=this.multiByteCharacter(N,K):I===16?N=this.extendedCommands(N,K):128<=I&&I<=135?N=this.setCurrentWindow(N,K):152<=I&&I<=159?N=this.defineWindow(N,K):I===136?N=this.clearWindows(N,K):I===140?N=this.deleteWindows(N,K):I===137?N=this.displayWindows(N,K):I===138?N=this.hideWindows(N,K):I===139?N=this.toggleWindows(N,K):I===151?N=this.setWindowAttributes(N,K):I===144?N=this.setPenAttributes(N,K):I===145?N=this.setPenColor(N,K):I===146?N=this.setPenLocation(N,K):I===143?K=this.reset(N,K):I===8?K.currentWindow.backspace():I===12?K.currentWindow.clearText():I===13?K.currentWindow.pendingNewLine=!0:I===14?K.currentWindow.clearText():I===141&&N++},En.prototype.extendedCommands=function(T,M){var R=this.current708Packet.data,I=R[++T];return ia(I)&&(T=this.handleText(T,M,{isExtended:!0})),T},En.prototype.getPts=function(T){return this.current708Packet.ptsVals[Math.floor(T/2)]},En.prototype.initService=function(T,M){var I="SERVICE"+T,R=this,I,N;return I in this.serviceEncodings&&(N=this.serviceEncodings[I]),this.services[T]=new Ml(T,N,R),this.services[T].init(this.getPts(M),function(F){R.flushDisplayed(F,R.services[T])}),this.services[T]},En.prototype.handleText=function(T,M,R){var I=R&&R.isExtended,N=R&&R.isMultiByte,F=this.current708Packet.data,K=I?4096:0,Z=F[T],ne=F[T+1],ae=M.currentWindow,pe,Ee;function lt(Xe){return Xe.map(Pt=>("0"+(Pt&255).toString(16)).slice(-2)).join("")}if(N?(Ee=[Z,ne],T++):Ee=[Z],M.textDecoder_&&!I)pe=M.textDecoder_.decode(new Uint8Array(Ee));else if(N){const Xe=lt(Ee);pe=String.fromCharCode(parseInt(Xe,16))}else pe=vf(K|Z);return ae.pendingNewLine&&!ae.isEmpty()&&ae.newLine(this.getPts(T)),ae.pendingNewLine=!1,ae.addText(pe),T},En.prototype.multiByteCharacter=function(T,M){var R=this.current708Packet.data,I=R[T+1],N=R[T+2];return ia(I)&&ia(N)&&(T=this.handleText(++T,M,{isMultiByte:!0})),T},En.prototype.setCurrentWindow=function(T,M){var R=this.current708Packet.data,I=R[T],N=I&7;return M.setCurrentWindow(N),T},En.prototype.defineWindow=function(T,M){var R=this.current708Packet.data,I=R[T],N=I&7;M.setCurrentWindow(N);var F=M.currentWindow;return I=R[++T],F.visible=(I&32)>>5,F.rowLock=(I&16)>>4,F.columnLock=(I&8)>>3,F.priority=I&7,I=R[++T],F.relativePositioning=(I&128)>>7,F.anchorVertical=I&127,I=R[++T],F.anchorHorizontal=I,I=R[++T],F.anchorPoint=(I&240)>>4,F.rowCount=I&15,I=R[++T],F.columnCount=I&63,I=R[++T],F.windowStyle=(I&56)>>3,F.penStyle=I&7,F.virtualRowCount=F.rowCount+1,T},En.prototype.setWindowAttributes=function(T,M){var R=this.current708Packet.data,I=R[T],N=M.currentWindow.winAttr;return I=R[++T],N.fillOpacity=(I&192)>>6,N.fillRed=(I&48)>>4,N.fillGreen=(I&12)>>2,N.fillBlue=I&3,I=R[++T],N.borderType=(I&192)>>6,N.borderRed=(I&48)>>4,N.borderGreen=(I&12)>>2,N.borderBlue=I&3,I=R[++T],N.borderType+=(I&128)>>5,N.wordWrap=(I&64)>>6,N.printDirection=(I&48)>>4,N.scrollDirection=(I&12)>>2,N.justify=I&3,I=R[++T],N.effectSpeed=(I&240)>>4,N.effectDirection=(I&12)>>2,N.displayEffect=I&3,T},En.prototype.flushDisplayed=function(T,M){for(var R=[],I=0;I<8;I++)M.windows[I].visible&&!M.windows[I].isEmpty()&&R.push(M.windows[I].getText());M.endPts=T,M.text=R.join(`

`),this.pushCaption(M),M.startPts=T},En.prototype.pushCaption=function(T){T.text!==""&&(this.trigger("data",{startPts:T.startPts,endPts:T.endPts,text:T.text,stream:"cc708_"+T.serviceNum}),T.text="",T.startPts=T.endPts)},En.prototype.displayWindows=function(T,M){var R=this.current708Packet.data,I=R[++T],N=this.getPts(T);this.flushDisplayed(N,M);for(var F=0;F<8;F++)I&1<<F&&(M.windows[F].visible=1);return T},En.prototype.hideWindows=function(T,M){var R=this.current708Packet.data,I=R[++T],N=this.getPts(T);this.flushDisplayed(N,M);for(var F=0;F<8;F++)I&1<<F&&(M.windows[F].visible=0);return T},En.prototype.toggleWindows=function(T,M){var R=this.current708Packet.data,I=R[++T],N=this.getPts(T);this.flushDisplayed(N,M);for(var F=0;F<8;F++)I&1<<F&&(M.windows[F].visible^=1);return T},En.prototype.clearWindows=function(T,M){var R=this.current708Packet.data,I=R[++T],N=this.getPts(T);this.flushDisplayed(N,M);for(var F=0;F<8;F++)I&1<<F&&M.windows[F].clearText();return T},En.prototype.deleteWindows=function(T,M){var R=this.current708Packet.data,I=R[++T],N=this.getPts(T);this.flushDisplayed(N,M);for(var F=0;F<8;F++)I&1<<F&&M.windows[F].reset();return T},En.prototype.setPenAttributes=function(T,M){var R=this.current708Packet.data,I=R[T],N=M.currentWindow.penAttr;return I=R[++T],N.textTag=(I&240)>>4,N.offset=(I&12)>>2,N.penSize=I&3,I=R[++T],N.italics=(I&128)>>7,N.underline=(I&64)>>6,N.edgeType=(I&56)>>3,N.fontStyle=I&7,T},En.prototype.setPenColor=function(T,M){var R=this.current708Packet.data,I=R[T],N=M.currentWindow.penColor;return I=R[++T],N.fgOpacity=(I&192)>>6,N.fgRed=(I&48)>>4,N.fgGreen=(I&12)>>2,N.fgBlue=I&3,I=R[++T],N.bgOpacity=(I&192)>>6,N.bgRed=(I&48)>>4,N.bgGreen=(I&12)>>2,N.bgBlue=I&3,I=R[++T],N.edgeRed=(I&48)>>4,N.edgeGreen=(I&12)>>2,N.edgeBlue=I&3,T},En.prototype.setPenLocation=function(T,M){var R=this.current708Packet.data,I=R[T],N=M.currentWindow.penLoc;return M.currentWindow.pendingNewLine=!0,I=R[++T],N.row=I&15,I=R[++T],N.column=I&63,T},En.prototype.reset=function(T,M){var R=this.getPts(T);return this.flushDisplayed(R,M),this.initService(M.serviceNum,T)};var Ag={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Bu=function(T){return T===null?"":(T=Ag[T]||T,String.fromCharCode(T))},X=14,me=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],we=function(){for(var T=[],M=X+1;M--;)T.push({text:"",indent:0,offset:0});return T},Se=function(T,M){Se.prototype.init.call(this),this.field_=T||0,this.dataChannel_=M||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(R){var I,N,F,K,Z;if(I=R.ccData&32639,I===this.lastControlCode_){this.lastControlCode_=null;return}if((I&61440)===4096?this.lastControlCode_=I:I!==this.PADDING_&&(this.lastControlCode_=null),F=I>>>8,K=I&255,I!==this.PADDING_)if(I===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(I===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(R.pts),this.flushDisplayed(R.pts),N=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=N,this.startPts_=R.pts;else if(I===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(R.pts);else if(I===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(R.pts);else if(I===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(R.pts);else if(I===this.CARRIAGE_RETURN_)this.clearFormatting(R.pts),this.flushDisplayed(R.pts),this.shiftRowsUp_(),this.startPts_=R.pts;else if(I===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(I===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(R.pts),this.displayed_=we();else if(I===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=we();else if(I===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(R.pts),this.displayed_=we()),this.mode_="paintOn",this.startPts_=R.pts;else if(this.isSpecialCharacter(F,K))F=(F&3)<<8,Z=Bu(F|K),this[this.mode_](R.pts,Z),this.column_++;else if(this.isExtCharacter(F,K))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),F=(F&3)<<8,Z=Bu(F|K),this[this.mode_](R.pts,Z),this.column_++;else if(this.isMidRowCode(F,K))this.clearFormatting(R.pts),this[this.mode_](R.pts," "),this.column_++,(K&14)===14&&this.addFormatting(R.pts,["i"]),(K&1)===1&&this.addFormatting(R.pts,["u"]);else if(this.isOffsetControlCode(F,K)){const ae=K&3;this.nonDisplayed_[this.row_].offset=ae,this.column_+=ae}else if(this.isPAC(F,K)){var ne=me.indexOf(I&7968);if(this.mode_==="rollUp"&&(ne-this.rollUpRows_+1<0&&(ne=this.rollUpRows_-1),this.setRollUp(R.pts,ne)),ne!==this.row_&&ne>=0&&ne<=14&&(this.clearFormatting(R.pts),this.row_=ne),K&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(R.pts,["u"]),(I&16)===16){const ae=(I&14)>>1;this.column_=ae*4,this.nonDisplayed_[this.row_].indent+=ae}this.isColorPAC(K)&&(K&14)===14&&this.addFormatting(R.pts,["i"])}else this.isNormalChar(F)&&(K===0&&(K=null),Z=Bu(F),Z+=Bu(K),this[this.mode_](R.pts,Z),this.column_+=Z.length)}};Se.prototype=new za,Se.prototype.flushDisplayed=function(T){const M=I=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+I+"."})},R=[];this.displayed_.forEach((I,N)=>{if(I&&I.text&&I.text.length){try{I.text=I.text.trim()}catch{M(N)}I.text.length&&R.push({text:I.text,line:N+1,position:10+Math.min(70,I.indent*10)+I.offset*2.5})}else I==null&&M(N)}),R.length&&this.trigger("data",{startPts:this.startPts_,endPts:T,content:R,stream:this.name_})},Se.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=we(),this.nonDisplayed_=we(),this.lastControlCode_=null,this.column_=0,this.row_=X,this.rollUpRows_=2,this.formatting_=[]},Se.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Se.prototype.isSpecialCharacter=function(T,M){return T===this.EXT_&&M>=48&&M<=63},Se.prototype.isExtCharacter=function(T,M){return(T===this.EXT_+1||T===this.EXT_+2)&&M>=32&&M<=63},Se.prototype.isMidRowCode=function(T,M){return T===this.EXT_&&M>=32&&M<=47},Se.prototype.isOffsetControlCode=function(T,M){return T===this.OFFSET_&&M>=33&&M<=35},Se.prototype.isPAC=function(T,M){return T>=this.BASE_&&T<this.BASE_+8&&M>=64&&M<=127},Se.prototype.isColorPAC=function(T){return T>=64&&T<=79||T>=96&&T<=127},Se.prototype.isNormalChar=function(T){return T>=32&&T<=127},Se.prototype.setRollUp=function(T,M){if(this.mode_!=="rollUp"&&(this.row_=X,this.mode_="rollUp",this.flushDisplayed(T),this.nonDisplayed_=we(),this.displayed_=we()),M!==void 0&&M!==this.row_)for(var R=0;R<this.rollUpRows_;R++)this.displayed_[M-R]=this.displayed_[this.row_-R],this.displayed_[this.row_-R]={text:"",indent:0,offset:0};M===void 0&&(M=this.row_),this.topRow_=M-this.rollUpRows_+1},Se.prototype.addFormatting=function(T,M){this.formatting_=this.formatting_.concat(M);var R=M.reduce(function(I,N){return I+"<"+N+">"},"");this[this.mode_](T,R)},Se.prototype.clearFormatting=function(T){if(this.formatting_.length){var M=this.formatting_.reverse().reduce(function(R,I){return R+"</"+I+">"},"");this.formatting_=[],this[this.mode_](T,M)}},Se.prototype.popOn=function(T,M){var R=this.nonDisplayed_[this.row_].text;R+=M,this.nonDisplayed_[this.row_].text=R},Se.prototype.rollUp=function(T,M){var R=this.displayed_[this.row_].text;R+=M,this.displayed_[this.row_].text=R},Se.prototype.shiftRowsUp_=function(){var T;for(T=0;T<this.topRow_;T++)this.displayed_[T]={text:"",indent:0,offset:0};for(T=this.row_+1;T<X+1;T++)this.displayed_[T]={text:"",indent:0,offset:0};for(T=this.topRow_;T<this.row_;T++)this.displayed_[T]=this.displayed_[T+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Se.prototype.paintOn=function(T,M){var R=this.displayed_[this.row_].text;R+=M,this.displayed_[this.row_].text=R};var ye={CaptionStream:Vi,Cea608Stream:Se,Cea708Stream:En},tt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},yt=n,St=8589934592,Tt=4294967296,Dt="shared",kt=function(T,M){var R=1;for(T>M&&(R=-1);Math.abs(M-T)>Tt;)T+=R*St;return T},At=function(T){var M,R;At.prototype.init.call(this),this.type_=T||Dt,this.push=function(I){if(I.type==="metadata"){this.trigger("data",I);return}this.type_!==Dt&&I.type!==this.type_||(R===void 0&&(R=I.dts),I.dts=kt(I.dts,R),I.pts=kt(I.pts,R),M=I.dts,this.trigger("data",I))},this.flush=function(){R=M,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){R=void 0,M=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};At.prototype=new yt;var cn={TimestampRolloverStream:At,handleRollover:kt},hn=(T,M,R)=>{if(!T)return-1;for(var I=R;I<T.length;I++)if(T[I]===M)return I;return-1},pn={typedArrayIndexOf:hn},jt=pn.typedArrayIndexOf,Mt={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},bt=function(T,M,R){var I,N="";for(I=M;I<R;I++)N+="%"+("00"+T[I].toString(16)).slice(-2);return N},rn=function(T,M,R){return decodeURIComponent(bt(T,M,R))},Ft=function(T,M,R){return unescape(bt(T,M,R))},Xn=function(T){return T[0]<<21|T[1]<<14|T[2]<<7|T[3]},$i={APIC:function(T){var M=1,R,I,N="-->";T.data[0]===Mt.Utf8&&(R=jt(T.data,0,M),!(R<0)&&(T.mimeType=Ft(T.data,M,R),M=R+1,T.pictureType=T.data[M],M++,I=jt(T.data,0,M),!(I<0)&&(T.description=rn(T.data,M,I),M=I+1,T.mimeType===N?T.url=Ft(T.data,M,T.data.length):T.pictureData=T.data.subarray(M,T.data.length))))},"T*":function(T){T.data[0]===Mt.Utf8&&(T.value=rn(T.data,1,T.data.length).replace(/\0*$/,""),T.values=T.value.split("\0"))},TXXX:function(T){var M;T.data[0]===Mt.Utf8&&(M=jt(T.data,0,1),M!==-1&&(T.description=rn(T.data,1,M),T.value=rn(T.data,M+1,T.data.length).replace(/\0*$/,""),T.data=T.value))},"W*":function(T){T.url=Ft(T.data,0,T.data.length).replace(/\0.*$/,"")},WXXX:function(T){var M;T.data[0]===Mt.Utf8&&(M=jt(T.data,0,1),M!==-1&&(T.description=rn(T.data,1,M),T.url=Ft(T.data,M+1,T.data.length).replace(/\0.*$/,"")))},PRIV:function(T){var M;for(M=0;M<T.data.length;M++)if(T.data[M]===0){T.owner=Ft(T.data,0,M);break}T.privateData=T.data.subarray(M+1),T.data=T.privateData}},Pn=function(T){var M,R,I=10,N=0,F=[];if(!(T.length<10||T[0]!=="I".charCodeAt(0)||T[1]!=="D".charCodeAt(0)||T[2]!=="3".charCodeAt(0))){N=Xn(T.subarray(6,10)),N+=10;var K=T[5]&64;K&&(I+=4,I+=Xn(T.subarray(10,14)),N-=Xn(T.subarray(16,20)));do{if(M=Xn(T.subarray(I+4,I+8)),M<1)break;R=String.fromCharCode(T[I],T[I+1],T[I+2],T[I+3]);var Z={id:R,data:T.subarray(I+10,I+M+10)};Z.key=Z.id,$i[Z.id]?$i[Z.id](Z):Z.id[0]==="T"?$i["T*"](Z):Z.id[0]==="W"&&$i["W*"](Z),F.push(Z),I+=10,I+=M}while(I<N);return F}},ra={parseId3Frames:Pn,parseSyncSafeInteger:Xn,frameParsers:$i},zn=n,Fs=tt,cr=ra,Pi;Pi=function(T){var M={descriptor:T&&T.descriptor},R=0,I=[],N=0,F;if(Pi.prototype.init.call(this),this.dispatchType=Fs.METADATA_STREAM_TYPE.toString(16),M.descriptor)for(F=0;F<M.descriptor.length;F++)this.dispatchType+=("00"+M.descriptor[F].toString(16)).slice(-2);this.push=function(K){var Z,ne,ae,pe,Ee,lt;if(K.type==="timed-metadata"){if(K.dataAlignmentIndicator&&(N=0,I.length=0),I.length===0&&(K.data.length<10||K.data[0]!=="I".charCodeAt(0)||K.data[1]!=="D".charCodeAt(0)||K.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(I.push(K),N+=K.data.byteLength,I.length===1&&(R=cr.parseSyncSafeInteger(K.data.subarray(6,10)),R+=10),!(N<R)){for(Z={data:new Uint8Array(R),frames:[],pts:I[0].pts,dts:I[0].dts},Ee=0;Ee<R;)Z.data.set(I[0].data.subarray(0,R-Ee),Ee),Ee+=I[0].data.byteLength,N-=I[0].data.byteLength,I.shift();ne=10,Z.data[5]&64&&(ne+=4,ne+=cr.parseSyncSafeInteger(Z.data.subarray(10,14)),R-=cr.parseSyncSafeInteger(Z.data.subarray(16,20)));do{if(ae=cr.parseSyncSafeInteger(Z.data.subarray(ne+4,ne+8)),ae<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(lt=String.fromCharCode(Z.data[ne],Z.data[ne+1],Z.data[ne+2],Z.data[ne+3]),pe={id:lt,data:Z.data.subarray(ne+10,ne+ae+10)},pe.key=pe.id,cr.frameParsers[pe.id]?cr.frameParsers[pe.id](pe):pe.id[0]==="T"?cr.frameParsers["T*"](pe):pe.id[0]==="W"&&cr.frameParsers["W*"](pe),pe.owner==="com.apple.streaming.transportStreamTimestamp"){var Xe=pe.data,Pt=(Xe[3]&1)<<30|Xe[4]<<22|Xe[5]<<14|Xe[6]<<6|Xe[7]>>>2;Pt*=4,Pt+=Xe[7]&3,pe.timeStamp=Pt,Z.pts===void 0&&Z.dts===void 0&&(Z.pts=pe.timeStamp,Z.dts=pe.timeStamp),this.trigger("timestamp",pe)}Z.frames.push(pe),ne+=10,ne+=ae}while(ne<R);this.trigger("data",Z)}}}},Pi.prototype=new zn;var dr=Pi,md=n,zu=ye,Bs=tt,_f=cn.TimestampRolloverStream,Pl,sa,Il,Hu=188,Mg=71;Pl=function(){var T=new Uint8Array(Hu),M=0;Pl.prototype.init.call(this),this.push=function(R){var I=0,N=Hu,F;for(M?(F=new Uint8Array(R.byteLength+M),F.set(T.subarray(0,M)),F.set(R,M),M=0):F=R;N<F.byteLength;){if(F[I]===Mg&&F[N]===Mg){this.trigger("data",F.subarray(I,N)),I+=Hu,N+=Hu;continue}I++,N++}I<F.byteLength&&(T.set(F.subarray(I),0),M=F.byteLength-I)},this.flush=function(){M===Hu&&T[0]===Mg&&(this.trigger("data",T),M=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){M=0,this.trigger("reset")}},Pl.prototype=new md,sa=function(){var T,M,R,I;sa.prototype.init.call(this),I=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,T=function(N,F){var K=0;F.payloadUnitStartIndicator&&(K+=N[K]+1),F.type==="pat"?M(N.subarray(K),F):R(N.subarray(K),F)},M=function(N,F){F.section_number=N[7],F.last_section_number=N[8],I.pmtPid=(N[10]&31)<<8|N[11],F.pmtPid=I.pmtPid},R=function(N,F){var K,Z,ne,ae;if(N[5]&1){for(I.programMapTable={video:null,audio:null,"timed-metadata":{}},K=(N[1]&15)<<8|N[2],Z=3+K-4,ne=(N[10]&15)<<8|N[11],ae=12+ne;ae<Z;){var pe=N[ae],Ee=(N[ae+1]&31)<<8|N[ae+2];pe===Bs.H264_STREAM_TYPE&&I.programMapTable.video===null?I.programMapTable.video=Ee:pe===Bs.ADTS_STREAM_TYPE&&I.programMapTable.audio===null?I.programMapTable.audio=Ee:pe===Bs.METADATA_STREAM_TYPE&&(I.programMapTable["timed-metadata"][Ee]=pe),ae+=((N[ae+3]&15)<<8|N[ae+4])+5}F.programMapTable=I.programMapTable}},this.push=function(N){var F={},K=4;if(F.payloadUnitStartIndicator=!!(N[1]&64),F.pid=N[1]&31,F.pid<<=8,F.pid|=N[2],(N[3]&48)>>>4>1&&(K+=N[K]+1),F.pid===0)F.type="pat",T(N.subarray(K),F),this.trigger("data",F);else if(F.pid===this.pmtPid)for(F.type="pmt",T(N.subarray(K),F),this.trigger("data",F);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([N,K,F]):this.processPes_(N,K,F)},this.processPes_=function(N,F,K){K.pid===this.programMapTable.video?K.streamType=Bs.H264_STREAM_TYPE:K.pid===this.programMapTable.audio?K.streamType=Bs.ADTS_STREAM_TYPE:K.streamType=this.programMapTable["timed-metadata"][K.pid],K.type="pes",K.data=N.subarray(F),this.trigger("data",K)}},sa.prototype=new md,sa.STREAM_TYPES={h264:27,adts:15},Il=function(){var T=this,M=!1,R={data:[],size:0},I={data:[],size:0},N={data:[],size:0},F,K=function(ne,ae){var pe;const Ee=ne[0]<<16|ne[1]<<8|ne[2];ae.data=new Uint8Array,Ee===1&&(ae.packetLength=6+(ne[4]<<8|ne[5]),ae.dataAlignmentIndicator=(ne[6]&4)!==0,pe=ne[7],pe&192&&(ae.pts=(ne[9]&14)<<27|(ne[10]&255)<<20|(ne[11]&254)<<12|(ne[12]&255)<<5|(ne[13]&254)>>>3,ae.pts*=4,ae.pts+=(ne[13]&6)>>>1,ae.dts=ae.pts,pe&64&&(ae.dts=(ne[14]&14)<<27|(ne[15]&255)<<20|(ne[16]&254)<<12|(ne[17]&255)<<5|(ne[18]&254)>>>3,ae.dts*=4,ae.dts+=(ne[18]&6)>>>1)),ae.data=ne.subarray(9+ne[8]))},Z=function(ne,ae,pe){var Ee=new Uint8Array(ne.size),lt={type:ae},Xe=0,Pt=0,Bt=!1,ei;if(!(!ne.data.length||ne.size<9)){for(lt.trackId=ne.data[0].pid,Xe=0;Xe<ne.data.length;Xe++)ei=ne.data[Xe],Ee.set(ei.data,Pt),Pt+=ei.data.byteLength;K(Ee,lt),Bt=ae==="video"||lt.packetLength<=ne.size,(pe||Bt)&&(ne.size=0,ne.data.length=0),Bt&&T.trigger("data",lt)}};Il.prototype.init.call(this),this.push=function(ne){({pat:function(){},pes:function(){var ae,pe;switch(ne.streamType){case Bs.H264_STREAM_TYPE:ae=R,pe="video";break;case Bs.ADTS_STREAM_TYPE:ae=I,pe="audio";break;case Bs.METADATA_STREAM_TYPE:ae=N,pe="timed-metadata";break;default:return}ne.payloadUnitStartIndicator&&Z(ae,pe,!0),ae.data.push(ne),ae.size+=ne.data.byteLength},pmt:function(){var ae={type:"metadata",tracks:[]};F=ne.programMapTable,F.video!==null&&ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),F.audio!==null&&ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),M=!0,T.trigger("data",ae)}})[ne.type]()},this.reset=function(){R.size=0,R.data.length=0,I.size=0,I.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Z(R,"video"),Z(I,"audio"),Z(N,"timed-metadata")},this.flush=function(){if(!M&&F){var ne={type:"metadata",tracks:[]};F.video!==null&&ne.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),F.audio!==null&&ne.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),T.trigger("data",ne)}M=!1,this.flushStreams_(),this.trigger("done")}},Il.prototype=new md;var xf={PAT_PID:0,MP2T_PACKET_LENGTH:Hu,TransportPacketStream:Pl,TransportParseStream:sa,ElementaryStream:Il,TimestampRolloverStream:_f,CaptionStream:zu.CaptionStream,Cea608Stream:zu.Cea608Stream,Cea708Stream:zu.Cea708Stream,MetadataStream:dr};for(var gd in Bs)Bs.hasOwnProperty(gd)&&(xf[gd]=Bs[gd]);var yd=xf,wE=n,Pg=ct.ONE_SECOND_IN_TS,ln,Ig=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ln=function(T){var M,R=0;ln.prototype.init.call(this),this.skipWarn_=function(I,N){this.trigger("log",{level:"warn",message:`adts skiping bytes ${I} to ${N} in frame ${R} outside syncword`})},this.push=function(I){var N=0,F,K,Z,ne,ae;if(T||(R=0),I.type==="audio"){M&&M.length?(Z=M,M=new Uint8Array(Z.byteLength+I.data.byteLength),M.set(Z),M.set(I.data,Z.byteLength)):M=I.data;for(var pe;N+7<M.length;){if(M[N]!==255||(M[N+1]&246)!==240){typeof pe!="number"&&(pe=N),N++;continue}if(typeof pe=="number"&&(this.skipWarn_(pe,N),pe=null),K=(~M[N+1]&1)*2,F=(M[N+3]&3)<<11|M[N+4]<<3|(M[N+5]&224)>>5,ne=((M[N+6]&3)+1)*1024,ae=ne*Pg/Ig[(M[N+2]&60)>>>2],M.byteLength-N<F)break;this.trigger("data",{pts:I.pts+R*ae,dts:I.dts+R*ae,sampleCount:ne,audioobjecttype:(M[N+2]>>>6&3)+1,channelcount:(M[N+2]&1)<<2|(M[N+3]&192)>>>6,samplerate:Ig[(M[N+2]&60)>>>2],samplingfrequencyindex:(M[N+2]&60)>>>2,samplesize:16,data:M.subarray(N+7+K,N+F)}),R++,N+=F}typeof pe=="number"&&(this.skipWarn_(pe,N),pe=null),M=M.subarray(N)}},this.flush=function(){R=0,this.trigger("done")},this.reset=function(){M=void 0,this.trigger("reset")},this.endTimeline=function(){M=void 0,this.trigger("endedtimeline")}},ln.prototype=new wE;var Rg=ln,Dg;Dg=function(T){var M=T.byteLength,R=0,I=0;this.length=function(){return 8*M},this.bitsAvailable=function(){return 8*M+I},this.loadWord=function(){var N=T.byteLength-M,F=new Uint8Array(4),K=Math.min(4,M);if(K===0)throw new Error("no bytes available");F.set(T.subarray(N,N+K)),R=new DataView(F.buffer).getUint32(0),I=K*8,M-=K},this.skipBits=function(N){var F;I>N?(R<<=N,I-=N):(N-=I,F=Math.floor(N/8),N-=F*8,M-=F,this.loadWord(),R<<=N,I-=N)},this.readBits=function(N){var F=Math.min(I,N),K=R>>>32-F;return I-=F,I>0?R<<=F:M>0&&this.loadWord(),F=N-F,F>0?K<<F|this.readBits(F):K},this.skipLeadingZeros=function(){var N;for(N=0;N<I;++N)if(R&2147483648>>>N)return R<<=N,I-=N,N;return this.loadWord(),N+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var N=this.skipLeadingZeros();return this.readBits(N+1)-1},this.readExpGolomb=function(){var N=this.readUnsignedExpGolomb();return 1&N?1+N>>>1:-1*(N>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var EE=Dg,G_=n,Ii=EE,Vu,vd,Sf;vd=function(){var T=0,M,R;vd.prototype.init.call(this),this.push=function(I){var N;R?(N=new Uint8Array(R.byteLength+I.data.byteLength),N.set(R),N.set(I.data,R.byteLength),R=N):R=I.data;for(var F=R.byteLength;T<F-3;T++)if(R[T+2]===1){M=T+5;break}for(;M<F;)switch(R[M]){case 0:if(R[M-1]!==0){M+=2;break}else if(R[M-2]!==0){M++;break}T+3!==M-2&&this.trigger("data",R.subarray(T+3,M-2));do M++;while(R[M]!==1&&M<F);T=M-2,M+=3;break;case 1:if(R[M-1]!==0||R[M-2]!==0){M+=3;break}this.trigger("data",R.subarray(T+3,M-2)),T=M-2,M+=3;break;default:M+=3;break}R=R.subarray(T),M-=T,T=0},this.reset=function(){R=null,T=0,this.trigger("reset")},this.flush=function(){R&&R.byteLength>3&&this.trigger("data",R.subarray(T+3)),R=null,T=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},vd.prototype=new G_,Sf={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Vu=function(){var T=new vd,M,R,I,N,F,K,Z;Vu.prototype.init.call(this),M=this,this.push=function(ne){ne.type==="video"&&(R=ne.trackId,I=ne.pts,N=ne.dts,T.push(ne))},T.on("data",function(ne){var ae={trackId:R,pts:I,dts:N,data:ne,nalUnitTypeCode:ne[0]&31};switch(ae.nalUnitTypeCode){case 5:ae.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ae.nalUnitType="sei_rbsp",ae.escapedRBSP=F(ne.subarray(1));break;case 7:ae.nalUnitType="seq_parameter_set_rbsp",ae.escapedRBSP=F(ne.subarray(1)),ae.config=K(ae.escapedRBSP);break;case 8:ae.nalUnitType="pic_parameter_set_rbsp";break;case 9:ae.nalUnitType="access_unit_delimiter_rbsp";break}M.trigger("data",ae)}),T.on("done",function(){M.trigger("done")}),T.on("partialdone",function(){M.trigger("partialdone")}),T.on("reset",function(){M.trigger("reset")}),T.on("endedtimeline",function(){M.trigger("endedtimeline")}),this.flush=function(){T.flush()},this.partialFlush=function(){T.partialFlush()},this.reset=function(){T.reset()},this.endTimeline=function(){T.endTimeline()},Z=function(ne,ae){var pe=8,Ee=8,lt,Xe;for(lt=0;lt<ne;lt++)Ee!==0&&(Xe=ae.readExpGolomb(),Ee=(pe+Xe+256)%256),pe=Ee===0?pe:Ee},F=function(ne){for(var ae=ne.byteLength,pe=[],Ee=1,lt,Xe;Ee<ae-2;)ne[Ee]===0&&ne[Ee+1]===0&&ne[Ee+2]===3?(pe.push(Ee+2),Ee+=2):Ee++;if(pe.length===0)return ne;lt=ae-pe.length,Xe=new Uint8Array(lt);var Pt=0;for(Ee=0;Ee<lt;Pt++,Ee++)Pt===pe[0]&&(Pt++,pe.shift()),Xe[Ee]=ne[Pt];return Xe},K=function(ne){var ae=0,pe=0,Ee=0,lt=0,Xe,Pt,Bt,ei,Hr,Ws,ji,ux,cx,fr,Ji,ti=[1,1],Qg,Wa;if(Xe=new Ii(ne),Pt=Xe.readUnsignedByte(),ei=Xe.readUnsignedByte(),Bt=Xe.readUnsignedByte(),Xe.skipUnsignedExpGolomb(),Sf[Pt]&&(Hr=Xe.readUnsignedExpGolomb(),Hr===3&&Xe.skipBits(1),Xe.skipUnsignedExpGolomb(),Xe.skipUnsignedExpGolomb(),Xe.skipBits(1),Xe.readBoolean()))for(Ji=Hr!==3?8:12,Wa=0;Wa<Ji;Wa++)Xe.readBoolean()&&(Wa<6?Z(16,Xe):Z(64,Xe));if(Xe.skipUnsignedExpGolomb(),Ws=Xe.readUnsignedExpGolomb(),Ws===0)Xe.readUnsignedExpGolomb();else if(Ws===1)for(Xe.skipBits(1),Xe.skipExpGolomb(),Xe.skipExpGolomb(),ji=Xe.readUnsignedExpGolomb(),Wa=0;Wa<ji;Wa++)Xe.skipExpGolomb();if(Xe.skipUnsignedExpGolomb(),Xe.skipBits(1),ux=Xe.readUnsignedExpGolomb(),cx=Xe.readUnsignedExpGolomb(),fr=Xe.readBits(1),fr===0&&Xe.skipBits(1),Xe.skipBits(1),Xe.readBoolean()&&(ae=Xe.readUnsignedExpGolomb(),pe=Xe.readUnsignedExpGolomb(),Ee=Xe.readUnsignedExpGolomb(),lt=Xe.readUnsignedExpGolomb()),Xe.readBoolean()&&Xe.readBoolean()){switch(Qg=Xe.readUnsignedByte(),Qg){case 1:ti=[1,1];break;case 2:ti=[12,11];break;case 3:ti=[10,11];break;case 4:ti=[16,11];break;case 5:ti=[40,33];break;case 6:ti=[24,11];break;case 7:ti=[20,11];break;case 8:ti=[32,11];break;case 9:ti=[80,33];break;case 10:ti=[18,11];break;case 11:ti=[15,11];break;case 12:ti=[64,33];break;case 13:ti=[160,99];break;case 14:ti=[4,3];break;case 15:ti=[3,2];break;case 16:ti=[2,1];break;case 255:{ti=[Xe.readUnsignedByte()<<8|Xe.readUnsignedByte(),Xe.readUnsignedByte()<<8|Xe.readUnsignedByte()];break}}ti&&ti[0]/ti[1]}return{profileIdc:Pt,levelIdc:Bt,profileCompatibility:ei,width:(ux+1)*16-ae*2-pe*2,height:(2-fr)*(cx+1)*16-Ee*2-lt*2,sarRatio:ti}}},Vu.prototype=new G_;var CE={H264Stream:Vu,NalByteStream:vd},Tf=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],zs=function(T,M){var R=T[M+6]<<21|T[M+7]<<14|T[M+8]<<7|T[M+9],I=T[M+5],N=(I&16)>>4;return R=R>=0?R:0,N?R+20:R+10},W_=function(T,M){return T.length-M<10||T[M]!=="I".charCodeAt(0)||T[M+1]!=="D".charCodeAt(0)||T[M+2]!=="3".charCodeAt(0)?M:(M+=zs(T,M),W_(T,M))},AE=function(T){var M=W_(T,0);return T.length>=M+2&&(T[M]&255)===255&&(T[M+1]&240)===240&&(T[M+1]&22)===16},Hs=function(T){return T[0]<<21|T[1]<<14|T[2]<<7|T[3]},oa=function(T,M,R){var I,N="";for(I=M;I<R;I++)N+="%"+("00"+T[I].toString(16)).slice(-2);return N},bf=function(T,M,R){return unescape(oa(T,M,R))},kg=function(T,M){var R=(T[M+5]&224)>>5,I=T[M+4]<<3,N=T[M+3]&6144;return N|I|R},j_=function(T,M){return T[M]==="I".charCodeAt(0)&&T[M+1]==="D".charCodeAt(0)&&T[M+2]==="3".charCodeAt(0)?"timed-metadata":T[M]&!0&&(T[M+1]&240)===240?"audio":null},ME=function(T){for(var M=0;M+5<T.length;){if(T[M]!==255||(T[M+1]&246)!==240){M++;continue}return Tf[(T[M+2]&60)>>>2]}return null},vo=function(T){var M,R,I,N;M=10,T[5]&64&&(M+=4,M+=Hs(T.subarray(10,14)));do{if(R=Hs(T.subarray(M+4,M+8)),R<1)return null;if(N=String.fromCharCode(T[M],T[M+1],T[M+2],T[M+3]),N==="PRIV"){I=T.subarray(M+10,M+R+10);for(var F=0;F<I.byteLength;F++)if(I[F]===0){var K=bf(I,0,F);if(K==="com.apple.streaming.transportStreamTimestamp"){var Z=I.subarray(F+1),ne=(Z[3]&1)<<30|Z[4]<<22|Z[5]<<14|Z[6]<<6|Z[7]>>>2;return ne*=4,ne+=Z[7]&3,ne}break}}M+=10,M+=R}while(M<T.byteLength);return null},Lg={isLikelyAacData:AE,parseId3TagSize:zs,parseAdtsSize:kg,parseType:j_,parseSampleRate:ME,parseAacTimestamp:vo},wf=n,q_=Lg,Tr;Tr=function(){var T=new Uint8Array,M=0;Tr.prototype.init.call(this),this.setTimestamp=function(R){M=R},this.push=function(R){var I=0,N=0,F,K,Z,ne;for(T.length?(ne=T.length,T=new Uint8Array(R.byteLength+ne),T.set(T.subarray(0,ne)),T.set(R,ne)):T=R;T.length-N>=3;){if(T[N]==="I".charCodeAt(0)&&T[N+1]==="D".charCodeAt(0)&&T[N+2]==="3".charCodeAt(0)){if(T.length-N<10||(I=q_.parseId3TagSize(T,N),N+I>T.length))break;K={type:"timed-metadata",data:T.subarray(N,N+I)},this.trigger("data",K),N+=I;continue}else if((T[N]&255)===255&&(T[N+1]&240)===240){if(T.length-N<7||(I=q_.parseAdtsSize(T,N),N+I>T.length))break;Z={type:"audio",data:T.subarray(N,N+I),pts:M,dts:M},this.trigger("data",Z),N+=I;continue}N++}F=T.length-N,F>0?T=T.subarray(N):T=new Uint8Array},this.reset=function(){T=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){T=new Uint8Array,this.trigger("endedtimeline")}},Tr.prototype=new wf;var Ef=Tr,Cf=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],$u=Cf,Ng=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Og=Ng,_d=n,Rl=He,Dl=We,aa=Pe,Jn=dn,Ri=yd,Vs=ct,Af=Rg,X_=CE.H264Stream,la=Ef,Ha=Lg.isLikelyAacData,Mf=ct.ONE_SECOND_IN_TS,Pf=$u,Gu=Og,Wu,kl,ju,_o,Y_=function(T,M){M.stream=T,this.trigger("log",M)},Ug=function(T,M){for(var R=Object.keys(M),I=0;I<R.length;I++){var N=R[I];N==="headOfPipeline"||!M[N].on||M[N].on("log",Y_.bind(T,N))}},Fg=function(T,M){var R;if(T.length!==M.length)return!1;for(R=0;R<T.length;R++)if(T[R]!==M[R])return!1;return!0},xd=function(T,M,R,I,N,F){var K=R-M,Z=I-M,ne=N-R;return{start:{dts:T,pts:T+K},end:{dts:T+Z,pts:T+ne},prependedContentDuration:F,baseMediaDecodeTime:T}};kl=function(T,M){var R=[],I,N=0,F=0,K=1/0;M=M||{},I=M.firstSequenceNumber||0,kl.prototype.init.call(this),this.push=function(Z){Jn.collectDtsInfo(T,Z),T&&Pf.forEach(function(ne){T[ne]=Z[ne]}),R.push(Z)},this.setEarliestDts=function(Z){N=Z},this.setVideoBaseMediaDecodeTime=function(Z){K=Z},this.setAudioAppendStart=function(Z){F=Z},this.flush=function(){var Z,ne,ae,pe,Ee,lt,Xe;if(R.length===0){this.trigger("done","AudioSegmentStream");return}Z=aa.trimAdtsFramesByEarliestDts(R,T,N),T.baseMediaDecodeTime=Jn.calculateTrackBaseMediaDecodeTime(T,M.keepOriginalTimestamps),Xe=aa.prefixWithSilence(T,Z,F,K),T.samples=aa.generateSampleTable(Z),ae=Rl.mdat(aa.concatenateFrameData(Z)),R=[],ne=Rl.moof(I,[T]),pe=new Uint8Array(ne.byteLength+ae.byteLength),I++,pe.set(ne),pe.set(ae,ne.byteLength),Jn.clearDtsInfo(T),Ee=Math.ceil(Mf*1024/T.samplerate),Z.length&&(lt=Z.length*Ee,this.trigger("segmentTimingInfo",xd(Vs.audioTsToVideoTs(T.baseMediaDecodeTime,T.samplerate),Z[0].dts,Z[0].pts,Z[0].dts+lt,Z[0].pts+lt,Xe||0)),this.trigger("timingInfo",{start:Z[0].pts,end:Z[0].pts+lt})),this.trigger("data",{track:T,boxes:pe}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Jn.clearDtsInfo(T),R=[],this.trigger("reset")}},kl.prototype=new _d,Wu=function(T,M){var R,I=[],N=[],F,K;M=M||{},R=M.firstSequenceNumber||0,Wu.prototype.init.call(this),delete T.minPTS,this.gopCache_=[],this.push=function(Z){Jn.collectDtsInfo(T,Z),Z.nalUnitType==="seq_parameter_set_rbsp"&&!F&&(F=Z.config,T.sps=[Z.data],Gu.forEach(function(ne){T[ne]=F[ne]},this)),Z.nalUnitType==="pic_parameter_set_rbsp"&&!K&&(K=Z.data,T.pps=[Z.data]),I.push(Z)},this.flush=function(){for(var Z,ne,ae,pe,Ee,lt,Xe=0,Pt,Bt;I.length&&I[0].nalUnitType!=="access_unit_delimiter_rbsp";)I.shift();if(I.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Z=Dl.groupNalsIntoFrames(I),ae=Dl.groupFramesIntoGops(Z),ae[0][0].keyFrame||(ne=this.getGopForFusion_(I[0],T),ne?(Xe=ne.duration,ae.unshift(ne),ae.byteLength+=ne.byteLength,ae.nalCount+=ne.nalCount,ae.pts=ne.pts,ae.dts=ne.dts,ae.duration+=ne.duration):ae=Dl.extendFirstKeyFrame(ae)),N.length){var ei;if(M.alignGopsAtEnd?ei=this.alignGopsAtEnd_(ae):ei=this.alignGopsAtStart_(ae),!ei){this.gopCache_.unshift({gop:ae.pop(),pps:T.pps,sps:T.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Jn.clearDtsInfo(T),ae=ei}Jn.collectDtsInfo(T,ae),T.samples=Dl.generateSampleTable(ae),Ee=Rl.mdat(Dl.concatenateNalData(ae)),T.baseMediaDecodeTime=Jn.calculateTrackBaseMediaDecodeTime(T,M.keepOriginalTimestamps),this.trigger("processedGopsInfo",ae.map(function(Hr){return{pts:Hr.pts,dts:Hr.dts,byteLength:Hr.byteLength}})),Pt=ae[0],Bt=ae[ae.length-1],this.trigger("segmentTimingInfo",xd(T.baseMediaDecodeTime,Pt.dts,Pt.pts,Bt.dts+Bt.duration,Bt.pts+Bt.duration,Xe)),this.trigger("timingInfo",{start:ae[0].pts,end:ae[ae.length-1].pts+ae[ae.length-1].duration}),this.gopCache_.unshift({gop:ae.pop(),pps:T.pps,sps:T.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.trigger("baseMediaDecodeTime",T.baseMediaDecodeTime),this.trigger("timelineStartInfo",T.timelineStartInfo),pe=Rl.moof(R,[T]),lt=new Uint8Array(pe.byteLength+Ee.byteLength),R++,lt.set(pe),lt.set(Ee,pe.byteLength),this.trigger("data",{track:T,boxes:lt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),I=[],this.gopCache_.length=0,N.length=0,this.trigger("reset")},this.resetStream_=function(){Jn.clearDtsInfo(T),F=void 0,K=void 0},this.getGopForFusion_=function(Z){var ne=45e3,ae=1e4,pe=1/0,Ee,lt,Xe,Pt,Bt;for(Bt=0;Bt<this.gopCache_.length;Bt++)Pt=this.gopCache_[Bt],Xe=Pt.gop,!(!(T.pps&&Fg(T.pps[0],Pt.pps[0]))||!(T.sps&&Fg(T.sps[0],Pt.sps[0])))&&(Xe.dts<T.timelineStartInfo.dts||(Ee=Z.dts-Xe.dts-Xe.duration,Ee>=-ae&&Ee<=ne&&(!lt||pe>Ee)&&(lt=Pt,pe=Ee)));return lt?lt.gop:null},this.alignGopsAtStart_=function(Z){var ne,ae,pe,Ee,lt,Xe,Pt,Bt;for(lt=Z.byteLength,Xe=Z.nalCount,Pt=Z.duration,ne=ae=0;ne<N.length&&ae<Z.length&&(pe=N[ne],Ee=Z[ae],pe.pts!==Ee.pts);){if(Ee.pts>pe.pts){ne++;continue}ae++,lt-=Ee.byteLength,Xe-=Ee.nalCount,Pt-=Ee.duration}return ae===0?Z:ae===Z.length?null:(Bt=Z.slice(ae),Bt.byteLength=lt,Bt.duration=Pt,Bt.nalCount=Xe,Bt.pts=Bt[0].pts,Bt.dts=Bt[0].dts,Bt)},this.alignGopsAtEnd_=function(Z){var ne,ae,pe,Ee,lt,Xe;for(ne=N.length-1,ae=Z.length-1,lt=null,Xe=!1;ne>=0&&ae>=0;){if(pe=N[ne],Ee=Z[ae],pe.pts===Ee.pts){Xe=!0;break}if(pe.pts>Ee.pts){ne--;continue}ne===N.length-1&&(lt=ae),ae--}if(!Xe&&lt===null)return null;var Pt;if(Xe?Pt=ae:Pt=lt,Pt===0)return Z;var Bt=Z.slice(Pt),ei=Bt.reduce(function(Hr,Ws){return Hr.byteLength+=Ws.byteLength,Hr.duration+=Ws.duration,Hr.nalCount+=Ws.nalCount,Hr},{byteLength:0,duration:0,nalCount:0});return Bt.byteLength=ei.byteLength,Bt.duration=ei.duration,Bt.nalCount=ei.nalCount,Bt.pts=Bt[0].pts,Bt.dts=Bt[0].dts,Bt},this.alignGopsWith=function(Z){N=Z}},Wu.prototype=new _d,_o=function(T,M){this.numberOfTracks=0,this.metadataStream=M,T=T||{},typeof T.remux<"u"?this.remuxTracks=!!T.remux:this.remuxTracks=!0,typeof T.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=T.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,_o.prototype.init.call(this),this.push=function(R){if(R.content||R.text)return this.pendingCaptions.push(R);if(R.frames)return this.pendingMetadata.push(R);this.pendingTracks.push(R.track),this.pendingBytes+=R.boxes.byteLength,R.track.type==="video"&&(this.videoTrack=R.track,this.pendingBoxes.push(R.boxes)),R.track.type==="audio"&&(this.audioTrack=R.track,this.pendingBoxes.unshift(R.boxes))}},_o.prototype=new _d,_o.prototype.flush=function(T){var M=0,R={captions:[],captionStreams:{},metadata:[],info:{}},I,N,F,K=0,Z;if(this.pendingTracks.length<this.numberOfTracks){if(T!=="VideoSegmentStream"&&T!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(K=this.videoTrack.timelineStartInfo.pts,Gu.forEach(function(ne){R.info[ne]=this.videoTrack[ne]},this)):this.audioTrack&&(K=this.audioTrack.timelineStartInfo.pts,Pf.forEach(function(ne){R.info[ne]=this.audioTrack[ne]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?R.type=this.pendingTracks[0].type:R.type="combined",this.emittedTracks+=this.pendingTracks.length,F=Rl.initSegment(this.pendingTracks),R.initSegment=new Uint8Array(F.byteLength),R.initSegment.set(F),R.data=new Uint8Array(this.pendingBytes),Z=0;Z<this.pendingBoxes.length;Z++)R.data.set(this.pendingBoxes[Z],M),M+=this.pendingBoxes[Z].byteLength;for(Z=0;Z<this.pendingCaptions.length;Z++)I=this.pendingCaptions[Z],I.startTime=Vs.metadataTsToSeconds(I.startPts,K,this.keepOriginalTimestamps),I.endTime=Vs.metadataTsToSeconds(I.endPts,K,this.keepOriginalTimestamps),R.captionStreams[I.stream]=!0,R.captions.push(I);for(Z=0;Z<this.pendingMetadata.length;Z++)N=this.pendingMetadata[Z],N.cueTime=Vs.metadataTsToSeconds(N.pts,K,this.keepOriginalTimestamps),R.metadata.push(N);for(R.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",R),Z=0;Z<R.captions.length;Z++)I=R.captions[Z],this.trigger("caption",I);for(Z=0;Z<R.metadata.length;Z++)N=R.metadata[Z],this.trigger("id3Frame",N)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},_o.prototype.setRemux=function(T){this.remuxTracks=T},ju=function(T){var M=this,R=!0,I,N;ju.prototype.init.call(this),T=T||{},this.baseMediaDecodeTime=T.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="aac",F.metadataStream=new Ri.MetadataStream,F.aacStream=new la,F.audioTimestampRolloverStream=new Ri.TimestampRolloverStream("audio"),F.timedMetadataTimestampRolloverStream=new Ri.TimestampRolloverStream("timed-metadata"),F.adtsStream=new Af,F.coalesceStream=new _o(T,F.metadataStream),F.headOfPipeline=F.aacStream,F.aacStream.pipe(F.audioTimestampRolloverStream).pipe(F.adtsStream),F.aacStream.pipe(F.timedMetadataTimestampRolloverStream).pipe(F.metadataStream).pipe(F.coalesceStream),F.metadataStream.on("timestamp",function(K){F.aacStream.setTimestamp(K.timeStamp)}),F.aacStream.on("data",function(K){K.type!=="timed-metadata"&&K.type!=="audio"||F.audioSegmentStream||(N=N||{timelineStartInfo:{baseMediaDecodeTime:M.baseMediaDecodeTime},codec:"adts",type:"audio"},F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new kl(N,T),F.audioSegmentStream.on("log",M.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",M.trigger.bind(M,"audioTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream),M.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!I}))}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),Ug(this,F)},this.setupTsPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="ts",F.metadataStream=new Ri.MetadataStream,F.packetStream=new Ri.TransportPacketStream,F.parseStream=new Ri.TransportParseStream,F.elementaryStream=new Ri.ElementaryStream,F.timestampRolloverStream=new Ri.TimestampRolloverStream,F.adtsStream=new Af,F.h264Stream=new X_,F.captionStream=new Ri.CaptionStream(T),F.coalesceStream=new _o(T,F.metadataStream),F.headOfPipeline=F.packetStream,F.packetStream.pipe(F.parseStream).pipe(F.elementaryStream).pipe(F.timestampRolloverStream),F.timestampRolloverStream.pipe(F.h264Stream),F.timestampRolloverStream.pipe(F.adtsStream),F.timestampRolloverStream.pipe(F.metadataStream).pipe(F.coalesceStream),F.h264Stream.pipe(F.captionStream).pipe(F.coalesceStream),F.elementaryStream.on("data",function(K){var Z;if(K.type==="metadata"){for(Z=K.tracks.length;Z--;)!I&&K.tracks[Z].type==="video"?(I=K.tracks[Z],I.timelineStartInfo.baseMediaDecodeTime=M.baseMediaDecodeTime):!N&&K.tracks[Z].type==="audio"&&(N=K.tracks[Z],N.timelineStartInfo.baseMediaDecodeTime=M.baseMediaDecodeTime);I&&!F.videoSegmentStream&&(F.coalesceStream.numberOfTracks++,F.videoSegmentStream=new Wu(I,T),F.videoSegmentStream.on("log",M.getLogTrigger_("videoSegmentStream")),F.videoSegmentStream.on("timelineStartInfo",function(ne){N&&!T.keepOriginalTimestamps&&(N.timelineStartInfo=ne,F.audioSegmentStream.setEarliestDts(ne.dts-M.baseMediaDecodeTime))}),F.videoSegmentStream.on("processedGopsInfo",M.trigger.bind(M,"gopInfo")),F.videoSegmentStream.on("segmentTimingInfo",M.trigger.bind(M,"videoSegmentTimingInfo")),F.videoSegmentStream.on("baseMediaDecodeTime",function(ne){N&&F.audioSegmentStream.setVideoBaseMediaDecodeTime(ne)}),F.videoSegmentStream.on("timingInfo",M.trigger.bind(M,"videoTimingInfo")),F.h264Stream.pipe(F.videoSegmentStream).pipe(F.coalesceStream)),N&&!F.audioSegmentStream&&(F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new kl(N,T),F.audioSegmentStream.on("log",M.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",M.trigger.bind(M,"audioTimingInfo")),F.audioSegmentStream.on("segmentTimingInfo",M.trigger.bind(M,"audioSegmentTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream)),M.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!I})}}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("id3Frame",function(K){K.dispatchType=F.metadataStream.dispatchType,M.trigger("id3Frame",K)}),F.coalesceStream.on("caption",this.trigger.bind(this,"caption")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),Ug(this,F)},this.setBaseMediaDecodeTime=function(F){var K=this.transmuxPipeline_;T.keepOriginalTimestamps||(this.baseMediaDecodeTime=F),N&&(N.timelineStartInfo.dts=void 0,N.timelineStartInfo.pts=void 0,Jn.clearDtsInfo(N),K.audioTimestampRolloverStream&&K.audioTimestampRolloverStream.discontinuity()),I&&(K.videoSegmentStream&&(K.videoSegmentStream.gopCache_=[]),I.timelineStartInfo.dts=void 0,I.timelineStartInfo.pts=void 0,Jn.clearDtsInfo(I),K.captionStream.reset()),K.timestampRolloverStream&&K.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(F){N&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(F)},this.setRemux=function(F){var K=this.transmuxPipeline_;T.remux=F,K&&K.coalesceStream&&K.coalesceStream.setRemux(F)},this.alignGopsWith=function(F){I&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(F)},this.getLogTrigger_=function(F){var K=this;return function(Z){Z.stream=F,K.trigger("log",Z)}},this.push=function(F){if(R){var K=Ha(F);K&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!K&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),R=!1}this.transmuxPipeline_.headOfPipeline.push(F)},this.flush=function(){R=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ju.prototype=new _d;var qu={Transmuxer:ju,VideoSegmentStream:Wu,AudioSegmentStream:kl,AUDIO_PROPERTIES:Pf,VIDEO_PROPERTIES:Gu,generateSegmentTimingInfo:xd},Xu=function(T){return T>>>0},If=function(T){return("00"+T.toString(16)).slice(-2)},Ll={toUnsigned:Xu,toHexString:If},us=function(T){var M="";return M+=String.fromCharCode(T[0]),M+=String.fromCharCode(T[1]),M+=String.fromCharCode(T[2]),M+=String.fromCharCode(T[3]),M},Br=us,Nl=Ll.toUnsigned,ua=Br,xo=function(T,M){var R=[],I,N,F,K,Z;if(!M.length)return null;for(I=0;I<T.byteLength;)N=Nl(T[I]<<24|T[I+1]<<16|T[I+2]<<8|T[I+3]),F=ua(T.subarray(I+4,I+8)),K=N>1?I+N:T.byteLength,F===M[0]&&(M.length===1?R.push(T.subarray(I+8,K)):(Z=xo(T.subarray(I+8,K),M.slice(1)),Z.length&&(R=R.concat(Z)))),I=K;return R},Va=xo,K_=Ll.toUnsigned,Bg=s.getUint64,zg=function(T){var M={version:T[0],flags:new Uint8Array(T.subarray(1,4))};return M.version===1?M.baseMediaDecodeTime=Bg(T.subarray(4)):M.baseMediaDecodeTime=K_(T[4]<<24|T[5]<<16|T[6]<<8|T[7]),M},br=zg,zr=function(T){return{isLeading:(T[0]&12)>>>2,dependsOn:T[0]&3,isDependedOn:(T[1]&192)>>>6,hasRedundancy:(T[1]&48)>>>4,paddingValue:(T[1]&14)>>>1,isNonSyncSample:T[1]&1,degradationPriority:T[2]<<8|T[3]}},Hn=zr,Yu=Hn,$s=function(T){var M={version:T[0],flags:new Uint8Array(T.subarray(1,4)),samples:[]},R=new DataView(T.buffer,T.byteOffset,T.byteLength),I=M.flags[2]&1,N=M.flags[2]&4,F=M.flags[1]&1,K=M.flags[1]&2,Z=M.flags[1]&4,ne=M.flags[1]&8,ae=R.getUint32(4),pe=8,Ee;for(I&&(M.dataOffset=R.getInt32(pe),pe+=4),N&&ae&&(Ee={flags:Yu(T.subarray(pe,pe+4))},pe+=4,F&&(Ee.duration=R.getUint32(pe),pe+=4),K&&(Ee.size=R.getUint32(pe),pe+=4),ne&&(M.version===1?Ee.compositionTimeOffset=R.getInt32(pe):Ee.compositionTimeOffset=R.getUint32(pe),pe+=4),M.samples.push(Ee),ae--);ae--;)Ee={},F&&(Ee.duration=R.getUint32(pe),pe+=4),K&&(Ee.size=R.getUint32(pe),pe+=4),Z&&(Ee.flags=Yu(T.subarray(pe,pe+4)),pe+=4),ne&&(M.version===1?Ee.compositionTimeOffset=R.getInt32(pe):Ee.compositionTimeOffset=R.getUint32(pe),pe+=4),M.samples.push(Ee);return M},Hg=$s,Q_=function(T){var M=new DataView(T.buffer,T.byteOffset,T.byteLength),R={version:T[0],flags:new Uint8Array(T.subarray(1,4)),trackId:M.getUint32(4)},I=R.flags[2]&1,N=R.flags[2]&2,F=R.flags[2]&8,K=R.flags[2]&16,Z=R.flags[2]&32,ne=R.flags[0]&65536,ae=R.flags[0]&131072,pe;return pe=8,I&&(pe+=4,R.baseDataOffset=M.getUint32(12),pe+=4),N&&(R.sampleDescriptionIndex=M.getUint32(pe),pe+=4),F&&(R.defaultSampleDuration=M.getUint32(pe),pe+=4),K&&(R.defaultSampleSize=M.getUint32(pe),pe+=4),Z&&(R.defaultSampleFlags=M.getUint32(pe)),ne&&(R.durationIsEmpty=!0),!I&&ae&&(R.baseDataOffsetIsMoof=!0),R},Rf=Q_,Ol;typeof window<"u"?Ol=window:typeof t<"u"?Ol=t:typeof self<"u"?Ol=self:Ol={};var Vg=Ol,Sd=go.discardEmulationPreventionBytes,Ku=ye.CaptionStream,Ul=Va,Td=br,Df=Hg,Z_=Rf,$g=Vg,Qu=function(T,M){for(var R=T,I=0;I<M.length;I++){var N=M[I];if(R<N.size)return N;R-=N.size}return null},J_=function(T,M,R){var I=new DataView(T.buffer,T.byteOffset,T.byteLength),N={logs:[],seiNals:[]},F,K,Z,ne;for(K=0;K+4<T.length;K+=Z)if(Z=I.getUint32(K),K+=4,!(Z<=0))switch(T[K]&31){case 6:var ae=T.subarray(K+1,K+1+Z),pe=Qu(K,M);if(F={nalUnitType:"sei_rbsp",size:Z,data:ae,escapedRBSP:Sd(ae),trackId:R},pe)F.pts=pe.pts,F.dts=pe.dts,ne=pe;else if(ne)F.pts=ne.pts,F.dts=ne.dts;else{N.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+K+" for trackId "+R+". See mux.js#223."});break}N.seiNals.push(F);break}return N},bd=function(T,M,R){var I=M,N=R.defaultSampleDuration||0,F=R.defaultSampleSize||0,K=R.trackId,Z=[];return T.forEach(function(ne){var ae=Df(ne),pe=ae.samples;pe.forEach(function(Ee){Ee.duration===void 0&&(Ee.duration=N),Ee.size===void 0&&(Ee.size=F),Ee.trackId=K,Ee.dts=I,Ee.compositionTimeOffset===void 0&&(Ee.compositionTimeOffset=0),typeof I=="bigint"?(Ee.pts=I+$g.BigInt(Ee.compositionTimeOffset),I+=$g.BigInt(Ee.duration)):(Ee.pts=I+Ee.compositionTimeOffset,I+=Ee.duration)}),Z=Z.concat(pe)}),Z},cs=function(T,M){var R=Ul(T,["moof","traf"]),I=Ul(T,["mdat"]),N={},F=[];return I.forEach(function(K,Z){var ne=R[Z];F.push({mdat:K,traf:ne})}),F.forEach(function(K){var Z=K.mdat,ne=K.traf,ae=Ul(ne,["tfhd"]),pe=Z_(ae[0]),Ee=pe.trackId,lt=Ul(ne,["tfdt"]),Xe=lt.length>0?Td(lt[0]).baseMediaDecodeTime:0,Pt=Ul(ne,["trun"]),Bt,ei;M===Ee&&Pt.length>0&&(Bt=bd(Pt,Xe,pe),ei=J_(Z,Bt,Ee),N[Ee]||(N[Ee]={seiNals:[],logs:[]}),N[Ee].seiNals=N[Ee].seiNals.concat(ei.seiNals),N[Ee].logs=N[Ee].logs.concat(ei.logs))}),N},wd=function(T,M,R){var I;if(M===null)return null;I=cs(T,M);var N=I[M]||{};return{seiNals:N.seiNals,logs:N.logs,timescale:R}},Zu=function(){var T=!1,M,R,I,N,F,K;this.isInitialized=function(){return T},this.init=function(Z){M=new Ku,T=!0,K=Z?Z.isPartial:!1,M.on("data",function(ne){ne.startTime=ne.startPts/N,ne.endTime=ne.endPts/N,F.captions.push(ne),F.captionStreams[ne.stream]=!0}),M.on("log",function(ne){F.logs.push(ne)})},this.isNewInit=function(Z,ne){return Z&&Z.length===0||ne&&typeof ne=="object"&&Object.keys(ne).length===0?!1:I!==Z[0]||N!==ne[I]},this.parse=function(Z,ne,ae){var pe;if(this.isInitialized()){if(!ne||!ae)return null;if(this.isNewInit(ne,ae))I=ne[0],N=ae[I];else if(I===null||!N)return R.push(Z),null}else return null;for(;R.length>0;){var Ee=R.shift();this.parse(Ee,ne,ae)}return pe=wd(Z,I,N),pe&&pe.logs&&(F.logs=F.logs.concat(pe.logs)),pe===null||!pe.seiNals?F.logs.length?{logs:F.logs,captions:[],captionStreams:[]}:null:(this.pushNals(pe.seiNals),this.flushStream(),F)},this.pushNals=function(Z){if(!this.isInitialized()||!Z||Z.length===0)return null;Z.forEach(function(ne){M.push(ne)})},this.flushStream=function(){if(!this.isInitialized())return null;K?M.partialFlush():M.flush()},this.clearParsedCaptions=function(){F.captions=[],F.captionStreams={},F.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;M.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){R=[],I=null,N=null,F?this.clearParsedCaptions():F={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},So=Zu,Gg=function(T){for(var M=0,R=String.fromCharCode(T[M]),I="";R!=="\0";)I+=R,M++,R=String.fromCharCode(T[M]);return I+=R,I},Ju={uint8ToCString:Gg},Ed=Ju.uint8ToCString,Wg=s.getUint64,Yn=function(T){var M=4,R=T[0],I,N,F,K,Z,ne,ae,pe;if(R===0){I=Ed(T.subarray(M)),M+=I.length,N=Ed(T.subarray(M)),M+=N.length;var Ee=new DataView(T.buffer);F=Ee.getUint32(M),M+=4,Z=Ee.getUint32(M),M+=4,ne=Ee.getUint32(M),M+=4,ae=Ee.getUint32(M),M+=4}else if(R===1){var Ee=new DataView(T.buffer);F=Ee.getUint32(M),M+=4,K=Wg(T.subarray(M)),M+=8,ne=Ee.getUint32(M),M+=4,ae=Ee.getUint32(M),M+=4,I=Ed(T.subarray(M)),M+=I.length,N=Ed(T.subarray(M)),M+=N.length}pe=new Uint8Array(T.subarray(M,T.byteLength));var lt={scheme_id_uri:I,value:N,timescale:F||1,presentation_time:K,presentation_time_delta:Z,event_duration:ne,id:ae,message_data:pe};return jg(R,lt)?lt:void 0},kf=function(T,M,R,I){return T||T===0?T/M:I+R/M},jg=function(T,M){var R=M.scheme_id_uri!=="\0",I=T===0&&Lf(M.presentation_time_delta)&&R,N=T===1&&Lf(M.presentation_time)&&R;return!(T>1)&&I||N},Lf=function(T){return T!==void 0||T!==null},Nf={parseEmsgBox:Yn,scaleTime:kf},hr=Ll.toUnsigned,To=Ll.toHexString,qt=Va,ai=Br,gi=Nf,Of=Rf,Cd=Hg,Ad=br,PE=s.getUint64,Gi,Uf,Ff,Bf,bo,ds,$a,ec=Vg,zf=ra.parseId3Frames;Gi=function(T){var M={},R=qt(T,["moov","trak"]);return R.reduce(function(I,N){var F,K,Z,ne,ae;return F=qt(N,["tkhd"])[0],!F||(K=F[0],Z=K===0?12:20,ne=hr(F[Z]<<24|F[Z+1]<<16|F[Z+2]<<8|F[Z+3]),ae=qt(N,["mdia","mdhd"])[0],!ae)?null:(K=ae[0],Z=K===0?12:20,I[ne]=hr(ae[Z]<<24|ae[Z+1]<<16|ae[Z+2]<<8|ae[Z+3]),I)},M)},Uf=function(T,M){var R;R=qt(M,["moof","traf"]);var I=R.reduce(function(N,F){var K=qt(F,["tfhd"])[0],Z=hr(K[4]<<24|K[5]<<16|K[6]<<8|K[7]),ne=T[Z]||9e4,ae=qt(F,["tfdt"])[0],pe=new DataView(ae.buffer,ae.byteOffset,ae.byteLength),Ee;ae[0]===1?Ee=PE(ae.subarray(4,12)):Ee=pe.getUint32(4);let lt;return typeof Ee=="bigint"?lt=Ee/ec.BigInt(ne):typeof Ee=="number"&&!isNaN(Ee)&&(lt=Ee/ne),lt<Number.MAX_SAFE_INTEGER&&(lt=Number(lt)),lt<N&&(N=lt),N},1/0);return typeof I=="bigint"||isFinite(I)?I:0},Ff=function(T,M){var R=qt(M,["moof","traf"]),I=0,N=0,F;if(R&&R.length){var K=qt(R[0],["tfhd"])[0],Z=qt(R[0],["trun"])[0],ne=qt(R[0],["tfdt"])[0];if(K){var ae=Of(K);F=ae.trackId}if(ne){var pe=Ad(ne);I=pe.baseMediaDecodeTime}if(Z){var Ee=Cd(Z);Ee.samples&&Ee.samples.length&&(N=Ee.samples[0].compositionTimeOffset||0)}}var lt=T[F]||9e4;typeof I=="bigint"&&(N=ec.BigInt(N),lt=ec.BigInt(lt));var Xe=(I+N)/lt;return typeof Xe=="bigint"&&Xe<Number.MAX_SAFE_INTEGER&&(Xe=Number(Xe)),Xe},Bf=function(T){var M=qt(T,["moov","trak"]),R=[];return M.forEach(function(I){var N=qt(I,["mdia","hdlr"]),F=qt(I,["tkhd"]);N.forEach(function(K,Z){var ne=ai(K.subarray(8,12)),ae=F[Z],pe,Ee,lt;ne==="vide"&&(pe=new DataView(ae.buffer,ae.byteOffset,ae.byteLength),Ee=pe.getUint8(0),lt=Ee===0?pe.getUint32(12):pe.getUint32(20),R.push(lt))})}),R},ds=function(T){var M=T[0],R=M===0?12:20;return hr(T[R]<<24|T[R+1]<<16|T[R+2]<<8|T[R+3])},bo=function(T){var M=qt(T,["moov","trak"]),R=[];return M.forEach(function(I){var N={},F=qt(I,["tkhd"])[0],K,Z;F&&(K=new DataView(F.buffer,F.byteOffset,F.byteLength),Z=K.getUint8(0),N.id=Z===0?K.getUint32(12):K.getUint32(20));var ne=qt(I,["mdia","hdlr"])[0];if(ne){var ae=ai(ne.subarray(8,12));ae==="vide"?N.type="video":ae==="soun"?N.type="audio":N.type=ae}var pe=qt(I,["mdia","minf","stbl","stsd"])[0];if(pe){var Ee=pe.subarray(8);N.codec=ai(Ee.subarray(4,8));var lt=qt(Ee,[N.codec])[0],Xe,Pt;lt&&(/^[asm]vc[1-9]$/i.test(N.codec)?(Xe=lt.subarray(78),Pt=ai(Xe.subarray(4,8)),Pt==="avcC"&&Xe.length>11?(N.codec+=".",N.codec+=To(Xe[9]),N.codec+=To(Xe[10]),N.codec+=To(Xe[11])):N.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(N.codec)?(Xe=lt.subarray(28),Pt=ai(Xe.subarray(4,8)),Pt==="esds"&&Xe.length>20&&Xe[19]!==0?(N.codec+="."+To(Xe[19]),N.codec+="."+To(Xe[20]>>>2&63).replace(/^0/,"")):N.codec="mp4a.40.2"):N.codec=N.codec.toLowerCase())}var Bt=qt(I,["mdia","mdhd"])[0];Bt&&(N.timescale=ds(Bt)),R.push(N)}),R},$a=function(T,M=0){var R=qt(T,["emsg"]);return R.map(I=>{var N=gi.parseEmsgBox(new Uint8Array(I)),F=zf(N.message_data);return{cueTime:gi.scaleTime(N.presentation_time,N.timescale,N.presentation_time_delta,M),duration:gi.scaleTime(N.event_duration,N.timescale),frames:F}})};var Hf={findBox:qt,parseType:ai,timescale:Gi,startTime:Uf,compositionStartTime:Ff,videoTrackIds:Bf,tracks:bo,getTimescaleFromMediaHeader:ds,getEmsgID3:$a},Vf=tt,qg=function(T){var M=T[1]&31;return M<<=8,M|=T[2],M},Md=function(T){return!!(T[1]&64)},Pd=function(T){var M=0;return(T[3]&48)>>>4>1&&(M+=T[4]+1),M},ex=function(T,M){var R=qg(T);return R===0?"pat":R===M?"pmt":M?"pes":null},Xg=function(T){var M=Md(T),R=4+Pd(T);return M&&(R+=T[R]+1),(T[R+10]&31)<<8|T[R+11]},Id=function(T){var M={},R=Md(T),I=4+Pd(T);if(R&&(I+=T[I]+1),!!(T[I+5]&1)){var N,F,K;N=(T[I+1]&15)<<8|T[I+2],F=3+N-4,K=(T[I+10]&15)<<8|T[I+11];for(var Z=12+K;Z<F;){var ne=I+Z;M[(T[ne+1]&31)<<8|T[ne+2]]=T[ne],Z+=((T[ne+3]&15)<<8|T[ne+4])+5}return M}},tx=function(T,M){var R=qg(T),I=M[R];switch(I){case Vf.H264_STREAM_TYPE:return"video";case Vf.ADTS_STREAM_TYPE:return"audio";case Vf.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},$f=function(T){var M=Md(T);if(!M)return null;var R=4+Pd(T);if(R>=T.byteLength)return null;var I=null,N;return N=T[R+7],N&192&&(I={},I.pts=(T[R+9]&14)<<27|(T[R+10]&255)<<20|(T[R+11]&254)<<12|(T[R+12]&255)<<5|(T[R+13]&254)>>>3,I.pts*=4,I.pts+=(T[R+13]&6)>>>1,I.dts=I.pts,N&64&&(I.dts=(T[R+14]&14)<<27|(T[R+15]&255)<<20|(T[R+16]&254)<<12|(T[R+17]&255)<<5|(T[R+18]&254)>>>3,I.dts*=4,I.dts+=(T[R+18]&6)>>>1)),I},tc=function(T){switch(T){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Yg=function(T){for(var M=4+Pd(T),R=T.subarray(M),I=0,N=0,F=!1,K;N<R.byteLength-3;N++)if(R[N+2]===1){I=N+5;break}for(;I<R.byteLength;)switch(R[I]){case 0:if(R[I-1]!==0){I+=2;break}else if(R[I-2]!==0){I++;break}N+3!==I-2&&(K=tc(R[N+3]&31),K==="slice_layer_without_partitioning_rbsp_idr"&&(F=!0));do I++;while(R[I]!==1&&I<R.length);N=I-2,I+=3;break;case 1:if(R[I-1]!==0||R[I-2]!==0){I+=3;break}K=tc(R[N+3]&31),K==="slice_layer_without_partitioning_rbsp_idr"&&(F=!0),N=I-2,I+=3;break;default:I+=3;break}return R=R.subarray(N),I-=N,N=0,R&&R.byteLength>3&&(K=tc(R[N+3]&31),K==="slice_layer_without_partitioning_rbsp_idr"&&(F=!0)),F},Rd={parseType:ex,parsePat:Xg,parsePmt:Id,parsePayloadUnitStartIndicator:Md,parsePesType:tx,parsePesTime:$f,videoPacketContainsKeyFrame:Yg},Kg=tt,Fl=cn.handleRollover,xn={};xn.ts=Rd,xn.aac=Lg;var Ga=ct.ONE_SECOND_IN_TS,Wi=188,Gs=71,nx=function(T,M){for(var R=0,I=Wi,N,F;I<T.byteLength;){if(T[R]===Gs&&T[I]===Gs){switch(N=T.subarray(R,I),F=xn.ts.parseType(N,M.pid),F){case"pat":M.pid=xn.ts.parsePat(N);break;case"pmt":var K=xn.ts.parsePmt(N);M.table=M.table||{},Object.keys(K).forEach(function(Z){M.table[Z]=K[Z]});break}R+=Wi,I+=Wi;continue}R++,I++}},ix=function(T,M,R){for(var I=0,N=Wi,F,K,Z,ne,ae,pe=!1;N<=T.byteLength;){if(T[I]===Gs&&(T[N]===Gs||N===T.byteLength)){switch(F=T.subarray(I,N),K=xn.ts.parseType(F,M.pid),K){case"pes":Z=xn.ts.parsePesType(F,M.table),ne=xn.ts.parsePayloadUnitStartIndicator(F),Z==="audio"&&ne&&(ae=xn.ts.parsePesTime(F),ae&&(ae.type="audio",R.audio.push(ae),pe=!0));break}if(pe)break;I+=Wi,N+=Wi;continue}I++,N++}for(N=T.byteLength,I=N-Wi,pe=!1;I>=0;){if(T[I]===Gs&&(T[N]===Gs||N===T.byteLength)){switch(F=T.subarray(I,N),K=xn.ts.parseType(F,M.pid),K){case"pes":Z=xn.ts.parsePesType(F,M.table),ne=xn.ts.parsePayloadUnitStartIndicator(F),Z==="audio"&&ne&&(ae=xn.ts.parsePesTime(F),ae&&(ae.type="audio",R.audio.push(ae),pe=!0));break}if(pe)break;I-=Wi,N-=Wi;continue}I--,N--}},rx=function(T,M,R){for(var I=0,N=Wi,F,K,Z,ne,ae,pe,Ee,lt,Xe=!1,Pt={data:[],size:0};N<T.byteLength;){if(T[I]===Gs&&T[N]===Gs){switch(F=T.subarray(I,N),K=xn.ts.parseType(F,M.pid),K){case"pes":if(Z=xn.ts.parsePesType(F,M.table),ne=xn.ts.parsePayloadUnitStartIndicator(F),Z==="video"&&(ne&&!Xe&&(ae=xn.ts.parsePesTime(F),ae&&(ae.type="video",R.video.push(ae),Xe=!0)),!R.firstKeyFrame)){if(ne&&Pt.size!==0){for(pe=new Uint8Array(Pt.size),Ee=0;Pt.data.length;)lt=Pt.data.shift(),pe.set(lt,Ee),Ee+=lt.byteLength;if(xn.ts.videoPacketContainsKeyFrame(pe)){var Bt=xn.ts.parsePesTime(pe);Bt?(R.firstKeyFrame=Bt,R.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Pt.size=0}Pt.data.push(F),Pt.size+=F.byteLength}break}if(Xe&&R.firstKeyFrame)break;I+=Wi,N+=Wi;continue}I++,N++}for(N=T.byteLength,I=N-Wi,Xe=!1;I>=0;){if(T[I]===Gs&&T[N]===Gs){switch(F=T.subarray(I,N),K=xn.ts.parseType(F,M.pid),K){case"pes":Z=xn.ts.parsePesType(F,M.table),ne=xn.ts.parsePayloadUnitStartIndicator(F),Z==="video"&&ne&&(ae=xn.ts.parsePesTime(F),ae&&(ae.type="video",R.video.push(ae),Xe=!0));break}if(Xe)break;I-=Wi,N-=Wi;continue}I--,N--}},IE=function(T,M){if(T.audio&&T.audio.length){var R=M;(typeof R>"u"||isNaN(R))&&(R=T.audio[0].dts),T.audio.forEach(function(F){F.dts=Fl(F.dts,R),F.pts=Fl(F.pts,R),F.dtsTime=F.dts/Ga,F.ptsTime=F.pts/Ga})}if(T.video&&T.video.length){var I=M;if((typeof I>"u"||isNaN(I))&&(I=T.video[0].dts),T.video.forEach(function(F){F.dts=Fl(F.dts,I),F.pts=Fl(F.pts,I),F.dtsTime=F.dts/Ga,F.ptsTime=F.pts/Ga}),T.firstKeyFrame){var N=T.firstKeyFrame;N.dts=Fl(N.dts,I),N.pts=Fl(N.pts,I),N.dtsTime=N.dts/Ga,N.ptsTime=N.pts/Ga}}},RE=function(T){for(var M=!1,R=0,I=null,N=null,F=0,K=0,Z;T.length-K>=3;){var ne=xn.aac.parseType(T,K);switch(ne){case"timed-metadata":if(T.length-K<10){M=!0;break}if(F=xn.aac.parseId3TagSize(T,K),F>T.length){M=!0;break}N===null&&(Z=T.subarray(K,K+F),N=xn.aac.parseAacTimestamp(Z)),K+=F;break;case"audio":if(T.length-K<7){M=!0;break}if(F=xn.aac.parseAdtsSize(T,K),F>T.length){M=!0;break}I===null&&(Z=T.subarray(K,K+F),I=xn.aac.parseSampleRate(Z)),R++,K+=F;break;default:K++;break}if(M)return null}if(I===null||N===null)return null;var ae=Ga/I,pe={audio:[{type:"audio",dts:N,pts:N},{type:"audio",dts:N+R*1024*ae,pts:N+R*1024*ae}]};return pe},sx=function(T){var M={pid:null,table:null},R={};nx(T,M);for(var I in M.table)if(M.table.hasOwnProperty(I)){var N=M.table[I];switch(N){case Kg.H264_STREAM_TYPE:R.video=[],rx(T,M,R),R.video.length===0&&delete R.video;break;case Kg.ADTS_STREAM_TYPE:R.audio=[],ix(T,M,R),R.audio.length===0&&delete R.audio;break}}return R},ox=function(T,M){var R=xn.aac.isLikelyAacData(T),I;return R?I=RE(T):I=sx(T),!I||!I.audio&&!I.video?null:(IE(I,M),I)},ax={inspect:ox,parseAudioPes_:ix};const lx=function(T,M){M.on("data",function(R){const I=R.initSegment;R.initSegment={data:I.buffer,byteOffset:I.byteOffset,byteLength:I.byteLength};const N=R.data;R.data=N.buffer,T.postMessage({action:"data",segment:R,byteOffset:N.byteOffset,byteLength:N.byteLength},[R.data])}),M.on("done",function(R){T.postMessage({action:"done"})}),M.on("gopInfo",function(R){T.postMessage({action:"gopInfo",gopInfo:R})}),M.on("videoSegmentTimingInfo",function(R){const I={start:{decode:ct.videoTsToSeconds(R.start.dts),presentation:ct.videoTsToSeconds(R.start.pts)},end:{decode:ct.videoTsToSeconds(R.end.dts),presentation:ct.videoTsToSeconds(R.end.pts)},baseMediaDecodeTime:ct.videoTsToSeconds(R.baseMediaDecodeTime)};R.prependedContentDuration&&(I.prependedContentDuration=ct.videoTsToSeconds(R.prependedContentDuration)),T.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:I})}),M.on("audioSegmentTimingInfo",function(R){const I={start:{decode:ct.videoTsToSeconds(R.start.dts),presentation:ct.videoTsToSeconds(R.start.pts)},end:{decode:ct.videoTsToSeconds(R.end.dts),presentation:ct.videoTsToSeconds(R.end.pts)},baseMediaDecodeTime:ct.videoTsToSeconds(R.baseMediaDecodeTime)};R.prependedContentDuration&&(I.prependedContentDuration=ct.videoTsToSeconds(R.prependedContentDuration)),T.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:I})}),M.on("id3Frame",function(R){T.postMessage({action:"id3Frame",id3Frame:R})}),M.on("caption",function(R){T.postMessage({action:"caption",caption:R})}),M.on("trackinfo",function(R){T.postMessage({action:"trackinfo",trackInfo:R})}),M.on("audioTimingInfo",function(R){T.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ct.videoTsToSeconds(R.start),end:ct.videoTsToSeconds(R.end)}})}),M.on("videoTimingInfo",function(R){T.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ct.videoTsToSeconds(R.start),end:ct.videoTsToSeconds(R.end)}})}),M.on("log",function(R){T.postMessage({action:"log",log:R})})};class Dd{constructor(M,R){this.options=R||{},this.self=M,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new qu.Transmuxer(this.options),lx(this.self,this.transmuxer)}pushMp4Captions(M){this.captionParser||(this.captionParser=new So,this.captionParser.init());const R=new Uint8Array(M.data,M.byteOffset,M.byteLength),I=this.captionParser.parse(R,M.trackIds,M.timescales);this.self.postMessage({action:"mp4Captions",captions:I&&I.captions||[],logs:I&&I.logs||[],data:R.buffer},[R.buffer])}probeMp4StartTime({timescales:M,data:R}){const I=Hf.startTime(M,R);this.self.postMessage({action:"probeMp4StartTime",startTime:I,data:R},[R.buffer])}probeMp4Tracks({data:M}){const R=Hf.tracks(M);this.self.postMessage({action:"probeMp4Tracks",tracks:R,data:M},[M.buffer])}probeEmsgID3({data:M,offset:R}){const I=Hf.getEmsgID3(M,R);this.self.postMessage({action:"probeEmsgID3",id3Frames:I,emsgData:M},[M.buffer])}probeTs({data:M,baseStartTime:R}){const I=typeof R=="number"&&!isNaN(R)?R*ct.ONE_SECOND_IN_TS:void 0,N=ax.inspect(M,I);let F=null;N&&(F={hasVideo:N.video&&N.video.length===2||!1,hasAudio:N.audio&&N.audio.length===2||!1},F.hasVideo&&(F.videoStart=N.video[0].ptsTime),F.hasAudio&&(F.audioStart=N.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:F,data:M},[M.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(M){const R=new Uint8Array(M.data,M.byteOffset,M.byteLength);this.transmuxer.push(R)}reset(){this.transmuxer.reset()}setTimestampOffset(M){const R=M.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ct.secondsToVideoTs(R)))}setAudioAppendStart(M){this.transmuxer.setAudioAppendStart(Math.ceil(ct.secondsToVideoTs(M.appendStart)))}setRemux(M){this.transmuxer.setRemux(M.remux)}flush(M){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(M){this.transmuxer.alignGopsWith(M.gopsToAlignWith.slice())}}self.onmessage=function(T){if(T.data.action==="init"&&T.data.options){this.messageHandlers=new Dd(self,T.data.options);return}this.messageHandlers||(this.messageHandlers=new Dd(self)),T.data&&T.data.action&&T.data.action!=="init"&&this.messageHandlers[T.data.action]&&this.messageHandlers[T.data.action](T.data)}}));var J_e=DW(Z_e);const exe=(t,e,n)=>{const{type:i,initSegment:r,captions:s,captionStreams:o,metadata:a,videoFrameDtsTime:l,videoFramePtsTime:u}=t.data.segment;e.buffer.push({captions:s,captionStreams:o,metadata:a});const c=t.data.segment.boxes||{data:t.data.segment.data},d={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof u<"u"&&(d.videoFramePtsTime=u),n(d)},txe=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},nxe=(t,e)=>{e.gopInfo=t.data.gopInfo},NW=t=>{const{transmuxer:e,bytes:n,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:o,onTrackInfo:a,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:m,onDone:g,onEndedTimeline:v,onTransmuxerLog:_,isEndOfTimeline:y,segment:S,triggerSegmentEventFn:x}=t,w={buffer:[]};let P=y;const A=O=>{e.currentTransmux===t&&(O.data.action==="data"&&exe(O,w,o),O.data.action==="trackinfo"&&a(O.data.trackInfo),O.data.action==="gopInfo"&&nxe(O,w),O.data.action==="audioTimingInfo"&&l(O.data.audioTimingInfo),O.data.action==="videoTimingInfo"&&u(O.data.videoTimingInfo),O.data.action==="videoSegmentTimingInfo"&&c(O.data.videoSegmentTimingInfo),O.data.action==="audioSegmentTimingInfo"&&d(O.data.audioSegmentTimingInfo),O.data.action==="id3Frame"&&h([O.data.id3Frame],O.data.id3Frame.dispatchType),O.data.action==="caption"&&m(O.data.caption),O.data.action==="endedtimeline"&&(P=!1,v()),O.data.action==="log"&&_(O.data.log),O.data.type==="transmuxed"&&(P||(e.onmessage=null,txe({transmuxedData:w,callback:g}),OW(e))))},D=()=>{const O={message:"Received an error message from the transmuxer worker",metadata:{errorType:be.Error.StreamingFailedToTransmuxSegment,segmentInfo:uh({segment:S})}};g(null,O)};if(e.onmessage=A,e.onerror=D,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),n.byteLength){const O=n instanceof ArrayBuffer?n:n.buffer,H=n instanceof ArrayBuffer?0:n.byteOffset;x({type:"segmenttransmuxingstart",segment:S}),e.postMessage({action:"push",data:O,byteOffset:H,byteLength:n.byteLength},[O])}y&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},OW=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():NW(t.currentTransmux))},l5=(t,e)=>{t.postMessage({action:e}),OW(t)},UW=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,l5(e,t);return}e.transmuxQueue.push(l5.bind(null,e,t))},ixe=t=>{UW("reset",t)},rxe=t=>{UW("endTimeline",t)},FW=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,NW(t);return}t.transmuxer.transmuxQueue.push(t)},sxe=t=>{const e=new J_e;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:t}),e};var MA={reset:ixe,endTimeline:rxe,transmux:FW,createTransmuxer:sxe};const Ay=function(t){const e=t.transmuxer,n=t.endAction||t.action,i=t.callback,r=ve({},t,{endAction:null,transmuxer:null,callback:null}),s=o=>{o.data.action===n&&(e.removeEventListener("message",s),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),i(o.data))};if(e.addEventListener("message",s),t.data){const o=t.data instanceof ArrayBuffer;r.byteOffset=o?0:t.data.byteOffset,r.byteLength=t.data.byteLength;const a=[o?t.data:t.data.buffer];e.postMessage(r,a)}else e.postMessage(r)},ol={FAILURE:2,TIMEOUT:-101,ABORTED:-102},NI=t=>{t.forEach(e=>{e.abort()})},oxe=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),axe=t=>{const e=t.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},D3=(t,e)=>{const{requestType:n}=e,i=kh({requestType:n,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:ol.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:ol.ABORTED,xhr:e,metadata:i}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:ol.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:ol.FAILURE,xhr:e,metadata:i}:null},u5=(t,e,n,i)=>(r,s)=>{const o=s.response,a=D3(r,s);if(a)return n(a,t);if(o.byteLength!==16)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:ol.FAILURE,xhr:s},t);const l=new DataView(o),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=u;const c={uri:s.uri};return i({type:"segmentkeyloadcomplete",segment:t,keyInfo:c}),n(null,t)},BW=(t,e)=>{const n=Qk(t.map.bytes);if(n!=="mp4"){const i=t.map.resolvedUri||t.map.uri,r=n||"unknown";return e({internal:!0,message:`Found unsupported ${r} container for initialization segment at URL: ${i}`,code:ol.FAILURE,metadata:{mediaType:r}})}Ay({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:i,data:r})=>(t.map.bytes=r,i.forEach(function(s){t.map.tracks=t.map.tracks||{},!t.map.tracks[s.type]&&(t.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[s.id]=s.timescale))}),e(null))})},lxe=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:n})=>(i,r)=>{const s=D3(i,r);if(s)return e(s,t);const o=new Uint8Array(r.response);if(n({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=o,e(null,t);t.map.bytes=o,BW(t,function(a){if(a)return a.xhr=r,a.status=r.status,e(a,t);e(null,t)})},uxe=({segment:t,finishProcessingFn:e,responseType:n,triggerSegmentEventFn:i})=>(r,s)=>{const o=D3(r,s);if(o)return e(o,t);i({type:"segmentloaded",segment:t});const a=n==="arraybuffer"||!s.responseText?s.response:K_e(s.responseText.substring(t.lastReachedChar||0));return t.stats=oxe(s),t.key?t.encryptedBytes=new Uint8Array(a):t.bytes=new Uint8Array(a),e(null,t)},cxe=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})=>{const g=t.map&&t.map.tracks||{},v=!!(g.audio&&g.video);let _=i.bind(null,t,"audio","start");const y=i.bind(null,t,"audio","end");let S=i.bind(null,t,"video","start");const x=i.bind(null,t,"video","end"),w=()=>FW({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:v,onData:P=>{P.type=P.type==="combined"?"video":P.type,c(t,P)},onTrackInfo:P=>{n&&(v&&(P.isMuxed=!0),n(t,P))},onAudioTimingInfo:P=>{_&&typeof P.start<"u"&&(_(P.start),_=null),y&&typeof P.end<"u"&&y(P.end)},onVideoTimingInfo:P=>{S&&typeof P.start<"u"&&(S(P.start),S=null),x&&typeof P.end<"u"&&x(P.end)},onVideoSegmentTimingInfo:P=>{const A={pts:{start:P.start.presentation,end:P.end.presentation},dts:{start:P.start.decode,end:P.end.decode}};m({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:A}),r(P)},onAudioSegmentTimingInfo:P=>{const A={pts:{start:P.start.pts,end:P.end.pts},dts:{start:P.start.dts,end:P.end.dts}};m({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:A}),s(P)},onId3:(P,A)=>{o(t,P,A)},onCaptions:P=>{a(t,[P])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:h,onDone:(P,A)=>{d&&(P.type=P.type==="combined"?"video":P.type,m({type:"segmenttransmuxingcomplete",segment:t}),d(A,t,P))},segment:t,triggerSegmentEventFn:m});Ay({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:P=>{t.bytes=e=P.data;const A=P.result;A&&(n(t,{hasAudio:A.hasAudio,hasVideo:A.hasVideo,isMuxed:v}),n=null),w()}})},zW=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})=>{let g=new Uint8Array(e);if(Lye(g)){t.isFmp4=!0;const{tracks:v}=t.map,_={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(_.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(_.videoCodec=v.video.codec),v.video&&v.audio&&(_.isMuxed=!0),n(t,_);const y=(S,x)=>{c(t,{data:g,type:_.hasAudio&&!_.isMuxed?"audio":"video"}),x&&x.length&&o(t,x),S&&S.length&&a(t,S),d(null,t,{})};Ay({action:"probeMp4StartTime",timescales:t.map.timescales,data:g,transmuxer:t.transmuxer,callback:({data:S,startTime:x})=>{e=S.buffer,t.bytes=g=S,_.hasAudio&&!_.isMuxed&&i(t,"audio","start",x),_.hasVideo&&i(t,"video","start",x),Ay({action:"probeEmsgID3",data:g,transmuxer:t.transmuxer,offset:x,callback:({emsgData:w,id3Frames:P})=>{if(e=w.buffer,t.bytes=g=w,!v.video||!w.byteLength||!t.transmuxer){y(void 0,P);return}Ay({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:g,timescales:t.map.timescales,trackIds:[v.video.id],callback:A=>{e=A.data.buffer,t.bytes=g=A.data,A.logs.forEach(function(D){h(In(D,{stream:"mp4CaptionParser"}))}),y(A.captions,P)}})}})}});return}if(!t.transmuxer){d(null,t,{});return}if(typeof t.container>"u"&&(t.container=Qk(g)),t.container!=="ts"&&t.container!=="aac"){n(t,{hasAudio:!1,hasVideo:!1}),d(null,t,{});return}cxe({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})},HW=function({id:t,key:e,encryptedBytes:n,decryptionWorker:i,segment:r,doneFn:s},o){const a=u=>{if(u.data.source===t){i.removeEventListener("message",a);const c=u.data.decrypted;o(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};i.onerror=()=>{const u="An error occurred in the decryption worker",c=uh({segment:r}),d={message:u,metadata:{error:new Error(u),errorType:be.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:r.key.resolvedUri||r.map.key.resolvedUri}}};s(d,r)},i.addEventListener("message",a);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(CW({source:t,encrypted:n,key:l,iv:e.iv}),[n.buffer,l.buffer])},dxe=({decryptionWorker:t,segment:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})=>{m({type:"segmentdecryptionstart"}),HW({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:d},g=>{e.bytes=g,m({type:"segmentdecryptioncomplete",segment:e}),zW({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})})},hxe=({activeXhrs:t,decryptionWorker:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})=>{let g=0,v=!1;return(_,y)=>{if(!v){if(_)return v=!0,NI(t),d(_,y);if(g+=1,g===t.length){const S=function(){if(y.encryptedBytes)return dxe({decryptionWorker:e,segment:y,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m});zW({segment:y,bytes:y.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:m})};if(y.endOfAllRequests=Date.now(),y.map&&y.map.encryptedBytes&&!y.map.bytes)return m({type:"segmentdecryptionstart",segment:y}),HW({decryptionWorker:e,id:y.requestId+"-init",encryptedBytes:y.map.encryptedBytes,key:y.map.key,segment:y,doneFn:d},x=>{y.map.bytes=x,m({type:"segmentdecryptioncomplete",segment:y}),BW(y,w=>{if(w)return NI(t),d(w,y);S()})});S()}}}},fxe=({loadendState:t,abortFn:e})=>n=>{n.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},pxe=({segment:t,progressFn:e,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>d=>{if(!d.target.aborted)return t.stats=In(t.stats,axe(d)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(d,t)},mxe=({xhr:t,xhrOptions:e,decryptionWorker:n,segment:i,abortFn:r,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:m,dataFn:g,doneFn:v,onTransmuxerLog:_,triggerSegmentEventFn:y})=>{const S=[],x=hxe({activeXhrs:S,decryptionWorker:n,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:m,dataFn:g,doneFn:v,onTransmuxerLog:_,triggerSegmentEventFn:y});if(i.key&&!i.key.bytes){const O=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&O.push(i.map.key);const H=In(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),E=u5(i,O,x,y),k={uri:i.key.resolvedUri};y({type:"segmentkeyloadstart",segment:i,keyInfo:k});const W=t(H,E);S.push(W)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const W=In(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),G=u5(i,[i.map.key],x,y),Y={uri:i.map.key.resolvedUri};y({type:"segmentkeyloadstart",segment:i,keyInfo:Y});const ie=t(W,G);S.push(ie)}const H=In(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:kI(i.map),requestType:"segment-media-initialization"}),E=lxe({segment:i,finishProcessingFn:x,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:i});const k=t(H,E);S.push(k)}const w=In(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:kI(i),requestType:"segment"}),P=uxe({segment:i,finishProcessingFn:x,responseType:w.responseType,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:i});const A=t(w,P);A.addEventListener("progress",pxe({segment:i,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:m,dataFn:g})),S.push(A);const D={};return S.forEach(O=>{O.addEventListener("loadend",fxe({loadendState:D,abortFn:r}))}),()=>NI(S)},gxe=ta("CodecUtils"),yxe=function(t){const e=t.attributes||{};if(e.CODECS)return Qa(e.CODECS)},VW=(t,e)=>{const n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},vxe=(t,e)=>{if(!VW(t,e))return!0;const n=e.attributes||{},i=t.mediaGroups.AUDIO[n.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},fb=function(t){const e={};return t.forEach(({mediaType:n,type:i,details:r})=>{e[n]=e[n]||[],e[n].push(KV(`${i}${r}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1){gxe(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[n]=null;return}e[n]=e[n][0]}),e},c5=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},My=function(t,e){const n=e.attributes||{},i=fb(yxe(e)||[]);if(VW(t,e)&&!i.audio&&!vxe(t,e)){const r=fb(Oge(t,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},_1=ta("PlaylistSelector"),d5=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},pb=function(t,e){if(!t)return"";const n=se.getComputedStyle(t);return n?n[e]:""},_m=function(t,e){const n=t.slice();t.sort(function(i,r){const s=e(i,r);return s===0?n.indexOf(i)-n.indexOf(r):s})},k3=function(t,e){let n,i;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||se.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||se.Number.MAX_VALUE,n-i},_xe=function(t,e){let n,i;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||se.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||se.Number.MAX_VALUE,n===i&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-i};let $W=function(t,e,n,i,r,s){if(!t)return;const o={bandwidth:e,width:n,height:i,limitRenditionByPlayerDimensions:r};let a=t.playlists;Ts.isAudioOnly(t)&&(a=s.getAudioTrackPlaylists_(),o.audioOnly=!0);let l=a.map(P=>{let A;const D=P.attributes&&P.attributes.RESOLUTION&&P.attributes.RESOLUTION.width,O=P.attributes&&P.attributes.RESOLUTION&&P.attributes.RESOLUTION.height;return A=P.attributes&&P.attributes.BANDWIDTH,A=A||se.Number.MAX_VALUE,{bandwidth:A,width:D,height:O,playlist:P}});_m(l,(P,A)=>P.bandwidth-A.bandwidth),l=l.filter(P=>!Ts.isIncompatible(P.playlist));let u=l.filter(P=>Ts.isEnabled(P.playlist));u.length||(u=l.filter(P=>!Ts.isDisabled(P.playlist)));const c=u.filter(P=>P.bandwidth*ir.BANDWIDTH_VARIANCE<e);let d=c[c.length-1];const h=c.filter(P=>P.bandwidth===d.bandwidth)[0];if(r===!1){const P=h||u[0]||l[0];if(P&&P.playlist){let A="sortedPlaylistReps";return h&&(A="bandwidthBestRep"),u[0]&&(A="enabledPlaylistReps"),_1(`choosing ${d5(P)} using ${A} with options`,o),P.playlist}return _1("could not choose a playlist with options",o),null}const m=c.filter(P=>P.width&&P.height);_m(m,(P,A)=>P.width-A.width);const g=m.filter(P=>P.width===n&&P.height===i);d=g[g.length-1];const v=g.filter(P=>P.bandwidth===d.bandwidth)[0];let _,y,S;v||(_=m.filter(P=>P.width>n||P.height>i),y=_.filter(P=>P.width===_[0].width&&P.height===_[0].height),d=y[y.length-1],S=y.filter(P=>P.bandwidth===d.bandwidth)[0]);let x;if(s.leastPixelDiffSelector){const P=m.map(A=>(A.pixelDiff=Math.abs(A.width-n)+Math.abs(A.height-i),A));_m(P,(A,D)=>A.pixelDiff===D.pixelDiff?D.bandwidth-A.bandwidth:A.pixelDiff-D.pixelDiff),x=P[0]}const w=x||S||v||h||u[0]||l[0];if(w&&w.playlist){let P="sortedPlaylistReps";return x?P="leastPixelDiffRep":S?P="resolutionPlusOneRep":v?P="resolutionBestRep":h?P="bandwidthBestRep":u[0]&&(P="enabledPlaylistReps"),_1(`choosing ${d5(w)} using ${P} with options`,o),w.playlist}return _1("could not choose a playlist with options",o),null};const h5=function(){let t=this.useDevicePixelRatio&&se.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),$W(this.playlists.main,this.systemBandwidth,parseInt(pb(this.tech_.el(),"width"),10)*t,parseInt(pb(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},xxe=function(t){let e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&se.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),$W(this.playlists.main,e,parseInt(pb(this.tech_.el(),"width"),10)*i,parseInt(pb(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Sxe=function(t){const{main:e,currentTime:n,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:o,currentTimeline:a,syncController:l}=t,u=e.playlists.filter(g=>!Ts.isIncompatible(g));let c=u.filter(Ts.isEnabled);c.length||(c=u.filter(g=>!Ts.isDisabled(g)));const h=c.filter(Ts.hasAttribute.bind(null,"BANDWIDTH")).map(g=>{const _=l.getSyncPoint(g,r,a,n)?1:2,S=Ts.estimateSegmentRequestTime(s,i,g)*_-o;return{playlist:g,rebufferingImpact:S}}),m=h.filter(g=>g.rebufferingImpact<=0);return _m(m,(g,v)=>k3(v.playlist,g.playlist)),m.length?m[0]:(_m(h,(g,v)=>g.rebufferingImpact-v.rebufferingImpact),h[0]||null)},Txe=function(){const t=this.playlists.main.playlists.filter(Ts.isEnabled);return _m(t,(n,i)=>k3(n,i)),t.filter(n=>!!My(this.playlists.main,n).video)[0]||null},bxe=t=>{let e=0,n;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(i=>{n.set(i,e),e+=i.byteLength})),n};function GW(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const wxe=function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"});let i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);const r=e.textTracks().getTrackById(i);if(r)t[n]=r;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=n,a=n,l=!1;const u=s[i];u&&(o=u.label,a=u.language,l=u.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:o,language:a},!1).track}}},Exe=function({inbandTextTracks:t,captionArray:e,timestampOffset:n}){if(!e)return;const i=se.WebKitDataCue||se.VTTCue;e.forEach(r=>{const s=r.stream;r.content?r.content.forEach(o=>{const a=new i(r.startTime+n,r.endTime+n,o.text);a.line=o.line,a.align="left",a.position=o.position,a.positionAlign="line-left",t[s].addCue(a)}):t[s].addCue(new i(r.startTime+n,r.endTime+n,r.text))})},Cxe=function(t){Object.defineProperties(t.frame,{id:{get(){return be.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return be.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return be.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},Axe=({inbandTextTracks:t,metadataArray:e,timestampOffset:n,videoDuration:i})=>{if(!e)return;const r=se.WebKitDataCue||se.VTTCue,s=t.metadataTrack_;if(!s||(e.forEach(c=>{const d=c.cueTime+n;typeof d!="number"||se.isNaN(d)||d<0||!(d<1/0)||!c.frames||!c.frames.length||c.frames.forEach(h=>{const m=new r(d,d,h.value||h.url||h.data||"");m.frame=h,m.value=h,Cxe(m),s.addCue(m)})}),!s.cues||!s.cues.length))return;const o=s.cues,a=[];for(let c=0;c<o.length;c++)o[c]&&a.push(o[c]);const l=a.reduce((c,d)=>{const h=c[d.startTime]||[];return h.push(d),c[d.startTime]=h,c},{}),u=Object.keys(l).sort((c,d)=>Number(c)-Number(d));u.forEach((c,d)=>{const h=l[c],m=isFinite(i)?i:c,g=Number(u[d+1])||m;h.forEach(v=>{v.endTime=g})})},Mxe={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Pxe=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Ixe=({inbandTextTracks:t,dateRanges:e})=>{const n=t.metadataTrack_;if(!n)return;const i=se.WebKitDataCue||se.VTTCue;e.forEach(r=>{for(const s of Object.keys(r)){if(Pxe.has(s))continue;const o=new i(r.startTime,r.endTime,"");o.id=r.id,o.type="com.apple.quicktime.HLS",o.value={key:Mxe[s],data:r[s]},(s==="scte35Out"||s==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(o)}r.processDateRange()})},f5=(t,e,n)=>{t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,be.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},ny=function(t,e,n){let i,r;if(n&&n.cues)for(i=n.cues.length;i--;)r=n.cues[i],r.startTime>=t&&r.endTime<=e&&n.removeCue(r)},Rxe=function(t){const e=t.cues;if(!e)return;const n={};for(let i=e.length-1;i>=0;i--){const r=e[i],s=`${r.startTime}-${r.endTime}-${r.text}`;n[s]?t.removeCue(r):n[s]=r}},Dxe=(t,e,n)=>{if(typeof e>"u"||e===null||!t.length)return[];const i=Math.ceil((e-n+3)*yh.ONE_SECOND_IN_TS);let r;for(r=0;r<t.length&&!(t[r].pts>i);r++);return t.slice(r)},kxe=(t,e,n)=>{if(!e.length)return t;if(n)return e.slice();const i=e[0].pts;let r=0;for(r;r<t.length&&!(t[r].pts>=i);r++);return t.slice(0,r).concat(e)},Lxe=(t,e,n,i)=>{const r=Math.ceil((e-i)*yh.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*yh.ONE_SECOND_IN_TS),o=t.slice();let a=t.length;for(;a--&&!(t[a].pts<=s););if(a===-1)return o;let l=a+1;for(;l--&&!(t[l].pts<=r););return l=Math.max(l,0),o.splice(l,a-l+1),o},Nxe=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const n=Object.keys(t).sort(),i=Object.keys(e).sort();if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(s!==i[r]||t[s]!==e[s])return!1}return!0},Oxe=function(t,e,n){e=e||[];const i=[];let r=0;for(let s=0;s<e.length;s++){const o=e[s];if(t===o.timeline&&(i.push(s),r+=o.duration,r>n))return s}return i.length===0?0:i[i.length-1]},A0=1,Uxe=500,p5=t=>typeof t=="number"&&isFinite(t),x1=1/60,Fxe=(t,e,n)=>t!=="main"||!e||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,Bxe=(t,e,n)=>{let i=e-ir.BACK_BUFFER_LENGTH;t.length&&(i=Math.max(i,t.start(0)));const r=e-n;return Math.min(r,i)},cp=t=>{const{startOfSegment:e,duration:n,segment:i,part:r,playlist:{mediaSequence:s,id:o,segments:a=[]},mediaIndex:l,partIndex:u,timeline:c}=t,d=a.length-1;let h="mediaIndex/partIndex increment";t.getMediaInfoForTime?h=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(h+=` with independent ${t.independent}`);const m=typeof u=="number",g=t.segment.uri?"segment":"pre-segment",v=m?cW({preloadSegment:i})-1:0;return`${g} [${s+l}/${s+d}]`+(m?` part [${u}/${v}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(m?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${c}] selected by [${h}] playlist [${o}]`},m5=t=>`${t}TimingInfo`,zxe=({segmentTimeline:t,currentTimeline:e,startOfSegment:n,buffered:i,overrideCheck:r})=>!r&&t===e?null:t<e?n:i.length?i.end(i.length-1):n,OI=({timelineChangeController:t,currentTimeline:e,segmentTimeline:n,loaderType:i,audioDisabled:r})=>{if(e===n)return!1;if(i==="audio"){const s=t.lastTimelineChange({type:"main"});return!s||s.to!==n}if(i==="main"&&r){const s=t.pendingTimelineChange({type:"audio"});return!(s&&s.to===n)}return!1},Hxe=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),n=t.pendingTimelineChange({type:"main"}),i=e&&n,r=i&&e.to!==n.to;return!!(i&&e.from!==-1&&n.from!==-1&&r)},Vxe=t=>{t&&(t.pause(),t.resetEverything(),t.load())},$xe=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&n&&e.to<n.to},pc=t=>{const e=t.pendingSegment_;if(!e)return;if(OI({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&Hxe(t.timelineChangeController_)){if($xe(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}Vxe(t)}},Gxe=t=>{let e=0;return["video","audio"].forEach(function(n){const i=t[`${n}TimingInfo`];if(!i)return;const{start:r,end:s}=i;let o;typeof r=="bigint"||typeof s=="bigint"?o=se.BigInt(s)-se.BigInt(r):typeof r=="number"&&typeof s=="number"&&(o=s-r),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},g5=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+rl:!1,Wxe=(t,e)=>{if(e!=="hls")return null;const n=Gxe({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;const i=t.playlist.targetDuration,r=g5({segmentDuration:n,maxDuration:i*2}),s=g5({segmentDuration:n,maxDuration:i}),o=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${n} when the reported duration is ${t.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:o}:null},uh=({type:t,segment:e})=>{if(!e)return;const n=!!(e.key||e.map&&e.map.ke),i=!!(e.map&&!e.map.bytes),r=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:r,duration:e.duration,isEncrypted:n,isMediaInitialization:i}};class UI extends be.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=ta(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():pc(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(ve({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():pc(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(ve({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():pc(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():pc(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return MA.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&se.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,se.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&MA.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return vr();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:i,isMuxed:r}=e;if(i&&n&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const i=hb(e);let r=this.initSegments_[i];return n&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,n=!1){if(!e)return null;const i=AW(e);let r=this.keyCache_[i];this.cacheEncryptionKeys_&&n&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(r||e).resolvedUri};return r&&(s.bytes=r.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e)return;const i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(i&&(i.id?s=i.id:i.uri&&(s=i.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${CA(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const a=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!a.parts||!a.parts.length||!a.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}r&&(r.mediaIndex-=o,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(se.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&MA.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,i=()=>{},r=!1){if(n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const o=()=>{s--,s===0&&i()};(r||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,n,o)),(r||this.loaderType_==="main")&&(this.gopBuffer_=Lxe(this.gopBuffer_,e,n,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,n,o));for(const a in this.inbandTextTracks_)ny(e,n,this.inbandTextTracks_[a]);ny(e,n,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&se.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=se.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&se.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=se.setTimeout(this.monitorBufferTick_.bind(this),Uxe)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const n={segmentInfo:uh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:n}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,i=this.partIndex){if(!n||!this.mediaSource_)return!1;const r=typeof e=="number"&&n.segments[e],s=e+1===n.segments.length,o=!r||!r.parts||i+1===r.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&s&&o}chooseNextRequest_(){const e=this.buffered_(),n=CA(e)||0,i=M3(e,this.currentTime_()),r=!this.hasPlayed_()&&i>=1,s=i>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||r||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(a.isSyncRequest)a.mediaIndex=Oxe(this.currentTimeline_,o,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${a.mediaIndex}`);else if(this.mediaIndex!==null){const h=o[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;a.startOfSegment=h.end?h.end:n,h.parts&&h.parts[m+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=m+1):a.mediaIndex=this.mediaIndex+1}else{let h,m,g;const v=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${v}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const _=this.getSyncInfoFromMediaSequenceSync_(v);if(!_){const y="No sync info found while using media sequence sync";return this.error({message:y,metadata:{errorType:be.Error.StreamingFailedToSelectNextSegment,error:new Error(y)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${_.start} --> ${_.end})`),h=_.segmentIndex,m=_.partIndex,g=_.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const _=Ts.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:v,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});h=_.segmentIndex,m=_.partIndex,g=_.startTime}a.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${v}`:`currentTime ${v}`,a.mediaIndex=h,a.startOfSegment=g,a.partIndex=m,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${a.mediaIndex} `)}const l=o[a.mediaIndex];let u=l&&typeof a.partIndex=="number"&&l.parts&&l.parts[a.partIndex];if(!l||typeof a.partIndex=="number"&&!u)return null;typeof a.partIndex!="number"&&l.parts&&(a.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(a.partIndex===0){const h=o[a.mediaIndex-1],m=h.parts&&h.parts.length&&h.parts[h.parts.length-1];m&&m.independent&&(a.mediaIndex-=1,a.partIndex=h.parts.length-1,a.independent="previous segment")}else l.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return a.mediaIndex>=o.length-1&&d&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,a.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(a))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const n=Math.max(e,this.mediaSequenceSync_.start);e!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${n}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!i)return null;if(!i.isAppended)return i;const r=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return r?(r.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),r):null}generateSegmentInfo_(e){const{independent:n,playlist:i,mediaIndex:r,startOfSegment:s,isSyncRequest:o,partIndex:a,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[r],d=typeof a=="number"&&c.parts[a],h={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||c.resolvedUri,mediaIndex:r,partIndex:d?a:null,isSyncRequest:o,startOfSegment:s,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:d&&d.duration||c.duration,segment:c,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:n},m=typeof l<"u"?l:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:m});const g=CA(this.sourceUpdater_.audioBuffered());return typeof g=="number"&&(h.audioAppendStart=g-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=Dxe(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h}timestampOffsetForSegment_(e){return zxe(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,s=Ts.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),o=u_e(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(s<=o)return;const a=Sxe({main:this.vhs_.playlists.main,currentTime:n,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a)return;const u=s-o-a.rebufferingImpact;let c=.5;o<=rl&&(c=1),!(!a.playlist||a.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=a.playlist.attributes.BANDWIDTH*ir.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${cp(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){const{hasAudio:i,hasVideo:r}=n,s={segmentInfo:uh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:r}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},Nxe(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()?this.processCallQueue_():pc(this))))}handleTimingInfo_(e,n,i,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,o=m5(n);s[o]=s[o]||{},s[o][i]=r,this.logger_(`timinginfo: ${n} - ${i} - ${r}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():pc(this)}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}const r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};n.forEach(o=>{s[o.stream]=s[o.stream]||{startTime:1/0,captions:[],endTime:0};const a=s[o.stream];a.startTime=Math.min(a.startTime,o.startTime+r),a.endTime=Math.max(a.endTime,o.endTime+r),a.captions.push(o)}),Object.keys(s).forEach(o=>{const{startTime:a,endTime:l,captions:u}=s[o],c=this.inbandTextTracks_;this.logger_(`adding cues from ${a} -> ${l} for ${o}`),wxe(c,this.vhs_.tech_,o),ny(a,l,c[o]),Exe({captionArray:u,inbandTextTracks:c,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,i));return}this.addMetadataToTextTrack(i,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!OI({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:i,hasVideo:r,isMuxed:s}=n;return!(r&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||OI({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){pc(this),this.callQueue_.push(this.handleData_.bind(this,e,n));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[m5(n.type)].start;else{const r=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&r&&r.hasVideo;let o;s&&(o=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:o,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,n.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,n)}}updateAppendInitSegmentStatus(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:i,playlist:r}){if(i){const s=hb(i);if(this.activeInitSegmentId_===s)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=s}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:i},r){const s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+vh(s).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+vh(o).join(", "));const a=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=o.length?o.start(0):0,c=o.length?o.end(o.length-1):0;if(l-a<=A0&&c-u<=A0){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${vh(s).join(", ")}, video buffer: ${vh(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:i}));const h=this.currentTime_()-A0;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${h}`),this.remove(0,h,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${A0}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=se.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},A0*1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:i},r){if(r){if(r.code===SW){this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error({message:`${n} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:be.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r,bytes:s}){if(!s){const a=[r];let l=r.byteLength;i&&(a.unshift(i),l+=i.byteLength),s=bxe({bytes:l,segments:a})}const o={segmentInfo:uh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:s}))}handleSegmentTimingInfo_(e,n,i){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,s=`${e}TimingInfo`;r[s]||(r[s]={}),r[s].transmuxerPrependedSeconds=i.prependedContentDuration||0,r[s].transmuxedPresentationStart=i.start.presentation,r[s].transmuxedDecodeStart=i.start.decode,r[s].transmuxedPresentationEnd=i.end.presentation,r[s].transmuxedDecodeEnd=i.end.decode,r[s].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,n){const{type:i,data:r}=n;if(!r||!r.byteLength||i==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:i,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){pc(this),this.loadQueue_.push(()=>{const n=ve({},e,{forceTimestampOffset:!0});ve(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,o=i||r&&s;this.logger_(`Requesting
${GW(e.uri)}
${cp(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=mxe({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:a,level:l,stream:u})=>{this.logger_(`${cp(e)} logged from transmuxer stream ${u} as a ${l}: ${a}`)},triggerSegmentEventFn:({type:a,segment:l,keyInfo:u,trackInfo:c,timingInfo:d})=>{const m={segmentInfo:uh({segment:l})};u&&(m.keyInfo=u),c&&(m.trackInfo=c),d&&(m.timingInfo=d),this.trigger({type:a,metadata:m})}})}trimBackBuffer_(e){const n=Bxe(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,i=e.part,r=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:i?i.resolvedUri:n.resolvedUri,byterange:i?i.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:r,isMediaInitialization:s},a=e.playlist.segments[e.mediaIndex-1];if(a&&a.timeline===n.timeline&&(a.videoTimingInfo?o.baseStartTime=a.videoTimingInfo.transmuxedDecodeEnd:a.audioTimingInfo&&(o.baseStartTime=a.audioTimingInfo.transmuxedDecodeEnd)),n.key){const l=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=l}return n.map&&(o.map=this.initSegmentForMap(n.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<x1){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${x1}`);return}const i={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,i));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===ol.ABORTED)return;if(this.pause(),e.code===ol.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,n.stats),r.endOfAllRequests=n.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=kxe(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:i,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:s,useVideoTimingInfo:o,videoTimingInfo:a,audioTimingInfo:l}){if(typeof e<"u")return e;if(!o)return l.start;const u=n.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==r+s?r:a.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:r,isMuxed:s}=n,o=this.loaderType_==="main"&&r,a=!this.audioDisabled_&&i&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,a&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=Fxe(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),r=this.loaderType_==="main"&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:uh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=Wxe(e,this.sourceType_);if(n&&(n.severity==="warn"?be.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${cp(e)}`);return}this.logger_(`Appended ${cp(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,r=e.part,s=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,o=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(s||o){this.logger_(`bad ${s?"segment":"part"} ${cp(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<x1){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${x1}`);return}const n=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,i=n.start,r=n.end;if(!p5(i)||!p5(r))return;ny(i,r,this.segmentMetadataTrack_);const s=se.WebKitDataCue||se.VTTCue,o={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},a=JSON.stringify(o),l=new s(i,r,a);l.value=o,this.segmentMetadataTrack_.addCue(l)}}function tu(){}const WW=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},jxe=["video","audio"],FI=(t,e)=>{const n=e[`${t}Buffer`];return n&&n.updating||e.queuePending[t]},qxe=(t,e)=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.type==="mediaSource")return null;if(i.type===t)return n}return null},xm=(t,e)=>{if(e.queue.length===0)return;let n=0,i=e.queue[n];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),xm("audio",e),xm("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||FI(t,e))){if(i.type!==t){if(n=qxe(t,e.queue),n===null)return;i=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[t]=i,i.action(t,e),!i.doneFn){e.queuePending[t]=null,xm(t,e);return}}},jW=(t,e)=>{const n=e[`${t}Buffer`],i=WW(t);n&&(n.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),n.removeEventListener("error",e[`on${i}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},el=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,qs={appendBuffer:(t,e,n)=>(i,r)=>{const s=r[`${i}Buffer`];if(el(r.mediaSource,s)){r.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${i}Buffer`);try{s.appendBuffer(t)}catch(o){r.logger_(`Error with code ${o.code} `+(o.code===SW?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,n(o)}}},remove:(t,e)=>(n,i)=>{const r=i[`${n}Buffer`];if(el(i.mediaSource,r)){i.logger_(`Removing ${t} to ${e} from ${n}Buffer`);try{r.remove(t,e)}catch{i.logger_(`Remove ${t} to ${e} from ${n}Buffer failed`)}}},timestampOffset:t=>(e,n)=>{const i=n[`${e}Buffer`];el(n.mediaSource,i)&&(n.logger_(`Setting ${e}timestampOffset to ${t}`),i.timestampOffset=t)},callback:t=>(e,n)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(n){be.log.warn("Failed to call media source endOfStream",n)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(n){be.log.warn("Failed to set media source duration",n)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const n=e[`${t}Buffer`];if(el(e.mediaSource,n)){e.logger_(`calling abort on ${t}Buffer`);try{n.abort()}catch(i){be.log.warn(`Failed to abort on ${t}Buffer`,i)}}},addSourceBuffer:(t,e)=>n=>{const i=WW(t),r=Vm(e);n.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const s=n.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",n[`on${i}UpdateEnd_`]),s.addEventListener("error",n[`on${i}Error_`]),n.codecs[t]=e,n[`${t}Buffer`]=s},removeSourceBuffer:t=>e=>{const n=e[`${t}Buffer`];if(jW(t,e),!!el(e.mediaSource,n)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(i){be.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,i)}}},changeType:t=>(e,n)=>{const i=n[`${e}Buffer`],r=Vm(t);if(!el(n.mediaSource,i))return;const s=t.substring(0,t.indexOf(".")),o=n.codecs[e];if(o.substring(0,o.indexOf("."))===s)return;const l={codecsChangeInfo:{from:o,to:t}};n.trigger({type:"codecschange",metadata:l}),n.logger_(`changing ${e}Buffer codec from ${o} to ${t}`);try{i.changeType(r),n.codecs[e]=t}catch(u){l.errorType=be.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,n.error_=u,n.trigger("error"),be.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Xs=({type:t,sourceUpdater:e,action:n,doneFn:i,name:r})=>{e.queue.push({type:t,action:n,doneFn:i,name:r}),xm(t,e)},y5=(t,e)=>n=>{const i=e[`${t}Buffered`](),r=o_e(i);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,r),e.queuePending[t]){const s=e.queuePending[t].doneFn;e.queuePending[t]=null,s&&s(e[`${t}Error_`])}xm(t,e)};class qW extends be.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>xm("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=ta("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=y5("video",this),this.onAudioUpdateEnd_=y5("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){Xs({type:"mediaSource",sourceUpdater:this,action:qs.addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){Xs({type:e,sourceUpdater:this,action:qs.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){be.log.error("removeSourceBuffer is not supported!");return}Xs({type:"mediaSource",sourceUpdater:this,action:qs.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!be.browser.IS_FIREFOX&&se.MediaSource&&se.MediaSource.prototype&&typeof se.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return se.SourceBuffer&&se.SourceBuffer.prototype&&typeof se.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){if(!this.canChangeType()){be.log.error("changeType is not supported!");return}Xs({type:e,sourceUpdater:this,action:qs.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const i=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,i);this.canChangeType()&&this.changeType(n,i)})}appendBuffer(e,n){const{segmentInfo:i,type:r,bytes:s}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const o=n;if(Xs({type:r,sourceUpdater:this,action:qs.appendBuffer(s,i||{mediaIndex:-1},o),doneFn:n,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const a=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${a.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,a.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return el(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:vr()}videoBuffered(){return el(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:vr()}buffered(){const e=el(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=el(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():l_e(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=tu){Xs({type:"mediaSource",sourceUpdater:this,action:qs.duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=tu){typeof e!="string"&&(e=void 0),Xs({type:"mediaSource",sourceUpdater:this,action:qs.endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,i=tu){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}Xs({type:"audio",sourceUpdater:this,action:qs.remove(e,n),doneFn:i,name:"remove"})}removeVideo(e,n,i=tu){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}Xs({type:"video",sourceUpdater:this,action:qs.remove(e,n),doneFn:i,name:"remove"})}updating(){return!!(FI("audio",this)||FI("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Xs({type:"audio",sourceUpdater:this,action:qs.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Xs({type:"video",sourceUpdater:this,action:qs.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Xs({type:"audio",sourceUpdater:this,action:qs.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Xs({type:"video",sourceUpdater:this,action:qs.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),jxe.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>jW(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const v5=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),Xxe=t=>{const e=new Uint8Array(t);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")},_5=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class Yxe extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class Kxe extends UI{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return vr();const e=this.subtitlesTrack_.cues,n=e[0].startTime,i=e[e.length-1].startTime;return vr([[n,i]])}initSegmentForMap(e,n=!1){if(!e)return null;const i=hb(e);let r=this.initSegments_[i];if(n&&!r&&e.bytes){const s=_5.byteLength+e.bytes.byteLength,o=new Uint8Array(s);o.set(e.bytes),o.set(_5,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,n){ny(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===ol.TIMEOUT&&this.handleTimeout_(),e.code===ol.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const s=r.segment;if(s.map&&(s.map.bytes=n.map.bytes),r.bytes=n.bytes,typeof se.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(r)}catch(o){this.stopForError({message:o.message,metadata:{errorType:be.Error.StreamingVttParserError,error:o}});return}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,r.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new se.VTTCue(o.startTime,o.endTime,o.text):o)}),Rxe(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let n,i=!1;if(typeof se.WebVTT!="function")throw new Yxe;typeof se.TextDecoder=="function"?n=new se.TextDecoder("utf8"):(n=se.WebVTT.StringDecoder(),i=!0);const r=new se.WebVTT.Parser(se,se.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=o=>{e.timestampmap=o},r.onparsingerror=o=>{be.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;i&&(o=v5(o)),r.parse(o)}let s=e.bytes;i&&(s=v5(s)),r.parse(s),r.flush()}updateTimeMapping_(e,n,i){const r=e.segment;if(!n)return;if(!e.cues.length){r.empty=!0;return}const{MPEGTS:s,LOCAL:o}=e.timestampmap,l=s/yh.ONE_SECOND_IN_TS-o+n.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,d=this.handleRollover_(u.startTime+l,n.time);u.startTime=Math.max(d,0),u.endTime=Math.max(d+c,0)}),!i.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-r.duration)}}}handleRollover_(e,n){if(n===null)return e;let i=e*yh.ONE_SECOND_IN_TS;const r=n*yh.ONE_SECOND_IN_TS;let s;for(r<i?s=-8589934592:s=8589934592;Math.abs(i-r)>4294967296;)i+=s;return i/yh.ONE_SECOND_IN_TS}}const Qxe=function(t,e){const n=t.cues;for(let i=0;i<n.length;i++){const r=n[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},Zxe=function(t,e,n=0){if(!t.segments)return;let i=n,r;for(let s=0;s<t.segments.length;s++){const o=t.segments[s];if(r||(r=Qxe(e,i+o.duration/2)),r){if("cueIn"in o){r.endTime=i,r.adEndTime=i,i+=o.duration,r=null;continue}if(i<r.endTime){i+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&(r=new se.VTTCue(i,i+o.duration,o.cueOut),r.adStartTime=i,r.adEndTime=i+parseFloat(o.cueOut),e.addCue(r)),"cueOutCont"in o){const[a,l]=o.cueOutCont.split("/").map(parseFloat);r=new se.VTTCue(i,i+o.duration,""),r.adStartTime=i-a,r.adEndTime=r.adStartTime+l,e.addCue(r)}i+=o.duration}};class x5{constructor({start:e,end:n,segmentIndex:i,partIndex:r=null,appended:s=!1}){this.start_=e,this.end_=n,this.segmentIndex_=i,this.partIndex_=r,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Jxe{constructor(e,n=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class XW{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,n){const{mediaSequence:i,segments:r}=e;if(this.isReliable_=this.isReliablePlaylist_(i,r),!!this.isReliable_)return this.updateStorage_(r,i,this.calculateBaseTime_(i,n))}getSyncInfoForTime(e){for(const{segmentSyncInfo:n,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const r of i)if(r.isInRange(e))return r}else if(n.isInRange(e))return n;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,n,i){const r=new Map;let s=`
`,o=i,a=n;this.start_=o,e.forEach((l,u)=>{const c=this.storage_.get(a),d=o,h=d+l.duration,m=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),g=new x5({start:d,end:h,appended:m,segmentIndex:u});l.syncInfo=g;let v=o;const _=(l.parts||[]).map((y,S)=>{const x=v,w=v+y.duration,P=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[S]&&c.partsSyncInfo[S].isAppended),A=new x5({start:x,end:w,appended:P,segmentIndex:u,partIndex:S});return v=w,s+=`Media Sequence: ${a}.${S} | Range: ${x} --> ${w} | Appended: ${P}
`,y.syncInfo=A,A});r.set(a,new Jxe(g,_)),s+=`${GW(l.resolvedUri)} | Media Sequence: ${a} | Range: ${d} --> ${h} | Appended: ${m}
`,a++,o=h}),this.end_=o,this.storage_=r,this.diagnostics_=s}calculateBaseTime_(e,n){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:n:0}isReliablePlaylist_(e,n){return e!=null&&Array.isArray(n)&&n.length}}class S5 extends XW{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,n){if(!this.storage_.size){const i=this.parent_.getSyncInfoForMediaSequence(e);return i?i.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,n)}}const e1e=86400,PA=[{name:"VOD",run:(t,e,n,i,r)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,n,i,r,s)=>{const o=t.getMediaSequenceSync(s);if(!o||!o.isReliable)return null;const a=o.getSyncInfoForTime(r);return a?{time:a.start,partIndex:a.partIndex,segmentIndex:a.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,n,i,r)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let s=null,o=null;const a=MI(e);r=r||0;for(let l=0;l<a.length;l++){const u=e.endList||r===0?l:a.length-(l+1),c=a[u],d=c.segment,h=t.timelineToDatetimeMappings[d.timeline];if(!h||!d.dateTimeObject)continue;let g=d.dateTimeObject.getTime()/1e3+h;if(d.parts&&typeof c.partIndex=="number")for(let _=0;_<c.partIndex;_++)g+=d.parts[_].duration;const v=Math.abs(r-g);if(o!==null&&(v===0||o<v))break;o=v,s={time:g,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(t,e,n,i,r)=>{let s=null,o=null;r=r||0;const a=MI(e);for(let l=0;l<a.length;l++){const u=e.endList||r===0?l:a.length-(l+1),c=a[u],d=c.segment,h=c.part&&c.part.start||d&&d.start;if(d.timeline===i&&typeof h<"u"){const m=Math.abs(r-h);if(o!==null&&o<m)break;(!s||o===null||o>=m)&&(o=m,s={time:h,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(t,e,n,i,r)=>{let s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let a=0;a<e.discontinuityStarts.length;a++){const l=e.discontinuityStarts[a],u=e.discontinuitySequence+a+1,c=t.discontinuities[u];if(c){const d=Math.abs(r-c.time);if(o!==null&&o<d)break;(!s||o===null||o>=d)&&(o=d,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(t,e,n,i,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class t1e extends be.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new XW,i=new S5(n),r=new S5(n);this.mediaSequenceStorage_={main:n,audio:i,vtt:r},this.logger_=ta("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,n,i,r,s){if(n!==1/0)return PA.find(({name:l})=>l==="VOD").run(this,e,n);const o=this.runStrategies_(e,n,i,r,s);if(!o.length)return null;for(const a of o){const{syncPoint:l,strategy:u}=a,{segmentIndex:c,time:d}=l;if(c<0)continue;const h=e.segments[c],m=d,g=m+h.duration;if(this.logger_(`Strategy: ${u}. Current time: ${r}. selected segment: ${c}. Time: [${m} -> ${g}]}`),r>=m&&r<g)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(o,{key:"time",value:r})}getExpiredTime(e,n){if(!e||!e.segments)return null;const i=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!i.length)return null;const r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Cy({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,n,i,r,s){const o=[];for(let a=0;a<PA.length;a++){const l=PA[a],u=l.run(this,e,n,i,r,s);u&&(u.strategy=l.name,o.push({strategy:l.name,syncPoint:u}))}return o}selectSyncPoint_(e,n){let i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[n.key]-n.value),s=e[0].strategy;for(let o=1;o<e.length;o++){const a=Math.abs(e[o].syncPoint[n.key]-n.value);a<r&&(r=a,i=e[o].syncPoint,s=e[o].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${s}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,n){const i=n.mediaSequence-e.mediaSequence;if(i>e1e){be.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let r=i-1;r>=0;r--){const s=e.segments[r];if(s&&typeof s.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+r,time:s.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],i=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),r=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const s=r.dateTimeObject;r.discontinuity&&n&&s&&(this.timelineToDatetimeMappings[r.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,i){const r=e.segment,s=e.part;let o=this.timelines[e.timeline],a,l;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-n.start},i&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),a=e.startOfSegment,l=n.end+o.mapping;else if(o)a=n.start+o.mapping,l=n.end+o.mapping;else return!1;return s&&(s.start=a,s.end=l),(!r.start||a<r.start)&&(r.start=a),r.end=l,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let r=0;r<n.discontinuityStarts.length;r++){const s=n.discontinuityStarts[r],o=n.discontinuitySequence+r+1,a=s-e.mediaIndex,l=Math.abs(a);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>l){let u;a<0?u=i.start-Cy({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:s}):u=i.end+Cy({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[o]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class n1e extends be.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:i}){return typeof n=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:i}){if(typeof n=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:n,to:i},delete this.pendingTimelineChanges_[e];const r={timelineChangeInfo:{from:n,to:i}};this.trigger({type:"timelinechange",metadata:r})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const i1e=kW(LW(function(){var t=function(){function v(){this.listeners={}}var _=v.prototype;return _.on=function(S,x){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push(x)},_.off=function(S,x){if(!this.listeners[S])return!1;var w=this.listeners[S].indexOf(x);return this.listeners[S]=this.listeners[S].slice(0),this.listeners[S].splice(w,1),w>-1},_.trigger=function(S){var x=this.listeners[S];if(x)if(arguments.length===2)for(var w=x.length,P=0;P<w;++P)x[P].call(this,arguments[1]);else for(var A=Array.prototype.slice.call(arguments,1),D=x.length,O=0;O<D;++O)x[O].apply(this,A)},_.dispose=function(){this.listeners={}},_.pipe=function(S){this.on("data",function(x){S.push(x)})},v}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(v){return v.subarray(0,v.byteLength-v[v.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const n=function(){const v=[[[],[],[],[],[]],[[],[],[],[],[]]],_=v[0],y=v[1],S=_[4],x=y[4];let w,P,A;const D=[],O=[];let H,E,k,W,G,Y;for(w=0;w<256;w++)O[(D[w]=w<<1^(w>>7)*283)^w]=w;for(P=A=0;!S[P];P^=H||1,A=O[A]||1)for(W=A^A<<1^A<<2^A<<3^A<<4,W=W>>8^W&255^99,S[P]=W,x[W]=P,k=D[E=D[H=D[P]]],Y=k*16843009^E*65537^H*257^P*16843008,G=D[W]*257^W*16843008,w=0;w<4;w++)_[w][P]=G=G<<24^G>>>8,y[w][W]=Y=Y<<24^Y>>>8;for(w=0;w<5;w++)_[w]=_[w].slice(0),y[w]=y[w].slice(0);return v};let i=null;class r{constructor(_){i||(i=n()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let y,S,x;const w=this._tables[0][4],P=this._tables[1],A=_.length;let D=1;if(A!==4&&A!==6&&A!==8)throw new Error("Invalid aes key size");const O=_.slice(0),H=[];for(this._key=[O,H],y=A;y<4*A+28;y++)x=O[y-1],(y%A===0||A===8&&y%A===4)&&(x=w[x>>>24]<<24^w[x>>16&255]<<16^w[x>>8&255]<<8^w[x&255],y%A===0&&(x=x<<8^x>>>24^D<<24,D=D<<1^(D>>7)*283)),O[y]=O[y-A]^x;for(S=0;y;S++,y--)x=O[S&3?y:y-4],y<=4||S<4?H[S]=x:H[S]=P[0][w[x>>>24]]^P[1][w[x>>16&255]]^P[2][w[x>>8&255]]^P[3][w[x&255]]}decrypt(_,y,S,x,w,P){const A=this._key[1];let D=_^A[0],O=x^A[1],H=S^A[2],E=y^A[3],k,W,G;const Y=A.length/4-2;let ie,Q=4;const oe=this._tables[1],z=oe[0],ee=oe[1],te=oe[2],ce=oe[3],Te=oe[4];for(ie=0;ie<Y;ie++)k=z[D>>>24]^ee[O>>16&255]^te[H>>8&255]^ce[E&255]^A[Q],W=z[O>>>24]^ee[H>>16&255]^te[E>>8&255]^ce[D&255]^A[Q+1],G=z[H>>>24]^ee[E>>16&255]^te[D>>8&255]^ce[O&255]^A[Q+2],E=z[E>>>24]^ee[D>>16&255]^te[O>>8&255]^ce[H&255]^A[Q+3],Q+=4,D=k,O=W,H=G;for(ie=0;ie<4;ie++)w[(3&-ie)+P]=Te[D>>>24]<<24^Te[O>>16&255]<<16^Te[H>>8&255]<<8^Te[E&255]^A[Q++],k=D,D=O,O=H,H=E,E=k}}class s extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(_){this.jobs.push(_),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},a=function(v,_,y){const S=new Int32Array(v.buffer,v.byteOffset,v.byteLength>>2),x=new r(Array.prototype.slice.call(_)),w=new Uint8Array(v.byteLength),P=new Int32Array(w.buffer);let A,D,O,H,E,k,W,G,Y;for(A=y[0],D=y[1],O=y[2],H=y[3],Y=0;Y<S.length;Y+=4)E=o(S[Y]),k=o(S[Y+1]),W=o(S[Y+2]),G=o(S[Y+3]),x.decrypt(E,k,W,G,P,Y),P[Y]=o(P[Y]^A),P[Y+1]=o(P[Y+1]^D),P[Y+2]=o(P[Y+2]^O),P[Y+3]=o(P[Y+3]^H),A=E,D=k,O=W,H=G;return w};class l{constructor(_,y,S,x){const w=l.STEP,P=new Int32Array(_.buffer),A=new Uint8Array(_.byteLength);let D=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(P.subarray(D,D+w),y,S,A)),D=w;D<P.length;D+=w)S=new Uint32Array([o(P[D-4]),o(P[D-3]),o(P[D-2]),o(P[D-1])]),this.asyncStream_.push(this.decryptChunk_(P.subarray(D,D+w),y,S,A));this.asyncStream_.push(function(){x(null,e(A))})}static get STEP(){return 32e3}decryptChunk_(_,y,S,x){return function(){const w=a(_,y,S);x.set(w,_.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var d=c,h=function(_){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(_):_&&_.buffer instanceof ArrayBuffer},m=d.BigInt||Number;m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000"),function(){var v=new Uint16Array([65484]),_=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);return _[0]===255?"big":_[0]===204?"little":"unknown"}();const g=function(v){const _={};return Object.keys(v).forEach(y=>{const S=v[y];h(S)?_[y]={bytes:S.buffer,byteOffset:S.byteOffset,byteLength:S.byteLength}:_[y]=S}),_};self.onmessage=function(v){const _=v.data,y=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),S=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),x=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new l(y,S,x,function(w,P){self.postMessage(g({source:_.source,decrypted:P}),[P.buffer])})}}));var r1e=DW(i1e);const s1e=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},YW=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},BI=(t,e)=>{e.activePlaylistLoader=t,t.load()},o1e=(t,e)=>()=>{const{segmentLoaders:{[t]:n,main:i},mediaTypes:{[t]:r}}=e,s=r.activeTrack(),o=r.getActiveGroup(),a=r.activePlaylistLoader,l=r.lastGroup_;if(!(o&&l&&o.id===l.id)&&(r.lastGroup_=o,r.lastTrack_=s,YW(n,r),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){a&&i.resetEverything();return}n.resyncLoader(),BI(o.playlistLoader,r)}},a1e=(t,e)=>()=>{const{segmentLoaders:{[t]:n},mediaTypes:{[t]:i}}=e;i.lastGroup_=null,n.abort(),n.pause()},l1e=(t,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[t]:i,main:r},mediaTypes:{[t]:s}}=e,o=s.activeTrack(),a=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&o&&u.id===o.id)&&(s.lastGroup_=a,s.lastTrack_=o,YW(i,s),!!a)){if(a.isMainPlaylist){if(!o||!u||o.id===u.id)return;const c=e.vhs.playlistController_,d=c.selectPlaylist();if(c.media()===d)return;s.logger_(`track change. Switching main audio from ${u.id} to ${o.id}`),n.pause(),r.resetEverything(),c.fastQualityChange_(d);return}if(t==="AUDIO"){if(!a.playlistLoader){r.setAudio(!0),r.resetEverything();return}i.setAudio(!0),r.setAudio(!1)}if(l===a.playlistLoader){BI(a.playlistLoader,s);return}i.track&&i.track(o),i.resetEverything(),BI(a.playlistLoader,s)}},mb={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:n},excludePlaylist:i}=e,r=n.activeTrack(),s=n.activeGroup(),o=(s.filter(l=>l.default)[0]||s[0]).id,a=n.tracks[o];if(r===a){i({error:{message:"Problem encountered loading the default audio track."}});return}be.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in n.tracks)n.tracks[l].enabled=n.tracks[l]===a;n.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:n}}=e;be.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=n.activeTrack();i&&(i.mode="disabled"),n.onTrackChanged()}},T5={AUDIO:(t,e,n)=>{if(!e)return;const{tech:i,requestOptions:r,segmentLoaders:{[t]:s}}=n;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,r),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",mb[t](t,n))},SUBTITLES:(t,e,n)=>{const{tech:i,requestOptions:r,segmentLoaders:{[t]:s},mediaTypes:{[t]:o}}=n;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,r),s.track(o.activeTrack()),(!i.paused()||a.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",mb[t](t,n))}},u1e={AUDIO:(t,e)=>{const{vhs:n,sourceType:i,segmentLoaders:{[t]:r},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[t]:{groups:a,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,d=I_(c.main);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},d&&(o[t].main.default.playlists=c.main.playlists));for(const h in o[t]){a[h]||(a[h]=[]);for(const m in o[t][h]){let g=o[t][h][m],v;if(d?(u(`AUDIO group '${h}' label '${m}' is a main playlist`),g.isMainPlaylist=!0,v=null):i==="vhs-json"&&g.playlists?v=new Kp(g.playlists[0],n,s):g.resolvedUri?v=new Kp(g.resolvedUri,n,s):g.playlists&&i==="dash"?v=new LI(g.playlists[0],n,s,c):v=null,g=In({id:m,playlistLoader:v},g),T5[t](t,g.playlistLoader,e),a[h].push(g),typeof l[m]>"u"){const _=new be.AudioTrack({id:m,kind:s1e(g),enabled:!1,language:g.language,default:g.default,label:m});l[m]=_}}}r.on("error",mb[t](t,e))},SUBTITLES:(t,e)=>{const{tech:n,vhs:i,sourceType:r,segmentLoaders:{[t]:s},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[t]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const d in a[t]){l[d]||(l[d]=[]);for(const h in a[t][d]){if(!i.options_.useForcedSubtitles&&a[t][d][h].forced)continue;let m=a[t][d][h],g;if(r==="hls")g=new Kp(m.resolvedUri,i,o);else if(r==="dash"){if(!m.playlists.filter(_=>_.excludeUntil!==1/0).length)return;g=new LI(m.playlists[0],i,o,c)}else r==="vhs-json"&&(g=new Kp(m.playlists?m.playlists[0]:m.resolvedUri,i,o));if(m=In({id:h,playlistLoader:g},m),T5[t](t,m.playlistLoader,e),l[d].push(m),typeof u[h]>"u"){const v=n.addRemoteTextTrack({id:h,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:h},!1).track;u[h]=v}}}s.on("error",mb[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:n,main:{mediaGroups:i},mediaTypes:{[t]:{groups:r,tracks:s}}}=e;for(const o in i[t]){r[o]||(r[o]=[]);for(const a in i[t][o]){const l=i[t][o][a];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=n.options_.vhs&&n.options_.vhs.captionServices||{};let c={label:a,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=In(c,u[c.instreamId])),c.default===void 0&&delete c.default,r[o].push(In({id:a},l)),typeof s[a]>"u"){const d=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[a]=d}}}}},KW=(t,e)=>{for(let n=0;n<t.length;n++)if(R3(e,t[n])||t[n].playlists&&KW(t[n].playlists,e))return!0;return!1},c1e=(t,e)=>n=>{const{mainPlaylistLoader:i,mediaTypes:{[t]:{groups:r}}}=e,s=i.media();if(!s)return null;let o=null;s.attributes[t]&&(o=r[s.attributes[t]]);const a=Object.keys(r);if(!o)if(t==="AUDIO"&&a.length>1&&I_(e.main))for(let l=0;l<a.length;l++){const u=r[a[l]];if(KW(u,s)){o=u;break}}else r.main?o=r.main:a.length===1&&(o=r[a[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(l=>l.id===n.id)[0]||null},d1e={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const i in n)if(n[i].enabled)return n[i];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}},h1e=(t,{mediaTypes:e})=>()=>{const n=e[t].activeTrack();return n?e[t].activeGroup(n):null},f1e=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{u1e[u](u,t)});const{mediaTypes:e,mainPlaylistLoader:n,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:s,main:o}}=t;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=c1e(u,t),e[u].activeTrack=d1e[u](u,t),e[u].onGroupChanged=o1e(u,t),e[u].onGroupChanging=a1e(u,t),e[u].onTrackChanged=l1e(u,t),e[u].getActiveGroup=h1e(u,t)});const a=e.AUDIO.activeGroup();if(a){const u=(a.filter(d=>d.default)[0]||a[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},p1e=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:tu,activeTrack:tu,getActiveGroup:tu,onGroupChanged:tu,onTrackChanged:tu,lastTrack_:null,logger_:ta(`MediaGroups[${e}]`)}}),t};class b5{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Ss(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class m1e extends be.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new b5,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=ta("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const i=n.serverUri||n.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=Ss(e,i),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!n)return;const i=e?n:this.getRequestURI(n);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const r={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:r}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(s,o)=>{if(s){if(o.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(o.status===429){const u=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:r});let a;try{a=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:be.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(a);const l={contentSteeringInfo:r.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const n=new se.URL(e),i=new se.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const n=JSON.parse(se.atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new se.URL(e),i=this.getPathway(),r=this.getBandwidth_();if(i){const s=`_${this.manifestType_}_pathway`;n.searchParams.set(s,i)}if(r){const s=`_${this.manifestType_}_throughput`;n.searchParams.set(s,r)}return n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(r=>{for(const s of r)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=r=>this.excludedSteeringManifestURLs.has(r);if(this.proxyServerUrl_){const r=this.setProxyServerUrl_(e);if(!n(r))return r}const i=this.setSteeringParams_(e);return n(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const n=e*1e3;this.ttlTimeout_=se.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){se.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new b5}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,n){return!n&&this.steeringManifest.reloadUri||n&&(Ss(e,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const g1e=10;let Hl;const y1e=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],v1e=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},_1e=function({currentPlaylist:t,buffered:e,currentTime:n,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:o,bufferBasedABR:a,log:l}){if(!i)return be.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${t&&t.id||"null"} -> ${i.id}`;if(!t)return l(`${u} as current playlist is not set`),!0;if(i.id===t.id)return!1;const c=!!Yp(e,n).length;if(!t.endList)return!c&&typeof t.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const d=M3(e,n),h=a?ir.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ir.MAX_BUFFER_LOW_WATER_LINE;if(o<h)return l(`${u} as duration < max low water line (${o} < ${h})`),!0;const m=i.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(m<g&&(!a||d<s)){let v=`${u} as next bandwidth < current bandwidth (${m} < ${g})`;return a&&(v+=` and forwardBuffer < bufferHighWaterLine (${d} < ${s})`),l(v),!0}if((!a||m>g)&&d>=r){let v=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${r})`;return a&&(v+=` and next bandwidth > current bandwidth (${m} > ${g})`),l(v),!0}return l(`not ${u} as no switching criteria met`),!1};class x1e extends be.EventTarget{constructor(e){super();const{src:n,withCredentials:i,tech:r,bandwidth:s,externVhs:o,useCueTags:a,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:d,bufferBasedABR:h,leastPixelDiffSelector:m,captionServices:g,experimentalUseMMS:v}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:_}=e;(_===null||typeof _>"u")&&(_=1/0),Hl=o,this.bufferBasedABR=!!h,this.leastPixelDiffSelector=!!m,this.withCredentials=i,this.tech_=r,this.vhs_=r.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=a,this.playlistExclusionDuration=l,this.maxPlaylistRetries=_,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:_,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=p1e(),v&&se.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new se.ManagedMediaSource,be.log("Using ManagedMediaSource")):se.MediaSource&&(this.mediaSource=new se.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=vr(),this.hasPlayed_=!1,this.syncController_=new t1e(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new r1e,this.sourceUpdater_=new qW(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new n1e,this.keyStatusMap_=new Map;const y={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:g,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new LI(n,this.vhs_,In(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Kp(n,this.vhs_,In(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new UI(In(y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new UI(In(y,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Kxe(In(y,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((w,P)=>{function A(){r.off("vttjserror",D),w()}function D(){r.off("vttjsloaded",A),P()}r.one("vttjsloaded",A),r.one("vttjserror",D),r.addWebVttScript_()})}),e);const S=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new m1e(this.vhs_.xhr,S),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),y1e.forEach(w=>{this[w+"_"]=v1e.bind(this,w)}),this.logger_=ta("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const x=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(x,()=>{const w=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-w,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,i){const r=this.media(),s=r&&(r.id||r.uri),o=e&&(e.id||e.uri);if(s&&s!==o){this.logger_(`switch media ${s} -> ${o} from ${n}`);const a={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:a}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],i=n?n.activeGroup():null,r=this.contentSteeringController_.getPathway();if(i&&r){const o=(i.length?i[0].playlists:i.playlists).filter(a=>a.attributes.serviceLocation===r);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=se.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(se.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const i=e.mediaGroups.AUDIO,r=Object.keys(i);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const a=i.main||r.length&&i[r[0]];for(const l in a)if(a[l].default){s={label:l};break}}if(!s)return n;const o=[];for(const a in i)if(i[a][s.label]){const l=i[a][s.label];if(l.playlists&&l.playlists.length)o.push.apply(o,l.playlists);else if(l.uri)o.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===a&&o.push(c)}}return o.length?o:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),i=n.targetDuration*1.5*1e3;PI(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),f1e({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),i=n.targetDuration*1.5*1e3;PI(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,i=>{this.player_.trigger(ve({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const i=e.mediaGroups||{};let r=!0;const s=Object.keys(i.AUDIO);for(const o in i.AUDIO)for(const a in i.AUDIO[o])i.AUDIO[o][a].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Hl.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(i.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),r=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),o=this.tech_.buffered();return _1e({buffered:o,currentTime:i,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const r=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(r)}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:g1e}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,r=>{this.player_.trigger(ve({},r))}),this.audioSegmentLoader_.on(i,r=>{this.player_.trigger(ve({},r))}),this.subtitleSegmentLoader_.on(i,r=>{this.player_.trigger(ve({},r))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const i=n.end(0);let r=i;if(e.start){const s=e.start.timeOffset;s<0?r=Math.max(i+s,n.start(0)):r=Math.min(i,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const r=Hl.Playlist.playlistEnd(e,i),s=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return r-s<=sl;const a=o.end(o.length-1);return a-s<=sl&&r-a<=sl}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||n.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,s=r.filter($w),o=s.length===1&&s[0]===e;if(r.length===1&&i!==1/0)return be.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const g=this.pathwayAttribute_(e),v=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(g),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(g)},v);return}let m=!1;r.forEach(g=>{if(g===e)return;const v=g.excludeUntil;typeof v<"u"&&v!==1/0&&(m=!0,delete g.excludeUntil)}),m&&(be.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let a;e.playlistErrors_>this.maxPlaylistRetries?a=1/0:a=Date.now()+i*1e3,e.excludeUntil=a,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=n.internal?this.logger_:be.log.warn,c=n.message?" "+n.message:"";u(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,h=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",o||h)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const i=[],r=e==="all";(r||e==="main")&&i.push(this.mainPlaylistLoader_);const s=[];(r||e==="audio")&&s.push("AUDIO"),(r||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(o=>{const a=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;a&&i.push(a)}),["main","audio","subtitle"].forEach(o=>{const a=this[`${o}SegmentLoader_`];a&&(e===o||e==="all")&&i.push(a)}),i.forEach(o=>n.forEach(a=>{typeof o[a]=="function"&&o[a]()}))}setCurrentTime(e){const n=Yp(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Hl.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let n=this.mainPlaylistLoader_.media();if(!n)return;let i=this.syncController_.getExpiredTime(n,this.duration());if(i===null)return;const r=this.mainPlaylistLoader_.main,s=Hl.Playlist.seekable(n,i,Hl.Playlist.liveEdgeDelay(r,n));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(n,this.duration()),i===null||(e=Hl.Playlist.seekable(n,i,Hl.Playlist.liveEdgeDelay(r,n)),e.length===0)))return;let o,a;if(this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),a=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=vr([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===a)return;this.logger_(`seekable updated [${lW(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}const n=this.tech_.buffered();let i=Hl.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const i in n)n[i].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=My(this.main(),n),r={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=i.video||e.main.videoCodec||Fge),e.main.isMuxed&&(r.video+=`,${i.audio||e.main.audioCodec||rF}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(r.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||rF,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(u,c)=>u?Ty(c):hA(c),a={};let l;if(["video","audio"].forEach(function(u){if(r.hasOwnProperty(u)&&!o(e[u].isFmp4,r[u])){const c=e[u].isFmp4?"browser":"muxer";a[c]=a[c]||[],a[c].push(r[u]),u==="audio"&&(l=c)}}),s&&l&&n.attributes.AUDIO){const u=n.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==n&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${r.audio}"`)}if(Object.keys(a).length){const u=Object.keys(a).reduce((c,d)=>(c&&(c+=", "),c+=`${d} does not support codec(s): "${a[d].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const d=(Qa(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,h=(Qa(r[c]||"")[0]||{}).type;d&&h&&d.toLowerCase()!==h.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${r[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return r}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(i=>{const r=e[i];if(n.indexOf(r.id)!==-1)return;n.push(r.id);const s=My(this.main,r),o=[];s.audio&&!hA(s.audio)&&!Ty(s.audio)&&o.push(`audio codec ${s.audio}`),s.video&&!hA(s.video)&&!Ty(s.video)&&o.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&o.push(`text codec ${s.text}`),o.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],i=this.main().playlists,r=fb(Qa(e)),s=c5(r),o=r.video&&Qa(r.video)[0]||null,a=r.audio&&Qa(r.audio)[0]||null;Object.keys(i).forEach(l=>{const u=i[l];if(n.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;n.push(u.id);const c=[],d=My(this.mainPlaylistLoader_.main,u),h=c5(d);if(!(!d.audio&&!d.video)){if(h!==s&&c.push(`codec count "${h}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const m=d.video&&Qa(d.video)[0]||null,g=d.audio&&Qa(d.audio)[0]||null;m&&o&&m.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`video codec "${m.type}" !== "${o.type}"`),g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`audio codec "${g.type}" !== "${a.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let n=0;const i=this.seekable();i.length&&(n=i.start(0)),Zxe(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=ir.GOAL_BUFFER_LENGTH,i=ir.GOAL_BUFFER_LENGTH_RATE,r=Math.max(n,ir.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*i,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=ir.BUFFER_LOW_WATER_LINE,i=ir.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(n,ir.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(n,ir.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*i,this.bufferBasedABR?s:r)}bufferHighWaterLine(){return ir.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){f5(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Ixe({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,i){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();f5(this.inbandTextTracks_,e,this.tech_),Axe({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:r,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const n of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,i=>{this.trigger(ve({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),o=[];for(const a of n.playlists){const l=a.attributes.serviceLocation;if(l&&(o.push(l),!s.has(l)))return!0}return!!(!o.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,r=new Set;let s=!1;Object.keys(i).forEach(o=>{const a=i[o],l=this.pathwayAttribute_(a),u=l&&e!==l;a.excludeUntil===1/0&&a.lastExcludeReason_==="content-steering"&&!u&&(delete a.excludeUntil,delete a.lastExcludeReason_,s=!0);const d=!a.excludeUntil&&a.excludeUntil!==1/0;!r.has(a.id)&&u&&d&&(r.add(a.id),a.excludeUntil=1/0,a.lastExcludeReason_="content-steering",this.logger_(`excluding ${a.id} for ${a.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const a=this.mediaTypes_[o];if(a.activePlaylistLoader){const l=a.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,r=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||r&&r.size){for(const[o,a]of i.entries())r.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(a),this.contentSteeringController_.excludePathway(o));for(const[o,a]of r.entries()){const l=i.get(o);if(!l){n.filter(c=>c.attributes["PATHWAY-ID"]===a["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(a,c)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(l,a)||(this.mainPlaylistLoader_.updateOrDeleteClone(a,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...r])))}}equalPathwayClones_(e,n){if(e["BASE-ID"]!==n["BASE-ID"]||e.ID!==n.ID||e["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,r=n["URI-REPLACEMENT"].PARAMS;for(const s in i)if(i[s]!==r[s])return!1;for(const s in r)if(i[s]!==r[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const r=this.mainPlaylistLoader_.getKeyIdSet(i);!r||!r.size||r.forEach(s=>{const o="usable",a=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===o,l=i.lastExcludeReason_===n&&i.excludeUntil===1/0;a?a&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${s} is ${o}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==n&&(i.excludeUntil=1/0,i.lastExcludeReason_=n,this.logger_(`excluding playlist ${i.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const r=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,s=i.excludeUntil===1/0&&i.lastExcludeReason_===n;r&&s&&(delete i.excludeUntil,be.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(e,n){const s=(typeof e=="string"?e:Xxe(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,n)}updatePlaylistByKeyStatus(e,n){this.addKeyStatus_(e,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const S1e=(t,e,n)=>i=>{const r=t.main.playlists[e],s=I3(r),o=$w(r);if(typeof i>"u")return o;i?delete r.disabled:r.disabled=!0;const a={renditionInfo:{id:e,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:"fast-quality"};return i!==o&&!s&&(n(r),i?t.trigger({type:"renditionenabled",metadata:a}):t.trigger({type:"renditiondisabled",metadata:a})),i};class T1e{constructor(e,n,i){const{playlistController_:r}=e,s=r.fastQualityChange_.bind(r);if(n.attributes){const o=n.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=My(r.main(),n),this.playlist=n,this.id=i,this.enabled=S1e(e.playlists,n.id,s)}}const b1e=function(t){t.representations=()=>{const e=t.playlistController_.main(),n=I_(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(i=>!I3(i)).map((i,r)=>new T1e(t,i,i.id)):[]}},w5=["seeking","seeked","pause","playing","error"];class w1e extends be.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=ta("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),o=this.playlistController_,a=["main","subtitle","audio"],l={};a.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},o[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),o[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(d=>{o[`${d}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(w5,s),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(w5,s),this.tech_.off("canplay",i),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),a.forEach(c=>{o[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),o[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&se.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&se.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=se.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,i=n[`${e}SegmentLoader_`],r=i.buffered_(),s=c_e(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,s){const o={bufferedRanges:r};n.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:vh(r)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+sl>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(vr([this.lastRecordedTime,e]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),i=this.tech_.currentTime(),r=this.afterSeekableWindow_(n,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(r&&(s=n.end(n.length-1)),this.beforeSeekableWindow_(n,i)){const g=n.start(0);s=g+(g===n.end(0)?0:sl)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${lW(n)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const o=this.playlistController_.sourceUpdater_,a=this.tech_.buffered(),l=o.audioBuffer?o.audioBuffered():null,u=o.videoBuffer?o.videoBuffered():null,c=this.media(),d=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-rl)*2,h=[l,u];for(let g=0;g<h.length;g++){if(!h[g])continue;if(M3(h[g],i)<d)return!1}const m=v1(a,i);return m.length===0?!1:(s=m.start(0)+sl,this.logger_(`Buffered region starts (${m.start(0)})  just beyond seek point (${i}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),i=Yp(n,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const a=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${a}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=v1(r,n);return o.length>0?(this.logger_(`Stopped at ${n} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(e,n,i,r=!1){if(!e.length)return!1;let s=e.end(e.length-1)+sl;const o=!i.endList,a=typeof i.partTargetDuration=="number";return o&&(a||r)&&(s=e.end(e.length-1)+i.targetDuration*3),n>s}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:i}){if(!e)return;let r;if(e.length&&n.length){const s=Yp(e,i-3),o=Yp(e,i),a=Yp(n,i);a.length&&!o.length&&s.length&&(r={start:s.end(0),end:a.end(0)})}else v1(e,i).length||(r=this.gapFromVideoUnderflow_(e,i));return r?(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const n=this.tech_.buffered(),i=this.tech_.currentTime(),r=v1(n,i);if(this.resetTimeUpdate_(),r.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+rl);const s={gapInfo:{from:i,to:r.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,n){const i=a_e(e);for(let r=0;r<i.length;r++){const s=i.start(r),o=i.end(r);if(n-s<4&&n-s>2)return{start:s,end:o}}return null}}const E1e={errorInterval:30,getSource(t){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(n)}},QW=function(t,e){let n=0,i=0;const r=In(E1e,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){i&&t.currentTime(i)},o=function(c){c!=null&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(c),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},a=function(){if(Date.now()-n<r.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){be.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),r.getSource.call(t,o)},l=function(){t.off("loadedmetadata",s),t.off("error",a),t.off("dispose",l)},u=function(c){l(),QW(t,c)};t.on("error",a),t.on("dispose",l),t.reloadSourceOnError=u},C1e=function(t){QW(this,t)};var ZW="3.15.0",A1e="7.0.3",M1e="1.3.1",P1e="7.2.0",I1e="4.0.2";const ci={PlaylistLoader:Kp,Playlist:Ts,utils:L_e,STANDARD_PLAYLIST_SELECTOR:h5,INITIAL_PLAYLIST_SELECTOR:Txe,lastBandwidthSelector:h5,movingAverageBandwidthSelector:xxe,comparePlaylistBandwidth:k3,comparePlaylistResolution:_xe,xhr:EW()};Object.keys(ir).forEach(t=>{Object.defineProperty(ci,t,{get(){return be.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),ir[t]},set(e){if(be.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){be.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}ir[t]=e}})});const JW="videojs-vhs",ej=function(t,e){const n=e.media();let i=-1;for(let r=0;r<t.length;r++)if(t[r].id===n.id){i=r;break}t.selectedIndex_=i,t.trigger({selectedIndex:i,type:"change"})},R1e=function(t,e){e.representations().forEach(n=>{t.addQualityLevel(n)}),ej(t,e.playlists)};ci.canPlaySource=function(){return be.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const D1e=(t,e,n)=>{if(!t)return t;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=fb(Qa(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);const r=Vm(i.video),s=Vm(i.audio),o={};for(const a in t)o[a]={},s&&(o[a].audioContentType=s),r&&(o[a].videoContentType=r),e.contentProtection&&e.contentProtection[a]&&e.contentProtection[a].pssh&&(o[a].pssh=e.contentProtection[a].pssh),typeof t[a]=="string"&&(o[a].url=t[a]);return In(t,o)},k1e=(t,e)=>t.reduce((n,i)=>{if(!i.contentProtection)return n;const r=e.reduce((s,o)=>{const a=i.contentProtection[o];return a&&a.pssh&&(s[o]={pssh:a.pssh}),s},{});return Object.keys(r).length&&n.push(r),n},[]),L1e=({player:t,sourceKeySystems:e,audioMedia:n,mainPlaylists:i})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const r=n?i.concat([n]):i,s=k1e(r,Object.keys(e)),o=[],a=[];return s.forEach(l=>{a.push(new Promise((u,c)=>{t.tech_.one("keysessioncreated",u)})),o.push(new Promise((u,c)=>{t.eme.initializeMediaKeys({keySystems:l},d=>{if(d){c(d);return}u()})}))}),Promise.race([Promise.all(o),Promise.race(a)])},N1e=({player:t,sourceKeySystems:e,media:n,audioMedia:i})=>{const r=D1e(e,n,i);return r?(t.currentSource().keySystems=r,r&&!t.eme?(be.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},tj=()=>{if(!se.localStorage)return null;const t=se.localStorage.getItem(JW);if(!t)return null;try{return JSON.parse(t)}catch{return null}},O1e=t=>{if(!se.localStorage)return!1;let e=tj();e=e?In(e,t):t;try{se.localStorage.setItem(JW,JSON.stringify(e))}catch{return!1}return e},U1e=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,nj=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},ij=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},rj=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},sj=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};ci.supportsNativeHls=function(){if(!Je||!Je.createElement)return!1;const t=Je.createElement("video");return be.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(t.canPlayType(n))}):!1}();ci.supportsNativeDash=function(){return!Je||!Je.createElement||!be.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Je.createElement("video").canPlayType("application/dash+xml"))}();ci.supportsTypeNatively=t=>t==="hls"?ci.supportsNativeHls:t==="dash"?ci.supportsNativeDash:!1;ci.isSupported=function(){return be.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ci.xhr.onRequest=function(t){nj(ci.xhr,t)};ci.xhr.onResponse=function(t){ij(ci.xhr,t)};ci.xhr.offRequest=function(t){rj(ci.xhr,t)};ci.xhr.offResponse=function(t){sj(ci.xhr,t)};const F1e=be.getComponent("Component");class oj extends F1e{constructor(e,n,i){if(super(n,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=ta("VhsHandler"),n.options_&&n.options_.playerId){const r=be.getPlayer(n.options_.playerId);this.player_=r}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Je,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{const s=Je.fullscreenElement||Je.webkitFullscreenElement||Je.mozFullScreenElement||Je.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=In(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=tj();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=ir.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ir.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(e={}){this.setOptions_(e)}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=U1e(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ci,this.options_.sourceType=ZV(n),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new x1e(this.options_);const i=In({liveRangeSafeTimeDelta:sl},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new w1e(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=be.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),s.error(o)});const r=this.options_.bufferBasedABR?ci.movingAverageBandwidthSelector(.55):ci.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=ci.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const o=se.navigator.connection||se.navigator.mozConnection||se.navigator.webkitConnection,a=1e7;if(this.options_.useNetworkInformationApi&&o){const l=o.downlink*1e3*1e3;l>=a&&s>=a?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(s+o))},set(){be.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>vh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>vh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&O1e({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{b1e(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=se.URL.createObjectURL(this.playlistController_.mediaSource),(be.browser.IS_ANY_SAFARI||be.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),L1e({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=N1e({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=be.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{R1e(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{ej(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":ZW,"mux.js":A1e,"mpd-parser":M1e,"m3u8-parser":P1e,"aes-decrypter":I1e}}version(){return this.constructor.version()}canChangeType(){return qW.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&se.URL.revokeObjectURL&&(se.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return H_e({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,i=!0,r=2){return IW({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{nj(this.xhr,e)},this.xhr.onResponse=e=>{ij(this.xhr,e)},this.xhr.offRequest=e=>{rj(this.xhr,e)},this.xhr.offResponse=e=>{sj(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,r=>{this.player_.trigger(ve({},r))})}),n.forEach(i=>{this.playbackWatcher_.on(i,r=>{this.player_.trigger(ve({},r))})})}}const gb={name:"videojs-http-streaming",VERSION:ZW,canHandleSource(t,e={}){const n=In(be.options,e);return!n.vhs.experimentalUseMMS&&!Ty("avc1.4d400d,mp4a.40.2",!1)?!1:gb.canPlayType(t.type,n)},handleSource(t,e,n={}){const i=In(be.options,n);return e.vhs=new oj(t,e,i),e.vhs.xhr=EW(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const n=ZV(t);if(!n)return"";const i=gb.getOverrideNative(e);return!ci.supportsTypeNatively(n)||i?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,n=!(be.browser.IS_ANY_SAFARI||be.browser.IS_IOS),{overrideNative:i=n}=e;return i}},B1e=()=>Ty("avc1.4d400d,mp4a.40.2",!0);B1e()&&be.getTech("Html5").registerSourceHandler(gb,0);be.VhsHandler=oj;be.VhsSourceHandler=gb;be.Vhs=ci;be.use||be.registerComponent("Vhs",ci);be.options.vhs=be.options.vhs||{};(!be.getPlugin||!be.getPlugin("reloadSourceOnError"))&&be.registerPlugin("reloadSourceOnError",C1e);const z1e=t=>{const e=Zr.useRef(null),n=Zr.useRef(null),{options:i,onReady:r}=t;return Zr.useEffect(()=>{if(n.current){const s=n.current;s.autoplay(i.autoplay),s.src(i.sources)}else{const s=document.createElement("video-js");s.classList.add("vjs-big-play-centered"),e.current.appendChild(s);const o=n.current=be(s,i,()=>{be.log("player is ready"),r&&r(o)})}},[i,e]),Zr.useEffect(()=>{const s=n.current;return()=>{s&&!s.isDisposed()&&(s.dispose(),n.current=null)}},[n]),$("div",{"data-vjs-player":!0,children:$("div",{ref:e})})},H1e=()=>{const t=Zr.useRef(null);return Nt(Ma,{children:[$(of,{}),$("div",{className:"videoStreamContainer",children:$(z1e,{options:{autoplay:!0,controls:!0,responsive:!0,fluid:!0,sources:[{src:"https://rerassor.com:8084/stream/test/channel/0/hls/live/index.m3u8"}]},onReady:i=>{t.current=i,i.on("waiting",()=>{videojs.log("player is waiting")}),i.on("dispose",()=>{videojs.log("player will dispose")})}})})]})},V1e="/assets/fpvstreamplaceholder-614b5958.png",$1e=()=>Nt(Ma,{children:[$(of,{}),$("div",{className:"streamContainer",children:$("img",{src:V1e,className:"streamImage",alt:"Bin Stream"})})]});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gw="169",sh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aj=0,zI=1,lj=2,G1e=3,uj=0,Ww=1,Py=2,ma=3,Ru=0,ns=1,to=2,gu=0,Lh=1,HI=2,VI=3,$I=4,cj=5,Rc=100,dj=101,hj=102,fj=103,pj=104,mj=200,gj=201,yj=202,vj=203,yb=204,vb=205,_j=206,xj=207,Sj=208,Tj=209,bj=210,wj=211,Ej=212,Cj=213,Aj=214,_b=0,xb=1,Sb=2,Kh=3,Tb=4,bb=5,wb=6,Eb=7,R_=0,Mj=1,Pj=2,yl=0,Ij=1,Rj=2,Dj=3,L3=4,kj=5,Lj=6,Nj=7,GI="attached",Oj="detached",jw=300,Du=301,td=302,Lv=303,Nv=304,Tg=306,Ov=1e3,zo=1001,Uv=1002,sr=1003,N3=1004,W1e=1004,Qp=1005,j1e=1005,Fi=1006,Iy=1007,q1e=1007,al=1008,X1e=1008,Ia=1009,O3=1010,U3=1011,tg=1012,qw=1013,ku=1014,Cs=1015,bg=1016,Xw=1017,Yw=1018,Qh=1020,F3=35902,B3=1021,z3=1022,Dr=1023,H3=1024,V3=1025,Nh=1026,Zh=1027,Kw=1028,D_=1029,$3=1030,Qw=1031,Y1e=1032,Zw=1033,Ry=33776,Dy=33777,ky=33778,Ly=33779,Cb=35840,Ab=35841,Mb=35842,Pb=35843,Ib=36196,Rb=37492,Db=37496,kb=37808,Lb=37809,Nb=37810,Ob=37811,Ub=37812,Fb=37813,Bb=37814,zb=37815,Hb=37816,Vb=37817,$b=37818,Gb=37819,Wb=37820,jb=37821,Ny=36492,qb=36494,Xb=36495,G3=36283,Yb=36284,Kb=36285,Qb=36286,Uj=2200,Fj=2201,Bj=2202,Fv=2300,Zb=2301,zS=2302,_h=2400,xh=2401,Bv=2402,Jw=2500,W3=2501,K1e=0,Q1e=1,Z1e=2,zj=3200,Hj=3201,J1e=3202,eSe=3203,dd=0,Vj=1,nu="",Zs="srgb",Fu="srgb-linear",eE="display-p3",k_="display-p3-linear",zv="linear",Vn="srgb",Hv="rec709",Vv="p3",tSe=0,ah=7680,nSe=7681,iSe=7682,rSe=7683,sSe=34055,oSe=34056,aSe=5386,lSe=512,uSe=513,cSe=514,dSe=515,hSe=516,fSe=517,pSe=518,WI=519,$j=512,Gj=513,Wj=514,j3=515,jj=516,qj=517,Xj=518,Yj=519,$v=35044,mSe=35048,gSe=35040,ySe=35045,vSe=35049,_Se=35041,xSe=35046,SSe=35050,TSe=35042,bSe="100",jI="300 es",ll=2e3,Gv=2001;class Ua{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ar=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let E5=1234567;const Oh=Math.PI/180,ng=180/Math.PI;function oo(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ar[t&255]+Ar[t>>8&255]+Ar[t>>16&255]+Ar[t>>24&255]+"-"+Ar[e&255]+Ar[e>>8&255]+"-"+Ar[e>>16&15|64]+Ar[e>>24&255]+"-"+Ar[n&63|128]+Ar[n>>8&255]+"-"+Ar[n>>16&255]+Ar[n>>24&255]+Ar[i&255]+Ar[i>>8&255]+Ar[i>>16&255]+Ar[i>>24&255]).toLowerCase()}function Ti(t,e,n){return Math.max(e,Math.min(n,t))}function q3(t,e){return(t%e+e)%e}function wSe(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function ESe(t,e,n){return t!==e?(n-t)/(e-t):0}function Oy(t,e,n){return(1-n)*t+n*e}function CSe(t,e,n,i){return Oy(t,e,1-Math.exp(-n*i))}function ASe(t,e=1){return e-Math.abs(q3(t,e*2)-e)}function MSe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function PSe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function ISe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function RSe(t,e){return t+Math.random()*(e-t)}function DSe(t){return t*(.5-Math.random())}function kSe(t){t!==void 0&&(E5=t);let e=E5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function LSe(t){return t*Oh}function NSe(t){return t*ng}function OSe(t){return(t&t-1)===0&&t!==0}function USe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function FSe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function BSe(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+i)/2),c=o((e+i)/2),d=s((e-i)/2),h=o((e-i)/2),m=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":t.set(a*c,l*d,l*h,a*u);break;case"YZY":t.set(l*h,a*c,l*d,a*u);break;case"ZXZ":t.set(l*d,l*h,a*c,a*u);break;case"XZX":t.set(a*c,l*g,l*m,a*u);break;case"YXY":t.set(l*m,a*c,l*g,a*u);break;case"ZYZ":t.set(l*g,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Qr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function tn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const zSe={DEG2RAD:Oh,RAD2DEG:ng,generateUUID:oo,clamp:Ti,euclideanModulo:q3,mapLinear:wSe,inverseLerp:ESe,lerp:Oy,damp:CSe,pingpong:ASe,smoothstep:MSe,smootherstep:PSe,randInt:ISe,randFloat:RSe,randFloatSpread:DSe,seededRandom:kSe,degToRad:LSe,radToDeg:NSe,isPowerOfTwo:OSe,ceilPowerOfTwo:USe,floorPowerOfTwo:FSe,setQuaternionFromProperEuler:BSe,normalize:tn,denormalize:Qr};class je{constructor(e=0,n=0){je.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Ti(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class en{constructor(e,n,i,r,s,o,a,l,u){en.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,u)}set(e,n,i,r,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=n,c[4]=s,c[5]=l,c[6]=i,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],c=i[4],d=i[7],h=i[2],m=i[5],g=i[8],v=r[0],_=r[3],y=r[6],S=r[1],x=r[4],w=r[7],P=r[2],A=r[5],D=r[8];return s[0]=o*v+a*S+l*P,s[3]=o*_+a*x+l*A,s[6]=o*y+a*w+l*D,s[1]=u*v+c*S+d*P,s[4]=u*_+c*x+d*A,s[7]=u*y+c*w+d*D,s[2]=h*v+m*S+g*P,s[5]=h*_+m*x+g*A,s[8]=h*y+m*w+g*D,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return n*o*c-n*a*u-i*s*c+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=c*o-a*u,h=a*l-c*s,m=u*s-o*l,g=n*d+i*h+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(r*u-c*i)*v,e[2]=(a*i-r*o)*v,e[3]=h*v,e[4]=(c*n-r*l)*v,e[5]=(r*s-a*n)*v,e[6]=m*v,e[7]=(i*l-u*n)*v,e[8]=(o*n-i*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(IA.makeScale(e,n)),this}rotate(e){return this.premultiply(IA.makeRotation(-e)),this}translate(e,n){return this.premultiply(IA.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const IA=new en;function Kj(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const HSe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Zp(t,e){return new HSe[t](e)}function Wv(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Qj(){const t=Wv("canvas");return t.style.display="block",t}const C5={};function HS(t){t in C5||(C5[t]=!0,console.warn(t))}function VSe(t,e,n){return new Promise(function(i,r){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}}setTimeout(s,n)})}function $Se(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function GSe(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const A5=new en().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),M5=new en().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),M0={[Fu]:{transfer:zv,primaries:Hv,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t,fromReference:t=>t},[Zs]:{transfer:Vn,primaries:Hv,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[k_]:{transfer:zv,primaries:Vv,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.applyMatrix3(M5),fromReference:t=>t.applyMatrix3(A5)},[eE]:{transfer:Vn,primaries:Vv,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.convertSRGBToLinear().applyMatrix3(M5),fromReference:t=>t.applyMatrix3(A5).convertLinearToSRGB()}},WSe=new Set([Fu,k_]),bn={enabled:!0,_workingColorSpace:Fu,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!WSe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=M0[e].toReference,r=M0[n].fromReference;return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return M0[t].primaries},getTransfer:function(t){return t===nu?zv:M0[t].transfer},getLuminanceCoefficients:function(t,e=this._workingColorSpace){return t.fromArray(M0[e].luminanceCoefficients)}};function Sm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function RA(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let dp;class Zj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{dp===void 0&&(dp=Wv("canvas")),dp.width=e.width,dp.height=e.height;const i=dp.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=dp}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Wv("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Sm(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Sm(n[i]/255)*255):n[i]=Sm(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let jSe=0;class Sh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jSe++}),this.uuid=oo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(DA(r[o].image)):s.push(DA(r[o]))}else s=DA(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function DA(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Zj.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qSe=0;class hi extends Ua{constructor(e=hi.DEFAULT_IMAGE,n=hi.DEFAULT_MAPPING,i=zo,r=zo,s=Fi,o=al,a=Dr,l=Ia,u=hi.DEFAULT_ANISOTROPY,c=nu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qSe++}),this.uuid=oo(),this.name="",this.source=new Sh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new en,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ov:e.x=e.x-Math.floor(e.x);break;case zo:e.x=e.x<0?0:1;break;case Uv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ov:e.y=e.y-Math.floor(e.y);break;case zo:e.y=e.y<0?0:1;break;case Uv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=jw;hi.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,n=0,i=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,u=l[0],c=l[4],d=l[8],h=l[1],m=l[5],g=l[9],v=l[2],_=l[6],y=l[10];if(Math.abs(c-h)<.01&&Math.abs(d-v)<.01&&Math.abs(g-_)<.01){if(Math.abs(c+h)<.1&&Math.abs(d+v)<.1&&Math.abs(g+_)<.1&&Math.abs(u+m+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(u+1)/2,w=(m+1)/2,P=(y+1)/2,A=(c+h)/4,D=(d+v)/4,O=(g+_)/4;return x>w&&x>P?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=A/i,s=D/i):w>P?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=A/r,s=O/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=D/s,r=O/s),this.set(i,r,s,n),this}let S=Math.sqrt((_-g)*(_-g)+(d-v)*(d-v)+(h-c)*(h-c));return Math.abs(S)<.001&&(S=1),this.x=(_-g)/S,this.y=(d-v)/S,this.z=(h-c)/S,this.w=Math.acos((u+m+y-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Jj extends Ua{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new yn(0,0,e,n),this.scissorTest=!1,this.viewport=new yn(0,0,e,n);const r={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new hi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Sh(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ra extends Jj{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class tE extends hi{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=sr,this.minFilter=sr,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class XSe extends Ra{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new tE(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class X3 extends hi{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=sr,this.minFilter=sr,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YSe extends Ra{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new X3(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Nr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],u=i[r+1],c=i[r+2],d=i[r+3];const h=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=c,e[n+3]=d;return}if(a===1){e[n+0]=h,e[n+1]=m,e[n+2]=g,e[n+3]=v;return}if(d!==v||l!==h||u!==m||c!==g){let _=1-a;const y=l*h+u*m+c*g+d*v,S=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const P=Math.sqrt(x),A=Math.atan2(P,y*S);_=Math.sin(_*A)/P,a=Math.sin(a*A)/P}const w=a*S;if(l=l*_+h*w,u=u*_+m*w,c=c*_+g*w,d=d*_+v*w,_===1-a){const P=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=P,u*=P,c*=P,d*=P}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],c=i[r+3],d=s[o],h=s[o+1],m=s[o+2],g=s[o+3];return e[n]=a*g+c*d+l*m-u*h,e[n+1]=l*g+c*h+u*d-a*m,e[n+2]=u*g+c*m+a*h-l*d,e[n+3]=c*g-a*d-l*h-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),c=a(r/2),d=a(s/2),h=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=h*c*d+u*m*g,this._y=u*m*d-h*c*g,this._z=u*c*g+h*m*d,this._w=u*c*d-h*m*g;break;case"YXZ":this._x=h*c*d+u*m*g,this._y=u*m*d-h*c*g,this._z=u*c*g-h*m*d,this._w=u*c*d+h*m*g;break;case"ZXY":this._x=h*c*d-u*m*g,this._y=u*m*d+h*c*g,this._z=u*c*g+h*m*d,this._w=u*c*d-h*m*g;break;case"ZYX":this._x=h*c*d-u*m*g,this._y=u*m*d+h*c*g,this._z=u*c*g-h*m*d,this._w=u*c*d+h*m*g;break;case"YZX":this._x=h*c*d+u*m*g,this._y=u*m*d+h*c*g,this._z=u*c*g-h*m*d,this._w=u*c*d-h*m*g;break;case"XZY":this._x=h*c*d-u*m*g,this._y=u*m*d-h*c*g,this._z=u*c*g+h*m*d,this._w=u*c*d+h*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],c=n[6],d=n[10],h=i+a+d;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(c-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ti(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,c=n._w;return this._x=i*c+o*a+r*u-s*l,this._y=r*c+o*l+s*a-i*u,this._z=s*c+o*u+i*l-r*a,this._w=o*c-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*i+n*this._x,this._y=m*r+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),d=Math.sin((1-n)*c)/u,h=Math.sin(n*c)/u;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,n=0,i=0){J.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(P5.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(P5.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),c=2*(a*n-s*r),d=2*(s*i-o*n);return this.x=n+l*u+o*d-a*c,this.y=i+l*c+a*u-s*d,this.z=r+l*d+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return kA.copy(this).projectOnVector(e),this.sub(kA)}reflect(e){return this.sub(kA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Ti(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kA=new J,P5=new Nr;class is{constructor(e=new J(1/0,1/0,1/0),n=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(da.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(da.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=da.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,da):da.fromBufferAttribute(s,o),da.applyMatrix4(e.matrixWorld),this.expandByPoint(da);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),S1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),S1.copy(i.boundingBox)),S1.applyMatrix4(e.matrixWorld),this.union(S1)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,da),da.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(P0),T1.subVectors(this.max,P0),hp.subVectors(e.a,P0),fp.subVectors(e.b,P0),pp.subVectors(e.c,P0),mc.subVectors(fp,hp),gc.subVectors(pp,fp),Vd.subVectors(hp,pp);let n=[0,-mc.z,mc.y,0,-gc.z,gc.y,0,-Vd.z,Vd.y,mc.z,0,-mc.x,gc.z,0,-gc.x,Vd.z,0,-Vd.x,-mc.y,mc.x,0,-gc.y,gc.x,0,-Vd.y,Vd.x,0];return!LA(n,hp,fp,pp,T1)||(n=[1,0,0,0,1,0,0,0,1],!LA(n,hp,fp,pp,T1))?!1:(b1.crossVectors(mc,gc),n=[b1.x,b1.y,b1.z],LA(n,hp,fp,pp,T1))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,da).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(da).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Vl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Vl=[new J,new J,new J,new J,new J,new J,new J,new J],da=new J,S1=new is,hp=new J,fp=new J,pp=new J,mc=new J,gc=new J,Vd=new J,P0=new J,T1=new J,b1=new J,$d=new J;function LA(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){$d.fromArray(t,s);const a=r.x*Math.abs($d.x)+r.y*Math.abs($d.y)+r.z*Math.abs($d.z),l=e.dot($d),u=n.dot($d),c=i.dot($d);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const KSe=new is,I0=new J,NA=new J;class Or{constructor(e=new J,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):KSe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;I0.subVectors(e,this.center);const n=I0.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(I0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(I0.copy(e.center).add(NA)),this.expandByPoint(I0.copy(e.center).sub(NA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $l=new J,OA=new J,w1=new J,yc=new J,UA=new J,E1=new J,FA=new J;class df{constructor(e=new J,n=new J(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$l)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=$l.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):($l.copy(this.origin).addScaledVector(this.direction,n),$l.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){OA.copy(e).add(n).multiplyScalar(.5),w1.copy(n).sub(e).normalize(),yc.copy(this.origin).sub(OA);const s=e.distanceTo(n)*.5,o=-this.direction.dot(w1),a=yc.dot(this.direction),l=-yc.dot(w1),u=yc.lengthSq(),c=Math.abs(1-o*o);let d,h,m,g;if(c>0)if(d=o*l-a,h=o*a-l,g=s*c,d>=0)if(h>=-g)if(h<=g){const v=1/c;d*=v,h*=v,m=d*(d+o*h+2*a)+h*(o*d+h+2*l)+u}else h=s,d=Math.max(0,-(o*h+a)),m=-d*d+h*(h+2*l)+u;else h=-s,d=Math.max(0,-(o*h+a)),m=-d*d+h*(h+2*l)+u;else h<=-g?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+h*(h+2*l)+u):h<=g?(d=0,h=Math.min(Math.max(-s,-l),s),m=h*(h+2*l)+u):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+h*(h+2*l)+u);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),m=-d*d+h*(h+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(OA).addScaledVector(w1,h),m}intersectSphere(e,n){$l.subVectors(e.center,this.origin);const i=$l.dot(this.direction),r=$l.dot($l)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,$l)!==null}intersectTriangle(e,n,i,r,s){UA.subVectors(n,e),E1.subVectors(i,e),FA.crossVectors(UA,E1);let o=this.direction.dot(FA),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;yc.subVectors(this.origin,e);const l=a*this.direction.dot(E1.crossVectors(yc,E1));if(l<0)return null;const u=a*this.direction.dot(UA.cross(yc));if(u<0||l+u>o)return null;const c=-a*yc.dot(FA);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zt{constructor(e,n,i,r,s,o,a,l,u,c,d,h,m,g,v,_){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,u,c,d,h,m,g,v,_)}set(e,n,i,r,s,o,a,l,u,c,d,h,m,g,v,_){const y=this.elements;return y[0]=e,y[4]=n,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=u,y[6]=c,y[10]=d,y[14]=h,y[3]=m,y[7]=g,y[11]=v,y[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/mp.setFromMatrixColumn(e,0).length(),s=1/mp.setFromMatrixColumn(e,1).length(),o=1/mp.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*c,m=o*d,g=a*c,v=a*d;n[0]=l*c,n[4]=-l*d,n[8]=u,n[1]=m+g*u,n[5]=h-v*u,n[9]=-a*l,n[2]=v-h*u,n[6]=g+m*u,n[10]=o*l}else if(e.order==="YXZ"){const h=l*c,m=l*d,g=u*c,v=u*d;n[0]=h+v*a,n[4]=g*a-m,n[8]=o*u,n[1]=o*d,n[5]=o*c,n[9]=-a,n[2]=m*a-g,n[6]=v+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*c,m=l*d,g=u*c,v=u*d;n[0]=h-v*a,n[4]=-o*d,n[8]=g+m*a,n[1]=m+g*a,n[5]=o*c,n[9]=v-h*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*c,m=o*d,g=a*c,v=a*d;n[0]=l*c,n[4]=g*u-m,n[8]=h*u+v,n[1]=l*d,n[5]=v*u+h,n[9]=m*u-g,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,m=o*u,g=a*l,v=a*u;n[0]=l*c,n[4]=v-h*d,n[8]=g*d+m,n[1]=d,n[5]=o*c,n[9]=-a*c,n[2]=-u*c,n[6]=m*d+g,n[10]=h-v*d}else if(e.order==="XZY"){const h=o*l,m=o*u,g=a*l,v=a*u;n[0]=l*c,n[4]=-d,n[8]=u*c,n[1]=h*d+v,n[5]=o*c,n[9]=m*d-g,n[2]=g*d-m,n[6]=a*c,n[10]=v*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(QSe,e,ZSe)}lookAt(e,n,i){const r=this.elements;return Ys.subVectors(e,n),Ys.lengthSq()===0&&(Ys.z=1),Ys.normalize(),vc.crossVectors(i,Ys),vc.lengthSq()===0&&(Math.abs(i.z)===1?Ys.x+=1e-4:Ys.z+=1e-4,Ys.normalize(),vc.crossVectors(i,Ys)),vc.normalize(),C1.crossVectors(Ys,vc),r[0]=vc.x,r[4]=C1.x,r[8]=Ys.x,r[1]=vc.y,r[5]=C1.y,r[9]=Ys.y,r[2]=vc.z,r[6]=C1.z,r[10]=Ys.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],c=i[1],d=i[5],h=i[9],m=i[13],g=i[2],v=i[6],_=i[10],y=i[14],S=i[3],x=i[7],w=i[11],P=i[15],A=r[0],D=r[4],O=r[8],H=r[12],E=r[1],k=r[5],W=r[9],G=r[13],Y=r[2],ie=r[6],Q=r[10],oe=r[14],z=r[3],ee=r[7],te=r[11],ce=r[15];return s[0]=o*A+a*E+l*Y+u*z,s[4]=o*D+a*k+l*ie+u*ee,s[8]=o*O+a*W+l*Q+u*te,s[12]=o*H+a*G+l*oe+u*ce,s[1]=c*A+d*E+h*Y+m*z,s[5]=c*D+d*k+h*ie+m*ee,s[9]=c*O+d*W+h*Q+m*te,s[13]=c*H+d*G+h*oe+m*ce,s[2]=g*A+v*E+_*Y+y*z,s[6]=g*D+v*k+_*ie+y*ee,s[10]=g*O+v*W+_*Q+y*te,s[14]=g*H+v*G+_*oe+y*ce,s[3]=S*A+x*E+w*Y+P*z,s[7]=S*D+x*k+w*ie+P*ee,s[11]=S*O+x*W+w*Q+P*te,s[15]=S*H+x*G+w*oe+P*ce,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],m=e[14],g=e[3],v=e[7],_=e[11],y=e[15];return g*(+s*l*d-r*u*d-s*a*h+i*u*h+r*a*m-i*l*m)+v*(+n*l*m-n*u*h+s*o*h-r*o*m+r*u*c-s*l*c)+_*(+n*u*d-n*a*m-s*o*d+i*o*m+s*a*c-i*u*c)+y*(-r*a*c-n*l*d+n*a*h+r*o*d-i*o*h+i*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],m=e[11],g=e[12],v=e[13],_=e[14],y=e[15],S=d*_*u-v*h*u+v*l*m-a*_*m-d*l*y+a*h*y,x=g*h*u-c*_*u-g*l*m+o*_*m+c*l*y-o*h*y,w=c*v*u-g*d*u+g*a*m-o*v*m-c*a*y+o*d*y,P=g*d*l-c*v*l-g*a*h+o*v*h+c*a*_-o*d*_,A=n*S+i*x+r*w+s*P;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/A;return e[0]=S*D,e[1]=(v*h*s-d*_*s-v*r*m+i*_*m+d*r*y-i*h*y)*D,e[2]=(a*_*s-v*l*s+v*r*u-i*_*u-a*r*y+i*l*y)*D,e[3]=(d*l*s-a*h*s-d*r*u+i*h*u+a*r*m-i*l*m)*D,e[4]=x*D,e[5]=(c*_*s-g*h*s+g*r*m-n*_*m-c*r*y+n*h*y)*D,e[6]=(g*l*s-o*_*s-g*r*u+n*_*u+o*r*y-n*l*y)*D,e[7]=(o*h*s-c*l*s+c*r*u-n*h*u-o*r*m+n*l*m)*D,e[8]=w*D,e[9]=(g*d*s-c*v*s-g*i*m+n*v*m+c*i*y-n*d*y)*D,e[10]=(o*v*s-g*a*s+g*i*u-n*v*u-o*i*y+n*a*y)*D,e[11]=(c*a*s-o*d*s-c*i*u+n*d*u+o*i*m-n*a*m)*D,e[12]=P*D,e[13]=(c*v*r-g*d*r+g*i*h-n*v*h-c*i*_+n*d*_)*D,e[14]=(g*a*r-o*v*r-g*i*l+n*v*l+o*i*_-n*a*_)*D,e[15]=(o*d*r-c*a*r+c*i*l-n*d*l-o*i*h+n*a*h)*D,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+i,c*l-r*o,0,u*l-r*a,c*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,c=o+o,d=a+a,h=s*u,m=s*c,g=s*d,v=o*c,_=o*d,y=a*d,S=l*u,x=l*c,w=l*d,P=i.x,A=i.y,D=i.z;return r[0]=(1-(v+y))*P,r[1]=(m+w)*P,r[2]=(g-x)*P,r[3]=0,r[4]=(m-w)*A,r[5]=(1-(h+y))*A,r[6]=(_+S)*A,r[7]=0,r[8]=(g+x)*D,r[9]=(_-S)*D,r[10]=(1-(h+v))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=mp.set(r[0],r[1],r[2]).length();const o=mp.set(r[4],r[5],r[6]).length(),a=mp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ha.copy(this);const u=1/s,c=1/o,d=1/a;return ha.elements[0]*=u,ha.elements[1]*=u,ha.elements[2]*=u,ha.elements[4]*=c,ha.elements[5]*=c,ha.elements[6]*=c,ha.elements[8]*=d,ha.elements[9]*=d,ha.elements[10]*=d,n.setFromRotationMatrix(ha),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o,a=ll){const l=this.elements,u=2*s/(n-e),c=2*s/(i-r),d=(n+e)/(n-e),h=(i+r)/(i-r);let m,g;if(a===ll)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===Gv)m=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,r,s,o,a=ll){const l=this.elements,u=1/(n-e),c=1/(i-r),d=1/(o-s),h=(n+e)*u,m=(i+r)*c;let g,v;if(a===ll)g=(o+s)*d,v=-2*d;else if(a===Gv)g=s*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const mp=new J,ha=new zt,QSe=new J(0,0,0),ZSe=new J(1,1,1),vc=new J,C1=new J,Ys=new J,I5=new zt,R5=new Nr;class ho{constructor(e=0,n=0,i=0,r=ho.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],c=r[9],d=r[2],h=r[6],m=r[10];switch(n){case"XYZ":this._y=Math.asin(Ti(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ti(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ti(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ti(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Ti(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return I5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(I5,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return R5.setFromEuler(this),this.setFromQuaternion(R5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ho.DEFAULT_ORDER="XYZ";class Uh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let JSe=0;const D5=new J,gp=new Nr,Gl=new zt,A1=new J,R0=new J,eTe=new J,tTe=new Nr,k5=new J(1,0,0),L5=new J(0,1,0),N5=new J(0,0,1),O5={type:"added"},nTe={type:"removed"},yp={type:"childadded",child:null},BA={type:"childremoved",child:null};class _n extends Ua{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JSe++}),this.uuid=oo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const e=new J,n=new ho,i=new Nr,r=new J(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zt},normalMatrix:{value:new en}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Uh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return gp.setFromAxisAngle(e,n),this.quaternion.multiply(gp),this}rotateOnWorldAxis(e,n){return gp.setFromAxisAngle(e,n),this.quaternion.premultiply(gp),this}rotateX(e){return this.rotateOnAxis(k5,e)}rotateY(e){return this.rotateOnAxis(L5,e)}rotateZ(e){return this.rotateOnAxis(N5,e)}translateOnAxis(e,n){return D5.copy(e).applyQuaternion(this.quaternion),this.position.add(D5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(k5,e)}translateY(e){return this.translateOnAxis(L5,e)}translateZ(e){return this.translateOnAxis(N5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gl.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?A1.copy(e):A1.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),R0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gl.lookAt(R0,A1,this.up):Gl.lookAt(A1,R0,this.up),this.quaternion.setFromRotationMatrix(Gl),r&&(Gl.extractRotation(r.matrixWorld),gp.setFromRotationMatrix(Gl),this.quaternion.premultiply(gp.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(O5),yp.child=e,this.dispatchEvent(yp),yp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(nTe),BA.child=e,this.dispatchEvent(BA),BA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(O5),yp.child=e,this.dispatchEvent(yp),yp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R0,e,eTe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R0,tTe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),d=o(e.shapes),h=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}_n.DEFAULT_UP=new J(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fa=new J,Wl=new J,zA=new J,jl=new J,vp=new J,_p=new J,U5=new J,HA=new J,VA=new J,$A=new J,GA=new yn,WA=new yn,jA=new yn;class bs{constructor(e=new J,n=new J,i=new J){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),fa.subVectors(e,n),r.cross(fa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){fa.subVectors(r,n),Wl.subVectors(i,n),zA.subVectors(e,n);const o=fa.dot(fa),a=fa.dot(Wl),l=fa.dot(zA),u=Wl.dot(Wl),c=Wl.dot(zA),d=o*u-a*a;if(d===0)return s.set(0,0,0),null;const h=1/d,m=(u*l-a*c)*h,g=(o*c-a*l)*h;return s.set(1-m-g,g,m)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,jl)===null?!1:jl.x>=0&&jl.y>=0&&jl.x+jl.y<=1}static getInterpolation(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,jl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,jl.x),l.addScaledVector(o,jl.y),l.addScaledVector(a,jl.z),l)}static getInterpolatedAttribute(e,n,i,r,s,o){return GA.setScalar(0),WA.setScalar(0),jA.setScalar(0),GA.fromBufferAttribute(e,n),WA.fromBufferAttribute(e,i),jA.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(GA,s.x),o.addScaledVector(WA,s.y),o.addScaledVector(jA,s.z),o}static isFrontFacing(e,n,i,r){return fa.subVectors(i,n),Wl.subVectors(e,n),fa.cross(Wl).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fa.subVectors(this.c,this.b),Wl.subVectors(this.a,this.b),fa.cross(Wl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return bs.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,s){return bs.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return bs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;vp.subVectors(r,i),_p.subVectors(s,i),HA.subVectors(e,i);const l=vp.dot(HA),u=_p.dot(HA);if(l<=0&&u<=0)return n.copy(i);VA.subVectors(e,r);const c=vp.dot(VA),d=_p.dot(VA);if(c>=0&&d<=c)return n.copy(r);const h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(i).addScaledVector(vp,o);$A.subVectors(e,s);const m=vp.dot($A),g=_p.dot($A);if(g>=0&&m<=g)return n.copy(s);const v=m*u-l*g;if(v<=0&&u>=0&&g<=0)return a=u/(u-g),n.copy(i).addScaledVector(_p,a);const _=c*g-m*d;if(_<=0&&d-c>=0&&m-g>=0)return U5.subVectors(s,r),a=(d-c)/(d-c+(m-g)),n.copy(r).addScaledVector(U5,a);const y=1/(_+v+h);return o=v*y,a=h*y,n.copy(i).addScaledVector(vp,o).addScaledVector(_p,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const eq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_c={h:0,s:0,l:0},M1={h:0,s:0,l:0};function qA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class xt{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Zs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bn.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=bn.workingColorSpace){return this.r=e,this.g=n,this.b=i,bn.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=bn.workingColorSpace){if(e=q3(e,1),n=Ti(n,0,1),i=Ti(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=qA(o,s,e+1/3),this.g=qA(o,s,e),this.b=qA(o,s,e-1/3)}return bn.toWorkingColorSpace(this,r),this}setStyle(e,n=Zs){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Zs){const i=eq[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sm(e.r),this.g=Sm(e.g),this.b=Sm(e.b),this}copyLinearToSRGB(e){return this.r=RA(e.r),this.g=RA(e.g),this.b=RA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zs){return bn.fromWorkingColorSpace(Mr.copy(this),e),Math.round(Ti(Mr.r*255,0,255))*65536+Math.round(Ti(Mr.g*255,0,255))*256+Math.round(Ti(Mr.b*255,0,255))}getHexString(e=Zs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=bn.workingColorSpace){bn.fromWorkingColorSpace(Mr.copy(this),n);const i=Mr.r,r=Mr.g,s=Mr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=c<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,n=bn.workingColorSpace){return bn.fromWorkingColorSpace(Mr.copy(this),n),e.r=Mr.r,e.g=Mr.g,e.b=Mr.b,e}getStyle(e=Zs){bn.fromWorkingColorSpace(Mr.copy(this),e);const n=Mr.r,i=Mr.g,r=Mr.b;return e!==Zs?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(_c),this.setHSL(_c.h+e,_c.s+n,_c.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(_c),e.getHSL(M1);const i=Oy(_c.h,M1.h,n),r=Oy(_c.s,M1.s,n),s=Oy(_c.l,M1.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Mr=new xt;xt.NAMES=eq;let iTe=0;class Sr extends Ua{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iTe++}),this.uuid=oo(),this.name="",this.type="Material",this.blending=Lh,this.side=Ru,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yb,this.blendDst=vb,this.blendEquation=Rc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xt(0,0,0),this.blendAlpha=0,this.depthFunc=Kh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ah,this.stencilZFail=ah,this.stencilZPass=ah,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Lh&&(i.blending=this.blending),this.side!==Ru&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==yb&&(i.blendSrc=this.blendSrc),this.blendDst!==vb&&(i.blendDst=this.blendDst),this.blendEquation!==Rc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Kh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==WI&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ah&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ah&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ah&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class hd extends Sr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=R_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const iu=rTe();function rTe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ms(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ti(t,-65504,65504),iu.floatView[0]=t;const e=iu.uint32View[0],n=e>>23&511;return iu.baseTable[n]+((e&8388607)>>iu.shiftTable[n])}function iy(t){const e=t>>10;return iu.uint32View[0]=iu.mantissaTable[iu.offsetTable[e]+(t&1023)]+iu.exponentTable[e],iu.floatView[0]}const sTe={toHalfFloat:ms,fromHalfFloat:iy},Li=new J,P1=new je;class Mn{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=$v,this.updateRanges=[],this.gpuType=Cs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)P1.fromBufferAttribute(this,n),P1.applyMatrix3(e),this.setXY(n,P1.x,P1.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Li.fromBufferAttribute(this,n),Li.applyMatrix3(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Li.fromBufferAttribute(this,n),Li.applyMatrix4(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Li.fromBufferAttribute(this,n),Li.applyNormalMatrix(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Li.fromBufferAttribute(this,n),Li.transformDirection(e),this.setXYZ(n,Li.x,Li.y,Li.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Qr(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=tn(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Qr(n,this.array)),n}setX(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Qr(n,this.array)),n}setY(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Qr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Qr(n,this.array)),n}setW(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array),r=tn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array),r=tn(r,this.array),s=tn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==$v&&(e.usage=this.usage),e}}class oTe extends Mn{constructor(e,n,i){super(new Int8Array(e),n,i)}}class aTe extends Mn{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class lTe extends Mn{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class uTe extends Mn{constructor(e,n,i){super(new Int16Array(e),n,i)}}class Y3 extends Mn{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class cTe extends Mn{constructor(e,n,i){super(new Int32Array(e),n,i)}}class K3 extends Mn{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class dTe extends Mn{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=iy(this.array[e*this.itemSize]);return this.normalized&&(n=Qr(n,this.array)),n}setX(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize]=ms(n),this}getY(e){let n=iy(this.array[e*this.itemSize+1]);return this.normalized&&(n=Qr(n,this.array)),n}setY(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize+1]=ms(n),this}getZ(e){let n=iy(this.array[e*this.itemSize+2]);return this.normalized&&(n=Qr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize+2]=ms(n),this}getW(e){let n=iy(this.array[e*this.itemSize+3]);return this.normalized&&(n=Qr(n,this.array)),n}setW(e,n){return this.normalized&&(n=tn(n,this.array)),this.array[e*this.itemSize+3]=ms(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array)),this.array[e+0]=ms(n),this.array[e+1]=ms(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array),r=tn(r,this.array)),this.array[e+0]=ms(n),this.array[e+1]=ms(i),this.array[e+2]=ms(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array),r=tn(r,this.array),s=tn(s,this.array)),this.array[e+0]=ms(n),this.array[e+1]=ms(i),this.array[e+2]=ms(r),this.array[e+3]=ms(s),this}}class Ct extends Mn{constructor(e,n,i){super(new Float32Array(e),n,i)}}let hTe=0;const Io=new zt,XA=new _n,xp=new J,Ks=new is,D0=new is,tr=new J;class Zt extends Ua{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hTe++}),this.uuid=oo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Kj(e)?K3:Y3)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new en().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Io.makeRotationFromQuaternion(e),this.applyMatrix4(Io),this}rotateX(e){return Io.makeRotationX(e),this.applyMatrix4(Io),this}rotateY(e){return Io.makeRotationY(e),this.applyMatrix4(Io),this}rotateZ(e){return Io.makeRotationZ(e),this.applyMatrix4(Io),this}translate(e,n,i){return Io.makeTranslation(e,n,i),this.applyMatrix4(Io),this}scale(e,n,i){return Io.makeScale(e,n,i),this.applyMatrix4(Io),this}lookAt(e){return XA.lookAt(e),XA.updateMatrix(),this.applyMatrix4(XA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xp).negate(),this.translate(xp.x,xp.y,xp.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new is);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Ks.setFromBufferAttribute(s),this.morphTargetsRelative?(tr.addVectors(this.boundingBox.min,Ks.min),this.boundingBox.expandByPoint(tr),tr.addVectors(this.boundingBox.max,Ks.max),this.boundingBox.expandByPoint(tr)):(this.boundingBox.expandByPoint(Ks.min),this.boundingBox.expandByPoint(Ks.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Or);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const i=this.boundingSphere.center;if(Ks.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];D0.setFromBufferAttribute(a),this.morphTargetsRelative?(tr.addVectors(Ks.min,D0.min),Ks.expandByPoint(tr),tr.addVectors(Ks.max,D0.max),Ks.expandByPoint(tr)):(Ks.expandByPoint(D0.min),Ks.expandByPoint(D0.max))}Ks.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)tr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(tr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)tr.fromBufferAttribute(a,u),l&&(xp.fromBufferAttribute(e,u),tr.add(xp)),r=Math.max(r,i.distanceToSquared(tr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let O=0;O<i.count;O++)a[O]=new J,l[O]=new J;const u=new J,c=new J,d=new J,h=new je,m=new je,g=new je,v=new J,_=new J;function y(O,H,E){u.fromBufferAttribute(i,O),c.fromBufferAttribute(i,H),d.fromBufferAttribute(i,E),h.fromBufferAttribute(s,O),m.fromBufferAttribute(s,H),g.fromBufferAttribute(s,E),c.sub(u),d.sub(u),m.sub(h),g.sub(h);const k=1/(m.x*g.y-g.x*m.y);isFinite(k)&&(v.copy(c).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(k),_.copy(d).multiplyScalar(m.x).addScaledVector(c,-g.x).multiplyScalar(k),a[O].add(v),a[H].add(v),a[E].add(v),l[O].add(_),l[H].add(_),l[E].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let O=0,H=S.length;O<H;++O){const E=S[O],k=E.start,W=E.count;for(let G=k,Y=k+W;G<Y;G+=3)y(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const x=new J,w=new J,P=new J,A=new J;function D(O){P.fromBufferAttribute(r,O),A.copy(P);const H=a[O];x.copy(H),x.sub(P.multiplyScalar(P.dot(H))).normalize(),w.crossVectors(A,H);const k=w.dot(l[O])<0?-1:1;o.setXYZW(O,x.x,x.y,x.z,k)}for(let O=0,H=S.length;O<H;++O){const E=S[O],k=E.start,W=E.count;for(let G=k,Y=k+W;G<Y;G+=3)D(e.getX(G+0)),D(e.getX(G+1)),D(e.getX(G+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Mn(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,m=i.count;h<m;h++)i.setXYZ(h,0,0,0);const r=new J,s=new J,o=new J,a=new J,l=new J,u=new J,c=new J,d=new J;if(e)for(let h=0,m=e.count;h<m;h+=3){const g=e.getX(h+0),v=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(n,g),s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,_),c.subVectors(o,s),d.subVectors(r,s),c.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),u.fromBufferAttribute(i,_),a.add(c),l.add(c),u.add(c),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(_,u.x,u.y,u.z)}else for(let h=0,m=n.count;h<m;h+=3)r.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),c.subVectors(o,s),d.subVectors(r,s),c.cross(d),i.setXYZ(h+0,c.x,c.y,c.z),i.setXYZ(h+1,c.x,c.y,c.z),i.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)tr.fromBufferAttribute(e,n),tr.normalize(),e.setXYZ(n,tr.x,tr.y,tr.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,d=a.normalized,h=new u.constructor(l.length*c);let m=0,g=0;for(let v=0,_=l.length;v<_;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*c;for(let y=0;y<c;y++)h[g++]=u[m++]}return new Mn(h,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Zt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,d=u.length;c<d;c++){const h=u[c],m=e(h,i);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,h=u.length;d<h;d++){const m=u[d];c.push(m.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(n))}const s=e.morphAttributes;for(const u in s){const c=[],d=s[u];for(let h=0,m=d.length;h<m;h++)c.push(d[h].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const F5=new zt,Gd=new df,I1=new Or,B5=new J,R1=new J,D1=new J,k1=new J,YA=new J,L1=new J,z5=new J,N1=new J;class Bi extends _n{constructor(e=new Zt,n=new hd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){L1.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],d=s[l];c!==0&&(YA.fromBufferAttribute(d,e),o?L1.addScaledVector(YA,c):L1.addScaledVector(YA.sub(n),c))}n.add(L1)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),I1.copy(i.boundingSphere),I1.applyMatrix4(s),Gd.copy(e.ray).recast(e.near),!(I1.containsPoint(Gd.origin)===!1&&(Gd.intersectSphere(I1,B5)===null||Gd.origin.distanceToSquared(B5)>(e.far-e.near)**2))&&(F5.copy(s).invert(),Gd.copy(e.ray).applyMatrix4(F5),!(i.boundingBox!==null&&Gd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Gd)))}_computeIntersections(e,n,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,d=s.attributes.normal,h=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=h.length;g<v;g++){const _=h[g],y=o[_.materialIndex],S=Math.max(_.start,m.start),x=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let w=S,P=x;w<P;w+=3){const A=a.getX(w),D=a.getX(w+1),O=a.getX(w+2);r=O1(this,y,e,i,u,c,d,A,D,O),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,n.push(r))}}else{const g=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);for(let _=g,y=v;_<y;_+=3){const S=a.getX(_),x=a.getX(_+1),w=a.getX(_+2);r=O1(this,o,e,i,u,c,d,S,x,w),r&&(r.faceIndex=Math.floor(_/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=h.length;g<v;g++){const _=h[g],y=o[_.materialIndex],S=Math.max(_.start,m.start),x=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let w=S,P=x;w<P;w+=3){const A=w,D=w+1,O=w+2;r=O1(this,y,e,i,u,c,d,A,D,O),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,n.push(r))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let _=g,y=v;_<y;_+=3){const S=_,x=_+1,w=_+2;r=O1(this,o,e,i,u,c,d,S,x,w),r&&(r.faceIndex=Math.floor(_/3),n.push(r))}}}}function fTe(t,e,n,i,r,s,o,a){let l;if(e.side===ns?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ru,a),l===null)return null;N1.copy(a),N1.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(N1);return u<n.near||u>n.far?null:{distance:u,point:N1.clone(),object:t}}function O1(t,e,n,i,r,s,o,a,l,u){t.getVertexPosition(a,R1),t.getVertexPosition(l,D1),t.getVertexPosition(u,k1);const c=fTe(t,e,n,i,R1,D1,k1,z5);if(c){const d=new J;bs.getBarycoord(z5,R1,D1,k1,d),r&&(c.uv=bs.getInterpolatedAttribute(r,a,l,u,d,new je)),s&&(c.uv1=bs.getInterpolatedAttribute(s,a,l,u,d,new je)),o&&(c.normal=bs.getInterpolatedAttribute(o,a,l,u,d,new J),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new J,materialIndex:0};bs.getNormal(R1,D1,k1,h.normal),c.face=h,c.barycoord=d}return c}class hf extends Zt{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],d=[];let h=0,m=0;g("z","y","x",-1,-1,i,n,e,o,s,0),g("z","y","x",1,-1,i,n,-e,o,s,1),g("x","z","y",1,1,e,i,n,r,o,2),g("x","z","y",1,-1,e,i,-n,r,o,3),g("x","y","z",1,-1,e,n,i,r,s,4),g("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(d,2));function g(v,_,y,S,x,w,P,A,D,O,H){const E=w/D,k=P/O,W=w/2,G=P/2,Y=A/2,ie=D+1,Q=O+1;let oe=0,z=0;const ee=new J;for(let te=0;te<Q;te++){const ce=te*k-G;for(let Te=0;Te<ie;Te++){const Ue=Te*E-W;ee[v]=Ue*S,ee[_]=ce*x,ee[y]=Y,u.push(ee.x,ee.y,ee.z),ee[v]=0,ee[_]=0,ee[y]=A>0?1:-1,c.push(ee.x,ee.y,ee.z),d.push(Te/D),d.push(1-te/O),oe+=1}}for(let te=0;te<O;te++)for(let ce=0;ce<D;ce++){const Te=h+ce+ie*te,Ue=h+ce+ie*(te+1),he=h+(ce+1)+ie*(te+1),xe=h+(ce+1)+ie*te;l.push(Te,Ue,xe),l.push(Ue,he,xe),z+=6}a.addGroup(m,z,H),m+=z,h+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ig(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function jr(t){const e={};for(let n=0;n<t.length;n++){const i=ig(t[n]);for(const r in i)e[r]=i[r]}return e}function pTe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function tq(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:bn.workingColorSpace}const nq={clone:ig,merge:jr};var mTe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gTe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Da extends Sr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mTe,this.fragmentShader=gTe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ig(e.uniforms),this.uniformsGroups=pTe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class L_ extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt,this.coordinateSystem=ll}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const xc=new J,H5=new je,V5=new je;class oi extends L_{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=ng*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Oh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ng*2*Math.atan(Math.tan(Oh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){xc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(xc.x,xc.y).multiplyScalar(-e/xc.z),xc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(xc.x,xc.y).multiplyScalar(-e/xc.z)}getViewSize(e,n){return this.getViewBounds(e,H5,V5),n.subVectors(V5,H5)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Oh*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Sp=-90,Tp=1;class iq extends _n{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new oi(Sp,Tp,e,n);r.layers=this.layers,this.add(r);const s=new oi(Sp,Tp,e,n);s.layers=this.layers,this.add(s);const o=new oi(Sp,Tp,e,n);o.layers=this.layers,this.add(o);const a=new oi(Sp,Tp,e,n);a.layers=this.layers,this.add(a);const l=new oi(Sp,Tp,e,n);l.layers=this.layers,this.add(l);const u=new oi(Sp,Tp,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,s,o,a,l]=n;for(const u of n)this.remove(u);if(e===ll)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Gv)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,s),e.setRenderTarget(i,1,r),e.render(n,o),e.setRenderTarget(i,2,r),e.render(n,a),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,u),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(n,c),e.setRenderTarget(d,h,m),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class N_ extends hi{constructor(e,n,i,r,s,o,a,l,u,c){e=e!==void 0?e:[],n=n!==void 0?n:Du,super(e,n,i,r,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class rq extends Ra{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new N_(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Fi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new hf(5,5,5),s=new Da({name:"CubemapFromEquirect",uniforms:ig(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ns,blending:gu});s.uniforms.tEquirect.value=n;const o=new Bi(r,s),a=n.minFilter;return n.minFilter===al&&(n.minFilter=Fi),new iq(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const KA=new J,yTe=new J,vTe=new en;class Zl{constructor(e=new J(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=KA.subVectors(i,n).cross(yTe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(KA),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||vTe.getNormalMatrix(e),r=this.coplanarPoint(KA).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Wd=new Or,U1=new J;class O_{constructor(e=new Zl,n=new Zl,i=new Zl,r=new Zl,s=new Zl,o=new Zl){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=ll){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],d=r[6],h=r[7],m=r[8],g=r[9],v=r[10],_=r[11],y=r[12],S=r[13],x=r[14],w=r[15];if(i[0].setComponents(l-s,h-u,_-m,w-y).normalize(),i[1].setComponents(l+s,h+u,_+m,w+y).normalize(),i[2].setComponents(l+o,h+c,_+g,w+S).normalize(),i[3].setComponents(l-o,h-c,_-g,w-S).normalize(),i[4].setComponents(l-a,h-d,_-v,w-x).normalize(),n===ll)i[5].setComponents(l+a,h+d,_+v,w+x).normalize();else if(n===Gv)i[5].setComponents(a,d,v,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Wd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Wd.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wd)}intersectsSprite(e){return Wd.center.set(0,0,0),Wd.radius=.7071067811865476,Wd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wd)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(U1.x=r.normal.x>0?e.max.x:e.min.x,U1.y=r.normal.y>0?e.max.y:e.min.y,U1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(U1)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function sq(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function _Te(t){const e=new WeakMap;function n(a,l){const u=a.array,c=a.usage,d=u.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,u,c),a.onUploadCallback();let m;if(u instanceof Float32Array)m=t.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=t.SHORT;else if(u instanceof Uint32Array)m=t.UNSIGNED_INT;else if(u instanceof Int32Array)m=t.INT;else if(u instanceof Int8Array)m=t.BYTE;else if(u instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,u){const c=l.array,d=l.updateRanges;if(t.bindBuffer(u,a),d.length===0)t.bufferSubData(u,0,c);else{d.sort((m,g)=>m.start-g.start);let h=0;for(let m=1;m<d.length;m++){const g=d[h],v=d[m];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++h,d[h]=v)}d.length=h+1;for(let m=0,g=d.length;m<g;m++){const v=d[m];t.bufferSubData(u,v.start*c.BYTES_PER_ELEMENT,c,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,n(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}class wg extends Zt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),u=a+1,c=l+1,d=e/a,h=n/l,m=[],g=[],v=[],_=[];for(let y=0;y<c;y++){const S=y*h-o;for(let x=0;x<u;x++){const w=x*d-s;g.push(w,-S,0),v.push(0,0,1),_.push(x/a),_.push(1-y/l)}}for(let y=0;y<l;y++)for(let S=0;S<a;S++){const x=S+u*y,w=S+u*(y+1),P=S+1+u*(y+1),A=S+1+u*y;m.push(x,w,A),m.push(w,P,A)}this.setIndex(m),this.setAttribute("position",new Ct(g,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wg(e.width,e.height,e.widthSegments,e.heightSegments)}}var xTe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,STe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,TTe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bTe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wTe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ETe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,CTe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ATe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,MTe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,PTe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ITe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,RTe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,DTe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kTe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,LTe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NTe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,OTe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,UTe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FTe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,BTe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zTe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,HTe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,VTe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,$Te=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,GTe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,WTe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,jTe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qTe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,XTe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,YTe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KTe="gl_FragColor = linearToOutputTexel( gl_FragColor );",QTe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ZTe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,JTe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ebe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tbe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nbe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ibe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rbe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sbe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,obe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,abe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lbe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ube=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,cbe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dbe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hbe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fbe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pbe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mbe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gbe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ybe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,vbe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_be=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xbe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Sbe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Tbe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bbe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wbe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ebe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Cbe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Abe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Mbe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Pbe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ibe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Rbe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Dbe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,kbe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Lbe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nbe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Obe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Ube=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Fbe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Bbe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zbe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hbe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Vbe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,$be=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Gbe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Wbe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jbe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qbe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Xbe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ybe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Kbe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Qbe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Zbe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Jbe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,e2e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,t2e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,n2e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,i2e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,r2e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,s2e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,o2e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,a2e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,l2e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,u2e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,c2e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,d2e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,h2e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,f2e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,p2e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,m2e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,g2e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,y2e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,v2e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _2e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,x2e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T2e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,w2e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E2e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,C2e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,A2e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,M2e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,P2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,I2e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R2e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,D2e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,k2e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,L2e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N2e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O2e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U2e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,F2e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B2e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,z2e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,H2e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V2e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$2e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,G2e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W2e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,j2e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q2e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,X2e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Y2e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K2e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Q2e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Z2e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:xTe,alphahash_pars_fragment:STe,alphamap_fragment:TTe,alphamap_pars_fragment:bTe,alphatest_fragment:wTe,alphatest_pars_fragment:ETe,aomap_fragment:CTe,aomap_pars_fragment:ATe,batching_pars_vertex:MTe,batching_vertex:PTe,begin_vertex:ITe,beginnormal_vertex:RTe,bsdfs:DTe,iridescence_fragment:kTe,bumpmap_pars_fragment:LTe,clipping_planes_fragment:NTe,clipping_planes_pars_fragment:OTe,clipping_planes_pars_vertex:UTe,clipping_planes_vertex:FTe,color_fragment:BTe,color_pars_fragment:zTe,color_pars_vertex:HTe,color_vertex:VTe,common:$Te,cube_uv_reflection_fragment:GTe,defaultnormal_vertex:WTe,displacementmap_pars_vertex:jTe,displacementmap_vertex:qTe,emissivemap_fragment:XTe,emissivemap_pars_fragment:YTe,colorspace_fragment:KTe,colorspace_pars_fragment:QTe,envmap_fragment:ZTe,envmap_common_pars_fragment:JTe,envmap_pars_fragment:ebe,envmap_pars_vertex:tbe,envmap_physical_pars_fragment:hbe,envmap_vertex:nbe,fog_vertex:ibe,fog_pars_vertex:rbe,fog_fragment:sbe,fog_pars_fragment:obe,gradientmap_pars_fragment:abe,lightmap_pars_fragment:lbe,lights_lambert_fragment:ube,lights_lambert_pars_fragment:cbe,lights_pars_begin:dbe,lights_toon_fragment:fbe,lights_toon_pars_fragment:pbe,lights_phong_fragment:mbe,lights_phong_pars_fragment:gbe,lights_physical_fragment:ybe,lights_physical_pars_fragment:vbe,lights_fragment_begin:_be,lights_fragment_maps:xbe,lights_fragment_end:Sbe,logdepthbuf_fragment:Tbe,logdepthbuf_pars_fragment:bbe,logdepthbuf_pars_vertex:wbe,logdepthbuf_vertex:Ebe,map_fragment:Cbe,map_pars_fragment:Abe,map_particle_fragment:Mbe,map_particle_pars_fragment:Pbe,metalnessmap_fragment:Ibe,metalnessmap_pars_fragment:Rbe,morphinstance_vertex:Dbe,morphcolor_vertex:kbe,morphnormal_vertex:Lbe,morphtarget_pars_vertex:Nbe,morphtarget_vertex:Obe,normal_fragment_begin:Ube,normal_fragment_maps:Fbe,normal_pars_fragment:Bbe,normal_pars_vertex:zbe,normal_vertex:Hbe,normalmap_pars_fragment:Vbe,clearcoat_normal_fragment_begin:$be,clearcoat_normal_fragment_maps:Gbe,clearcoat_pars_fragment:Wbe,iridescence_pars_fragment:jbe,opaque_fragment:qbe,packing:Xbe,premultiplied_alpha_fragment:Ybe,project_vertex:Kbe,dithering_fragment:Qbe,dithering_pars_fragment:Zbe,roughnessmap_fragment:Jbe,roughnessmap_pars_fragment:e2e,shadowmap_pars_fragment:t2e,shadowmap_pars_vertex:n2e,shadowmap_vertex:i2e,shadowmask_pars_fragment:r2e,skinbase_vertex:s2e,skinning_pars_vertex:o2e,skinning_vertex:a2e,skinnormal_vertex:l2e,specularmap_fragment:u2e,specularmap_pars_fragment:c2e,tonemapping_fragment:d2e,tonemapping_pars_fragment:h2e,transmission_fragment:f2e,transmission_pars_fragment:p2e,uv_pars_fragment:m2e,uv_pars_vertex:g2e,uv_vertex:y2e,worldpos_vertex:v2e,background_vert:_2e,background_frag:x2e,backgroundCube_vert:S2e,backgroundCube_frag:T2e,cube_vert:b2e,cube_frag:w2e,depth_vert:E2e,depth_frag:C2e,distanceRGBA_vert:A2e,distanceRGBA_frag:M2e,equirect_vert:P2e,equirect_frag:I2e,linedashed_vert:R2e,linedashed_frag:D2e,meshbasic_vert:k2e,meshbasic_frag:L2e,meshlambert_vert:N2e,meshlambert_frag:O2e,meshmatcap_vert:U2e,meshmatcap_frag:F2e,meshnormal_vert:B2e,meshnormal_frag:z2e,meshphong_vert:H2e,meshphong_frag:V2e,meshphysical_vert:$2e,meshphysical_frag:G2e,meshtoon_vert:W2e,meshtoon_frag:j2e,points_vert:q2e,points_frag:X2e,shadow_vert:Y2e,shadow_frag:K2e,sprite_vert:Q2e,sprite_frag:Z2e},ht={common:{diffuse:{value:new xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new en},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new en}},envmap:{envMap:{value:null},envMapRotation:{value:new en},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new en}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new en}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new en},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new en},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new en},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new en}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new en}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new en}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0},uvTransform:{value:new en}},sprite:{diffuse:{value:new xt(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new en},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0}}},xa={basic:{uniforms:jr([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:jr([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new xt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:jr([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new xt(0)},specular:{value:new xt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:jr([ht.common,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.roughnessmap,ht.metalnessmap,ht.fog,ht.lights,{emissive:{value:new xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:jr([ht.common,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.gradientmap,ht.fog,ht.lights,{emissive:{value:new xt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:jr([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:jr([ht.points,ht.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:jr([ht.common,ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:jr([ht.common,ht.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:jr([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:jr([ht.sprite,ht.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new en},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new en}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:jr([ht.common,ht.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:jr([ht.lights,ht.fog,{color:{value:new xt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};xa.physical={uniforms:jr([xa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new en},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new en},clearcoatNormalScale:{value:new je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new en},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new en},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new en},sheen:{value:0},sheenColor:{value:new xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new en},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new en},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new en},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new en},attenuationDistance:{value:0},attenuationColor:{value:new xt(0)},specularColor:{value:new xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new en},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new en},anisotropyVector:{value:new je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new en}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const F1={r:0,b:0,g:0},jd=new ho,J2e=new zt;function ewe(t,e,n,i,r,s,o){const a=new xt(0);let l=s===!0?0:1,u,c,d=null,h=0,m=null;function g(S){let x=S.isScene===!0?S.background:null;return x&&x.isTexture&&(x=(S.backgroundBlurriness>0?n:e).get(x)),x}function v(S){let x=!1;const w=g(S);w===null?y(a,l):w&&w.isColor&&(y(w,1),x=!0);const P=t.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(t.autoClear||x)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function _(S,x){const w=g(x);w&&(w.isCubeTexture||w.mapping===Tg)?(c===void 0&&(c=new Bi(new hf(1,1,1),new Da({name:"BackgroundCubeMaterial",uniforms:ig(xa.backgroundCube.uniforms),vertexShader:xa.backgroundCube.vertexShader,fragmentShader:xa.backgroundCube.fragmentShader,side:ns,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(P,A,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),jd.copy(x.backgroundRotation),jd.x*=-1,jd.y*=-1,jd.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(jd.y*=-1,jd.z*=-1),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(J2e.makeRotationFromEuler(jd)),c.material.toneMapped=bn.getTransfer(w.colorSpace)!==Vn,(d!==w||h!==w.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=w,h=w.version,m=t.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Bi(new wg(2,2),new Da({name:"BackgroundMaterial",uniforms:ig(xa.background.uniforms),vertexShader:xa.background.vertexShader,fragmentShader:xa.background.fragmentShader,side:Ru,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.toneMapped=bn.getTransfer(w.colorSpace)!==Vn,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||h!==w.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=w,h=w.version,m=t.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function y(S,x){S.getRGB(F1,tq(t)),i.buffers.color.setClear(F1.r,F1.g,F1.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(S,x=1){a.set(S),l=x,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,y(a,l)},render:v,addToRenderList:_}}function twe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,o=!1;function a(E,k,W,G,Y){let ie=!1;const Q=d(G,W,k);s!==Q&&(s=Q,u(s.object)),ie=m(E,G,W,Y),ie&&g(E,G,W,Y),Y!==null&&e.update(Y,t.ELEMENT_ARRAY_BUFFER),(ie||o)&&(o=!1,w(E,k,W,G),Y!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return t.createVertexArray()}function u(E){return t.bindVertexArray(E)}function c(E){return t.deleteVertexArray(E)}function d(E,k,W){const G=W.wireframe===!0;let Y=i[E.id];Y===void 0&&(Y={},i[E.id]=Y);let ie=Y[k.id];ie===void 0&&(ie={},Y[k.id]=ie);let Q=ie[G];return Q===void 0&&(Q=h(l()),ie[G]=Q),Q}function h(E){const k=[],W=[],G=[];for(let Y=0;Y<n;Y++)k[Y]=0,W[Y]=0,G[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:W,attributeDivisors:G,object:E,attributes:{},index:null}}function m(E,k,W,G){const Y=s.attributes,ie=k.attributes;let Q=0;const oe=W.getAttributes();for(const z in oe)if(oe[z].location>=0){const te=Y[z];let ce=ie[z];if(ce===void 0&&(z==="instanceMatrix"&&E.instanceMatrix&&(ce=E.instanceMatrix),z==="instanceColor"&&E.instanceColor&&(ce=E.instanceColor)),te===void 0||te.attribute!==ce||ce&&te.data!==ce.data)return!0;Q++}return s.attributesNum!==Q||s.index!==G}function g(E,k,W,G){const Y={},ie=k.attributes;let Q=0;const oe=W.getAttributes();for(const z in oe)if(oe[z].location>=0){let te=ie[z];te===void 0&&(z==="instanceMatrix"&&E.instanceMatrix&&(te=E.instanceMatrix),z==="instanceColor"&&E.instanceColor&&(te=E.instanceColor));const ce={};ce.attribute=te,te&&te.data&&(ce.data=te.data),Y[z]=ce,Q++}s.attributes=Y,s.attributesNum=Q,s.index=G}function v(){const E=s.newAttributes;for(let k=0,W=E.length;k<W;k++)E[k]=0}function _(E){y(E,0)}function y(E,k){const W=s.newAttributes,G=s.enabledAttributes,Y=s.attributeDivisors;W[E]=1,G[E]===0&&(t.enableVertexAttribArray(E),G[E]=1),Y[E]!==k&&(t.vertexAttribDivisor(E,k),Y[E]=k)}function S(){const E=s.newAttributes,k=s.enabledAttributes;for(let W=0,G=k.length;W<G;W++)k[W]!==E[W]&&(t.disableVertexAttribArray(W),k[W]=0)}function x(E,k,W,G,Y,ie,Q){Q===!0?t.vertexAttribIPointer(E,k,W,Y,ie):t.vertexAttribPointer(E,k,W,G,Y,ie)}function w(E,k,W,G){v();const Y=G.attributes,ie=W.getAttributes(),Q=k.defaultAttributeValues;for(const oe in ie){const z=ie[oe];if(z.location>=0){let ee=Y[oe];if(ee===void 0&&(oe==="instanceMatrix"&&E.instanceMatrix&&(ee=E.instanceMatrix),oe==="instanceColor"&&E.instanceColor&&(ee=E.instanceColor)),ee!==void 0){const te=ee.normalized,ce=ee.itemSize,Te=e.get(ee);if(Te===void 0)continue;const Ue=Te.buffer,he=Te.type,xe=Te.bytesPerElement,Fe=he===t.INT||he===t.UNSIGNED_INT||ee.gpuType===qw;if(ee.isInterleavedBufferAttribute){const He=ee.data,ot=He.stride,Ae=ee.offset;if(He.isInstancedInterleavedBuffer){for(let Ge=0;Ge<z.locationSize;Ge++)y(z.location+Ge,He.meshPerAttribute);E.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let Ge=0;Ge<z.locationSize;Ge++)_(z.location+Ge);t.bindBuffer(t.ARRAY_BUFFER,Ue);for(let Ge=0;Ge<z.locationSize;Ge++)x(z.location+Ge,ce/z.locationSize,he,te,ot*xe,(Ae+ce/z.locationSize*Ge)*xe,Fe)}else{if(ee.isInstancedBufferAttribute){for(let He=0;He<z.locationSize;He++)y(z.location+He,ee.meshPerAttribute);E.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let He=0;He<z.locationSize;He++)_(z.location+He);t.bindBuffer(t.ARRAY_BUFFER,Ue);for(let He=0;He<z.locationSize;He++)x(z.location+He,ce/z.locationSize,he,te,ce*xe,ce/z.locationSize*He*xe,Fe)}}else if(Q!==void 0){const te=Q[oe];if(te!==void 0)switch(te.length){case 2:t.vertexAttrib2fv(z.location,te);break;case 3:t.vertexAttrib3fv(z.location,te);break;case 4:t.vertexAttrib4fv(z.location,te);break;default:t.vertexAttrib1fv(z.location,te)}}}}S()}function P(){O();for(const E in i){const k=i[E];for(const W in k){const G=k[W];for(const Y in G)c(G[Y].object),delete G[Y];delete k[W]}delete i[E]}}function A(E){if(i[E.id]===void 0)return;const k=i[E.id];for(const W in k){const G=k[W];for(const Y in G)c(G[Y].object),delete G[Y];delete k[W]}delete i[E.id]}function D(E){for(const k in i){const W=i[k];if(W[E.id]===void 0)continue;const G=W[E.id];for(const Y in G)c(G[Y].object),delete G[Y];delete W[E.id]}}function O(){H(),o=!0,s!==r&&(s=r,u(s.object))}function H(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:O,resetDefaultState:H,dispose:P,releaseStatesOfGeometry:A,releaseStatesOfProgram:D,initAttributes:v,enableAttribute:_,disableUnusedAttributes:S}}function nwe(t,e,n){let i;function r(u){i=u}function s(u,c){t.drawArrays(i,u,c),n.update(c,i,1)}function o(u,c,d){d!==0&&(t.drawArraysInstanced(i,u,c,d),n.update(c,i,d))}function a(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,c,0,d);let m=0;for(let g=0;g<d;g++)m+=c[g];n.update(m,i,1)}function l(u,c,d,h){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<u.length;g++)o(u[g],c[g],h[g]);else{m.multiDrawArraysInstancedWEBGL(i,u,0,c,0,h,0,d);let g=0;for(let v=0;v<d;v++)g+=c[v];for(let v=0;v<h.length;v++)n.update(g,i,h[v])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function iwe(t,e,n,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(D){return!(D!==Dr&&i.convert(D)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){const O=D===bg&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==Ia&&i.convert(D)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==Cs&&!O)}function l(D){if(D==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(h===!0){const D=e.get("EXT_clip_control");D.clipControlEXT(D.LOWER_LEFT_EXT,D.ZERO_TO_ONE_EXT)}const m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),_=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),x=t.getParameter(t.MAX_VARYING_VECTORS),w=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),P=g>0,A=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:m,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:_,maxAttributes:y,maxVertexUniforms:S,maxVaryings:x,maxFragmentUniforms:w,vertexTextures:P,maxSamples:A}}function rwe(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Zl,a=new en,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const m=d.length!==0||h||i!==0||r;return r=h,i=d.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){n=c(d,h,0)},this.setState=function(d,h,m){const g=d.clippingPlanes,v=d.clipIntersection,_=d.clipShadows,y=t.get(d);if(!r||g===null||g.length===0||s&&!_)s?c(null):u();else{const S=s?0:i,x=S*4;let w=y.clippingState||null;l.value=w,w=c(g,h,x,m);for(let P=0;P!==x;++P)w[P]=n[P];y.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(d,h,m,g){const v=d!==null?d.length:0;let _=null;if(v!==0){if(_=l.value,g!==!0||_===null){const y=m+v*4,S=h.matrixWorldInverse;a.getNormalMatrix(S),(_===null||_.length<y)&&(_=new Float32Array(y));for(let x=0,w=m;x!==v;++x,w+=4)o.copy(d[x]).applyMatrix4(S,a),o.normal.toArray(_,w),_[w+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function swe(t){let e=new WeakMap;function n(o,a){return a===Lv?o.mapping=Du:a===Nv&&(o.mapping=td),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Lv||a===Nv)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new rq(l.height);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",r),n(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ba extends L_{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Jp=4,$5=[.125,.215,.35,.446,.526,.582],ch=20,QA=new ba,G5=new xt;let ZA=null,JA=0,eM=0,tM=!1;const lh=(1+Math.sqrt(5))/2,bp=1/lh,W5=[new J(-lh,bp,0),new J(lh,bp,0),new J(-bp,0,lh),new J(bp,0,lh),new J(0,lh,-bp),new J(0,lh,bp),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)];class qI{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){ZA=this._renderer.getRenderTarget(),JA=this._renderer.getActiveCubeFace(),eM=this._renderer.getActiveMipmapLevel(),tM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=X5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=q5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ZA,JA,eM),this._renderer.xr.enabled=tM,e.scissorTest=!1,B1(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Du||e.mapping===td?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ZA=this._renderer.getRenderTarget(),JA=this._renderer.getActiveCubeFace(),eM=this._renderer.getActiveMipmapLevel(),tM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:bg,format:Dr,colorSpace:Fu,depthBuffer:!1},r=j5(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=j5(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=owe(s)),this._blurMaterial=awe(s,e,n)}return r}_compileMaterial(e){const n=new Bi(this._lodPlanes[0],e);this._renderer.compile(n,QA)}_sceneToCubeUV(e,n,i,r){const a=new oi(90,1,n,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,h=c.toneMapping;c.getClearColor(G5),c.toneMapping=yl,c.autoClear=!1;const m=new hd({name:"PMREM.Background",side:ns,depthWrite:!1,depthTest:!1}),g=new Bi(new hf,m);let v=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,v=!0):(m.color.copy(G5),v=!0);for(let y=0;y<6;y++){const S=y%3;S===0?(a.up.set(0,l[y],0),a.lookAt(u[y],0,0)):S===1?(a.up.set(0,0,l[y]),a.lookAt(0,u[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,u[y]));const x=this._cubeSize;B1(r,S*x,y>2?x:0,x,x),c.setRenderTarget(r),v&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=h,c.autoClear=d,e.background=_}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===Du||e.mapping===td;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=X5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=q5());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Bi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;B1(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,QA)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=W5[(r-s-1)%W5.length];this._blur(e,s-1,s,o,a)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Bi(this._lodPlanes[r],u),h=u.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*ch-1),v=s/g,_=isFinite(s)?1+Math.floor(c*v):ch;_>ch&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${ch}`);const y=[];let S=0;for(let D=0;D<ch;++D){const O=D/v,H=Math.exp(-O*O/2);y.push(H),D===0?S+=H:D<_&&(S+=2*H)}for(let D=0;D<y.length;D++)y[D]=y[D]/S;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=y,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:x}=this;h.dTheta.value=g,h.mipInt.value=x-i;const w=this._sizeLods[r],P=3*w*(r>x-Jp?r-x+Jp:0),A=4*(this._cubeSize-w);B1(n,P,A,3*w,2*w),l.setRenderTarget(n),l.render(d,QA)}}function owe(t){const e=[],n=[],i=[];let r=t;const s=t-Jp+1+$5.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Jp?l=$5[o-t+Jp-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],m=6,g=6,v=3,_=2,y=1,S=new Float32Array(v*g*m),x=new Float32Array(_*g*m),w=new Float32Array(y*g*m);for(let A=0;A<m;A++){const D=A%3*2/3-1,O=A>2?0:-1,H=[D,O,0,D+2/3,O,0,D+2/3,O+1,0,D,O,0,D+2/3,O+1,0,D,O+1,0];S.set(H,v*g*A),x.set(h,_*g*A);const E=[A,A,A,A,A,A];w.set(E,y*g*A)}const P=new Zt;P.setAttribute("position",new Mn(S,v)),P.setAttribute("uv",new Mn(x,_)),P.setAttribute("faceIndex",new Mn(w,y)),e.push(P),r>Jp&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function j5(t,e,n){const i=new Ra(t,e,n);return i.texture.mapping=Tg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function B1(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function awe(t,e,n){const i=new Float32Array(ch),r=new J(0,1,0);return new Da({name:"SphericalGaussianBlur",defines:{n:ch,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Q3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gu,depthTest:!1,depthWrite:!1})}function q5(){return new Da({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Q3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gu,depthTest:!1,depthWrite:!1})}function X5(){return new Da({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Q3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gu,depthTest:!1,depthWrite:!1})}function Q3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lwe(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Lv||l===Nv,c=l===Du||l===td;if(u||c){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return n===null&&(n=new qI(t)),d=u?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return u&&m&&m.height>0||c&&m&&r(m)?(n===null&&(n=new qI(t)),d=u?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function uwe(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&HS("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function cwe(t,e,n,i){const r={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);for(const g in h.morphAttributes){const v=h.morphAttributes[g];for(let _=0,y=v.length;_<y;_++)e.remove(v[_])}h.removeEventListener("dispose",o),delete r[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const g in h)e.update(h[g],t.ARRAY_BUFFER);const m=d.morphAttributes;for(const g in m){const v=m[g];for(let _=0,y=v.length;_<y;_++)e.update(v[_],t.ARRAY_BUFFER)}}function u(d){const h=[],m=d.index,g=d.attributes.position;let v=0;if(m!==null){const S=m.array;v=m.version;for(let x=0,w=S.length;x<w;x+=3){const P=S[x+0],A=S[x+1],D=S[x+2];h.push(P,A,A,D,D,P)}}else if(g!==void 0){const S=g.array;v=g.version;for(let x=0,w=S.length/3-1;x<w;x+=3){const P=x+0,A=x+1,D=x+2;h.push(P,A,A,D,D,P)}}else return;const _=new(Kj(h)?K3:Y3)(h,1);_.version=v;const y=s.get(d);y&&e.remove(y),s.set(d,_)}function c(d){const h=s.get(d);if(h){const m=d.index;m!==null&&h.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:c}}function dwe(t,e,n){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,m){t.drawElements(i,m,s,h*o),n.update(m,i,1)}function u(h,m,g){g!==0&&(t.drawElementsInstanced(i,m,s,h*o,g),n.update(m,i,g))}function c(h,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,h,0,g);let _=0;for(let y=0;y<g;y++)_+=m[y];n.update(_,i,1)}function d(h,m,g,v){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let y=0;y<h.length;y++)u(h[y]/o,m[y],v[y]);else{_.multiDrawElementsInstancedWEBGL(i,m,0,s,h,0,v,0,g);let y=0;for(let S=0;S<g;S++)y+=m[S];for(let S=0;S<v.length;S++)n.update(y,i,v[S])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function hwe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function fwe(t,e,n){const i=new WeakMap,r=new yn;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=c!==void 0?c.length:0;let h=i.get(a);if(h===void 0||h.count!==d){let E=function(){O.dispose(),i.delete(a),a.removeEventListener("dispose",E)};var m=E;h!==void 0&&h.texture.dispose();const g=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],x=a.morphAttributes.color||[];let w=0;g===!0&&(w=1),v===!0&&(w=2),_===!0&&(w=3);let P=a.attributes.position.count*w,A=1;P>e.maxTextureSize&&(A=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const D=new Float32Array(P*A*4*d),O=new tE(D,P,A,d);O.type=Cs,O.needsUpdate=!0;const H=w*4;for(let k=0;k<d;k++){const W=y[k],G=S[k],Y=x[k],ie=P*A*4*k;for(let Q=0;Q<W.count;Q++){const oe=Q*H;g===!0&&(r.fromBufferAttribute(W,Q),D[ie+oe+0]=r.x,D[ie+oe+1]=r.y,D[ie+oe+2]=r.z,D[ie+oe+3]=0),v===!0&&(r.fromBufferAttribute(G,Q),D[ie+oe+4]=r.x,D[ie+oe+5]=r.y,D[ie+oe+6]=r.z,D[ie+oe+7]=0),_===!0&&(r.fromBufferAttribute(Y,Q),D[ie+oe+8]=r.x,D[ie+oe+9]=r.y,D[ie+oe+10]=r.z,D[ie+oe+11]=Y.itemSize===4?r.w:1)}}h={count:d,texture:O,size:new je(P,A)},i.set(a,h),a.addEventListener("dispose",E)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let g=0;for(let _=0;_<u.length;_++)g+=u[_];const v=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",u)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:s}}function pwe(t,e,n,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,d=e.get(l,c);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==u&&(h.update(),r.set(h,u))}return d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}class Z3 extends hi{constructor(e,n,i,r,s,o,a,l,u,c=Nh){if(c!==Nh&&c!==Zh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===Nh&&(i=ku),i===void 0&&c===Zh&&(i=Qh),super(null,r,s,o,a,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:sr,this.minFilter=l!==void 0?l:sr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const oq=new hi,Y5=new Z3(1,1),aq=new tE,lq=new X3,uq=new N_,K5=[],Q5=[],Z5=new Float32Array(16),J5=new Float32Array(9),eB=new Float32Array(4);function Eg(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=K5[r];if(s===void 0&&(s=new Float32Array(r),K5[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Ki(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Qi(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function nE(t,e){let n=Q5[e];n===void 0&&(n=new Int32Array(e),Q5[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function mwe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function gwe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ki(n,e))return;t.uniform2fv(this.addr,e),Qi(n,e)}}function ywe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ki(n,e))return;t.uniform3fv(this.addr,e),Qi(n,e)}}function vwe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ki(n,e))return;t.uniform4fv(this.addr,e),Qi(n,e)}}function _we(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ki(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Qi(n,e)}else{if(Ki(n,i))return;eB.set(i),t.uniformMatrix2fv(this.addr,!1,eB),Qi(n,i)}}function xwe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ki(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Qi(n,e)}else{if(Ki(n,i))return;J5.set(i),t.uniformMatrix3fv(this.addr,!1,J5),Qi(n,i)}}function Swe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ki(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Qi(n,e)}else{if(Ki(n,i))return;Z5.set(i),t.uniformMatrix4fv(this.addr,!1,Z5),Qi(n,i)}}function Twe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function bwe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ki(n,e))return;t.uniform2iv(this.addr,e),Qi(n,e)}}function wwe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ki(n,e))return;t.uniform3iv(this.addr,e),Qi(n,e)}}function Ewe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ki(n,e))return;t.uniform4iv(this.addr,e),Qi(n,e)}}function Cwe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Awe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ki(n,e))return;t.uniform2uiv(this.addr,e),Qi(n,e)}}function Mwe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ki(n,e))return;t.uniform3uiv(this.addr,e),Qi(n,e)}}function Pwe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ki(n,e))return;t.uniform4uiv(this.addr,e),Qi(n,e)}}function Iwe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let s;this.type===t.SAMPLER_2D_SHADOW?(Y5.compareFunction=j3,s=Y5):s=oq,n.setTexture2D(e||s,r)}function Rwe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||lq,r)}function Dwe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||uq,r)}function kwe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||aq,r)}function Lwe(t){switch(t){case 5126:return mwe;case 35664:return gwe;case 35665:return ywe;case 35666:return vwe;case 35674:return _we;case 35675:return xwe;case 35676:return Swe;case 5124:case 35670:return Twe;case 35667:case 35671:return bwe;case 35668:case 35672:return wwe;case 35669:case 35673:return Ewe;case 5125:return Cwe;case 36294:return Awe;case 36295:return Mwe;case 36296:return Pwe;case 35678:case 36198:case 36298:case 36306:case 35682:return Iwe;case 35679:case 36299:case 36307:return Rwe;case 35680:case 36300:case 36308:case 36293:return Dwe;case 36289:case 36303:case 36311:case 36292:return kwe}}function Nwe(t,e){t.uniform1fv(this.addr,e)}function Owe(t,e){const n=Eg(e,this.size,2);t.uniform2fv(this.addr,n)}function Uwe(t,e){const n=Eg(e,this.size,3);t.uniform3fv(this.addr,n)}function Fwe(t,e){const n=Eg(e,this.size,4);t.uniform4fv(this.addr,n)}function Bwe(t,e){const n=Eg(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function zwe(t,e){const n=Eg(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Hwe(t,e){const n=Eg(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Vwe(t,e){t.uniform1iv(this.addr,e)}function $we(t,e){t.uniform2iv(this.addr,e)}function Gwe(t,e){t.uniform3iv(this.addr,e)}function Wwe(t,e){t.uniform4iv(this.addr,e)}function jwe(t,e){t.uniform1uiv(this.addr,e)}function qwe(t,e){t.uniform2uiv(this.addr,e)}function Xwe(t,e){t.uniform3uiv(this.addr,e)}function Ywe(t,e){t.uniform4uiv(this.addr,e)}function Kwe(t,e,n){const i=this.cache,r=e.length,s=nE(n,r);Ki(i,s)||(t.uniform1iv(this.addr,s),Qi(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||oq,s[o])}function Qwe(t,e,n){const i=this.cache,r=e.length,s=nE(n,r);Ki(i,s)||(t.uniform1iv(this.addr,s),Qi(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||lq,s[o])}function Zwe(t,e,n){const i=this.cache,r=e.length,s=nE(n,r);Ki(i,s)||(t.uniform1iv(this.addr,s),Qi(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||uq,s[o])}function Jwe(t,e,n){const i=this.cache,r=e.length,s=nE(n,r);Ki(i,s)||(t.uniform1iv(this.addr,s),Qi(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||aq,s[o])}function eEe(t){switch(t){case 5126:return Nwe;case 35664:return Owe;case 35665:return Uwe;case 35666:return Fwe;case 35674:return Bwe;case 35675:return zwe;case 35676:return Hwe;case 5124:case 35670:return Vwe;case 35667:case 35671:return $we;case 35668:case 35672:return Gwe;case 35669:case 35673:return Wwe;case 5125:return jwe;case 36294:return qwe;case 36295:return Xwe;case 36296:return Ywe;case 35678:case 36198:case 36298:case 36306:case 35682:return Kwe;case 35679:case 36299:case 36307:return Qwe;case 35680:case 36300:case 36308:case 36293:return Zwe;case 36289:case 36303:case 36311:case 36292:return Jwe}}class tEe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Lwe(n.type)}}class nEe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=eEe(n.type)}}class iEe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const nM=/(\w+)(\])?(\[|\.)?/g;function tB(t,e){t.seq.push(e),t.map[e.id]=e}function rEe(t,e,n){const i=t.name,r=i.length;for(nM.lastIndex=0;;){const s=nM.exec(i),o=nM.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){tB(n,u===void 0?new tEe(a,t,e):new nEe(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new iEe(a),tB(n,d)),n=d}}}class VS{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);rEe(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function nB(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const sEe=37297;let oEe=0;function aEe(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function lEe(t){const e=bn.getPrimaries(bn.workingColorSpace),n=bn.getPrimaries(t);let i;switch(e===n?i="":e===Vv&&n===Hv?i="LinearDisplayP3ToLinearSRGB":e===Hv&&n===Vv&&(i="LinearSRGBToLinearDisplayP3"),t){case Fu:case k_:return[i,"LinearTransferOETF"];case Zs:case eE:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[i,"LinearTransferOETF"]}}function iB(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+aEe(t.getShaderSource(e),o)}else return r}function uEe(t,e){const n=lEe(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function cEe(t,e){let n;switch(e){case Ij:n="Linear";break;case Rj:n="Reinhard";break;case Dj:n="Cineon";break;case L3:n="ACESFilmic";break;case Lj:n="AgX";break;case Nj:n="Neutral";break;case kj:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const z1=new J;function dEe(){bn.getLuminanceCoefficients(z1);const t=z1.x.toFixed(4),e=z1.y.toFixed(4),n=z1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function hEe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ry).join(`
`)}function fEe(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function pEe(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function ry(t){return t!==""}function rB(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function sB(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mEe=/^[ \t]*#include +<([\w\d./]+)>/gm;function XI(t){return t.replace(mEe,yEe)}const gEe=new Map;function yEe(t,e){let n=nn[e];if(n===void 0){const i=gEe.get(e);if(i!==void 0)n=nn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return XI(n)}const vEe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function oB(t){return t.replace(vEe,_Ee)}function _Ee(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function aB(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function xEe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ww?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Py?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===ma&&(e="SHADOWMAP_TYPE_VSM"),e}function SEe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Du:case td:e="ENVMAP_TYPE_CUBE";break;case Tg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function TEe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case td:e="ENVMAP_MODE_REFRACTION";break}return e}function bEe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case R_:e="ENVMAP_BLENDING_MULTIPLY";break;case Mj:e="ENVMAP_BLENDING_MIX";break;case Pj:e="ENVMAP_BLENDING_ADD";break}return e}function wEe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function EEe(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=xEe(n),u=SEe(n),c=TEe(n),d=bEe(n),h=wEe(n),m=hEe(n),g=fEe(s),v=r.createProgram();let _,y,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(ry).join(`
`),_.length>0&&(_+=`
`),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(ry).join(`
`),y.length>0&&(y+=`
`)):(_=[aB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ry).join(`
`),y=[aB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==yl?"#define TONE_MAPPING":"",n.toneMapping!==yl?nn.tonemapping_pars_fragment:"",n.toneMapping!==yl?cEe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,uEe("linearToOutputTexel",n.outputColorSpace),dEe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ry).join(`
`)),o=XI(o),o=rB(o,n),o=sB(o,n),a=XI(a),a=rB(a,n),a=sB(a,n),o=oB(o),a=oB(a),n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,_=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,y=["#define varying in",n.glslVersion===jI?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===jI?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const x=S+_+o,w=S+y+a,P=nB(r,r.VERTEX_SHADER,x),A=nB(r,r.FRAGMENT_SHADER,w);r.attachShader(v,P),r.attachShader(v,A),n.index0AttributeName!==void 0?r.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function D(k){if(t.debug.checkShaderErrors){const W=r.getProgramInfoLog(v).trim(),G=r.getShaderInfoLog(P).trim(),Y=r.getShaderInfoLog(A).trim();let ie=!0,Q=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(ie=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,v,P,A);else{const oe=iB(r,P,"vertex"),z=iB(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+W+`
`+oe+`
`+z)}else W!==""?console.warn("THREE.WebGLProgram: Program Info Log:",W):(G===""||Y==="")&&(Q=!1);Q&&(k.diagnostics={runnable:ie,programLog:W,vertexShader:{log:G,prefix:_},fragmentShader:{log:Y,prefix:y}})}r.deleteShader(P),r.deleteShader(A),O=new VS(r,v),H=pEe(r,v)}let O;this.getUniforms=function(){return O===void 0&&D(this),O};let H;this.getAttributes=function(){return H===void 0&&D(this),H};let E=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=r.getProgramParameter(v,sEe)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=oEe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=P,this.fragmentShader=A,this}let CEe=0;class AEe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new MEe(e),n.set(e,i)),i}}class MEe{constructor(e){this.id=CEe++,this.code=e,this.usedTimes=0}}function PEe(t,e,n,i,r,s,o){const a=new Uh,l=new AEe,u=new Set,c=[],d=r.logarithmicDepthBuffer,h=r.reverseDepthBuffer,m=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(E){return u.add(E),E===0?"uv":`uv${E}`}function y(E,k,W,G,Y){const ie=G.fog,Q=Y.geometry,oe=E.isMeshStandardMaterial?G.environment:null,z=(E.isMeshStandardMaterial?n:e).get(E.envMap||oe),ee=z&&z.mapping===Tg?z.image.height:null,te=v[E.type];E.precision!==null&&(g=r.getMaxPrecision(E.precision),g!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",g,"instead."));const ce=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,Te=ce!==void 0?ce.length:0;let Ue=0;Q.morphAttributes.position!==void 0&&(Ue=1),Q.morphAttributes.normal!==void 0&&(Ue=2),Q.morphAttributes.color!==void 0&&(Ue=3);let he,xe,Fe,He;if(te){const qn=xa[te];he=qn.vertexShader,xe=qn.fragmentShader}else he=E.vertexShader,xe=E.fragmentShader,l.update(E),Fe=l.getVertexShaderID(E),He=l.getFragmentShaderID(E);const ot=t.getRenderTarget(),Ae=Y.isInstancedMesh===!0,Ge=Y.isBatchedMesh===!0,Le=!!E.map,le=!!E.matcap,j=!!z,Me=!!E.aoMap,Re=!!E.lightMap,Be=!!E.bumpMap,We=!!E.normalMap,rt=!!E.displacementMap,st=!!E.emissiveMap,q=!!E.metalnessMap,V=!!E.roughnessMap,_e=E.anisotropy>0,De=E.clearcoat>0,Ve=E.dispersion>0,Ne=E.iridescence>0,dt=E.sheen>0,qe=E.transmission>0,Qe=_e&&!!E.anisotropyMap,Gt=De&&!!E.clearcoatMap,Ke=De&&!!E.clearcoatNormalMap,ut=De&&!!E.clearcoatRoughnessMap,ct=Ne&&!!E.iridescenceMap,Ot=Ne&&!!E.iridescenceThicknessMap,ft=dt&&!!E.sheenColorMap,de=dt&&!!E.sheenRoughnessMap,$e=!!E.specularMap,at=!!E.specularColorMap,ue=!!E.specularIntensityMap,nt=qe&&!!E.transmissionMap,Pe=qe&&!!E.thicknessMap,Ye=!!E.gradientMap,pt=!!E.alphaMap,mt=E.alphaTest>0,Vt=!!E.alphaHash,dn=!!E.extensions;let jn=yl;E.toneMapped&&(ot===null||ot.isXRRenderTarget===!0)&&(jn=t.toneMapping);const Jt={shaderID:te,shaderType:E.type,shaderName:E.name,vertexShader:he,fragmentShader:xe,defines:E.defines,customVertexShaderID:Fe,customFragmentShaderID:He,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:g,batching:Ge,batchingColor:Ge&&Y._colorsTexture!==null,instancing:Ae,instancingColor:Ae&&Y.instanceColor!==null,instancingMorph:Ae&&Y.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:ot===null?t.outputColorSpace:ot.isXRRenderTarget===!0?ot.texture.colorSpace:Fu,alphaToCoverage:!!E.alphaToCoverage,map:Le,matcap:le,envMap:j,envMapMode:j&&z.mapping,envMapCubeUVHeight:ee,aoMap:Me,lightMap:Re,bumpMap:Be,normalMap:We,displacementMap:m&&rt,emissiveMap:st,normalMapObjectSpace:We&&E.normalMapType===Vj,normalMapTangentSpace:We&&E.normalMapType===dd,metalnessMap:q,roughnessMap:V,anisotropy:_e,anisotropyMap:Qe,clearcoat:De,clearcoatMap:Gt,clearcoatNormalMap:Ke,clearcoatRoughnessMap:ut,dispersion:Ve,iridescence:Ne,iridescenceMap:ct,iridescenceThicknessMap:Ot,sheen:dt,sheenColorMap:ft,sheenRoughnessMap:de,specularMap:$e,specularColorMap:at,specularIntensityMap:ue,transmission:qe,transmissionMap:nt,thicknessMap:Pe,gradientMap:Ye,opaque:E.transparent===!1&&E.blending===Lh&&E.alphaToCoverage===!1,alphaMap:pt,alphaTest:mt,alphaHash:Vt,combine:E.combine,mapUv:Le&&_(E.map.channel),aoMapUv:Me&&_(E.aoMap.channel),lightMapUv:Re&&_(E.lightMap.channel),bumpMapUv:Be&&_(E.bumpMap.channel),normalMapUv:We&&_(E.normalMap.channel),displacementMapUv:rt&&_(E.displacementMap.channel),emissiveMapUv:st&&_(E.emissiveMap.channel),metalnessMapUv:q&&_(E.metalnessMap.channel),roughnessMapUv:V&&_(E.roughnessMap.channel),anisotropyMapUv:Qe&&_(E.anisotropyMap.channel),clearcoatMapUv:Gt&&_(E.clearcoatMap.channel),clearcoatNormalMapUv:Ke&&_(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ut&&_(E.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&_(E.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&_(E.iridescenceThicknessMap.channel),sheenColorMapUv:ft&&_(E.sheenColorMap.channel),sheenRoughnessMapUv:de&&_(E.sheenRoughnessMap.channel),specularMapUv:$e&&_(E.specularMap.channel),specularColorMapUv:at&&_(E.specularColorMap.channel),specularIntensityMapUv:ue&&_(E.specularIntensityMap.channel),transmissionMapUv:nt&&_(E.transmissionMap.channel),thicknessMapUv:Pe&&_(E.thicknessMap.channel),alphaMapUv:pt&&_(E.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(We||_e),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,pointsUvs:Y.isPoints===!0&&!!Q.attributes.uv&&(Le||pt),fog:!!ie,useFog:E.fog===!0,fogExp2:!!ie&&ie.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:h,skinning:Y.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:Te,morphTextureStride:Ue,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&W.length>0,shadowMapType:t.shadowMap.type,toneMapping:jn,decodeVideoTexture:Le&&E.map.isVideoTexture===!0&&bn.getTransfer(E.map.colorSpace)===Vn,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===to,flipSided:E.side===ns,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:dn&&E.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dn&&E.extensions.multiDraw===!0||Ge)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return Jt.vertexUv1s=u.has(1),Jt.vertexUv2s=u.has(2),Jt.vertexUv3s=u.has(3),u.clear(),Jt}function S(E){const k=[];if(E.shaderID?k.push(E.shaderID):(k.push(E.customVertexShaderID),k.push(E.customFragmentShaderID)),E.defines!==void 0)for(const W in E.defines)k.push(W),k.push(E.defines[W]);return E.isRawShaderMaterial===!1&&(x(k,E),w(k,E),k.push(t.outputColorSpace)),k.push(E.customProgramCacheKey),k.join()}function x(E,k){E.push(k.precision),E.push(k.outputColorSpace),E.push(k.envMapMode),E.push(k.envMapCubeUVHeight),E.push(k.mapUv),E.push(k.alphaMapUv),E.push(k.lightMapUv),E.push(k.aoMapUv),E.push(k.bumpMapUv),E.push(k.normalMapUv),E.push(k.displacementMapUv),E.push(k.emissiveMapUv),E.push(k.metalnessMapUv),E.push(k.roughnessMapUv),E.push(k.anisotropyMapUv),E.push(k.clearcoatMapUv),E.push(k.clearcoatNormalMapUv),E.push(k.clearcoatRoughnessMapUv),E.push(k.iridescenceMapUv),E.push(k.iridescenceThicknessMapUv),E.push(k.sheenColorMapUv),E.push(k.sheenRoughnessMapUv),E.push(k.specularMapUv),E.push(k.specularColorMapUv),E.push(k.specularIntensityMapUv),E.push(k.transmissionMapUv),E.push(k.thicknessMapUv),E.push(k.combine),E.push(k.fogExp2),E.push(k.sizeAttenuation),E.push(k.morphTargetsCount),E.push(k.morphAttributeCount),E.push(k.numDirLights),E.push(k.numPointLights),E.push(k.numSpotLights),E.push(k.numSpotLightMaps),E.push(k.numHemiLights),E.push(k.numRectAreaLights),E.push(k.numDirLightShadows),E.push(k.numPointLightShadows),E.push(k.numSpotLightShadows),E.push(k.numSpotLightShadowsWithMaps),E.push(k.numLightProbes),E.push(k.shadowMapType),E.push(k.toneMapping),E.push(k.numClippingPlanes),E.push(k.numClipIntersection),E.push(k.depthPacking)}function w(E,k){a.disableAll(),k.supportsVertexTextures&&a.enable(0),k.instancing&&a.enable(1),k.instancingColor&&a.enable(2),k.instancingMorph&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUv1s&&a.enable(13),k.vertexUv2s&&a.enable(14),k.vertexUv3s&&a.enable(15),k.vertexTangents&&a.enable(16),k.anisotropy&&a.enable(17),k.alphaHash&&a.enable(18),k.batching&&a.enable(19),k.dispersion&&a.enable(20),k.batchingColor&&a.enable(21),E.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.reverseDepthBuffer&&a.enable(4),k.skinning&&a.enable(5),k.morphTargets&&a.enable(6),k.morphNormals&&a.enable(7),k.morphColors&&a.enable(8),k.premultipliedAlpha&&a.enable(9),k.shadowMapEnabled&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.opaque&&a.enable(17),k.pointsUvs&&a.enable(18),k.decodeVideoTexture&&a.enable(19),k.alphaToCoverage&&a.enable(20),E.push(a.mask)}function P(E){const k=v[E.type];let W;if(k){const G=xa[k];W=nq.clone(G.uniforms)}else W=E.uniforms;return W}function A(E,k){let W;for(let G=0,Y=c.length;G<Y;G++){const ie=c[G];if(ie.cacheKey===k){W=ie,++W.usedTimes;break}}return W===void 0&&(W=new EEe(t,k,E,s),c.push(W)),W}function D(E){if(--E.usedTimes===0){const k=c.indexOf(E);c[k]=c[c.length-1],c.pop(),E.destroy()}}function O(E){l.remove(E)}function H(){l.dispose()}return{getParameters:y,getProgramCacheKey:S,getUniforms:P,acquireProgram:A,releaseProgram:D,releaseShaderCache:O,programs:c,dispose:H}}function IEe(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function i(o){t.delete(o)}function r(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:s}}function REe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function lB(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function uB(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(d,h,m,g,v,_){let y=t[e];return y===void 0?(y={id:d.id,object:d,geometry:h,material:m,groupOrder:g,renderOrder:d.renderOrder,z:v,group:_},t[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=m,y.groupOrder=g,y.renderOrder=d.renderOrder,y.z=v,y.group=_),e++,y}function a(d,h,m,g,v,_){const y=o(d,h,m,g,v,_);m.transmission>0?i.push(y):m.transparent===!0?r.push(y):n.push(y)}function l(d,h,m,g,v,_){const y=o(d,h,m,g,v,_);m.transmission>0?i.unshift(y):m.transparent===!0?r.unshift(y):n.unshift(y)}function u(d,h){n.length>1&&n.sort(d||REe),i.length>1&&i.sort(h||lB),r.length>1&&r.sort(h||lB)}function c(){for(let d=e,h=t.length;d<h;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:c,sort:u}}function DEe(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new uB,t.set(i,[o])):r>=s.length?(o=new uB,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function kEe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new J,color:new xt};break;case"SpotLight":n={position:new J,direction:new J,color:new xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new J,color:new xt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new J,skyColor:new xt,groundColor:new xt};break;case"RectAreaLight":n={color:new xt,position:new J,halfWidth:new J,halfHeight:new J};break}return t[e.id]=n,n}}}function LEe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let NEe=0;function OEe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function UEe(t){const e=new kEe,n=LEe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new J);const r=new J,s=new zt,o=new zt;function a(u){let c=0,d=0,h=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let m=0,g=0,v=0,_=0,y=0,S=0,x=0,w=0,P=0,A=0,D=0;u.sort(OEe);for(let H=0,E=u.length;H<E;H++){const k=u[H],W=k.color,G=k.intensity,Y=k.distance,ie=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)c+=W.r*G,d+=W.g*G,h+=W.b*G;else if(k.isLightProbe){for(let Q=0;Q<9;Q++)i.probe[Q].addScaledVector(k.sh.coefficients[Q],G);D++}else if(k.isDirectionalLight){const Q=e.get(k);if(Q.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const oe=k.shadow,z=n.get(k);z.shadowIntensity=oe.intensity,z.shadowBias=oe.bias,z.shadowNormalBias=oe.normalBias,z.shadowRadius=oe.radius,z.shadowMapSize=oe.mapSize,i.directionalShadow[m]=z,i.directionalShadowMap[m]=ie,i.directionalShadowMatrix[m]=k.shadow.matrix,S++}i.directional[m]=Q,m++}else if(k.isSpotLight){const Q=e.get(k);Q.position.setFromMatrixPosition(k.matrixWorld),Q.color.copy(W).multiplyScalar(G),Q.distance=Y,Q.coneCos=Math.cos(k.angle),Q.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),Q.decay=k.decay,i.spot[v]=Q;const oe=k.shadow;if(k.map&&(i.spotLightMap[P]=k.map,P++,oe.updateMatrices(k),k.castShadow&&A++),i.spotLightMatrix[v]=oe.matrix,k.castShadow){const z=n.get(k);z.shadowIntensity=oe.intensity,z.shadowBias=oe.bias,z.shadowNormalBias=oe.normalBias,z.shadowRadius=oe.radius,z.shadowMapSize=oe.mapSize,i.spotShadow[v]=z,i.spotShadowMap[v]=ie,w++}v++}else if(k.isRectAreaLight){const Q=e.get(k);Q.color.copy(W).multiplyScalar(G),Q.halfWidth.set(k.width*.5,0,0),Q.halfHeight.set(0,k.height*.5,0),i.rectArea[_]=Q,_++}else if(k.isPointLight){const Q=e.get(k);if(Q.color.copy(k.color).multiplyScalar(k.intensity),Q.distance=k.distance,Q.decay=k.decay,k.castShadow){const oe=k.shadow,z=n.get(k);z.shadowIntensity=oe.intensity,z.shadowBias=oe.bias,z.shadowNormalBias=oe.normalBias,z.shadowRadius=oe.radius,z.shadowMapSize=oe.mapSize,z.shadowCameraNear=oe.camera.near,z.shadowCameraFar=oe.camera.far,i.pointShadow[g]=z,i.pointShadowMap[g]=ie,i.pointShadowMatrix[g]=k.shadow.matrix,x++}i.point[g]=Q,g++}else if(k.isHemisphereLight){const Q=e.get(k);Q.skyColor.copy(k.color).multiplyScalar(G),Q.groundColor.copy(k.groundColor).multiplyScalar(G),i.hemi[y]=Q,y++}}_>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_FLOAT_1,i.rectAreaLTC2=ht.LTC_FLOAT_2):(i.rectAreaLTC1=ht.LTC_HALF_1,i.rectAreaLTC2=ht.LTC_HALF_2)),i.ambient[0]=c,i.ambient[1]=d,i.ambient[2]=h;const O=i.hash;(O.directionalLength!==m||O.pointLength!==g||O.spotLength!==v||O.rectAreaLength!==_||O.hemiLength!==y||O.numDirectionalShadows!==S||O.numPointShadows!==x||O.numSpotShadows!==w||O.numSpotMaps!==P||O.numLightProbes!==D)&&(i.directional.length=m,i.spot.length=v,i.rectArea.length=_,i.point.length=g,i.hemi.length=y,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=w+P-A,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=D,O.directionalLength=m,O.pointLength=g,O.spotLength=v,O.rectAreaLength=_,O.hemiLength=y,O.numDirectionalShadows=S,O.numPointShadows=x,O.numSpotShadows=w,O.numSpotMaps=P,O.numLightProbes=D,i.version=NEe++)}function l(u,c){let d=0,h=0,m=0,g=0,v=0;const _=c.matrixWorldInverse;for(let y=0,S=u.length;y<S;y++){const x=u[y];if(x.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(_),d++}else if(x.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(_),m++}else if(x.isRectAreaLight){const w=i.rectArea[g];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),o.identity(),s.copy(x.matrixWorld),s.premultiply(_),o.extractRotation(s),w.halfWidth.set(x.width*.5,0,0),w.halfHeight.set(0,x.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),g++}else if(x.isPointLight){const w=i.point[h];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),h++}else if(x.isHemisphereLight){const w=i.hemi[v];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(_),v++}}}return{setup:a,setupView:l,state:i}}function cB(t){const e=new UEe(t),n=[],i=[];function r(c){u.camera=c,n.length=0,i.length=0}function s(c){n.push(c)}function o(c){i.push(c)}function a(){e.setup(n)}function l(c){e.setupView(n,c)}const u={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function FEe(t){let e=new WeakMap;function n(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new cB(t),e.set(r,[a])):s>=o.length?(a=new cB(t),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:n,dispose:i}}class J3 extends Sr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=zj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class eL extends Sr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const BEe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zEe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function HEe(t,e,n){let i=new O_;const r=new je,s=new je,o=new yn,a=new J3({depthPacking:Hj}),l=new eL,u={},c=n.maxTextureSize,d={[Ru]:ns,[ns]:Ru,[to]:to},h=new Da({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:BEe,fragmentShader:zEe}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const g=new Zt;g.setAttribute("position",new Mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Bi(g,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ww;let y=this.type;this.render=function(A,D,O){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||A.length===0)return;const H=t.getRenderTarget(),E=t.getActiveCubeFace(),k=t.getActiveMipmapLevel(),W=t.state;W.setBlending(gu),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const G=y!==ma&&this.type===ma,Y=y===ma&&this.type!==ma;for(let ie=0,Q=A.length;ie<Q;ie++){const oe=A[ie],z=oe.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;r.copy(z.mapSize);const ee=z.getFrameExtents();if(r.multiply(ee),s.copy(z.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/ee.x),r.x=s.x*ee.x,z.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/ee.y),r.y=s.y*ee.y,z.mapSize.y=s.y)),z.map===null||G===!0||Y===!0){const ce=this.type!==ma?{minFilter:sr,magFilter:sr}:{};z.map!==null&&z.map.dispose(),z.map=new Ra(r.x,r.y,ce),z.map.texture.name=oe.name+".shadowMap",z.camera.updateProjectionMatrix()}t.setRenderTarget(z.map),t.clear();const te=z.getViewportCount();for(let ce=0;ce<te;ce++){const Te=z.getViewport(ce);o.set(s.x*Te.x,s.y*Te.y,s.x*Te.z,s.y*Te.w),W.viewport(o),z.updateMatrices(oe,ce),i=z.getFrustum(),w(D,O,z.camera,oe,this.type)}z.isPointLightShadow!==!0&&this.type===ma&&S(z,O),z.needsUpdate=!1}y=this.type,_.needsUpdate=!1,t.setRenderTarget(H,E,k)};function S(A,D){const O=e.update(v);h.defines.VSM_SAMPLES!==A.blurSamples&&(h.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Ra(r.x,r.y)),h.uniforms.shadow_pass.value=A.map.texture,h.uniforms.resolution.value=A.mapSize,h.uniforms.radius.value=A.radius,t.setRenderTarget(A.mapPass),t.clear(),t.renderBufferDirect(D,null,O,h,v,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,t.setRenderTarget(A.map),t.clear(),t.renderBufferDirect(D,null,O,m,v,null)}function x(A,D,O,H){let E=null;const k=O.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(k!==void 0)E=k;else if(E=O.isPointLight===!0?l:a,t.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const W=E.uuid,G=D.uuid;let Y=u[W];Y===void 0&&(Y={},u[W]=Y);let ie=Y[G];ie===void 0&&(ie=E.clone(),Y[G]=ie,D.addEventListener("dispose",P)),E=ie}if(E.visible=D.visible,E.wireframe=D.wireframe,H===ma?E.side=D.shadowSide!==null?D.shadowSide:D.side:E.side=D.shadowSide!==null?D.shadowSide:d[D.side],E.alphaMap=D.alphaMap,E.alphaTest=D.alphaTest,E.map=D.map,E.clipShadows=D.clipShadows,E.clippingPlanes=D.clippingPlanes,E.clipIntersection=D.clipIntersection,E.displacementMap=D.displacementMap,E.displacementScale=D.displacementScale,E.displacementBias=D.displacementBias,E.wireframeLinewidth=D.wireframeLinewidth,E.linewidth=D.linewidth,O.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const W=t.properties.get(E);W.light=O}return E}function w(A,D,O,H,E){if(A.visible===!1)return;if(A.layers.test(D.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&E===ma)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,A.matrixWorld);const G=e.update(A),Y=A.material;if(Array.isArray(Y)){const ie=G.groups;for(let Q=0,oe=ie.length;Q<oe;Q++){const z=ie[Q],ee=Y[z.materialIndex];if(ee&&ee.visible){const te=x(A,ee,H,E);A.onBeforeShadow(t,A,D,O,G,te,z),t.renderBufferDirect(O,null,G,te,A,z),A.onAfterShadow(t,A,D,O,G,te,z)}}}else if(Y.visible){const ie=x(A,Y,H,E);A.onBeforeShadow(t,A,D,O,G,ie,null),t.renderBufferDirect(O,null,G,ie,A,null),A.onAfterShadow(t,A,D,O,G,ie,null)}}const W=A.children;for(let G=0,Y=W.length;G<Y;G++)w(W[G],D,O,H,E)}function P(A){A.target.removeEventListener("dispose",P);for(const O in u){const H=u[O],E=A.target.uuid;E in H&&(H[E].dispose(),delete H[E])}}}const VEe={[_b]:xb,[Sb]:wb,[Tb]:Eb,[Kh]:bb,[xb]:_b,[wb]:Sb,[Eb]:Tb,[bb]:Kh};function $Ee(t){function e(){let ue=!1;const nt=new yn;let Pe=null;const Ye=new yn(0,0,0,0);return{setMask:function(pt){Pe!==pt&&!ue&&(t.colorMask(pt,pt,pt,pt),Pe=pt)},setLocked:function(pt){ue=pt},setClear:function(pt,mt,Vt,dn,jn){jn===!0&&(pt*=dn,mt*=dn,Vt*=dn),nt.set(pt,mt,Vt,dn),Ye.equals(nt)===!1&&(t.clearColor(pt,mt,Vt,dn),Ye.copy(nt))},reset:function(){ue=!1,Pe=null,Ye.set(-1,0,0,0)}}}function n(){let ue=!1,nt=!1,Pe=null,Ye=null,pt=null;return{setReversed:function(mt){nt=mt},setTest:function(mt){mt?Fe(t.DEPTH_TEST):He(t.DEPTH_TEST)},setMask:function(mt){Pe!==mt&&!ue&&(t.depthMask(mt),Pe=mt)},setFunc:function(mt){if(nt&&(mt=VEe[mt]),Ye!==mt){switch(mt){case _b:t.depthFunc(t.NEVER);break;case xb:t.depthFunc(t.ALWAYS);break;case Sb:t.depthFunc(t.LESS);break;case Kh:t.depthFunc(t.LEQUAL);break;case Tb:t.depthFunc(t.EQUAL);break;case bb:t.depthFunc(t.GEQUAL);break;case wb:t.depthFunc(t.GREATER);break;case Eb:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ye=mt}},setLocked:function(mt){ue=mt},setClear:function(mt){pt!==mt&&(t.clearDepth(mt),pt=mt)},reset:function(){ue=!1,Pe=null,Ye=null,pt=null}}}function i(){let ue=!1,nt=null,Pe=null,Ye=null,pt=null,mt=null,Vt=null,dn=null,jn=null;return{setTest:function(Jt){ue||(Jt?Fe(t.STENCIL_TEST):He(t.STENCIL_TEST))},setMask:function(Jt){nt!==Jt&&!ue&&(t.stencilMask(Jt),nt=Jt)},setFunc:function(Jt,qn,Hi){(Pe!==Jt||Ye!==qn||pt!==Hi)&&(t.stencilFunc(Jt,qn,Hi),Pe=Jt,Ye=qn,pt=Hi)},setOp:function(Jt,qn,Hi){(mt!==Jt||Vt!==qn||dn!==Hi)&&(t.stencilOp(Jt,qn,Hi),mt=Jt,Vt=qn,dn=Hi)},setLocked:function(Jt){ue=Jt},setClear:function(Jt){jn!==Jt&&(t.clearStencil(Jt),jn=Jt)},reset:function(){ue=!1,nt=null,Pe=null,Ye=null,pt=null,mt=null,Vt=null,dn=null,jn=null}}}const r=new e,s=new n,o=new i,a=new WeakMap,l=new WeakMap;let u={},c={},d=new WeakMap,h=[],m=null,g=!1,v=null,_=null,y=null,S=null,x=null,w=null,P=null,A=new xt(0,0,0),D=0,O=!1,H=null,E=null,k=null,W=null,G=null;const Y=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,Q=0;const oe=t.getParameter(t.VERSION);oe.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(oe)[1]),ie=Q>=1):oe.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),ie=Q>=2);let z=null,ee={};const te=t.getParameter(t.SCISSOR_BOX),ce=t.getParameter(t.VIEWPORT),Te=new yn().fromArray(te),Ue=new yn().fromArray(ce);function he(ue,nt,Pe,Ye){const pt=new Uint8Array(4),mt=t.createTexture();t.bindTexture(ue,mt),t.texParameteri(ue,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ue,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Vt=0;Vt<Pe;Vt++)ue===t.TEXTURE_3D||ue===t.TEXTURE_2D_ARRAY?t.texImage3D(nt,0,t.RGBA,1,1,Ye,0,t.RGBA,t.UNSIGNED_BYTE,pt):t.texImage2D(nt+Vt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,pt);return mt}const xe={};xe[t.TEXTURE_2D]=he(t.TEXTURE_2D,t.TEXTURE_2D,1),xe[t.TEXTURE_CUBE_MAP]=he(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[t.TEXTURE_2D_ARRAY]=he(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),xe[t.TEXTURE_3D]=he(t.TEXTURE_3D,t.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Fe(t.DEPTH_TEST),s.setFunc(Kh),Re(!1),Be(zI),Fe(t.CULL_FACE),j(gu);function Fe(ue){u[ue]!==!0&&(t.enable(ue),u[ue]=!0)}function He(ue){u[ue]!==!1&&(t.disable(ue),u[ue]=!1)}function ot(ue,nt){return c[ue]!==nt?(t.bindFramebuffer(ue,nt),c[ue]=nt,ue===t.DRAW_FRAMEBUFFER&&(c[t.FRAMEBUFFER]=nt),ue===t.FRAMEBUFFER&&(c[t.DRAW_FRAMEBUFFER]=nt),!0):!1}function Ae(ue,nt){let Pe=h,Ye=!1;if(ue){Pe=d.get(nt),Pe===void 0&&(Pe=[],d.set(nt,Pe));const pt=ue.textures;if(Pe.length!==pt.length||Pe[0]!==t.COLOR_ATTACHMENT0){for(let mt=0,Vt=pt.length;mt<Vt;mt++)Pe[mt]=t.COLOR_ATTACHMENT0+mt;Pe.length=pt.length,Ye=!0}}else Pe[0]!==t.BACK&&(Pe[0]=t.BACK,Ye=!0);Ye&&t.drawBuffers(Pe)}function Ge(ue){return m!==ue?(t.useProgram(ue),m=ue,!0):!1}const Le={[Rc]:t.FUNC_ADD,[dj]:t.FUNC_SUBTRACT,[hj]:t.FUNC_REVERSE_SUBTRACT};Le[fj]=t.MIN,Le[pj]=t.MAX;const le={[mj]:t.ZERO,[gj]:t.ONE,[yj]:t.SRC_COLOR,[yb]:t.SRC_ALPHA,[bj]:t.SRC_ALPHA_SATURATE,[Sj]:t.DST_COLOR,[_j]:t.DST_ALPHA,[vj]:t.ONE_MINUS_SRC_COLOR,[vb]:t.ONE_MINUS_SRC_ALPHA,[Tj]:t.ONE_MINUS_DST_COLOR,[xj]:t.ONE_MINUS_DST_ALPHA,[wj]:t.CONSTANT_COLOR,[Ej]:t.ONE_MINUS_CONSTANT_COLOR,[Cj]:t.CONSTANT_ALPHA,[Aj]:t.ONE_MINUS_CONSTANT_ALPHA};function j(ue,nt,Pe,Ye,pt,mt,Vt,dn,jn,Jt){if(ue===gu){g===!0&&(He(t.BLEND),g=!1);return}if(g===!1&&(Fe(t.BLEND),g=!0),ue!==cj){if(ue!==v||Jt!==O){if((_!==Rc||x!==Rc)&&(t.blendEquation(t.FUNC_ADD),_=Rc,x=Rc),Jt)switch(ue){case Lh:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case HI:t.blendFunc(t.ONE,t.ONE);break;case VI:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case $I:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case Lh:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case HI:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case VI:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case $I:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}y=null,S=null,w=null,P=null,A.set(0,0,0),D=0,v=ue,O=Jt}return}pt=pt||nt,mt=mt||Pe,Vt=Vt||Ye,(nt!==_||pt!==x)&&(t.blendEquationSeparate(Le[nt],Le[pt]),_=nt,x=pt),(Pe!==y||Ye!==S||mt!==w||Vt!==P)&&(t.blendFuncSeparate(le[Pe],le[Ye],le[mt],le[Vt]),y=Pe,S=Ye,w=mt,P=Vt),(dn.equals(A)===!1||jn!==D)&&(t.blendColor(dn.r,dn.g,dn.b,jn),A.copy(dn),D=jn),v=ue,O=!1}function Me(ue,nt){ue.side===to?He(t.CULL_FACE):Fe(t.CULL_FACE);let Pe=ue.side===ns;nt&&(Pe=!Pe),Re(Pe),ue.blending===Lh&&ue.transparent===!1?j(gu):j(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),s.setFunc(ue.depthFunc),s.setTest(ue.depthTest),s.setMask(ue.depthWrite),r.setMask(ue.colorWrite);const Ye=ue.stencilWrite;o.setTest(Ye),Ye&&(o.setMask(ue.stencilWriteMask),o.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),o.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),rt(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?Fe(t.SAMPLE_ALPHA_TO_COVERAGE):He(t.SAMPLE_ALPHA_TO_COVERAGE)}function Re(ue){H!==ue&&(ue?t.frontFace(t.CW):t.frontFace(t.CCW),H=ue)}function Be(ue){ue!==aj?(Fe(t.CULL_FACE),ue!==E&&(ue===zI?t.cullFace(t.BACK):ue===lj?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):He(t.CULL_FACE),E=ue}function We(ue){ue!==k&&(ie&&t.lineWidth(ue),k=ue)}function rt(ue,nt,Pe){ue?(Fe(t.POLYGON_OFFSET_FILL),(W!==nt||G!==Pe)&&(t.polygonOffset(nt,Pe),W=nt,G=Pe)):He(t.POLYGON_OFFSET_FILL)}function st(ue){ue?Fe(t.SCISSOR_TEST):He(t.SCISSOR_TEST)}function q(ue){ue===void 0&&(ue=t.TEXTURE0+Y-1),z!==ue&&(t.activeTexture(ue),z=ue)}function V(ue,nt,Pe){Pe===void 0&&(z===null?Pe=t.TEXTURE0+Y-1:Pe=z);let Ye=ee[Pe];Ye===void 0&&(Ye={type:void 0,texture:void 0},ee[Pe]=Ye),(Ye.type!==ue||Ye.texture!==nt)&&(z!==Pe&&(t.activeTexture(Pe),z=Pe),t.bindTexture(ue,nt||xe[ue]),Ye.type=ue,Ye.texture=nt)}function _e(){const ue=ee[z];ue!==void 0&&ue.type!==void 0&&(t.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function De(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ve(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ne(){try{t.texSubImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function dt(){try{t.texSubImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function qe(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Qe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Gt(){try{t.texStorage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ke(){try{t.texStorage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ut(){try{t.texImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ct(){try{t.texImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ot(ue){Te.equals(ue)===!1&&(t.scissor(ue.x,ue.y,ue.z,ue.w),Te.copy(ue))}function ft(ue){Ue.equals(ue)===!1&&(t.viewport(ue.x,ue.y,ue.z,ue.w),Ue.copy(ue))}function de(ue,nt){let Pe=l.get(nt);Pe===void 0&&(Pe=new WeakMap,l.set(nt,Pe));let Ye=Pe.get(ue);Ye===void 0&&(Ye=t.getUniformBlockIndex(nt,ue.name),Pe.set(ue,Ye))}function $e(ue,nt){const Ye=l.get(nt).get(ue);a.get(nt)!==Ye&&(t.uniformBlockBinding(nt,Ye,ue.__bindingPointIndex),a.set(nt,Ye))}function at(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},z=null,ee={},c={},d=new WeakMap,h=[],m=null,g=!1,v=null,_=null,y=null,S=null,x=null,w=null,P=null,A=new xt(0,0,0),D=0,O=!1,H=null,E=null,k=null,W=null,G=null,Te.set(0,0,t.canvas.width,t.canvas.height),Ue.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Fe,disable:He,bindFramebuffer:ot,drawBuffers:Ae,useProgram:Ge,setBlending:j,setMaterial:Me,setFlipSided:Re,setCullFace:Be,setLineWidth:We,setPolygonOffset:rt,setScissorTest:st,activeTexture:q,bindTexture:V,unbindTexture:_e,compressedTexImage2D:De,compressedTexImage3D:Ve,texImage2D:ut,texImage3D:ct,updateUBOMapping:de,uniformBlockBinding:$e,texStorage2D:Gt,texStorage3D:Ke,texSubImage2D:Ne,texSubImage3D:dt,compressedTexSubImage2D:qe,compressedTexSubImage3D:Qe,scissor:Ot,viewport:ft,reset:at}}function GEe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function WEe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function jEe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function YI(t,e,n,i){const r=qEe(i);switch(n){case B3:return t*e;case H3:return t*e;case V3:return t*e*2;case Kw:return t*e/r.components*r.byteLength;case D_:return t*e/r.components*r.byteLength;case $3:return t*e*2/r.components*r.byteLength;case Qw:return t*e*2/r.components*r.byteLength;case z3:return t*e*3/r.components*r.byteLength;case Dr:return t*e*4/r.components*r.byteLength;case Zw:return t*e*4/r.components*r.byteLength;case Ry:case Dy:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case ky:case Ly:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Ab:case Pb:return Math.max(t,16)*Math.max(e,8)/4;case Cb:case Mb:return Math.max(t,8)*Math.max(e,8)/2;case Ib:case Rb:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Db:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case kb:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Lb:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Nb:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Ob:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Ub:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case Fb:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Bb:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case zb:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Hb:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Vb:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case $b:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Gb:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Wb:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case jb:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Ny:case qb:case Xb:return Math.ceil(t/4)*Math.ceil(e/4)*16;case G3:case Yb:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Kb:case Qb:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function qEe(t){switch(t){case Ia:case O3:return{byteLength:1,components:1};case tg:case U3:case bg:return{byteLength:2,components:1};case Xw:case Yw:return{byteLength:2,components:4};case ku:case qw:case Cs:return{byteLength:4,components:1};case F3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const XEe={contain:GEe,cover:WEe,fill:jEe,getByteLength:YI};function YEe(t,e,n,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new je,c=new WeakMap;let d;const h=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(q,V){return m?new OffscreenCanvas(q,V):Wv("canvas")}function v(q,V,_e){let De=1;const Ve=st(q);if((Ve.width>_e||Ve.height>_e)&&(De=_e/Math.max(Ve.width,Ve.height)),De<1)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap||typeof VideoFrame<"u"&&q instanceof VideoFrame){const Ne=Math.floor(De*Ve.width),dt=Math.floor(De*Ve.height);d===void 0&&(d=g(Ne,dt));const qe=V?g(Ne,dt):d;return qe.width=Ne,qe.height=dt,qe.getContext("2d").drawImage(q,0,0,Ne,dt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ve.width+"x"+Ve.height+") to ("+Ne+"x"+dt+")."),qe}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ve.width+"x"+Ve.height+")."),q;return q}function _(q){return q.generateMipmaps&&q.minFilter!==sr&&q.minFilter!==Fi}function y(q){t.generateMipmap(q)}function S(q,V,_e,De,Ve=!1){if(q!==null){if(t[q]!==void 0)return t[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let Ne=V;if(V===t.RED&&(_e===t.FLOAT&&(Ne=t.R32F),_e===t.HALF_FLOAT&&(Ne=t.R16F),_e===t.UNSIGNED_BYTE&&(Ne=t.R8)),V===t.RED_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Ne=t.R8UI),_e===t.UNSIGNED_SHORT&&(Ne=t.R16UI),_e===t.UNSIGNED_INT&&(Ne=t.R32UI),_e===t.BYTE&&(Ne=t.R8I),_e===t.SHORT&&(Ne=t.R16I),_e===t.INT&&(Ne=t.R32I)),V===t.RG&&(_e===t.FLOAT&&(Ne=t.RG32F),_e===t.HALF_FLOAT&&(Ne=t.RG16F),_e===t.UNSIGNED_BYTE&&(Ne=t.RG8)),V===t.RG_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Ne=t.RG8UI),_e===t.UNSIGNED_SHORT&&(Ne=t.RG16UI),_e===t.UNSIGNED_INT&&(Ne=t.RG32UI),_e===t.BYTE&&(Ne=t.RG8I),_e===t.SHORT&&(Ne=t.RG16I),_e===t.INT&&(Ne=t.RG32I)),V===t.RGB_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Ne=t.RGB8UI),_e===t.UNSIGNED_SHORT&&(Ne=t.RGB16UI),_e===t.UNSIGNED_INT&&(Ne=t.RGB32UI),_e===t.BYTE&&(Ne=t.RGB8I),_e===t.SHORT&&(Ne=t.RGB16I),_e===t.INT&&(Ne=t.RGB32I)),V===t.RGBA_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Ne=t.RGBA8UI),_e===t.UNSIGNED_SHORT&&(Ne=t.RGBA16UI),_e===t.UNSIGNED_INT&&(Ne=t.RGBA32UI),_e===t.BYTE&&(Ne=t.RGBA8I),_e===t.SHORT&&(Ne=t.RGBA16I),_e===t.INT&&(Ne=t.RGBA32I)),V===t.RGB&&_e===t.UNSIGNED_INT_5_9_9_9_REV&&(Ne=t.RGB9_E5),V===t.RGBA){const dt=Ve?zv:bn.getTransfer(De);_e===t.FLOAT&&(Ne=t.RGBA32F),_e===t.HALF_FLOAT&&(Ne=t.RGBA16F),_e===t.UNSIGNED_BYTE&&(Ne=dt===Vn?t.SRGB8_ALPHA8:t.RGBA8),_e===t.UNSIGNED_SHORT_4_4_4_4&&(Ne=t.RGBA4),_e===t.UNSIGNED_SHORT_5_5_5_1&&(Ne=t.RGB5_A1)}return(Ne===t.R16F||Ne===t.R32F||Ne===t.RG16F||Ne===t.RG32F||Ne===t.RGBA16F||Ne===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ne}function x(q,V){let _e;return q?V===null||V===ku||V===Qh?_e=t.DEPTH24_STENCIL8:V===Cs?_e=t.DEPTH32F_STENCIL8:V===tg&&(_e=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===ku||V===Qh?_e=t.DEPTH_COMPONENT24:V===Cs?_e=t.DEPTH_COMPONENT32F:V===tg&&(_e=t.DEPTH_COMPONENT16),_e}function w(q,V){return _(q)===!0||q.isFramebufferTexture&&q.minFilter!==sr&&q.minFilter!==Fi?Math.log2(Math.max(V.width,V.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?V.mipmaps.length:1}function P(q){const V=q.target;V.removeEventListener("dispose",P),D(V),V.isVideoTexture&&c.delete(V)}function A(q){const V=q.target;V.removeEventListener("dispose",A),H(V)}function D(q){const V=i.get(q);if(V.__webglInit===void 0)return;const _e=q.source,De=h.get(_e);if(De){const Ve=De[V.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&O(q),Object.keys(De).length===0&&h.delete(_e)}i.remove(q)}function O(q){const V=i.get(q);t.deleteTexture(V.__webglTexture);const _e=q.source,De=h.get(_e);delete De[V.__cacheKey],o.memory.textures--}function H(q){const V=i.get(q);if(q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(V.__webglFramebuffer[De]))for(let Ve=0;Ve<V.__webglFramebuffer[De].length;Ve++)t.deleteFramebuffer(V.__webglFramebuffer[De][Ve]);else t.deleteFramebuffer(V.__webglFramebuffer[De]);V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer[De])}else{if(Array.isArray(V.__webglFramebuffer))for(let De=0;De<V.__webglFramebuffer.length;De++)t.deleteFramebuffer(V.__webglFramebuffer[De]);else t.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&t.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let De=0;De<V.__webglColorRenderbuffer.length;De++)V.__webglColorRenderbuffer[De]&&t.deleteRenderbuffer(V.__webglColorRenderbuffer[De]);V.__webglDepthRenderbuffer&&t.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const _e=q.textures;for(let De=0,Ve=_e.length;De<Ve;De++){const Ne=i.get(_e[De]);Ne.__webglTexture&&(t.deleteTexture(Ne.__webglTexture),o.memory.textures--),i.remove(_e[De])}i.remove(q)}let E=0;function k(){E=0}function W(){const q=E;return q>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+r.maxTextures),E+=1,q}function G(q){const V=[];return V.push(q.wrapS),V.push(q.wrapT),V.push(q.wrapR||0),V.push(q.magFilter),V.push(q.minFilter),V.push(q.anisotropy),V.push(q.internalFormat),V.push(q.format),V.push(q.type),V.push(q.generateMipmaps),V.push(q.premultiplyAlpha),V.push(q.flipY),V.push(q.unpackAlignment),V.push(q.colorSpace),V.join()}function Y(q,V){const _e=i.get(q);if(q.isVideoTexture&&We(q),q.isRenderTargetTexture===!1&&q.version>0&&_e.__version!==q.version){const De=q.image;if(De===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(De.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ue(_e,q,V);return}}n.bindTexture(t.TEXTURE_2D,_e.__webglTexture,t.TEXTURE0+V)}function ie(q,V){const _e=i.get(q);if(q.version>0&&_e.__version!==q.version){Ue(_e,q,V);return}n.bindTexture(t.TEXTURE_2D_ARRAY,_e.__webglTexture,t.TEXTURE0+V)}function Q(q,V){const _e=i.get(q);if(q.version>0&&_e.__version!==q.version){Ue(_e,q,V);return}n.bindTexture(t.TEXTURE_3D,_e.__webglTexture,t.TEXTURE0+V)}function oe(q,V){const _e=i.get(q);if(q.version>0&&_e.__version!==q.version){he(_e,q,V);return}n.bindTexture(t.TEXTURE_CUBE_MAP,_e.__webglTexture,t.TEXTURE0+V)}const z={[Ov]:t.REPEAT,[zo]:t.CLAMP_TO_EDGE,[Uv]:t.MIRRORED_REPEAT},ee={[sr]:t.NEAREST,[N3]:t.NEAREST_MIPMAP_NEAREST,[Qp]:t.NEAREST_MIPMAP_LINEAR,[Fi]:t.LINEAR,[Iy]:t.LINEAR_MIPMAP_NEAREST,[al]:t.LINEAR_MIPMAP_LINEAR},te={[$j]:t.NEVER,[Yj]:t.ALWAYS,[Gj]:t.LESS,[j3]:t.LEQUAL,[Wj]:t.EQUAL,[Xj]:t.GEQUAL,[jj]:t.GREATER,[qj]:t.NOTEQUAL};function ce(q,V){if(V.type===Cs&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Fi||V.magFilter===Iy||V.magFilter===Qp||V.magFilter===al||V.minFilter===Fi||V.minFilter===Iy||V.minFilter===Qp||V.minFilter===al)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(q,t.TEXTURE_WRAP_S,z[V.wrapS]),t.texParameteri(q,t.TEXTURE_WRAP_T,z[V.wrapT]),(q===t.TEXTURE_3D||q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(q,t.TEXTURE_WRAP_R,z[V.wrapR]),t.texParameteri(q,t.TEXTURE_MAG_FILTER,ee[V.magFilter]),t.texParameteri(q,t.TEXTURE_MIN_FILTER,ee[V.minFilter]),V.compareFunction&&(t.texParameteri(q,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(q,t.TEXTURE_COMPARE_FUNC,te[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===sr||V.minFilter!==Qp&&V.minFilter!==al||V.type===Cs&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||i.get(V).__currentAnisotropy){const _e=e.get("EXT_texture_filter_anisotropic");t.texParameterf(q,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy}}}function Te(q,V){let _e=!1;q.__webglInit===void 0&&(q.__webglInit=!0,V.addEventListener("dispose",P));const De=V.source;let Ve=h.get(De);Ve===void 0&&(Ve={},h.set(De,Ve));const Ne=G(V);if(Ne!==q.__cacheKey){Ve[Ne]===void 0&&(Ve[Ne]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),Ve[Ne].usedTimes++;const dt=Ve[q.__cacheKey];dt!==void 0&&(Ve[q.__cacheKey].usedTimes--,dt.usedTimes===0&&O(V)),q.__cacheKey=Ne,q.__webglTexture=Ve[Ne].texture}return _e}function Ue(q,V,_e){let De=t.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(De=t.TEXTURE_2D_ARRAY),V.isData3DTexture&&(De=t.TEXTURE_3D);const Ve=Te(q,V),Ne=V.source;n.bindTexture(De,q.__webglTexture,t.TEXTURE0+_e);const dt=i.get(Ne);if(Ne.version!==dt.__version||Ve===!0){n.activeTexture(t.TEXTURE0+_e);const qe=bn.getPrimaries(bn.workingColorSpace),Qe=V.colorSpace===nu?null:bn.getPrimaries(V.colorSpace),Gt=V.colorSpace===nu||qe===Qe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,V.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,V.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gt);let Ke=v(V.image,!1,r.maxTextureSize);Ke=rt(V,Ke);const ut=s.convert(V.format,V.colorSpace),ct=s.convert(V.type);let Ot=S(V.internalFormat,ut,ct,V.colorSpace,V.isVideoTexture);ce(De,V);let ft;const de=V.mipmaps,$e=V.isVideoTexture!==!0,at=dt.__version===void 0||Ve===!0,ue=Ne.dataReady,nt=w(V,Ke);if(V.isDepthTexture)Ot=x(V.format===Zh,V.type),at&&($e?n.texStorage2D(t.TEXTURE_2D,1,Ot,Ke.width,Ke.height):n.texImage2D(t.TEXTURE_2D,0,Ot,Ke.width,Ke.height,0,ut,ct,null));else if(V.isDataTexture)if(de.length>0){$e&&at&&n.texStorage2D(t.TEXTURE_2D,nt,Ot,de[0].width,de[0].height);for(let Pe=0,Ye=de.length;Pe<Ye;Pe++)ft=de[Pe],$e?ue&&n.texSubImage2D(t.TEXTURE_2D,Pe,0,0,ft.width,ft.height,ut,ct,ft.data):n.texImage2D(t.TEXTURE_2D,Pe,Ot,ft.width,ft.height,0,ut,ct,ft.data);V.generateMipmaps=!1}else $e?(at&&n.texStorage2D(t.TEXTURE_2D,nt,Ot,Ke.width,Ke.height),ue&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ke.width,Ke.height,ut,ct,Ke.data)):n.texImage2D(t.TEXTURE_2D,0,Ot,Ke.width,Ke.height,0,ut,ct,Ke.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){$e&&at&&n.texStorage3D(t.TEXTURE_2D_ARRAY,nt,Ot,de[0].width,de[0].height,Ke.depth);for(let Pe=0,Ye=de.length;Pe<Ye;Pe++)if(ft=de[Pe],V.format!==Dr)if(ut!==null)if($e){if(ue)if(V.layerUpdates.size>0){const pt=YI(ft.width,ft.height,V.format,V.type);for(const mt of V.layerUpdates){const Vt=ft.data.subarray(mt*pt/ft.data.BYTES_PER_ELEMENT,(mt+1)*pt/ft.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Pe,0,0,mt,ft.width,ft.height,1,ut,Vt,0,0)}V.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Pe,0,0,0,ft.width,ft.height,Ke.depth,ut,ft.data,0,0)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Pe,Ot,ft.width,ft.height,Ke.depth,0,ft.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?ue&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Pe,0,0,0,ft.width,ft.height,Ke.depth,ut,ct,ft.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Pe,Ot,ft.width,ft.height,Ke.depth,0,ut,ct,ft.data)}else{$e&&at&&n.texStorage2D(t.TEXTURE_2D,nt,Ot,de[0].width,de[0].height);for(let Pe=0,Ye=de.length;Pe<Ye;Pe++)ft=de[Pe],V.format!==Dr?ut!==null?$e?ue&&n.compressedTexSubImage2D(t.TEXTURE_2D,Pe,0,0,ft.width,ft.height,ut,ft.data):n.compressedTexImage2D(t.TEXTURE_2D,Pe,Ot,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?ue&&n.texSubImage2D(t.TEXTURE_2D,Pe,0,0,ft.width,ft.height,ut,ct,ft.data):n.texImage2D(t.TEXTURE_2D,Pe,Ot,ft.width,ft.height,0,ut,ct,ft.data)}else if(V.isDataArrayTexture)if($e){if(at&&n.texStorage3D(t.TEXTURE_2D_ARRAY,nt,Ot,Ke.width,Ke.height,Ke.depth),ue)if(V.layerUpdates.size>0){const Pe=YI(Ke.width,Ke.height,V.format,V.type);for(const Ye of V.layerUpdates){const pt=Ke.data.subarray(Ye*Pe/Ke.data.BYTES_PER_ELEMENT,(Ye+1)*Pe/Ke.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ye,Ke.width,Ke.height,1,ut,ct,pt)}V.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,ut,ct,Ke.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ot,Ke.width,Ke.height,Ke.depth,0,ut,ct,Ke.data);else if(V.isData3DTexture)$e?(at&&n.texStorage3D(t.TEXTURE_3D,nt,Ot,Ke.width,Ke.height,Ke.depth),ue&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,ut,ct,Ke.data)):n.texImage3D(t.TEXTURE_3D,0,Ot,Ke.width,Ke.height,Ke.depth,0,ut,ct,Ke.data);else if(V.isFramebufferTexture){if(at)if($e)n.texStorage2D(t.TEXTURE_2D,nt,Ot,Ke.width,Ke.height);else{let Pe=Ke.width,Ye=Ke.height;for(let pt=0;pt<nt;pt++)n.texImage2D(t.TEXTURE_2D,pt,Ot,Pe,Ye,0,ut,ct,null),Pe>>=1,Ye>>=1}}else if(de.length>0){if($e&&at){const Pe=st(de[0]);n.texStorage2D(t.TEXTURE_2D,nt,Ot,Pe.width,Pe.height)}for(let Pe=0,Ye=de.length;Pe<Ye;Pe++)ft=de[Pe],$e?ue&&n.texSubImage2D(t.TEXTURE_2D,Pe,0,0,ut,ct,ft):n.texImage2D(t.TEXTURE_2D,Pe,Ot,ut,ct,ft);V.generateMipmaps=!1}else if($e){if(at){const Pe=st(Ke);n.texStorage2D(t.TEXTURE_2D,nt,Ot,Pe.width,Pe.height)}ue&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ut,ct,Ke)}else n.texImage2D(t.TEXTURE_2D,0,Ot,ut,ct,Ke);_(V)&&y(De),dt.__version=Ne.version,V.onUpdate&&V.onUpdate(V)}q.__version=V.version}function he(q,V,_e){if(V.image.length!==6)return;const De=Te(q,V),Ve=V.source;n.bindTexture(t.TEXTURE_CUBE_MAP,q.__webglTexture,t.TEXTURE0+_e);const Ne=i.get(Ve);if(Ve.version!==Ne.__version||De===!0){n.activeTexture(t.TEXTURE0+_e);const dt=bn.getPrimaries(bn.workingColorSpace),qe=V.colorSpace===nu?null:bn.getPrimaries(V.colorSpace),Qe=V.colorSpace===nu||dt===qe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,V.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,V.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qe);const Gt=V.isCompressedTexture||V.image[0].isCompressedTexture,Ke=V.image[0]&&V.image[0].isDataTexture,ut=[];for(let Ye=0;Ye<6;Ye++)!Gt&&!Ke?ut[Ye]=v(V.image[Ye],!0,r.maxCubemapSize):ut[Ye]=Ke?V.image[Ye].image:V.image[Ye],ut[Ye]=rt(V,ut[Ye]);const ct=ut[0],Ot=s.convert(V.format,V.colorSpace),ft=s.convert(V.type),de=S(V.internalFormat,Ot,ft,V.colorSpace),$e=V.isVideoTexture!==!0,at=Ne.__version===void 0||De===!0,ue=Ve.dataReady;let nt=w(V,ct);ce(t.TEXTURE_CUBE_MAP,V);let Pe;if(Gt){$e&&at&&n.texStorage2D(t.TEXTURE_CUBE_MAP,nt,de,ct.width,ct.height);for(let Ye=0;Ye<6;Ye++){Pe=ut[Ye].mipmaps;for(let pt=0;pt<Pe.length;pt++){const mt=Pe[pt];V.format!==Dr?Ot!==null?$e?ue&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt,0,0,mt.width,mt.height,Ot,mt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt,de,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt,0,0,mt.width,mt.height,Ot,ft,mt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt,de,mt.width,mt.height,0,Ot,ft,mt.data)}}}else{if(Pe=V.mipmaps,$e&&at){Pe.length>0&&nt++;const Ye=st(ut[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,nt,de,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(Ke){$e?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,ut[Ye].width,ut[Ye].height,Ot,ft,ut[Ye].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,de,ut[Ye].width,ut[Ye].height,0,Ot,ft,ut[Ye].data);for(let pt=0;pt<Pe.length;pt++){const Vt=Pe[pt].image[Ye].image;$e?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt+1,0,0,Vt.width,Vt.height,Ot,ft,Vt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt+1,de,Vt.width,Vt.height,0,Ot,ft,Vt.data)}}else{$e?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,Ot,ft,ut[Ye]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,de,Ot,ft,ut[Ye]);for(let pt=0;pt<Pe.length;pt++){const mt=Pe[pt];$e?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt+1,0,0,Ot,ft,mt.image[Ye]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,pt+1,de,Ot,ft,mt.image[Ye])}}}_(V)&&y(t.TEXTURE_CUBE_MAP),Ne.__version=Ve.version,V.onUpdate&&V.onUpdate(V)}q.__version=V.version}function xe(q,V,_e,De,Ve,Ne){const dt=s.convert(_e.format,_e.colorSpace),qe=s.convert(_e.type),Qe=S(_e.internalFormat,dt,qe,_e.colorSpace);if(!i.get(V).__hasExternalTextures){const Ke=Math.max(1,V.width>>Ne),ut=Math.max(1,V.height>>Ne);Ve===t.TEXTURE_3D||Ve===t.TEXTURE_2D_ARRAY?n.texImage3D(Ve,Ne,Qe,Ke,ut,V.depth,0,dt,qe,null):n.texImage2D(Ve,Ne,Qe,Ke,ut,0,dt,qe,null)}n.bindFramebuffer(t.FRAMEBUFFER,q),Be(V)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,De,Ve,i.get(_e).__webglTexture,0,Re(V)):(Ve===t.TEXTURE_2D||Ve>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ve<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,De,Ve,i.get(_e).__webglTexture,Ne),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Fe(q,V,_e){if(t.bindRenderbuffer(t.RENDERBUFFER,q),V.depthBuffer){const De=V.depthTexture,Ve=De&&De.isDepthTexture?De.type:null,Ne=x(V.stencilBuffer,Ve),dt=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,qe=Re(V);Be(V)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,qe,Ne,V.width,V.height):_e?t.renderbufferStorageMultisample(t.RENDERBUFFER,qe,Ne,V.width,V.height):t.renderbufferStorage(t.RENDERBUFFER,Ne,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,dt,t.RENDERBUFFER,q)}else{const De=V.textures;for(let Ve=0;Ve<De.length;Ve++){const Ne=De[Ve],dt=s.convert(Ne.format,Ne.colorSpace),qe=s.convert(Ne.type),Qe=S(Ne.internalFormat,dt,qe,Ne.colorSpace),Gt=Re(V);_e&&Be(V)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Gt,Qe,V.width,V.height):Be(V)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Gt,Qe,V.width,V.height):t.renderbufferStorage(t.RENDERBUFFER,Qe,V.width,V.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function He(q,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,q),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),Y(V.depthTexture,0);const De=i.get(V.depthTexture).__webglTexture,Ve=Re(V);if(V.depthTexture.format===Nh)Be(V)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0,Ve):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0);else if(V.depthTexture.format===Zh)Be(V)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0,Ve):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function ot(q){const V=i.get(q),_e=q.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==q.depthTexture){const De=q.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),De){const Ve=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,De.removeEventListener("dispose",Ve)};De.addEventListener("dispose",Ve),V.__depthDisposeCallback=Ve}V.__boundDepthTexture=De}if(q.depthTexture&&!V.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");He(V.__webglFramebuffer,q)}else if(_e){V.__webglDepthbuffer=[];for(let De=0;De<6;De++)if(n.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer[De]),V.__webglDepthbuffer[De]===void 0)V.__webglDepthbuffer[De]=t.createRenderbuffer(),Fe(V.__webglDepthbuffer[De],q,!1);else{const Ve=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=V.__webglDepthbuffer[De];t.bindRenderbuffer(t.RENDERBUFFER,Ne),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ve,t.RENDERBUFFER,Ne)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=t.createRenderbuffer(),Fe(V.__webglDepthbuffer,q,!1);else{const De=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ve=V.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Ve),t.framebufferRenderbuffer(t.FRAMEBUFFER,De,t.RENDERBUFFER,Ve)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ae(q,V,_e){const De=i.get(q);V!==void 0&&xe(De.__webglFramebuffer,q,q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),_e!==void 0&&ot(q)}function Ge(q){const V=q.texture,_e=i.get(q),De=i.get(V);q.addEventListener("dispose",A);const Ve=q.textures,Ne=q.isWebGLCubeRenderTarget===!0,dt=Ve.length>1;if(dt||(De.__webglTexture===void 0&&(De.__webglTexture=t.createTexture()),De.__version=V.version,o.memory.textures++),Ne){_e.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(V.mipmaps&&V.mipmaps.length>0){_e.__webglFramebuffer[qe]=[];for(let Qe=0;Qe<V.mipmaps.length;Qe++)_e.__webglFramebuffer[qe][Qe]=t.createFramebuffer()}else _e.__webglFramebuffer[qe]=t.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){_e.__webglFramebuffer=[];for(let qe=0;qe<V.mipmaps.length;qe++)_e.__webglFramebuffer[qe]=t.createFramebuffer()}else _e.__webglFramebuffer=t.createFramebuffer();if(dt)for(let qe=0,Qe=Ve.length;qe<Qe;qe++){const Gt=i.get(Ve[qe]);Gt.__webglTexture===void 0&&(Gt.__webglTexture=t.createTexture(),o.memory.textures++)}if(q.samples>0&&Be(q)===!1){_e.__webglMultisampledFramebuffer=t.createFramebuffer(),_e.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let qe=0;qe<Ve.length;qe++){const Qe=Ve[qe];_e.__webglColorRenderbuffer[qe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,_e.__webglColorRenderbuffer[qe]);const Gt=s.convert(Qe.format,Qe.colorSpace),Ke=s.convert(Qe.type),ut=S(Qe.internalFormat,Gt,Ke,Qe.colorSpace,q.isXRRenderTarget===!0),ct=Re(q);t.renderbufferStorageMultisample(t.RENDERBUFFER,ct,ut,q.width,q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+qe,t.RENDERBUFFER,_e.__webglColorRenderbuffer[qe])}t.bindRenderbuffer(t.RENDERBUFFER,null),q.depthBuffer&&(_e.__webglDepthRenderbuffer=t.createRenderbuffer(),Fe(_e.__webglDepthRenderbuffer,q,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ne){n.bindTexture(t.TEXTURE_CUBE_MAP,De.__webglTexture),ce(t.TEXTURE_CUBE_MAP,V);for(let qe=0;qe<6;qe++)if(V.mipmaps&&V.mipmaps.length>0)for(let Qe=0;Qe<V.mipmaps.length;Qe++)xe(_e.__webglFramebuffer[qe][Qe],q,V,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Qe);else xe(_e.__webglFramebuffer[qe],q,V,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);_(V)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(dt){for(let qe=0,Qe=Ve.length;qe<Qe;qe++){const Gt=Ve[qe],Ke=i.get(Gt);n.bindTexture(t.TEXTURE_2D,Ke.__webglTexture),ce(t.TEXTURE_2D,Gt),xe(_e.__webglFramebuffer,q,Gt,t.COLOR_ATTACHMENT0+qe,t.TEXTURE_2D,0),_(Gt)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let qe=t.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(qe=q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(qe,De.__webglTexture),ce(qe,V),V.mipmaps&&V.mipmaps.length>0)for(let Qe=0;Qe<V.mipmaps.length;Qe++)xe(_e.__webglFramebuffer[Qe],q,V,t.COLOR_ATTACHMENT0,qe,Qe);else xe(_e.__webglFramebuffer,q,V,t.COLOR_ATTACHMENT0,qe,0);_(V)&&y(qe),n.unbindTexture()}q.depthBuffer&&ot(q)}function Le(q){const V=q.textures;for(let _e=0,De=V.length;_e<De;_e++){const Ve=V[_e];if(_(Ve)){const Ne=q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,dt=i.get(Ve).__webglTexture;n.bindTexture(Ne,dt),y(Ne),n.unbindTexture()}}}const le=[],j=[];function Me(q){if(q.samples>0){if(Be(q)===!1){const V=q.textures,_e=q.width,De=q.height;let Ve=t.COLOR_BUFFER_BIT;const Ne=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,dt=i.get(q),qe=V.length>1;if(qe)for(let Qe=0;Qe<V.length;Qe++)n.bindFramebuffer(t.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Qe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,dt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Qe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let Qe=0;Qe<V.length;Qe++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(Ve|=t.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(Ve|=t.STENCIL_BUFFER_BIT)),qe){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,dt.__webglColorRenderbuffer[Qe]);const Gt=i.get(V[Qe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Gt,0)}t.blitFramebuffer(0,0,_e,De,0,0,_e,De,Ve,t.NEAREST),l===!0&&(le.length=0,j.length=0,le.push(t.COLOR_ATTACHMENT0+Qe),q.depthBuffer&&q.resolveDepthBuffer===!1&&(le.push(Ne),j.push(Ne),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,j)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,le))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),qe)for(let Qe=0;Qe<V.length;Qe++){n.bindFramebuffer(t.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Qe,t.RENDERBUFFER,dt.__webglColorRenderbuffer[Qe]);const Gt=i.get(V[Qe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,dt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Qe,t.TEXTURE_2D,Gt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&l){const V=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[V])}}}function Re(q){return Math.min(r.maxSamples,q.samples)}function Be(q){const V=i.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function We(q){const V=o.render.frame;c.get(q)!==V&&(c.set(q,V),q.update())}function rt(q,V){const _e=q.colorSpace,De=q.format,Ve=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||_e!==Fu&&_e!==nu&&(bn.getTransfer(_e)===Vn?(De!==Dr||Ve!==Ia)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_e)),V}function st(q){return typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement?(u.width=q.naturalWidth||q.width,u.height=q.naturalHeight||q.height):typeof VideoFrame<"u"&&q instanceof VideoFrame?(u.width=q.displayWidth,u.height=q.displayHeight):(u.width=q.width,u.height=q.height),u}this.allocateTextureUnit=W,this.resetTextureUnits=k,this.setTexture2D=Y,this.setTexture2DArray=ie,this.setTexture3D=Q,this.setTextureCube=oe,this.rebindTextures=Ae,this.setupRenderTarget=Ge,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=ot,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Be}function cq(t,e){function n(i,r=nu){let s;const o=bn.getTransfer(r);if(i===Ia)return t.UNSIGNED_BYTE;if(i===Xw)return t.UNSIGNED_SHORT_4_4_4_4;if(i===Yw)return t.UNSIGNED_SHORT_5_5_5_1;if(i===F3)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===O3)return t.BYTE;if(i===U3)return t.SHORT;if(i===tg)return t.UNSIGNED_SHORT;if(i===qw)return t.INT;if(i===ku)return t.UNSIGNED_INT;if(i===Cs)return t.FLOAT;if(i===bg)return t.HALF_FLOAT;if(i===B3)return t.ALPHA;if(i===z3)return t.RGB;if(i===Dr)return t.RGBA;if(i===H3)return t.LUMINANCE;if(i===V3)return t.LUMINANCE_ALPHA;if(i===Nh)return t.DEPTH_COMPONENT;if(i===Zh)return t.DEPTH_STENCIL;if(i===Kw)return t.RED;if(i===D_)return t.RED_INTEGER;if(i===$3)return t.RG;if(i===Qw)return t.RG_INTEGER;if(i===Zw)return t.RGBA_INTEGER;if(i===Ry||i===Dy||i===ky||i===Ly)if(o===Vn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Ry)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Dy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ky)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Ly)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Ry)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Dy)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ky)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Ly)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Cb||i===Ab||i===Mb||i===Pb)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Cb)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ab)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Mb)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Pb)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Ib||i===Rb||i===Db)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Ib||i===Rb)return o===Vn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Db)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===kb||i===Lb||i===Nb||i===Ob||i===Ub||i===Fb||i===Bb||i===zb||i===Hb||i===Vb||i===$b||i===Gb||i===Wb||i===jb)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===kb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Lb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Nb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Ob)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Ub)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Fb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Bb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===zb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Hb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Vb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===$b)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Gb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Wb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===jb)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Ny||i===qb||i===Xb)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Ny)return o===Vn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===qb)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Xb)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===G3||i===Yb||i===Kb||i===Qb)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Ny)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Yb)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Kb)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Qb)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Qh?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}class dq extends oi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class em extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const KEe={type:"move"};class iM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new em,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new em,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new em,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const _=n.getJointPose(v,i),y=this._getHandJoint(u,v);_!==null&&(y.matrix.fromArray(_.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=_.radius),y.visible=_!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],h=c.position.distanceTo(d.position),m=.02,g=.005;u.inputState.pinching&&h>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(KEe)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new em;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}const QEe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ZEe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class JEe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const r=new hi,s=e.properties.get(r);s.__webglTexture=n.texture,(n.depthNear!=i.depthNear||n.depthFar!=i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new Da({vertexShader:QEe,fragmentShader:ZEe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Bi(new wg(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eCe extends Ua{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,d=null,h=null,m=null,g=null;const v=new JEe,_=n.getContextAttributes();let y=null,S=null;const x=[],w=[],P=new je;let A=null;const D=new oi;D.layers.enable(1),D.viewport=new yn;const O=new oi;O.layers.enable(2),O.viewport=new yn;const H=[D,O],E=new dq;E.layers.enable(1),E.layers.enable(2);let k=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let xe=x[he];return xe===void 0&&(xe=new iM,x[he]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(he){let xe=x[he];return xe===void 0&&(xe=new iM,x[he]=xe),xe.getGripSpace()},this.getHand=function(he){let xe=x[he];return xe===void 0&&(xe=new iM,x[he]=xe),xe.getHandSpace()};function G(he){const xe=w.indexOf(he.inputSource);if(xe===-1)return;const Fe=x[xe];Fe!==void 0&&(Fe.update(he.inputSource,he.frame,u||o),Fe.dispatchEvent({type:he.type,data:he.inputSource}))}function Y(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",Y),r.removeEventListener("inputsourceschange",ie);for(let he=0;he<x.length;he++){const xe=w[he];xe!==null&&(w[he]=null,x[he].disconnect(xe))}k=null,W=null,v.reset(),e.setRenderTarget(y),m=null,h=null,d=null,r=null,S=null,Ue.stop(),i.isPresenting=!1,e.setPixelRatio(A),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){a=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(he){u=he},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",Y),r.addEventListener("inputsourceschange",ie),_.xrCompatible!==!0&&await n.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0){const xe={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,n,xe),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new Ra(m.framebufferWidth,m.framebufferHeight,{format:Dr,type:Ia,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let xe=null,Fe=null,He=null;_.depth&&(He=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,xe=_.stencil?Zh:Nh,Fe=_.stencil?Qh:ku);const ot={colorFormat:n.RGBA8,depthFormat:He,scaleFactor:s};d=new XRWebGLBinding(r,n),h=d.createProjectionLayer(ot),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),S=new Ra(h.textureWidth,h.textureHeight,{format:Dr,type:Ia,depthTexture:new Z3(h.textureWidth,h.textureHeight,Fe,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Ue.setContext(r),Ue.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function ie(he){for(let xe=0;xe<he.removed.length;xe++){const Fe=he.removed[xe],He=w.indexOf(Fe);He>=0&&(w[He]=null,x[He].disconnect(Fe))}for(let xe=0;xe<he.added.length;xe++){const Fe=he.added[xe];let He=w.indexOf(Fe);if(He===-1){for(let Ae=0;Ae<x.length;Ae++)if(Ae>=w.length){w.push(Fe),He=Ae;break}else if(w[Ae]===null){w[Ae]=Fe,He=Ae;break}if(He===-1)break}const ot=x[He];ot&&ot.connect(Fe)}}const Q=new J,oe=new J;function z(he,xe,Fe){Q.setFromMatrixPosition(xe.matrixWorld),oe.setFromMatrixPosition(Fe.matrixWorld);const He=Q.distanceTo(oe),ot=xe.projectionMatrix.elements,Ae=Fe.projectionMatrix.elements,Ge=ot[14]/(ot[10]-1),Le=ot[14]/(ot[10]+1),le=(ot[9]+1)/ot[5],j=(ot[9]-1)/ot[5],Me=(ot[8]-1)/ot[0],Re=(Ae[8]+1)/Ae[0],Be=Ge*Me,We=Ge*Re,rt=He/(-Me+Re),st=rt*-Me;if(xe.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(st),he.translateZ(rt),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),ot[10]===-1)he.projectionMatrix.copy(xe.projectionMatrix),he.projectionMatrixInverse.copy(xe.projectionMatrixInverse);else{const q=Ge+rt,V=Le+rt,_e=Be-st,De=We+(He-st),Ve=le*Le/V*q,Ne=j*Le/V*q;he.projectionMatrix.makePerspective(_e,De,Ve,Ne,q,V),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function ee(he,xe){xe===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(xe.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;let xe=he.near,Fe=he.far;v.texture!==null&&(v.depthNear>0&&(xe=v.depthNear),v.depthFar>0&&(Fe=v.depthFar)),E.near=O.near=D.near=xe,E.far=O.far=D.far=Fe,(k!==E.near||W!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),k=E.near,W=E.far);const He=he.parent,ot=E.cameras;ee(E,He);for(let Ae=0;Ae<ot.length;Ae++)ee(ot[Ae],He);ot.length===2?z(E,D,O):E.projectionMatrix.copy(D.projectionMatrix),te(he,E,He)};function te(he,xe,Fe){Fe===null?he.matrix.copy(xe.matrixWorld):(he.matrix.copy(Fe.matrixWorld),he.matrix.invert(),he.matrix.multiply(xe.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(xe.projectionMatrix),he.projectionMatrixInverse.copy(xe.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=ng*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(h===null&&m===null))return l},this.setFoveation=function(he){l=he,h!==null&&(h.fixedFoveation=he),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=he)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(E)};let ce=null;function Te(he,xe){if(c=xe.getViewerPose(u||o),g=xe,c!==null){const Fe=c.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let He=!1;Fe.length!==E.cameras.length&&(E.cameras.length=0,He=!0);for(let Ae=0;Ae<Fe.length;Ae++){const Ge=Fe[Ae];let Le=null;if(m!==null)Le=m.getViewport(Ge);else{const j=d.getViewSubImage(h,Ge);Le=j.viewport,Ae===0&&(e.setRenderTargetTextures(S,j.colorTexture,h.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(S))}let le=H[Ae];le===void 0&&(le=new oi,le.layers.enable(Ae),le.viewport=new yn,H[Ae]=le),le.matrix.fromArray(Ge.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(Ge.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(Le.x,Le.y,Le.width,Le.height),Ae===0&&(E.matrix.copy(le.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),He===!0&&E.cameras.push(le)}const ot=r.enabledFeatures;if(ot&&ot.includes("depth-sensing")){const Ae=d.getDepthInformation(Fe[0]);Ae&&Ae.isValid&&Ae.texture&&v.init(e,Ae,r.renderState)}}for(let Fe=0;Fe<x.length;Fe++){const He=w[Fe],ot=x[Fe];He!==null&&ot!==void 0&&ot.update(He,xe,u||o)}ce&&ce(he,xe),xe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:xe}),g=null}const Ue=new sq;Ue.setAnimationLoop(Te),this.setAnimationLoop=function(he){ce=he},this.dispose=function(){}}}const qd=new ho,tCe=new zt;function nCe(t,e){function n(_,y){_.matrixAutoUpdate===!0&&_.updateMatrix(),y.value.copy(_.matrix)}function i(_,y){y.color.getRGB(_.fogColor.value,tq(t)),y.isFog?(_.fogNear.value=y.near,_.fogFar.value=y.far):y.isFogExp2&&(_.fogDensity.value=y.density)}function r(_,y,S,x,w){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(_,y):y.isMeshToonMaterial?(s(_,y),d(_,y)):y.isMeshPhongMaterial?(s(_,y),c(_,y)):y.isMeshStandardMaterial?(s(_,y),h(_,y),y.isMeshPhysicalMaterial&&m(_,y,w)):y.isMeshMatcapMaterial?(s(_,y),g(_,y)):y.isMeshDepthMaterial?s(_,y):y.isMeshDistanceMaterial?(s(_,y),v(_,y)):y.isMeshNormalMaterial?s(_,y):y.isLineBasicMaterial?(o(_,y),y.isLineDashedMaterial&&a(_,y)):y.isPointsMaterial?l(_,y,S,x):y.isSpriteMaterial?u(_,y):y.isShadowMaterial?(_.color.value.copy(y.color),_.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(_,y){_.opacity.value=y.opacity,y.color&&_.diffuse.value.copy(y.color),y.emissive&&_.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(_.map.value=y.map,n(y.map,_.mapTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,n(y.alphaMap,_.alphaMapTransform)),y.bumpMap&&(_.bumpMap.value=y.bumpMap,n(y.bumpMap,_.bumpMapTransform),_.bumpScale.value=y.bumpScale,y.side===ns&&(_.bumpScale.value*=-1)),y.normalMap&&(_.normalMap.value=y.normalMap,n(y.normalMap,_.normalMapTransform),_.normalScale.value.copy(y.normalScale),y.side===ns&&_.normalScale.value.negate()),y.displacementMap&&(_.displacementMap.value=y.displacementMap,n(y.displacementMap,_.displacementMapTransform),_.displacementScale.value=y.displacementScale,_.displacementBias.value=y.displacementBias),y.emissiveMap&&(_.emissiveMap.value=y.emissiveMap,n(y.emissiveMap,_.emissiveMapTransform)),y.specularMap&&(_.specularMap.value=y.specularMap,n(y.specularMap,_.specularMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest);const S=e.get(y),x=S.envMap,w=S.envMapRotation;x&&(_.envMap.value=x,qd.copy(w),qd.x*=-1,qd.y*=-1,qd.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(qd.y*=-1,qd.z*=-1),_.envMapRotation.value.setFromMatrix4(tCe.makeRotationFromEuler(qd)),_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=y.reflectivity,_.ior.value=y.ior,_.refractionRatio.value=y.refractionRatio),y.lightMap&&(_.lightMap.value=y.lightMap,_.lightMapIntensity.value=y.lightMapIntensity,n(y.lightMap,_.lightMapTransform)),y.aoMap&&(_.aoMap.value=y.aoMap,_.aoMapIntensity.value=y.aoMapIntensity,n(y.aoMap,_.aoMapTransform))}function o(_,y){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,y.map&&(_.map.value=y.map,n(y.map,_.mapTransform))}function a(_,y){_.dashSize.value=y.dashSize,_.totalSize.value=y.dashSize+y.gapSize,_.scale.value=y.scale}function l(_,y,S,x){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,_.size.value=y.size*S,_.scale.value=x*.5,y.map&&(_.map.value=y.map,n(y.map,_.uvTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,n(y.alphaMap,_.alphaMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest)}function u(_,y){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,_.rotation.value=y.rotation,y.map&&(_.map.value=y.map,n(y.map,_.mapTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,n(y.alphaMap,_.alphaMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest)}function c(_,y){_.specular.value.copy(y.specular),_.shininess.value=Math.max(y.shininess,1e-4)}function d(_,y){y.gradientMap&&(_.gradientMap.value=y.gradientMap)}function h(_,y){_.metalness.value=y.metalness,y.metalnessMap&&(_.metalnessMap.value=y.metalnessMap,n(y.metalnessMap,_.metalnessMapTransform)),_.roughness.value=y.roughness,y.roughnessMap&&(_.roughnessMap.value=y.roughnessMap,n(y.roughnessMap,_.roughnessMapTransform)),y.envMap&&(_.envMapIntensity.value=y.envMapIntensity)}function m(_,y,S){_.ior.value=y.ior,y.sheen>0&&(_.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),_.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(_.sheenColorMap.value=y.sheenColorMap,n(y.sheenColorMap,_.sheenColorMapTransform)),y.sheenRoughnessMap&&(_.sheenRoughnessMap.value=y.sheenRoughnessMap,n(y.sheenRoughnessMap,_.sheenRoughnessMapTransform))),y.clearcoat>0&&(_.clearcoat.value=y.clearcoat,_.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(_.clearcoatMap.value=y.clearcoatMap,n(y.clearcoatMap,_.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,n(y.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(_.clearcoatNormalMap.value=y.clearcoatNormalMap,n(y.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===ns&&_.clearcoatNormalScale.value.negate())),y.dispersion>0&&(_.dispersion.value=y.dispersion),y.iridescence>0&&(_.iridescence.value=y.iridescence,_.iridescenceIOR.value=y.iridescenceIOR,_.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(_.iridescenceMap.value=y.iridescenceMap,n(y.iridescenceMap,_.iridescenceMapTransform)),y.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=y.iridescenceThicknessMap,n(y.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),y.transmission>0&&(_.transmission.value=y.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),y.transmissionMap&&(_.transmissionMap.value=y.transmissionMap,n(y.transmissionMap,_.transmissionMapTransform)),_.thickness.value=y.thickness,y.thicknessMap&&(_.thicknessMap.value=y.thicknessMap,n(y.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=y.attenuationDistance,_.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(_.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(_.anisotropyMap.value=y.anisotropyMap,n(y.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=y.specularIntensity,_.specularColor.value.copy(y.specularColor),y.specularColorMap&&(_.specularColorMap.value=y.specularColorMap,n(y.specularColorMap,_.specularColorMapTransform)),y.specularIntensityMap&&(_.specularIntensityMap.value=y.specularIntensityMap,n(y.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,y){y.matcap&&(_.matcap.value=y.matcap)}function v(_,y){const S=e.get(y).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function iCe(t,e,n,i){let r={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,x){const w=x.program;i.uniformBlockBinding(S,w)}function u(S,x){let w=r[S.id];w===void 0&&(g(S),w=c(S),r[S.id]=w,S.addEventListener("dispose",_));const P=x.program;i.updateUBOMapping(S,P);const A=e.render.frame;s[S.id]!==A&&(h(S),s[S.id]=A)}function c(S){const x=d();S.__bindingPointIndex=x;const w=t.createBuffer(),P=S.__size,A=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,w),t.bufferData(t.UNIFORM_BUFFER,P,A),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,x,w),w}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(S){const x=r[S.id],w=S.uniforms,P=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,x);for(let A=0,D=w.length;A<D;A++){const O=Array.isArray(w[A])?w[A]:[w[A]];for(let H=0,E=O.length;H<E;H++){const k=O[H];if(m(k,A,H,P)===!0){const W=k.__offset,G=Array.isArray(k.value)?k.value:[k.value];let Y=0;for(let ie=0;ie<G.length;ie++){const Q=G[ie],oe=v(Q);typeof Q=="number"||typeof Q=="boolean"?(k.__data[0]=Q,t.bufferSubData(t.UNIFORM_BUFFER,W+Y,k.__data)):Q.isMatrix3?(k.__data[0]=Q.elements[0],k.__data[1]=Q.elements[1],k.__data[2]=Q.elements[2],k.__data[3]=0,k.__data[4]=Q.elements[3],k.__data[5]=Q.elements[4],k.__data[6]=Q.elements[5],k.__data[7]=0,k.__data[8]=Q.elements[6],k.__data[9]=Q.elements[7],k.__data[10]=Q.elements[8],k.__data[11]=0):(Q.toArray(k.__data,Y),Y+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,W,k.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(S,x,w,P){const A=S.value,D=x+"_"+w;if(P[D]===void 0)return typeof A=="number"||typeof A=="boolean"?P[D]=A:P[D]=A.clone(),!0;{const O=P[D];if(typeof A=="number"||typeof A=="boolean"){if(O!==A)return P[D]=A,!0}else if(O.equals(A)===!1)return O.copy(A),!0}return!1}function g(S){const x=S.uniforms;let w=0;const P=16;for(let D=0,O=x.length;D<O;D++){const H=Array.isArray(x[D])?x[D]:[x[D]];for(let E=0,k=H.length;E<k;E++){const W=H[E],G=Array.isArray(W.value)?W.value:[W.value];for(let Y=0,ie=G.length;Y<ie;Y++){const Q=G[Y],oe=v(Q),z=w%P,ee=z%oe.boundary,te=z+ee;w+=ee,te!==0&&P-te<oe.storage&&(w+=P-te),W.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=w,w+=oe.storage}}}const A=w%P;return A>0&&(w+=P-A),S.__size=w,S.__cache={},this}function v(S){const x={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(x.boundary=4,x.storage=4):S.isVector2?(x.boundary=8,x.storage=8):S.isVector3||S.isColor?(x.boundary=16,x.storage=12):S.isVector4?(x.boundary=16,x.storage=16):S.isMatrix3?(x.boundary=48,x.storage=48):S.isMatrix4?(x.boundary=64,x.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),x}function _(S){const x=S.target;x.removeEventListener("dispose",_);const w=o.indexOf(x.__bindingPointIndex);o.splice(w,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function y(){for(const S in r)t.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:u,dispose:y}}class hq{constructor(e={}){const{canvas:n=Qj(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const m=new Uint32Array(4),g=new Int32Array(4);let v=null,_=null;const y=[],S=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Zs,this.toneMapping=yl,this.toneMappingExposure=1;const x=this;let w=!1,P=0,A=0,D=null,O=-1,H=null;const E=new yn,k=new yn;let W=null;const G=new xt(0);let Y=0,ie=n.width,Q=n.height,oe=1,z=null,ee=null;const te=new yn(0,0,ie,Q),ce=new yn(0,0,ie,Q);let Te=!1;const Ue=new O_;let he=!1,xe=!1;const Fe=new zt,He=new zt,ot=new J,Ae=new yn,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function le(){return D===null?oe:1}let j=i;function Me(X,me){return n.getContext(X,me)}try{const X={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Gw}`),n.addEventListener("webglcontextlost",Ye,!1),n.addEventListener("webglcontextrestored",pt,!1),n.addEventListener("webglcontextcreationerror",mt,!1),j===null){const me="webgl2";if(j=Me(me,X),j===null)throw Me(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(X){throw console.error("THREE.WebGLRenderer: "+X.message),X}let Re,Be,We,rt,st,q,V,_e,De,Ve,Ne,dt,qe,Qe,Gt,Ke,ut,ct,Ot,ft,de,$e,at,ue;function nt(){Re=new uwe(j),Re.init(),$e=new cq(j,Re),Be=new iwe(j,Re,e,$e),We=new $Ee(j),Be.reverseDepthBuffer&&We.buffers.depth.setReversed(!0),rt=new hwe(j),st=new IEe,q=new YEe(j,Re,We,st,Be,$e,rt),V=new swe(x),_e=new lwe(x),De=new _Te(j),at=new twe(j,De),Ve=new cwe(j,De,rt,at),Ne=new pwe(j,Ve,De,rt),Ot=new fwe(j,Be,q),Ke=new rwe(st),dt=new PEe(x,V,_e,Re,Be,at,Ke),qe=new nCe(x,st),Qe=new DEe,Gt=new FEe(Re),ct=new ewe(x,V,_e,We,Ne,h,l),ut=new HEe(x,Ne,Be),ue=new iCe(j,rt,Be,We),ft=new nwe(j,Re,rt),de=new dwe(j,Re,rt),rt.programs=dt.programs,x.capabilities=Be,x.extensions=Re,x.properties=st,x.renderLists=Qe,x.shadowMap=ut,x.state=We,x.info=rt}nt();const Pe=new eCe(x,j);this.xr=Pe,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const X=Re.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){const X=Re.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(X){X!==void 0&&(oe=X,this.setSize(ie,Q,!1))},this.getSize=function(X){return X.set(ie,Q)},this.setSize=function(X,me,we=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ie=X,Q=me,n.width=Math.floor(X*oe),n.height=Math.floor(me*oe),we===!0&&(n.style.width=X+"px",n.style.height=me+"px"),this.setViewport(0,0,X,me)},this.getDrawingBufferSize=function(X){return X.set(ie*oe,Q*oe).floor()},this.setDrawingBufferSize=function(X,me,we){ie=X,Q=me,oe=we,n.width=Math.floor(X*we),n.height=Math.floor(me*we),this.setViewport(0,0,X,me)},this.getCurrentViewport=function(X){return X.copy(E)},this.getViewport=function(X){return X.copy(te)},this.setViewport=function(X,me,we,Se){X.isVector4?te.set(X.x,X.y,X.z,X.w):te.set(X,me,we,Se),We.viewport(E.copy(te).multiplyScalar(oe).round())},this.getScissor=function(X){return X.copy(ce)},this.setScissor=function(X,me,we,Se){X.isVector4?ce.set(X.x,X.y,X.z,X.w):ce.set(X,me,we,Se),We.scissor(k.copy(ce).multiplyScalar(oe).round())},this.getScissorTest=function(){return Te},this.setScissorTest=function(X){We.setScissorTest(Te=X)},this.setOpaqueSort=function(X){z=X},this.setTransparentSort=function(X){ee=X},this.getClearColor=function(X){return X.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(X=!0,me=!0,we=!0){let Se=0;if(X){let ye=!1;if(D!==null){const tt=D.texture.format;ye=tt===Zw||tt===Qw||tt===D_}if(ye){const tt=D.texture.type,yt=tt===Ia||tt===ku||tt===tg||tt===Qh||tt===Xw||tt===Yw,St=ct.getClearColor(),Tt=ct.getClearAlpha(),Dt=St.r,kt=St.g,At=St.b;yt?(m[0]=Dt,m[1]=kt,m[2]=At,m[3]=Tt,j.clearBufferuiv(j.COLOR,0,m)):(g[0]=Dt,g[1]=kt,g[2]=At,g[3]=Tt,j.clearBufferiv(j.COLOR,0,g))}else Se|=j.COLOR_BUFFER_BIT}me&&(Se|=j.DEPTH_BUFFER_BIT,j.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),we&&(Se|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ye,!1),n.removeEventListener("webglcontextrestored",pt,!1),n.removeEventListener("webglcontextcreationerror",mt,!1),Qe.dispose(),Gt.dispose(),st.dispose(),V.dispose(),_e.dispose(),Ne.dispose(),at.dispose(),ue.dispose(),dt.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",gf),Pe.removeEventListener("sessionend",yf),go.stop()};function Ye(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const X=rt.autoReset,me=ut.enabled,we=ut.autoUpdate,Se=ut.needsUpdate,ye=ut.type;nt(),rt.autoReset=X,ut.enabled=me,ut.autoUpdate=we,ut.needsUpdate=Se,ut.type=ye}function mt(X){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",X.statusMessage)}function Vt(X){const me=X.target;me.removeEventListener("dispose",Vt),dn(me)}function dn(X){jn(X),st.remove(X)}function jn(X){const me=st.get(X).programs;me!==void 0&&(me.forEach(function(we){dt.releaseProgram(we)}),X.isShaderMaterial&&dt.releaseShaderCache(X))}this.renderBufferDirect=function(X,me,we,Se,ye,tt){me===null&&(me=Ge);const yt=ye.isMesh&&ye.matrixWorld.determinant()<0,St=En(X,me,we,Se,ye);We.setMaterial(Se,yt);let Tt=we.index,Dt=1;if(Se.wireframe===!0){if(Tt=Ve.getWireframeAttribute(we),Tt===void 0)return;Dt=2}const kt=we.drawRange,At=we.attributes.position;let cn=kt.start*Dt,hn=(kt.start+kt.count)*Dt;tt!==null&&(cn=Math.max(cn,tt.start*Dt),hn=Math.min(hn,(tt.start+tt.count)*Dt)),Tt!==null?(cn=Math.max(cn,0),hn=Math.min(hn,Tt.count)):At!=null&&(cn=Math.max(cn,0),hn=Math.min(hn,At.count));const pn=hn-cn;if(pn<0||pn===1/0)return;at.setup(ye,Se,St,we,Tt);let jt,Mt=ft;if(Tt!==null&&(jt=De.get(Tt),Mt=de,Mt.setIndex(jt)),ye.isMesh)Se.wireframe===!0?(We.setLineWidth(Se.wireframeLinewidth*le()),Mt.setMode(j.LINES)):Mt.setMode(j.TRIANGLES);else if(ye.isLine){let bt=Se.linewidth;bt===void 0&&(bt=1),We.setLineWidth(bt*le()),ye.isLineSegments?Mt.setMode(j.LINES):ye.isLineLoop?Mt.setMode(j.LINE_LOOP):Mt.setMode(j.LINE_STRIP)}else ye.isPoints?Mt.setMode(j.POINTS):ye.isSprite&&Mt.setMode(j.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)Mt.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(Re.get("WEBGL_multi_draw"))Mt.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const bt=ye._multiDrawStarts,rn=ye._multiDrawCounts,Ft=ye._multiDrawCount,Xn=Tt?De.get(Tt).bytesPerElement:1,$i=st.get(Se).currentProgram.getUniforms();for(let Pn=0;Pn<Ft;Pn++)$i.setValue(j,"_gl_DrawID",Pn),Mt.render(bt[Pn]/Xn,rn[Pn])}else if(ye.isInstancedMesh)Mt.renderInstances(cn,pn,ye.count);else if(we.isInstancedBufferGeometry){const bt=we._maxInstanceCount!==void 0?we._maxInstanceCount:1/0,rn=Math.min(we.instanceCount,bt);Mt.renderInstances(cn,pn,rn)}else Mt.render(cn,pn)};function Jt(X,me,we){X.transparent===!0&&X.side===to&&X.forceSinglePass===!1?(X.side=ns,X.needsUpdate=!0,ia(X,me,we),X.side=Ru,X.needsUpdate=!0,ia(X,me,we),X.side=to):ia(X,me,we)}this.compile=function(X,me,we=null){we===null&&(we=X),_=Gt.get(we),_.init(me),S.push(_),we.traverseVisible(function(ye){ye.isLight&&ye.layers.test(me.layers)&&(_.pushLight(ye),ye.castShadow&&_.pushShadow(ye))}),X!==we&&X.traverseVisible(function(ye){ye.isLight&&ye.layers.test(me.layers)&&(_.pushLight(ye),ye.castShadow&&_.pushShadow(ye))}),_.setupLights();const Se=new Set;return X.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const tt=ye.material;if(tt)if(Array.isArray(tt))for(let yt=0;yt<tt.length;yt++){const St=tt[yt];Jt(St,we,ye),Se.add(St)}else Jt(tt,we,ye),Se.add(tt)}),S.pop(),_=null,Se},this.compileAsync=function(X,me,we=null){const Se=this.compile(X,me,we);return new Promise(ye=>{function tt(){if(Se.forEach(function(yt){st.get(yt).currentProgram.isReady()&&Se.delete(yt)}),Se.size===0){ye(X);return}setTimeout(tt,10)}Re.get("KHR_parallel_shader_compile")!==null?tt():setTimeout(tt,10)})};let qn=null;function Hi(X){qn&&qn(X)}function gf(){go.stop()}function yf(){go.start()}const go=new sq;go.setAnimationLoop(Hi),typeof self<"u"&&go.setContext(self),this.setAnimationLoop=function(X){qn=X,Pe.setAnimationLoop(X),X===null?go.stop():go.start()},Pe.addEventListener("sessionstart",gf),Pe.addEventListener("sessionend",yf),this.render=function(X,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(me),me=Pe.getCamera()),X.isScene===!0&&X.onBeforeRender(x,X,me,D),_=Gt.get(X,S.length),_.init(me),S.push(_),He.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),Ue.setFromProjectionMatrix(He),xe=this.localClippingEnabled,he=Ke.init(this.clippingPlanes,xe),v=Qe.get(X,y.length),v.init(),y.push(v),Pe.enabled===!0&&Pe.isPresenting===!0){const tt=x.xr.getDepthSensingMesh();tt!==null&&za(tt,me,-1/0,x.sortObjects)}za(X,me,0,x.sortObjects),v.finish(),x.sortObjects===!0&&v.sort(z,ee),Le=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,Le&&ct.addToRenderList(v,X),this.info.render.frame++,he===!0&&Ke.beginShadows();const we=_.state.shadowsArray;ut.render(we,X,me),he===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset();const Se=v.opaque,ye=v.transmissive;if(_.setupLights(),me.isArrayCamera){const tt=me.cameras;if(ye.length>0)for(let yt=0,St=tt.length;yt<St;yt++){const Tt=tt[yt];Vi(Se,ye,X,Tt)}Le&&ct.render(X);for(let yt=0,St=tt.length;yt<St;yt++){const Tt=tt[yt];na(v,X,Tt,Tt.viewport)}}else ye.length>0&&Vi(Se,ye,X,me),Le&&ct.render(X),na(v,X,me);D!==null&&(q.updateMultisampleRenderTarget(D),q.updateRenderTargetMipmap(D)),X.isScene===!0&&X.onAfterRender(x,X,me),at.resetDefaultState(),O=-1,H=null,S.pop(),S.length>0?(_=S[S.length-1],he===!0&&Ke.setGlobalState(x.clippingPlanes,_.state.camera)):_=null,y.pop(),y.length>0?v=y[y.length-1]:v=null};function za(X,me,we,Se){if(X.visible===!1)return;if(X.layers.test(me.layers)){if(X.isGroup)we=X.renderOrder;else if(X.isLOD)X.autoUpdate===!0&&X.update(me);else if(X.isLight)_.pushLight(X),X.castShadow&&_.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||Ue.intersectsSprite(X)){Se&&Ae.setFromMatrixPosition(X.matrixWorld).applyMatrix4(He);const yt=Ne.update(X),St=X.material;St.visible&&v.push(X,yt,St,we,Ae.z,null)}}else if((X.isMesh||X.isLine||X.isPoints)&&(!X.frustumCulled||Ue.intersectsObject(X))){const yt=Ne.update(X),St=X.material;if(Se&&(X.boundingSphere!==void 0?(X.boundingSphere===null&&X.computeBoundingSphere(),Ae.copy(X.boundingSphere.center)):(yt.boundingSphere===null&&yt.computeBoundingSphere(),Ae.copy(yt.boundingSphere.center)),Ae.applyMatrix4(X.matrixWorld).applyMatrix4(He)),Array.isArray(St)){const Tt=yt.groups;for(let Dt=0,kt=Tt.length;Dt<kt;Dt++){const At=Tt[Dt],cn=St[At.materialIndex];cn&&cn.visible&&v.push(X,yt,cn,we,Ae.z,At)}}else St.visible&&v.push(X,yt,St,we,Ae.z,null)}}const tt=X.children;for(let yt=0,St=tt.length;yt<St;yt++)za(tt[yt],me,we,Se)}function na(X,me,we,Se){const ye=X.opaque,tt=X.transmissive,yt=X.transparent;_.setupLightsView(we),he===!0&&Ke.setGlobalState(x.clippingPlanes,we),Se&&We.viewport(E.copy(Se)),ye.length>0&&yo(ye,me,we),tt.length>0&&yo(tt,me,we),yt.length>0&&yo(yt,me,we),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function Vi(X,me,we,Se){if((we.isScene===!0?we.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Se.id]===void 0&&(_.state.transmissionRenderTarget[Se.id]=new Ra(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")||Re.has("EXT_color_buffer_float")?bg:Ia,minFilter:al,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:bn.workingColorSpace}));const tt=_.state.transmissionRenderTarget[Se.id],yt=Se.viewport||E;tt.setSize(yt.z,yt.w);const St=x.getRenderTarget();x.setRenderTarget(tt),x.getClearColor(G),Y=x.getClearAlpha(),Y<1&&x.setClearColor(16777215,.5),x.clear(),Le&&ct.render(we);const Tt=x.toneMapping;x.toneMapping=yl;const Dt=Se.viewport;if(Se.viewport!==void 0&&(Se.viewport=void 0),_.setupLightsView(Se),he===!0&&Ke.setGlobalState(x.clippingPlanes,Se),yo(X,we,Se),q.updateMultisampleRenderTarget(tt),q.updateRenderTargetMipmap(tt),Re.has("WEBGL_multisampled_render_to_texture")===!1){let kt=!1;for(let At=0,cn=me.length;At<cn;At++){const hn=me[At],pn=hn.object,jt=hn.geometry,Mt=hn.material,bt=hn.group;if(Mt.side===to&&pn.layers.test(Se.layers)){const rn=Mt.side;Mt.side=ns,Mt.needsUpdate=!0,vf(pn,we,Se,jt,Mt,bt),Mt.side=rn,Mt.needsUpdate=!0,kt=!0}}kt===!0&&(q.updateMultisampleRenderTarget(tt),q.updateRenderTargetMipmap(tt))}x.setRenderTarget(St),x.setClearColor(G,Y),Dt!==void 0&&(Se.viewport=Dt),x.toneMapping=Tt}function yo(X,me,we){const Se=me.isScene===!0?me.overrideMaterial:null;for(let ye=0,tt=X.length;ye<tt;ye++){const yt=X[ye],St=yt.object,Tt=yt.geometry,Dt=Se===null?yt.material:Se,kt=yt.group;St.layers.test(we.layers)&&vf(St,me,we,Tt,Dt,kt)}}function vf(X,me,we,Se,ye,tt){X.onBeforeRender(x,me,we,Se,ye,tt),X.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),ye.onBeforeRender(x,me,we,Se,X,tt),ye.transparent===!0&&ye.side===to&&ye.forceSinglePass===!1?(ye.side=ns,ye.needsUpdate=!0,x.renderBufferDirect(we,me,Se,ye,X,tt),ye.side=Ru,ye.needsUpdate=!0,x.renderBufferDirect(we,me,Se,ye,X,tt),ye.side=to):x.renderBufferDirect(we,me,Se,ye,X,tt),X.onAfterRender(x,me,we,Se,ye,tt)}function ia(X,me,we){me.isScene!==!0&&(me=Ge);const Se=st.get(X),ye=_.state.lights,tt=_.state.shadowsArray,yt=ye.state.version,St=dt.getParameters(X,ye.state,tt,me,we),Tt=dt.getProgramCacheKey(St);let Dt=Se.programs;Se.environment=X.isMeshStandardMaterial?me.environment:null,Se.fog=me.fog,Se.envMap=(X.isMeshStandardMaterial?_e:V).get(X.envMap||Se.environment),Se.envMapRotation=Se.environment!==null&&X.envMap===null?me.environmentRotation:X.envMapRotation,Dt===void 0&&(X.addEventListener("dispose",Vt),Dt=new Map,Se.programs=Dt);let kt=Dt.get(Tt);if(kt!==void 0){if(Se.currentProgram===kt&&Se.lightsStateVersion===yt)return Ml(X,St),kt}else St.uniforms=dt.getUniforms(X),X.onBeforeCompile(St,x),kt=dt.acquireProgram(St,Tt),Dt.set(Tt,kt),Se.uniforms=St.uniforms;const At=Se.uniforms;return(!X.isShaderMaterial&&!X.isRawShaderMaterial||X.clipping===!0)&&(At.clippingPlanes=Ke.uniform),Ml(X,St),Se.needsLights=Bu(X),Se.lightsStateVersion=yt,Se.needsLights&&(At.ambientLightColor.value=ye.state.ambient,At.lightProbe.value=ye.state.probe,At.directionalLights.value=ye.state.directional,At.directionalLightShadows.value=ye.state.directionalShadow,At.spotLights.value=ye.state.spot,At.spotLightShadows.value=ye.state.spotShadow,At.rectAreaLights.value=ye.state.rectArea,At.ltc_1.value=ye.state.rectAreaLTC1,At.ltc_2.value=ye.state.rectAreaLTC2,At.pointLights.value=ye.state.point,At.pointLightShadows.value=ye.state.pointShadow,At.hemisphereLights.value=ye.state.hemi,At.directionalShadowMap.value=ye.state.directionalShadowMap,At.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,At.spotShadowMap.value=ye.state.spotShadowMap,At.spotLightMatrix.value=ye.state.spotLightMatrix,At.spotLightMap.value=ye.state.spotLightMap,At.pointShadowMap.value=ye.state.pointShadowMap,At.pointShadowMatrix.value=ye.state.pointShadowMatrix),Se.currentProgram=kt,Se.uniformsList=null,kt}function ls(X){if(X.uniformsList===null){const me=X.currentProgram.getUniforms();X.uniformsList=VS.seqWithValue(me.seq,X.uniforms)}return X.uniformsList}function Ml(X,me){const we=st.get(X);we.outputColorSpace=me.outputColorSpace,we.batching=me.batching,we.batchingColor=me.batchingColor,we.instancing=me.instancing,we.instancingColor=me.instancingColor,we.instancingMorph=me.instancingMorph,we.skinning=me.skinning,we.morphTargets=me.morphTargets,we.morphNormals=me.morphNormals,we.morphColors=me.morphColors,we.morphTargetsCount=me.morphTargetsCount,we.numClippingPlanes=me.numClippingPlanes,we.numIntersection=me.numClipIntersection,we.vertexAlphas=me.vertexAlphas,we.vertexTangents=me.vertexTangents,we.toneMapping=me.toneMapping}function En(X,me,we,Se,ye){me.isScene!==!0&&(me=Ge),q.resetTextureUnits();const tt=me.fog,yt=Se.isMeshStandardMaterial?me.environment:null,St=D===null?x.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Fu,Tt=(Se.isMeshStandardMaterial?_e:V).get(Se.envMap||yt),Dt=Se.vertexColors===!0&&!!we.attributes.color&&we.attributes.color.itemSize===4,kt=!!we.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),At=!!we.morphAttributes.position,cn=!!we.morphAttributes.normal,hn=!!we.morphAttributes.color;let pn=yl;Se.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(pn=x.toneMapping);const jt=we.morphAttributes.position||we.morphAttributes.normal||we.morphAttributes.color,Mt=jt!==void 0?jt.length:0,bt=st.get(Se),rn=_.state.lights;if(he===!0&&(xe===!0||X!==H)){const Pi=X===H&&Se.id===O;Ke.setState(Se,X,Pi)}let Ft=!1;Se.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==rn.state.version||bt.outputColorSpace!==St||ye.isBatchedMesh&&bt.batching===!1||!ye.isBatchedMesh&&bt.batching===!0||ye.isBatchedMesh&&bt.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&bt.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&bt.instancing===!1||!ye.isInstancedMesh&&bt.instancing===!0||ye.isSkinnedMesh&&bt.skinning===!1||!ye.isSkinnedMesh&&bt.skinning===!0||ye.isInstancedMesh&&bt.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&bt.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&bt.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&bt.instancingMorph===!1&&ye.morphTexture!==null||bt.envMap!==Tt||Se.fog===!0&&bt.fog!==tt||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Ke.numPlanes||bt.numIntersection!==Ke.numIntersection)||bt.vertexAlphas!==Dt||bt.vertexTangents!==kt||bt.morphTargets!==At||bt.morphNormals!==cn||bt.morphColors!==hn||bt.toneMapping!==pn||bt.morphTargetsCount!==Mt)&&(Ft=!0):(Ft=!0,bt.__version=Se.version);let Xn=bt.currentProgram;Ft===!0&&(Xn=ia(Se,me,ye));let $i=!1,Pn=!1,ra=!1;const zn=Xn.getUniforms(),Fs=bt.uniforms;if(We.useProgram(Xn.program)&&($i=!0,Pn=!0,ra=!0),Se.id!==O&&(O=Se.id,Pn=!0),$i||H!==X){Be.reverseDepthBuffer?(Fe.copy(X.projectionMatrix),$Se(Fe),GSe(Fe),zn.setValue(j,"projectionMatrix",Fe)):zn.setValue(j,"projectionMatrix",X.projectionMatrix),zn.setValue(j,"viewMatrix",X.matrixWorldInverse);const Pi=zn.map.cameraPosition;Pi!==void 0&&Pi.setValue(j,ot.setFromMatrixPosition(X.matrixWorld)),Be.logarithmicDepthBuffer&&zn.setValue(j,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&zn.setValue(j,"isOrthographic",X.isOrthographicCamera===!0),H!==X&&(H=X,Pn=!0,ra=!0)}if(ye.isSkinnedMesh){zn.setOptional(j,ye,"bindMatrix"),zn.setOptional(j,ye,"bindMatrixInverse");const Pi=ye.skeleton;Pi&&(Pi.boneTexture===null&&Pi.computeBoneTexture(),zn.setValue(j,"boneTexture",Pi.boneTexture,q))}ye.isBatchedMesh&&(zn.setOptional(j,ye,"batchingTexture"),zn.setValue(j,"batchingTexture",ye._matricesTexture,q),zn.setOptional(j,ye,"batchingIdTexture"),zn.setValue(j,"batchingIdTexture",ye._indirectTexture,q),zn.setOptional(j,ye,"batchingColorTexture"),ye._colorsTexture!==null&&zn.setValue(j,"batchingColorTexture",ye._colorsTexture,q));const cr=we.morphAttributes;if((cr.position!==void 0||cr.normal!==void 0||cr.color!==void 0)&&Ot.update(ye,we,Xn),(Pn||bt.receiveShadow!==ye.receiveShadow)&&(bt.receiveShadow=ye.receiveShadow,zn.setValue(j,"receiveShadow",ye.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(Fs.envMap.value=Tt,Fs.flipEnvMap.value=Tt.isCubeTexture&&Tt.isRenderTargetTexture===!1?-1:1),Se.isMeshStandardMaterial&&Se.envMap===null&&me.environment!==null&&(Fs.envMapIntensity.value=me.environmentIntensity),Pn&&(zn.setValue(j,"toneMappingExposure",x.toneMappingExposure),bt.needsLights&&Ag(Fs,ra),tt&&Se.fog===!0&&qe.refreshFogUniforms(Fs,tt),qe.refreshMaterialUniforms(Fs,Se,oe,Q,_.state.transmissionRenderTarget[X.id]),VS.upload(j,ls(bt),Fs,q)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(VS.upload(j,ls(bt),Fs,q),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&zn.setValue(j,"center",ye.center),zn.setValue(j,"modelViewMatrix",ye.modelViewMatrix),zn.setValue(j,"normalMatrix",ye.normalMatrix),zn.setValue(j,"modelMatrix",ye.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const Pi=Se.uniformsGroups;for(let dr=0,md=Pi.length;dr<md;dr++){const zu=Pi[dr];ue.update(zu,Xn),ue.bind(zu,Xn)}}return Xn}function Ag(X,me){X.ambientLightColor.needsUpdate=me,X.lightProbe.needsUpdate=me,X.directionalLights.needsUpdate=me,X.directionalLightShadows.needsUpdate=me,X.pointLights.needsUpdate=me,X.pointLightShadows.needsUpdate=me,X.spotLights.needsUpdate=me,X.spotLightShadows.needsUpdate=me,X.rectAreaLights.needsUpdate=me,X.hemisphereLights.needsUpdate=me}function Bu(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&X.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(X,me,we){st.get(X.texture).__webglTexture=me,st.get(X.depthTexture).__webglTexture=we;const Se=st.get(X);Se.__hasExternalTextures=!0,Se.__autoAllocateDepthBuffer=we===void 0,Se.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(X,me){const we=st.get(X);we.__webglFramebuffer=me,we.__useDefaultFramebuffer=me===void 0},this.setRenderTarget=function(X,me=0,we=0){D=X,P=me,A=we;let Se=!0,ye=null,tt=!1,yt=!1;if(X){const Tt=st.get(X);if(Tt.__useDefaultFramebuffer!==void 0)We.bindFramebuffer(j.FRAMEBUFFER,null),Se=!1;else if(Tt.__webglFramebuffer===void 0)q.setupRenderTarget(X);else if(Tt.__hasExternalTextures)q.rebindTextures(X,st.get(X.texture).__webglTexture,st.get(X.depthTexture).__webglTexture);else if(X.depthBuffer){const At=X.depthTexture;if(Tt.__boundDepthTexture!==At){if(At!==null&&st.has(At)&&(X.width!==At.image.width||X.height!==At.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");q.setupDepthRenderbuffer(X)}}const Dt=X.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(yt=!0);const kt=st.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(Array.isArray(kt[me])?ye=kt[me][we]:ye=kt[me],tt=!0):X.samples>0&&q.useMultisampledRTT(X)===!1?ye=st.get(X).__webglMultisampledFramebuffer:Array.isArray(kt)?ye=kt[we]:ye=kt,E.copy(X.viewport),k.copy(X.scissor),W=X.scissorTest}else E.copy(te).multiplyScalar(oe).floor(),k.copy(ce).multiplyScalar(oe).floor(),W=Te;if(We.bindFramebuffer(j.FRAMEBUFFER,ye)&&Se&&We.drawBuffers(X,ye),We.viewport(E),We.scissor(k),We.setScissorTest(W),tt){const Tt=st.get(X.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+me,Tt.__webglTexture,we)}else if(yt){const Tt=st.get(X.texture),Dt=me||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,Tt.__webglTexture,we||0,Dt)}O=-1},this.readRenderTargetPixels=function(X,me,we,Se,ye,tt,yt){if(!(X&&X.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let St=st.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&yt!==void 0&&(St=St[yt]),St){We.bindFramebuffer(j.FRAMEBUFFER,St);try{const Tt=X.texture,Dt=Tt.format,kt=Tt.type;if(!Be.textureFormatReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Be.textureTypeReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=X.width-Se&&we>=0&&we<=X.height-ye&&j.readPixels(me,we,Se,ye,$e.convert(Dt),$e.convert(kt),tt)}finally{const Tt=D!==null?st.get(D).__webglFramebuffer:null;We.bindFramebuffer(j.FRAMEBUFFER,Tt)}}},this.readRenderTargetPixelsAsync=async function(X,me,we,Se,ye,tt,yt){if(!(X&&X.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let St=st.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&yt!==void 0&&(St=St[yt]),St){const Tt=X.texture,Dt=Tt.format,kt=Tt.type;if(!Be.textureFormatReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Be.textureTypeReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(me>=0&&me<=X.width-Se&&we>=0&&we<=X.height-ye){We.bindFramebuffer(j.FRAMEBUFFER,St);const At=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,At),j.bufferData(j.PIXEL_PACK_BUFFER,tt.byteLength,j.STREAM_READ),j.readPixels(me,we,Se,ye,$e.convert(Dt),$e.convert(kt),0);const cn=D!==null?st.get(D).__webglFramebuffer:null;We.bindFramebuffer(j.FRAMEBUFFER,cn);const hn=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await VSe(j,hn,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,At),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,tt),j.deleteBuffer(At),j.deleteSync(hn),tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(X,me=null,we=0){X.isTexture!==!0&&(HS("WebGLRenderer: copyFramebufferToTexture function signature has changed."),me=arguments[0]||null,X=arguments[1]);const Se=Math.pow(2,-we),ye=Math.floor(X.image.width*Se),tt=Math.floor(X.image.height*Se),yt=me!==null?me.x:0,St=me!==null?me.y:0;q.setTexture2D(X,0),j.copyTexSubImage2D(j.TEXTURE_2D,we,0,0,yt,St,ye,tt),We.unbindTexture()},this.copyTextureToTexture=function(X,me,we=null,Se=null,ye=0){X.isTexture!==!0&&(HS("WebGLRenderer: copyTextureToTexture function signature has changed."),Se=arguments[0]||null,X=arguments[1],me=arguments[2],ye=arguments[3]||0,we=null);let tt,yt,St,Tt,Dt,kt;we!==null?(tt=we.max.x-we.min.x,yt=we.max.y-we.min.y,St=we.min.x,Tt=we.min.y):(tt=X.image.width,yt=X.image.height,St=0,Tt=0),Se!==null?(Dt=Se.x,kt=Se.y):(Dt=0,kt=0);const At=$e.convert(me.format),cn=$e.convert(me.type);q.setTexture2D(me,0),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,me.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,me.unpackAlignment);const hn=j.getParameter(j.UNPACK_ROW_LENGTH),pn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),jt=j.getParameter(j.UNPACK_SKIP_PIXELS),Mt=j.getParameter(j.UNPACK_SKIP_ROWS),bt=j.getParameter(j.UNPACK_SKIP_IMAGES),rn=X.isCompressedTexture?X.mipmaps[ye]:X.image;j.pixelStorei(j.UNPACK_ROW_LENGTH,rn.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,rn.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,St),j.pixelStorei(j.UNPACK_SKIP_ROWS,Tt),X.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,ye,Dt,kt,tt,yt,At,cn,rn.data):X.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,ye,Dt,kt,rn.width,rn.height,At,rn.data):j.texSubImage2D(j.TEXTURE_2D,ye,Dt,kt,tt,yt,At,cn,rn),j.pixelStorei(j.UNPACK_ROW_LENGTH,hn),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,pn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,jt),j.pixelStorei(j.UNPACK_SKIP_ROWS,Mt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,bt),ye===0&&me.generateMipmaps&&j.generateMipmap(j.TEXTURE_2D),We.unbindTexture()},this.copyTextureToTexture3D=function(X,me,we=null,Se=null,ye=0){X.isTexture!==!0&&(HS("WebGLRenderer: copyTextureToTexture3D function signature has changed."),we=arguments[0]||null,Se=arguments[1]||null,X=arguments[2],me=arguments[3],ye=arguments[4]||0);let tt,yt,St,Tt,Dt,kt,At,cn,hn;const pn=X.isCompressedTexture?X.mipmaps[ye]:X.image;we!==null?(tt=we.max.x-we.min.x,yt=we.max.y-we.min.y,St=we.max.z-we.min.z,Tt=we.min.x,Dt=we.min.y,kt=we.min.z):(tt=pn.width,yt=pn.height,St=pn.depth,Tt=0,Dt=0,kt=0),Se!==null?(At=Se.x,cn=Se.y,hn=Se.z):(At=0,cn=0,hn=0);const jt=$e.convert(me.format),Mt=$e.convert(me.type);let bt;if(me.isData3DTexture)q.setTexture3D(me,0),bt=j.TEXTURE_3D;else if(me.isDataArrayTexture||me.isCompressedArrayTexture)q.setTexture2DArray(me,0),bt=j.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,me.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,me.unpackAlignment);const rn=j.getParameter(j.UNPACK_ROW_LENGTH),Ft=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Xn=j.getParameter(j.UNPACK_SKIP_PIXELS),$i=j.getParameter(j.UNPACK_SKIP_ROWS),Pn=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,pn.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,pn.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Tt),j.pixelStorei(j.UNPACK_SKIP_ROWS,Dt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,kt),X.isDataTexture||X.isData3DTexture?j.texSubImage3D(bt,ye,At,cn,hn,tt,yt,St,jt,Mt,pn.data):me.isCompressedArrayTexture?j.compressedTexSubImage3D(bt,ye,At,cn,hn,tt,yt,St,jt,pn.data):j.texSubImage3D(bt,ye,At,cn,hn,tt,yt,St,jt,Mt,pn),j.pixelStorei(j.UNPACK_ROW_LENGTH,rn),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Ft),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Xn),j.pixelStorei(j.UNPACK_SKIP_ROWS,$i),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Pn),ye===0&&me.generateMipmaps&&j.generateMipmap(bt),We.unbindTexture()},this.initRenderTarget=function(X){st.get(X).__webglFramebuffer===void 0&&q.setupRenderTarget(X)},this.initTexture=function(X){X.isCubeTexture?q.setTextureCube(X,0):X.isData3DTexture?q.setTexture3D(X,0):X.isDataArrayTexture||X.isCompressedArrayTexture?q.setTexture2DArray(X,0):q.setTexture2D(X,0),We.unbindTexture()},this.resetState=function(){P=0,A=0,D=null,We.reset(),at.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ll}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===eE?"display-p3":"srgb",n.unpackColorSpace=bn.workingColorSpace===k_?"display-p3":"srgb"}}class iE{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new xt(e),this.density=n}clone(){return new iE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class rE{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new xt(e),this.near=n,this.far=i}clone(){return new rE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Jb extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ho,this.environmentIntensity=1,this.environmentRotation=new ho,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class sE{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=$v,this.updateRanges=[],this.version=0,this.uuid=oo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wr=new J;class Jh{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Wr.fromBufferAttribute(this,n),Wr.applyMatrix4(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Wr.fromBufferAttribute(this,n),Wr.applyNormalMatrix(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Wr.fromBufferAttribute(this,n),Wr.transformDirection(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=Qr(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=tn(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=tn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=tn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=tn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=tn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Qr(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Qr(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Qr(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Qr(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array),r=tn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=tn(n,this.array),i=tn(i,this.array),r=tn(r,this.array),s=tn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Mn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Jh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tL extends Sr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let wp;const k0=new J,Ep=new J,Cp=new J,Ap=new je,L0=new je,fq=new zt,H1=new J,N0=new J,V1=new J,dB=new je,rM=new je,hB=new je;class pq extends _n{constructor(e=new tL){if(super(),this.isSprite=!0,this.type="Sprite",wp===void 0){wp=new Zt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new sE(n,5);wp.setIndex([0,1,2,0,2,3]),wp.setAttribute("position",new Jh(i,3,0,!1)),wp.setAttribute("uv",new Jh(i,2,3,!1))}this.geometry=wp,this.material=e,this.center=new je(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ep.setFromMatrixScale(this.matrixWorld),fq.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ep.multiplyScalar(-Cp.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;$1(H1.set(-.5,-.5,0),Cp,o,Ep,r,s),$1(N0.set(.5,-.5,0),Cp,o,Ep,r,s),$1(V1.set(.5,.5,0),Cp,o,Ep,r,s),dB.set(0,0),rM.set(1,0),hB.set(1,1);let a=e.ray.intersectTriangle(H1,N0,V1,!1,k0);if(a===null&&($1(N0.set(-.5,.5,0),Cp,o,Ep,r,s),rM.set(0,1),a=e.ray.intersectTriangle(H1,V1,N0,!1,k0),a===null))return;const l=e.ray.origin.distanceTo(k0);l<e.near||l>e.far||n.push({distance:l,point:k0.clone(),uv:bs.getInterpolation(k0,H1,N0,V1,dB,rM,hB,new je),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $1(t,e,n,i,r,s){Ap.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(L0.x=s*Ap.x-r*Ap.y,L0.y=r*Ap.x+s*Ap.y):L0.copy(Ap),t.copy(e),t.x+=L0.x,t.y+=L0.y,t.applyMatrix4(fq)}const G1=new J,fB=new J;class mq extends _n{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){G1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(G1);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){G1.setFromMatrixPosition(e.matrixWorld),fB.setFromMatrixPosition(this.matrixWorld);const i=G1.distanceTo(fB)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const pB=new J,mB=new yn,gB=new yn,rCe=new J,yB=new zt,W1=new J,sM=new Or,vB=new zt,oM=new df;class gq extends Bi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=GI,this.bindMatrix=new zt,this.bindMatrixInverse=new zt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new is),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,W1),this.boundingBox.expandByPoint(W1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Or),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,W1),this.boundingSphere.expandByPoint(W1)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sM.copy(this.boundingSphere),sM.applyMatrix4(r),e.ray.intersectsSphere(sM)!==!1&&(vB.copy(r).invert(),oM.copy(e.ray).applyMatrix4(vB),!(this.boundingBox!==null&&oM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,oM)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===GI?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Oj?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;mB.fromBufferAttribute(r.attributes.skinIndex,e),gB.fromBufferAttribute(r.attributes.skinWeight,e),pB.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=gB.getComponent(s);if(o!==0){const a=mB.getComponent(s);yB.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(rCe.copy(pB).applyMatrix4(yB),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class nL extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vl extends hi{constructor(e=null,n=1,i=1,r,s,o,a,l,u=sr,c=sr,d,h){super(null,o,a,l,u,c,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _B=new zt,sCe=new zt;class oE{constructor(e=[],n=[]){this.uuid=oo(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new zt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sCe;_B.multiplyMatrices(a,n[s]),_B.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new oE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new vl(n,e,e,Dr,Cs);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new nL),this.bones.push(o),this.boneInverses.push(new zt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class rg extends Mn{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Mp=new zt,xB=new zt,j1=[],SB=new is,oCe=new zt,O0=new Bi,U0=new Or;class yq extends Bi{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new rg(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,oCe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new is),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Mp),SB.copy(e.boundingBox).applyMatrix4(Mp),this.boundingBox.union(SB)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Or),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Mp),U0.copy(e.boundingSphere).applyMatrix4(Mp),this.boundingSphere.union(U0)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(O0.geometry=this.geometry,O0.material=this.material,O0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),U0.copy(this.boundingSphere),U0.applyMatrix4(i),e.ray.intersectsSphere(U0)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Mp),xB.multiplyMatrices(i,Mp),O0.matrixWorld=xB,O0.raycast(e,j1);for(let o=0,a=j1.length;o<a;o++){const l=j1[o];l.instanceId=s,l.object=this,n.push(l)}j1.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new rg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new vl(new Float32Array(r*this.count),r,this.count,Kw,Cs));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function aCe(t,e){return t.z-e.z}function lCe(t,e){return e.z-t.z}class uCe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n,o.index=i}reset(){this.list.length=0,this.index=0}}const Sc=new zt,aM=new zt,cCe=new zt,dCe=new xt(1,1,1),TB=new zt,lM=new O_,q1=new is,Xd=new Or,F0=new J,bB=new J,hCe=new J,uM=new uCe,Pr=new Bi,X1=[];function fCe(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*i);e.needsUpdate=!0}class vq extends Bi{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,n,i=n*2,r){super(new Zt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new vl(n,e,e,Dr,Cs);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new vl(n,e,e,D_,ku);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new vl(n,e,e,Dr,Cs);i.colorSpace=bn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(i*l),d=new Mn(c,l,u);n.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new Mn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=n.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new is);const e=this.boundingBox,n=this._drawInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const s=n[i].geometryIndex;this.getMatrixAt(i,Sc),this.getBoundingBoxAt(s,q1).applyMatrix4(Sc),e.union(q1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Or);const e=this.boundingSphere,n=this._drawInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const s=n[i].geometryIndex;this.getMatrixAt(i,Sc),this.getBoundingSphereAt(s,Xd).applyMatrix4(Sc),e.union(Xd)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(r=this._availableInstanceIds.pop(),this._drawInfo[r]=i):(r=this._drawInfo.length,this._drawInfo.push(i));const s=this._matricesTexture,o=s.image.data;cCe.toArray(o,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(dCe.toArray(a.image.data,r*4),a.needsUpdate=!0),r}addGeometry(e,n=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=n,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:c?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new is,sphereInitialized:!1,sphere:new Or}),this.setGeometryAt(d,e),d}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const m in i.attributes){const g=n.getAttribute(m),v=i.getAttribute(m);fCe(g,v,l);const _=g.itemSize;for(let y=g.count,S=u;y<S;y++){const x=l+y;for(let w=0;w<_;w++)v.setComponent(x,w,0)}v.needsUpdate=!0,v.addUpdateRange(l*_,u*_)}if(r){const m=a.indexStart;for(let g=0;g<o.count;g++)s.setX(m+g,l+o.getX(g));for(let g=o.count,v=a.indexCount;g<v;g++)s.setX(m+g,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const c=this._bounds[e];n.boundingBox!==null?(c.box.copy(n.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,n.boundingSphere!==null?(c.sphere.copy(n.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const d=this._drawRanges[e],h=n.getAttribute("position");return d.count=r?o.count:h.count,this._visibilityChanged=!0,e}deleteInstance(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let u=l.start,c=l.start+l.count;u<c;u++){let d=u;o&&(d=o.getX(d)),r.expandByPoint(F0.fromBufferAttribute(a,d))}i.boxInitialized=!0}return n.copy(r),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,q1),q1.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let u=0;for(let c=l.start,d=l.start+l.count;c<d;c++){let h=c;o&&(h=o.getX(h)),F0.fromBufferAttribute(a,h),u=Math.max(u,r.center.distanceToSquared(F0))}r.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(r),n}setMatrixAt(e,n){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(n.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,n){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:n.fromArray(r,e*16)}setColorAt(e,n){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(n.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,n){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:n.fromArray(i,e*4)}setVisibleAt(e,n){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===n?this:(i[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?!1:n[e].visible}setGeometryIdAt(e,n){const i=this._drawInfo;return e>=i.length||i[e].active===!1||n<0||n>=this._geometryCount?null:(i[e].geometryIndex=n,this)}getGeometryIdAt(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?-1:n[e].geometryIndex}getGeometryRangeAt(e,n={}){if(e<0||e>=this._geometryCount)return null;const i=this._drawRanges[e];return n.start=i.start,n.count=i.count,n}raycast(e,n){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;Pr.material=this.material,Pr.geometry.index=o.index,Pr.geometry.attributes=o.attributes,Pr.geometry.boundingBox===null&&(Pr.geometry.boundingBox=new is),Pr.geometry.boundingSphere===null&&(Pr.geometry.boundingSphere=new Or);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,c=r[u];Pr.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,Pr.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Pr.geometry.boundingBox),this.getBoundingSphereAt(u,Pr.geometry.boundingSphere),Pr.raycast(e,X1);for(let d=0,h=X1.length;d<h;d++){const m=X1[d];m.object=this,m.batchId=a,n.push(m)}X1.length=0}Pr.material=null,Pr.geometry.index=null,Pr.geometry.attributes={},Pr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._drawInfo=e._drawInfo.map(n=>({...n})),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled,m=this._indirectTexture,g=m.image.data;h&&(TB.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),lM.setFromProjectionMatrix(TB,e.coordinateSystem));let v=0;if(this.sortObjects){aM.copy(this.matrixWorld).invert(),F0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(aM),bB.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(aM);for(let S=0,x=l.length;S<x;S++)if(l[S].visible&&l[S].active){const w=l[S].geometryIndex;this.getMatrixAt(S,Sc),this.getBoundingSphereAt(w,Xd).applyMatrix4(Sc);let P=!1;if(h&&(P=!lM.intersectsSphere(Xd)),!P){const A=hCe.subVectors(Xd.center,F0).dot(bB);uM.push(d[w],A,S)}}const _=uM.list,y=this.customSort;y===null?_.sort(s.transparent?lCe:aCe):y.call(this,_,i);for(let S=0,x=_.length;S<x;S++){const w=_[S];u[v]=w.start*a,c[v]=w.count,g[v]=w.index,v++}uM.reset()}else for(let _=0,y=l.length;_<y;_++)if(l[_].visible&&l[_].active){const S=l[_].geometryIndex;let x=!1;if(h&&(this.getMatrixAt(_,Sc),this.getBoundingSphereAt(S,Xd).applyMatrix4(Sc),x=!lM.intersectsSphere(Xd)),!x){const w=d[S];u[v]=w.start*a,c[v]=w.count,g[v]=_,v++}}m.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class os extends Sr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const e2=new J,t2=new J,wB=new zt,B0=new df,Y1=new Or,cM=new J,EB=new J;class nd extends _n{constructor(e=new Zt,n=new os){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)e2.fromBufferAttribute(n,r-1),t2.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=e2.distanceTo(t2);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Y1.copy(i.boundingSphere),Y1.applyMatrix4(r),Y1.radius+=s,e.ray.intersectsSphere(Y1)===!1)return;wB.copy(r).invert(),B0.copy(e.ray).applyMatrix4(wB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=i.index,h=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let v=m,_=g-1;v<_;v+=u){const y=c.getX(v),S=c.getX(v+1),x=K1(this,e,B0,l,y,S);x&&n.push(x)}if(this.isLineLoop){const v=c.getX(g-1),_=c.getX(m),y=K1(this,e,B0,l,v,_);y&&n.push(y)}}else{const m=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=m,_=g-1;v<_;v+=u){const y=K1(this,e,B0,l,v,v+1);y&&n.push(y)}if(this.isLineLoop){const v=K1(this,e,B0,l,g-1,m);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function K1(t,e,n,i,r,s){const o=t.geometry.attributes.position;if(e2.fromBufferAttribute(o,r),t2.fromBufferAttribute(o,s),n.distanceSqToSegment(e2,t2,cM,EB)>i)return;cM.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(cM);if(!(l<e.near||l>e.far))return{distance:l,point:EB.clone().applyMatrix4(t.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:t}}const CB=new J,AB=new J;class Al extends nd{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)CB.fromBufferAttribute(n,r),AB.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+CB.distanceTo(AB);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class _q extends nd{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class iL extends Sr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const MB=new zt,KI=new df,Q1=new Or,Z1=new J;class xq extends _n{constructor(e=new Zt,n=new iL){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Q1.copy(i.boundingSphere),Q1.applyMatrix4(r),Q1.radius+=s,e.ray.intersectsSphere(Q1)===!1)return;MB.copy(r).invert(),KI.copy(e.ray).applyMatrix4(MB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const h=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=h,v=m;g<v;g++){const _=u.getX(g);Z1.fromBufferAttribute(d,_),PB(Z1,_,l,r,e,n,this)}}else{const h=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=h,v=m;g<v;g++)Z1.fromBufferAttribute(d,g),PB(Z1,g,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function PB(t,e,n,i,r,s,o){const a=KI.distanceSqToPoint(t);if(a<n){const l=new J;KI.closestPointToPoint(t,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class pCe extends hi{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Fi,this.magFilter=s!==void 0?s:Fi,this.generateMipmaps=!1;const c=this;function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class mCe extends hi{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=sr,this.minFilter=sr,this.generateMipmaps=!1,this.needsUpdate=!0}}class aE extends hi{constructor(e,n,i,r,s,o,a,l,u,c,d,h){super(null,o,a,l,u,c,r,s,d,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class gCe extends aE{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=zo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class yCe extends aE{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,Du),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class vCe extends hi{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Fa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const c=i[r],h=i[r+1]-c,m=(o-c)/h;return(r+m)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new je:new J);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new J,r=[],s=[],o=[],a=new J,l=new zt;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new J)}s[0]=new J,o[0]=new J;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=u&&(u=c,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),h<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Ti(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(n===!0){let m=Math.acos(Ti(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class lE extends Fa{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new je){const i=n,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,m=u-this.aY;l=h*c-m*d+this.aX,u=h*d+m*c+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Sq extends lE{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function rL(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,d){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+d)+(l-a)/d;h*=c,m*=c,r(o,a,h,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const J1=new J,dM=new rL,hM=new rL,fM=new rL;class Tq extends Fa{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new J){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=r[(a-1)%s]:(J1.subVectors(r[0],r[1]).add(r[0]),u=J1);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?c=r[(a+2)%s]:(J1.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=J1),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(d),m),v=Math.pow(d.distanceToSquared(h),m),_=Math.pow(h.distanceToSquared(c),m);v<1e-4&&(v=1),g<1e-4&&(g=v),_<1e-4&&(_=v),dM.initNonuniformCatmullRom(u.x,d.x,h.x,c.x,g,v,_),hM.initNonuniformCatmullRom(u.y,d.y,h.y,c.y,g,v,_),fM.initNonuniformCatmullRom(u.z,d.z,h.z,c.z,g,v,_)}else this.curveType==="catmullrom"&&(dM.initCatmullRom(u.x,d.x,h.x,c.x,this.tension),hM.initCatmullRom(u.y,d.y,h.y,c.y,this.tension),fM.initCatmullRom(u.z,d.z,h.z,c.z,this.tension));return i.set(dM.calc(l),hM.calc(l),fM.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new J().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function IB(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function _Ce(t,e){const n=1-t;return n*n*e}function xCe(t,e){return 2*(1-t)*t*e}function SCe(t,e){return t*t*e}function Uy(t,e,n,i){return _Ce(t,e)+xCe(t,n)+SCe(t,i)}function TCe(t,e){const n=1-t;return n*n*n*e}function bCe(t,e){const n=1-t;return 3*n*n*t*e}function wCe(t,e){return 3*(1-t)*t*t*e}function ECe(t,e){return t*t*t*e}function Fy(t,e,n,i,r){return TCe(t,e)+bCe(t,n)+wCe(t,i)+ECe(t,r)}class sL extends Fa{constructor(e=new je,n=new je,i=new je,r=new je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new je){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Fy(e,r.x,s.x,o.x,a.x),Fy(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bq extends Fa{constructor(e=new J,n=new J,i=new J,r=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new J){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Fy(e,r.x,s.x,o.x,a.x),Fy(e,r.y,s.y,o.y,a.y),Fy(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oL extends Fa{constructor(e=new je,n=new je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new je){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new je){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wq extends Fa{constructor(e=new J,n=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new J){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new J){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aL extends Fa{constructor(e=new je,n=new je,i=new je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new je){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Uy(e,r.x,s.x,o.x),Uy(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lL extends Fa{constructor(e=new J,n=new J,i=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new J){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Uy(e,r.x,s.x,o.x),Uy(e,r.y,s.y,o.y),Uy(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uL extends Fa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new je){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(IB(a,l.x,u.x,c.x,d.x),IB(a,l.y,u.y,c.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new je().fromArray(r))}return this}}var n2=Object.freeze({__proto__:null,ArcCurve:Sq,CatmullRomCurve3:Tq,CubicBezierCurve:sL,CubicBezierCurve3:bq,EllipseCurve:lE,LineCurve:oL,LineCurve3:wq,QuadraticBezierCurve:aL,QuadraticBezierCurve3:lL,SplineCurve:uL});class Eq extends Fa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new n2[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];i&&i.equals(c)||(n.push(c),i=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new n2[r.type]().fromJSON(r))}return this}}class jv extends Eq{constructor(e){super(),this.type="Path",this.currentPoint=new je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new oL(this.currentPoint.clone(),new je(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new aL(this.currentPoint.clone(),new je(e,n),new je(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new sL(this.currentPoint.clone(),new je(e,n),new je(i,r),new je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new uL(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,n+c,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const u=new lE(e,n,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class U_ extends Zt{constructor(e=[new je(0,-.5),new je(.5,0),new je(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Ti(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/n,d=new J,h=new je,m=new J,g=new J,v=new J;let _=0,y=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,y=e[S+1].y-e[S].y,m.x=y*1,m.y=-_,m.z=y*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:_=e[S+1].x-e[S].x,y=e[S+1].y-e[S].y,m.x=y*1,m.y=-_,m.z=y*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let S=0;S<=n;S++){const x=i+S*c*r,w=Math.sin(x),P=Math.cos(x);for(let A=0;A<=e.length-1;A++){d.x=e[A].x*w,d.y=e[A].y,d.z=e[A].x*P,o.push(d.x,d.y,d.z),h.x=S/n,h.y=A/(e.length-1),a.push(h.x,h.y);const D=l[3*A+0]*w,O=l[3*A+1],H=l[3*A+0]*P;u.push(D,O,H)}}for(let S=0;S<n;S++)for(let x=0;x<e.length-1;x++){const w=x+S*e.length,P=w,A=w+e.length,D=w+e.length+1,O=w+1;s.push(P,A,O),s.push(D,O,A)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(a,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U_(e.points,e.segments,e.phiStart,e.phiLength)}}class uE extends U_{constructor(e=1,n=1,i=4,r=8){const s=new jv;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new uE(e.radius,e.length,e.capSegments,e.radialSegments)}}class cE extends Zt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new J,c=new je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=n;d++,h+=3){const m=i+d/n*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cg extends Zt{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],d=[],h=[],m=[];let g=0;const v=[],_=i/2;let y=0;S(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(m,2));function S(){const w=new J,P=new J;let A=0;const D=(n-e)/i;for(let O=0;O<=s;O++){const H=[],E=O/s,k=E*(n-e)+e;for(let W=0;W<=r;W++){const G=W/r,Y=G*l+a,ie=Math.sin(Y),Q=Math.cos(Y);P.x=k*ie,P.y=-E*i+_,P.z=k*Q,d.push(P.x,P.y,P.z),w.set(ie,D,Q).normalize(),h.push(w.x,w.y,w.z),m.push(G,1-E),H.push(g++)}v.push(H)}for(let O=0;O<r;O++)for(let H=0;H<s;H++){const E=v[H][O],k=v[H+1][O],W=v[H+1][O+1],G=v[H][O+1];e>0&&(c.push(E,k,G),A+=3),n>0&&(c.push(k,W,G),A+=3)}u.addGroup(y,A,0),y+=A}function x(w){const P=g,A=new je,D=new J;let O=0;const H=w===!0?e:n,E=w===!0?1:-1;for(let W=1;W<=r;W++)d.push(0,_*E,0),h.push(0,E,0),m.push(.5,.5),g++;const k=g;for(let W=0;W<=r;W++){const Y=W/r*l+a,ie=Math.cos(Y),Q=Math.sin(Y);D.x=H*Q,D.y=_*E,D.z=H*ie,d.push(D.x,D.y,D.z),h.push(0,E,0),A.x=ie*.5+.5,A.y=Q*.5*E+.5,m.push(A.x,A.y),g++}for(let W=0;W<r;W++){const G=P+W,Y=k+W;w===!0?c.push(Y,Y+1,G):c.push(Y+1,Y,G),O+=3}u.addGroup(y,O,w===!0?1:2),y+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dE extends Cg{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new dE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fd extends Zt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),u(i),c(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const x=new J,w=new J,P=new J;for(let A=0;A<n.length;A+=3)m(n[A+0],x),m(n[A+1],w),m(n[A+2],P),l(x,w,P,S)}function l(S,x,w,P){const A=P+1,D=[];for(let O=0;O<=A;O++){D[O]=[];const H=S.clone().lerp(w,O/A),E=x.clone().lerp(w,O/A),k=A-O;for(let W=0;W<=k;W++)W===0&&O===A?D[O][W]=H:D[O][W]=H.clone().lerp(E,W/k)}for(let O=0;O<A;O++)for(let H=0;H<2*(A-O)-1;H++){const E=Math.floor(H/2);H%2===0?(h(D[O][E+1]),h(D[O+1][E]),h(D[O][E])):(h(D[O][E+1]),h(D[O+1][E+1]),h(D[O+1][E]))}}function u(S){const x=new J;for(let w=0;w<s.length;w+=3)x.x=s[w+0],x.y=s[w+1],x.z=s[w+2],x.normalize().multiplyScalar(S),s[w+0]=x.x,s[w+1]=x.y,s[w+2]=x.z}function c(){const S=new J;for(let x=0;x<s.length;x+=3){S.x=s[x+0],S.y=s[x+1],S.z=s[x+2];const w=_(S)/2/Math.PI+.5,P=y(S)/Math.PI+.5;o.push(w,1-P)}g(),d()}function d(){for(let S=0;S<o.length;S+=6){const x=o[S+0],w=o[S+2],P=o[S+4],A=Math.max(x,w,P),D=Math.min(x,w,P);A>.9&&D<.1&&(x<.2&&(o[S+0]+=1),w<.2&&(o[S+2]+=1),P<.2&&(o[S+4]+=1))}}function h(S){s.push(S.x,S.y,S.z)}function m(S,x){const w=S*3;x.x=e[w+0],x.y=e[w+1],x.z=e[w+2]}function g(){const S=new J,x=new J,w=new J,P=new J,A=new je,D=new je,O=new je;for(let H=0,E=0;H<s.length;H+=9,E+=6){S.set(s[H+0],s[H+1],s[H+2]),x.set(s[H+3],s[H+4],s[H+5]),w.set(s[H+6],s[H+7],s[H+8]),A.set(o[E+0],o[E+1]),D.set(o[E+2],o[E+3]),O.set(o[E+4],o[E+5]),P.copy(S).add(x).add(w).divideScalar(3);const k=_(P);v(A,E+0,S,k),v(D,E+2,x,k),v(O,E+4,w,k)}}function v(S,x,w,P){P<0&&S.x===1&&(o[x]=S.x-1),w.x===0&&w.z===0&&(o[x]=P/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function y(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fd(e.vertices,e.indices,e.radius,e.details)}}class hE extends fd{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new hE(e.radius,e.detail)}}const eS=new J,tS=new J,pM=new J,nS=new bs;class Cq extends Zt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Oh*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),h={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:v,b:_,c:y}=nS;if(v.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),y.fromBufferAttribute(a,u[2]),nS.getNormal(pM),d[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,d[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,d[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const x=(S+1)%3,w=d[S],P=d[x],A=nS[c[S]],D=nS[c[x]],O=`${w}_${P}`,H=`${P}_${w}`;H in h&&h[H]?(pM.dot(h[H].normal)<=s&&(m.push(A.x,A.y,A.z),m.push(D.x,D.y,D.z)),h[H]=null):O in h||(h[O]={index0:u[S],index1:u[x],normal:pM.clone()})}}for(const g in h)if(h[g]){const{index0:v,index1:_}=h[g];eS.fromBufferAttribute(a,v),tS.fromBufferAttribute(a,_),m.push(eS.x,eS.y,eS.z),m.push(tS.x,tS.y,tS.z)}this.setAttribute("position",new Ct(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Fh extends jv{constructor(e){super(e),this.uuid=oo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new jv().fromJSON(r))}return this}}const CCe={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=Aq(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,d,h,m;if(i&&(s=RCe(t,e,s,n)),t.length>80*n){a=u=t[0],l=c=t[1];for(let g=n;g<r;g+=n)d=t[g],h=t[g+1],d<a&&(a=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return qv(s,o,n,a,l,m,0),o}};function Aq(t,e,n,i,r){let s,o;if(r===VCe(t,e,n,i)>0)for(s=e;s<n;s+=i)o=RB(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=RB(s,t[s],t[s+1],o);return o&&fE(o,o.next)&&(Yv(o),o=o.next),o}function ef(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(fE(n,n.next)||ui(n.prev,n,n.next)===0)){if(Yv(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function qv(t,e,n,i,r,s,o){if(!t)return;!o&&s&&OCe(t,i,r,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?MCe(t,i,r,s):ACe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Yv(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=PCe(ef(t),e,n),qv(t,e,n,i,r,s,2)):o===2&&ICe(t,e,n,i,r,s):qv(ef(t),e,n,i,r,s,1);break}}}function ACe(t){const e=t.prev,n=t,i=t.next;if(ui(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,u=i.y,c=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,h=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let g=i.next;for(;g!==e;){if(g.x>=c&&g.x<=h&&g.y>=d&&g.y<=m&&tm(r,a,s,l,o,u,g.x,g.y)&&ui(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function MCe(t,e,n,i){const r=t.prev,s=t,o=t.next;if(ui(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,d=s.y,h=o.y,m=a<l?a<u?a:u:l<u?l:u,g=c<d?c<h?c:h:d<h?d:h,v=a>l?a>u?a:u:l>u?l:u,_=c>d?c>h?c:h:d>h?d:h,y=QI(m,g,e,n,i),S=QI(v,_,e,n,i);let x=t.prevZ,w=t.nextZ;for(;x&&x.z>=y&&w&&w.z<=S;){if(x.x>=m&&x.x<=v&&x.y>=g&&x.y<=_&&x!==r&&x!==o&&tm(a,c,l,d,u,h,x.x,x.y)&&ui(x.prev,x,x.next)>=0||(x=x.prevZ,w.x>=m&&w.x<=v&&w.y>=g&&w.y<=_&&w!==r&&w!==o&&tm(a,c,l,d,u,h,w.x,w.y)&&ui(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;x&&x.z>=y;){if(x.x>=m&&x.x<=v&&x.y>=g&&x.y<=_&&x!==r&&x!==o&&tm(a,c,l,d,u,h,x.x,x.y)&&ui(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;w&&w.z<=S;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=_&&w!==r&&w!==o&&tm(a,c,l,d,u,h,w.x,w.y)&&ui(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function PCe(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!fE(r,s)&&Mq(r,i,i.next,s)&&Xv(r,s)&&Xv(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Yv(i),Yv(i.next),i=t=s),i=i.next}while(i!==t);return ef(i)}function ICe(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&BCe(o,a)){let l=Pq(o,a);o=ef(o,o.next),l=ef(l,l.next),qv(o,e,n,i,r,s,0),qv(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function RCe(t,e,n,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,u=Aq(t,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(FCe(u));for(r.sort(DCe),s=0;s<r.length;s++)n=kCe(r[s],n);return n}function DCe(t,e){return t.x-e.x}function kCe(t,e){const n=LCe(t,e);if(!n)return e;const i=Pq(n,t);return ef(i,i.next),ef(n,n.next)}function LCe(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>i&&(i=h,r=n.x<n.next.x?n:n.next,h===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let c=1/0,d;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&tm(o<u?s:i,o,l,u,o<u?i:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),Xv(n,t)&&(d<c||d===c&&(n.x>r.x||n.x===r.x&&NCe(r,n)))&&(r=n,c=d)),n=n.next;while(n!==a);return r}function NCe(t,e){return ui(t.prev,t,e.prev)<0&&ui(e.next,t,t.next)<0}function OCe(t,e,n,i){let r=t;do r.z===0&&(r.z=QI(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,UCe(r)}function UCe(t){let e,n,i,r,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(o>1);return t}function QI(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function FCe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function tm(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function BCe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!zCe(t,e)&&(Xv(t,e)&&Xv(e,t)&&HCe(t,e)&&(ui(t.prev,t,e.prev)||ui(t,e.prev,e))||fE(t,e)&&ui(t.prev,t,t.next)>0&&ui(e.prev,e,e.next)>0)}function ui(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function fE(t,e){return t.x===e.x&&t.y===e.y}function Mq(t,e,n,i){const r=rS(ui(t,e,n)),s=rS(ui(t,e,i)),o=rS(ui(n,i,t)),a=rS(ui(n,i,e));return!!(r!==s&&o!==a||r===0&&iS(t,n,e)||s===0&&iS(t,i,e)||o===0&&iS(n,t,i)||a===0&&iS(n,e,i))}function iS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function rS(t){return t>0?1:t<0?-1:0}function zCe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Mq(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Xv(t,e){return ui(t.prev,t,t.next)<0?ui(t,e,t.next)>=0&&ui(t,t.prev,e)>=0:ui(t,e,t.prev)<0||ui(t,t.next,e)<0}function HCe(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function Pq(t,e){const n=new ZI(t.i,t.x,t.y),i=new ZI(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function RB(t,e,n,i){const r=new ZI(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Yv(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ZI(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function VCe(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class _l{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return _l.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];DB(e),kB(i,e);let o=e.length;n.forEach(DB);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,kB(i,n[l]);const a=CCe.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function DB(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function kB(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class pE extends Zt{constructor(e=new Fh([new je(.5,.5),new je(-.5,.5),new je(-.5,-.5),new je(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,_=n.bevelSegments!==void 0?n.bevelSegments:3;const y=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:$Ce;let x,w=!1,P,A,D,O;y&&(x=y.getSpacedPoints(c),w=!0,h=!1,P=y.computeFrenetFrames(c,!1),A=new J,D=new J,O=new J),h||(_=0,m=0,g=0,v=0);const H=a.extractPoints(u);let E=H.shape;const k=H.holes;if(!_l.isClockWise(E)){E=E.reverse();for(let le=0,j=k.length;le<j;le++){const Me=k[le];_l.isClockWise(Me)&&(k[le]=Me.reverse())}}const G=_l.triangulateShape(E,k),Y=E;for(let le=0,j=k.length;le<j;le++){const Me=k[le];E=E.concat(Me)}function ie(le,j,Me){return j||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().addScaledVector(j,Me)}const Q=E.length,oe=G.length;function z(le,j,Me){let Re,Be,We;const rt=le.x-j.x,st=le.y-j.y,q=Me.x-le.x,V=Me.y-le.y,_e=rt*rt+st*st,De=rt*V-st*q;if(Math.abs(De)>Number.EPSILON){const Ve=Math.sqrt(_e),Ne=Math.sqrt(q*q+V*V),dt=j.x-st/Ve,qe=j.y+rt/Ve,Qe=Me.x-V/Ne,Gt=Me.y+q/Ne,Ke=((Qe-dt)*V-(Gt-qe)*q)/(rt*V-st*q);Re=dt+rt*Ke-le.x,Be=qe+st*Ke-le.y;const ut=Re*Re+Be*Be;if(ut<=2)return new je(Re,Be);We=Math.sqrt(ut/2)}else{let Ve=!1;rt>Number.EPSILON?q>Number.EPSILON&&(Ve=!0):rt<-Number.EPSILON?q<-Number.EPSILON&&(Ve=!0):Math.sign(st)===Math.sign(V)&&(Ve=!0),Ve?(Re=-st,Be=rt,We=Math.sqrt(_e)):(Re=rt,Be=st,We=Math.sqrt(_e/2))}return new je(Re/We,Be/We)}const ee=[];for(let le=0,j=Y.length,Me=j-1,Re=le+1;le<j;le++,Me++,Re++)Me===j&&(Me=0),Re===j&&(Re=0),ee[le]=z(Y[le],Y[Me],Y[Re]);const te=[];let ce,Te=ee.concat();for(let le=0,j=k.length;le<j;le++){const Me=k[le];ce=[];for(let Re=0,Be=Me.length,We=Be-1,rt=Re+1;Re<Be;Re++,We++,rt++)We===Be&&(We=0),rt===Be&&(rt=0),ce[Re]=z(Me[Re],Me[We],Me[rt]);te.push(ce),Te=Te.concat(ce)}for(let le=0;le<_;le++){const j=le/_,Me=m*Math.cos(j*Math.PI/2),Re=g*Math.sin(j*Math.PI/2)+v;for(let Be=0,We=Y.length;Be<We;Be++){const rt=ie(Y[Be],ee[Be],Re);He(rt.x,rt.y,-Me)}for(let Be=0,We=k.length;Be<We;Be++){const rt=k[Be];ce=te[Be];for(let st=0,q=rt.length;st<q;st++){const V=ie(rt[st],ce[st],Re);He(V.x,V.y,-Me)}}}const Ue=g+v;for(let le=0;le<Q;le++){const j=h?ie(E[le],Te[le],Ue):E[le];w?(D.copy(P.normals[0]).multiplyScalar(j.x),A.copy(P.binormals[0]).multiplyScalar(j.y),O.copy(x[0]).add(D).add(A),He(O.x,O.y,O.z)):He(j.x,j.y,0)}for(let le=1;le<=c;le++)for(let j=0;j<Q;j++){const Me=h?ie(E[j],Te[j],Ue):E[j];w?(D.copy(P.normals[le]).multiplyScalar(Me.x),A.copy(P.binormals[le]).multiplyScalar(Me.y),O.copy(x[le]).add(D).add(A),He(O.x,O.y,O.z)):He(Me.x,Me.y,d/c*le)}for(let le=_-1;le>=0;le--){const j=le/_,Me=m*Math.cos(j*Math.PI/2),Re=g*Math.sin(j*Math.PI/2)+v;for(let Be=0,We=Y.length;Be<We;Be++){const rt=ie(Y[Be],ee[Be],Re);He(rt.x,rt.y,d+Me)}for(let Be=0,We=k.length;Be<We;Be++){const rt=k[Be];ce=te[Be];for(let st=0,q=rt.length;st<q;st++){const V=ie(rt[st],ce[st],Re);w?He(V.x,V.y+x[c-1].y,x[c-1].x+Me):He(V.x,V.y,d+Me)}}}he(),xe();function he(){const le=r.length/3;if(h){let j=0,Me=Q*j;for(let Re=0;Re<oe;Re++){const Be=G[Re];ot(Be[2]+Me,Be[1]+Me,Be[0]+Me)}j=c+_*2,Me=Q*j;for(let Re=0;Re<oe;Re++){const Be=G[Re];ot(Be[0]+Me,Be[1]+Me,Be[2]+Me)}}else{for(let j=0;j<oe;j++){const Me=G[j];ot(Me[2],Me[1],Me[0])}for(let j=0;j<oe;j++){const Me=G[j];ot(Me[0]+Q*c,Me[1]+Q*c,Me[2]+Q*c)}}i.addGroup(le,r.length/3-le,0)}function xe(){const le=r.length/3;let j=0;Fe(Y,j),j+=Y.length;for(let Me=0,Re=k.length;Me<Re;Me++){const Be=k[Me];Fe(Be,j),j+=Be.length}i.addGroup(le,r.length/3-le,1)}function Fe(le,j){let Me=le.length;for(;--Me>=0;){const Re=Me;let Be=Me-1;Be<0&&(Be=le.length-1);for(let We=0,rt=c+_*2;We<rt;We++){const st=Q*We,q=Q*(We+1),V=j+Re+st,_e=j+Be+st,De=j+Be+q,Ve=j+Re+q;Ae(V,_e,De,Ve)}}}function He(le,j,Me){l.push(le),l.push(j),l.push(Me)}function ot(le,j,Me){Ge(le),Ge(j),Ge(Me);const Re=r.length/3,Be=S.generateTopUV(i,r,Re-3,Re-2,Re-1);Le(Be[0]),Le(Be[1]),Le(Be[2])}function Ae(le,j,Me,Re){Ge(le),Ge(j),Ge(Re),Ge(j),Ge(Me),Ge(Re);const Be=r.length/3,We=S.generateSideWallUV(i,r,Be-6,Be-3,Be-2,Be-1);Le(We[0]),Le(We[1]),Le(We[3]),Le(We[1]),Le(We[2]),Le(We[3])}function Ge(le){r.push(l[le*3+0]),r.push(l[le*3+1]),r.push(l[le*3+2])}function Le(le){s.push(le.x),s.push(le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return GCe(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new n2[r.type]().fromJSON(r)),new pE(i,e.options)}}const $Ce={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new je(s,o),new je(a,l),new je(u,c)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[i*3],c=e[i*3+1],d=e[i*3+2],h=e[r*3],m=e[r*3+1],g=e[r*3+2],v=e[s*3],_=e[s*3+1],y=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new je(o,1-l),new je(u,1-d),new je(h,1-g),new je(v,1-y)]:[new je(a,1-l),new je(c,1-d),new je(m,1-g),new je(_,1-y)]}};function GCe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class mE extends fd{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new mE(e.radius,e.detail)}}class F_ extends fd{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new F_(e.radius,e.detail)}}class gE extends Zt{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],c=[];let d=e;const h=(n-e)/r,m=new J,g=new je;for(let v=0;v<=r;v++){for(let _=0;_<=i;_++){const y=s+_/i*o;m.x=d*Math.cos(y),m.y=d*Math.sin(y),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,c.push(g.x,g.y)}d+=h}for(let v=0;v<r;v++){const _=v*(i+1);for(let y=0;y<i;y++){const S=y+_,x=S,w=S+i+1,P=S+i+2,A=S+1;a.push(x,w,A),a.push(w,P,A)}}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class yE extends Zt{constructor(e=new Fh([new je(0,.5),new je(-.5,-.5),new je(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function u(c){const d=r.length/3,h=c.extractPoints(n);let m=h.shape;const g=h.holes;_l.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,y=g.length;_<y;_++){const S=g[_];_l.isClockWise(S)===!0&&(g[_]=S.reverse())}const v=_l.triangulateShape(m,g);for(let _=0,y=g.length;_<y;_++){const S=g[_];m=m.concat(S)}for(let _=0,y=m.length;_<y;_++){const S=m[_];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let _=0,y=v.length;_<y;_++){const S=v[_],x=S[0]+d,w=S[1]+d,P=S[2]+d;i.push(x,w,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return WCe(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new yE(i,e.curveSegments)}}function WCe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class B_ extends Zt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const c=[],d=new J,h=new J,m=[],g=[],v=[],_=[];for(let y=0;y<=i;y++){const S=[],x=y/i;let w=0;y===0&&o===0?w=.5/n:y===i&&l===Math.PI&&(w=-.5/n);for(let P=0;P<=n;P++){const A=P/n;d.x=-e*Math.cos(r+A*s)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(r+A*s)*Math.sin(o+x*a),g.push(d.x,d.y,d.z),h.copy(d).normalize(),v.push(h.x,h.y,h.z),_.push(A+w,1-x),S.push(u++)}c.push(S)}for(let y=0;y<i;y++)for(let S=0;S<n;S++){const x=c[y][S+1],w=c[y][S],P=c[y+1][S],A=c[y+1][S+1];(y!==0||o>0)&&m.push(x,w,A),(y!==i-1||l<Math.PI)&&m.push(w,P,A)}this.setIndex(m),this.setAttribute("position",new Ct(g,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class vE extends fd{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new vE(e.radius,e.detail)}}class _E extends Zt{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],c=new J,d=new J,h=new J;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const v=g/r*s,_=m/i*Math.PI*2;d.x=(e+n*Math.cos(_))*Math.cos(v),d.y=(e+n*Math.cos(_))*Math.sin(v),d.z=n*Math.sin(_),a.push(d.x,d.y,d.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),h.subVectors(d,c).normalize(),l.push(h.x,h.y,h.z),u.push(g/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const v=(r+1)*m+g-1,_=(r+1)*(m-1)+g-1,y=(r+1)*(m-1)+g,S=(r+1)*m+g;o.push(v,_,S),o.push(_,y,S)}this.setIndex(o),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _E(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class xE extends Zt{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],c=[],d=new J,h=new J,m=new J,g=new J,v=new J,_=new J,y=new J;for(let x=0;x<=i;++x){const w=x/i*s*Math.PI*2;S(w,s,o,e,m),S(w+.01,s,o,e,g),_.subVectors(g,m),y.addVectors(g,m),v.crossVectors(_,y),y.crossVectors(v,_),v.normalize(),y.normalize();for(let P=0;P<=r;++P){const A=P/r*Math.PI*2,D=-n*Math.cos(A),O=n*Math.sin(A);d.x=m.x+(D*y.x+O*v.x),d.y=m.y+(D*y.y+O*v.y),d.z=m.z+(D*y.z+O*v.z),l.push(d.x,d.y,d.z),h.subVectors(d,m).normalize(),u.push(h.x,h.y,h.z),c.push(x/i),c.push(P/r)}}for(let x=1;x<=i;x++)for(let w=1;w<=r;w++){const P=(r+1)*(x-1)+(w-1),A=(r+1)*x+(w-1),D=(r+1)*x+w,O=(r+1)*(x-1)+w;a.push(P,A,O),a.push(A,D,O)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(c,2));function S(x,w,P,A,D){const O=Math.cos(x),H=Math.sin(x),E=P/w*x,k=Math.cos(E);D.x=A*(2+k)*.5*O,D.y=A*(2+k)*H*.5,D.z=A*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class SE extends Zt{constructor(e=new lL(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,u=new je;let c=new J;const d=[],h=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(m,2));function v(){for(let x=0;x<n;x++)_(x);_(s===!1?n:0),S(),y()}function _(x){c=e.getPointAt(x/n,c);const w=o.normals[x],P=o.binormals[x];for(let A=0;A<=r;A++){const D=A/r*Math.PI*2,O=Math.sin(D),H=-Math.cos(D);l.x=H*w.x+O*P.x,l.y=H*w.y+O*P.y,l.z=H*w.z+O*P.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+i*l.x,a.y=c.y+i*l.y,a.z=c.z+i*l.z,d.push(a.x,a.y,a.z)}}function y(){for(let x=1;x<=n;x++)for(let w=1;w<=r;w++){const P=(r+1)*(x-1)+(w-1),A=(r+1)*x+(w-1),D=(r+1)*x+w,O=(r+1)*(x-1)+w;g.push(P,A,O),g.push(A,D,O)}}function S(){for(let x=0;x<=n;x++)for(let w=0;w<=r;w++)u.x=x/n,u.y=w/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new SE(new n2[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Iq extends Zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new J,s=new J;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],h=d.start,m=d.count;for(let g=h,v=h+m;g<v;g+=3)for(let _=0;_<3;_++){const y=a.getX(g+_),S=a.getX(g+(_+1)%3);r.fromBufferAttribute(o,y),s.fromBufferAttribute(o,S),LB(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,c),s.fromBufferAttribute(o,d),LB(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function LB(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var NB=Object.freeze({__proto__:null,BoxGeometry:hf,CapsuleGeometry:uE,CircleGeometry:cE,ConeGeometry:dE,CylinderGeometry:Cg,DodecahedronGeometry:hE,EdgesGeometry:Cq,ExtrudeGeometry:pE,IcosahedronGeometry:mE,LatheGeometry:U_,OctahedronGeometry:F_,PlaneGeometry:wg,PolyhedronGeometry:fd,RingGeometry:gE,ShapeGeometry:yE,SphereGeometry:B_,TetrahedronGeometry:vE,TorusGeometry:_E,TorusKnotGeometry:xE,TubeGeometry:SE,WireframeGeometry:Iq});class Rq extends Sr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Dq extends Da{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class cL extends Sr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dd,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kq extends cL{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Lq extends Sr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xt(16777215),this.specular=new xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dd,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=R_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nq extends Sr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dd,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Oq extends Sr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dd,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Uq extends Sr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dd,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=R_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fq extends Sr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dd,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Bq extends os{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Th(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function zq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hq(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function JI(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function dL(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function jCe(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),d=[],h=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*r;if(!(g<n||g>=i)){d.push(u.times[m]);for(let v=0;v<c;++v)h.push(u.values[m*c+v])}}d.length!==0&&(u.times=Th(d,u.times.constructor),u.values=Th(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function qCe(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(u===void 0)continue;let c=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let h=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const y=c,S=d-c;v=a.values.slice(y,S)}else if(s>=a.times[g]){const y=g*d+c,S=y+d-c;v=a.values.slice(y,S)}else{const y=a.createInterpolant(),S=c,x=d-c;y.evaluate(s),v=y.resultBuffer.slice(S,x)}l==="quaternion"&&new Nr().fromArray(v).normalize().conjugate().toArray(v);const _=u.times.length;for(let y=0;y<_;++y){const S=y*m+h;if(l==="quaternion")Nr.multiplyQuaternionsFlat(u.values,S,v,0,u.values,S);else{const x=m-h*2;for(let w=0;w<x;++w)u.values[S+w]-=v[w]}}}return t.blendMode=W3,t}const XCe={convertArray:Th,isTypedArray:zq,getKeyframeOrder:Hq,sortedArray:JI,flattenJSON:dL,subclip:jCe,makeClipAdditive:qCe};class z_{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Vq extends z_{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_h,endingEnd:_h}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case xh:s=e,a=2*n-i;break;case Bv:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case xh:o=e,l=2*i-n;break;case Bv:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const u=(i-n)*.5,c=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-i),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,m=this._weightNext,g=(i-n)/(r-n),v=g*g,_=v*g,y=-h*_+2*h*v-h*g,S=(1+h)*_+(-1.5-2*h)*v+(-.5+h)*g+1,x=(-1-m)*_+(1.5+m)*v+.5*g,w=m*_-m*v;for(let P=0;P!==a;++P)s[P]=y*o[c+P]+S*o[u+P]+x*o[l+P]+w*o[d+P];return s}}class hL extends z_{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(i-n)/(r-n),d=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*d+o[l+h]*c;return s}}class $q extends z_{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ba{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Th(n,this.TimeBufferType),this.values=Th(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Th(e.times,Array),values:Th(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new $q(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Vq(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Fv:n=this.InterpolantFactoryMethodDiscrete;break;case Zb:n=this.InterpolantFactoryMethodLinear;break;case zS:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fv;case this.InterpolantFactoryMethodLinear:return Zb;case this.InterpolantFactoryMethodSmooth:return zS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&zq(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===zS,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,m=d+i;for(let g=0;g!==i;++g){const v=n[d+g];if(v!==n[h+g]||v!==n[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let m=0;m!==i;++m)n[h+m]=n[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Ba.prototype.TimeBufferType=Float32Array;Ba.prototype.ValueBufferType=Float32Array;Ba.prototype.DefaultInterpolation=Zb;class ff extends Ba{constructor(e,n,i){super(e,n,i)}}ff.prototype.ValueTypeName="bool";ff.prototype.ValueBufferType=Array;ff.prototype.DefaultInterpolation=Fv;ff.prototype.InterpolantFactoryMethodLinear=void 0;ff.prototype.InterpolantFactoryMethodSmooth=void 0;class fL extends Ba{}fL.prototype.ValueTypeName="color";class Kv extends Ba{}Kv.prototype.ValueTypeName="number";class Gq extends z_{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let u=e*a;for(let c=u+a;u!==c;u+=4)Nr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class H_ extends Ba{InterpolantFactoryMethodLinear(e){return new Gq(this.times,this.values,this.getValueSize(),e)}}H_.prototype.ValueTypeName="quaternion";H_.prototype.InterpolantFactoryMethodSmooth=void 0;class pf extends Ba{constructor(e,n,i){super(e,n,i)}}pf.prototype.ValueTypeName="string";pf.prototype.ValueBufferType=Array;pf.prototype.DefaultInterpolation=Fv;pf.prototype.InterpolantFactoryMethodLinear=void 0;pf.prototype.InterpolantFactoryMethodSmooth=void 0;class Qv extends Ba{}Qv.prototype.ValueTypeName="vector";class Zv{constructor(e="",n=-1,i=[],r=Jw){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=oo(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(KCe(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(Ba.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=Hq(l);l=JI(l,1,c),u=JI(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Kv(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const d=c[1];let h=r[d];h||(r[d]=h=[]),h.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,m,g,v){if(m.length!==0){const _=[],y=[];dL(m,_,y,g),_.length!==0&&v.push(new d(h,_,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const h=u[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let v=0;v<h[g].morphTargets.length;v++)m[h[g].morphTargets[v]]=-1;for(const v in m){const _=[],y=[];for(let S=0;S!==h[g].morphTargets.length;++S){const x=h[g];_.push(x.time),y.push(x.morphTarget===v?1:0)}r.push(new Kv(".morphTargetInfluence["+v+"]",_,y))}l=m.length*o}else{const m=".bones["+n[d].name+"]";i(Qv,m+".position",h,"pos",r),i(H_,m+".quaternion",h,"rot",r),i(Qv,m+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function YCe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kv;case"vector":case"vector2":case"vector3":case"vector4":return Qv;case"color":return fL;case"quaternion":return H_;case"bool":case"boolean":return ff;case"string":return pf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function KCe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=YCe(t.type);if(t.times===void 0){const n=[],i=[];dL(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const lu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class pL{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(c){a++,s===!1&&r.onStart!==void 0&&r.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=u.length;d<h;d+=2){const m=u[d],g=u[d+1];if(m.global&&(m.lastIndex=0),m.test(c))return g}return null}}}const Wq=new pL;class as{constructor(e){this.manager=e!==void 0?e:Wq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}as.DEFAULT_MATERIAL_NAME="__DEFAULT";const ql={};class QCe extends Error{constructor(e,n){super(e),this.response=n}}class Cl extends as{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(ql[e]!==void 0){ql[e].push({onLoad:n,onProgress:i,onError:r});return}ql[e]=[],ql[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=ql[e],d=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=h?parseInt(h):0,g=m!==0;let v=0;const _=new ReadableStream({start(y){S();function S(){d.read().then(({done:x,value:w})=>{if(x)y.close();else{v+=w.byteLength;const P=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let A=0,D=c.length;A<D;A++){const O=c[A];O.onProgress&&O.onProgress(P)}y.enqueue(w),S()}},x=>{y.error(x)})}}});return new Response(_)}else throw new QCe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(h);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{lu.add(e,u);const c=ql[e];delete ql[e];for(let d=0,h=c.length;d<h;d++){const m=c[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=ql[e];if(c===void 0)throw this.manager.itemError(e),u;delete ql[e];for(let d=0,h=c.length;d<h;d++){const m=c[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ZCe extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Cl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Zv.parse(e[i]);n.push(r)}return n}}class JCe extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new aE,l=new Cl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(d){l.load(e[d],function(h){const m=s.parse(h,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Fi),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)c(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<h.mipmapCount;v++)o[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+v]),o[g].format=h.format,o[g].width=h.width,o[g].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Fi),a.format=h.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class Jv extends as{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Wv("img");function l(){c(),lu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(d){c(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class eAe extends as{constructor(e){super(e)}load(e,n,i,r){const s=new N_;s.colorSpace=Zs;const o=new Jv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class tAe extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new vl,a=new Cl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(r!==void 0)r(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:zo,o.wrapT=u.wrapT!==void 0?u.wrapT:zo,o.magFilter=u.magFilter!==void 0?u.magFilter:Fi,o.minFilter=u.minFilter!==void 0?u.minFilter:Fi,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=al),u.mipmapCount===1&&(o.minFilter=Fi),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u)},i,r),o}}class nAe extends as{constructor(e){super(e)}load(e,n,i,r){const s=new hi,o=new Jv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class pd extends _n{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new xt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class jq extends pd{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const mM=new zt,OB=new J,UB=new J;class mL{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new O_,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;OB.setFromMatrixPosition(e.matrixWorld),n.position.copy(OB),UB.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(UB),n.updateMatrixWorld(),mM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mM),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(mM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class iAe extends mL{constructor(){super(new oi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=ng*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class qq extends pd{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new iAe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const FB=new zt,z0=new J,gM=new J;class rAe extends mL{constructor(){super(new oi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),z0.setFromMatrixPosition(e.matrixWorld),i.position.copy(z0),gM.copy(i.position),gM.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(gM),i.updateMatrixWorld(),r.makeTranslation(-z0.x,-z0.y,-z0.z),FB.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FB)}}class Xq extends pd{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new rAe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class sAe extends mL{constructor(){super(new ba(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Yq extends pd{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new sAe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Kq extends pd{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Qq extends pd{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Zq{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class Jq extends pd{constructor(e=new Zq,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class TE extends as{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new Cl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new xt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new xt().setHex(o.value);break;case"v2":r.uniforms[s].value=new je().fromArray(o.value);break;case"v3":r.uniforms[s].value=new J().fromArray(o.value);break;case"v4":r.uniforms[s].value=new yn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new en().fromArray(o.value);break;case"m4":r.uniforms[s].value=new zt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new je().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return TE.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:Rq,SpriteMaterial:tL,RawShaderMaterial:Dq,ShaderMaterial:Da,PointsMaterial:iL,MeshPhysicalMaterial:kq,MeshStandardMaterial:cL,MeshPhongMaterial:Lq,MeshToonMaterial:Nq,MeshNormalMaterial:Oq,MeshLambertMaterial:Uq,MeshDepthMaterial:J3,MeshDistanceMaterial:eL,MeshBasicMaterial:hd,MeshMatcapMaterial:Fq,LineDashedMaterial:Bq,LineBasicMaterial:os,Material:Sr};return new n[e]}}class eR{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class eX extends Zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class tX extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Cl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(m,g){if(n[g]!==void 0)return n[g];const _=m.interleavedBuffers[g],y=s(m,_.buffer),S=Zp(_.type,y),x=new sE(S,_.stride);return x.uuid=_.uuid,n[g]=x,x}function s(m,g){if(i[g]!==void 0)return i[g];const _=m.arrayBuffers[g],y=new Uint32Array(_).buffer;return i[g]=y,y}const o=e.isInstancedBufferGeometry?new eX:new Zt,a=e.data.index;if(a!==void 0){const m=Zp(a.type,a.array);o.setIndex(new Mn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const _=r(e.data,g.data);v=new Jh(_,g.itemSize,g.offset,g.normalized)}else{const _=Zp(g.type,g.array),y=g.isInstancedBufferAttribute?rg:Mn;v=new y(_,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),o.setAttribute(m,v)}const u=e.data.morphAttributes;if(u)for(const m in u){const g=u[m],v=[];for(let _=0,y=g.length;_<y;_++){const S=g[_];let x;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);x=new Jh(w,S.itemSize,S.offset,S.normalized)}else{const w=Zp(S.type,S.array);x=new Mn(w,S.itemSize,S.normalized)}S.name!==void 0&&(x.name=S.name),v.push(x)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const v=d[m];o.addGroup(v.start,v.count,v.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new J;h.center!==void 0&&m.fromArray(h.center),o.boundingSphere=new Or(m,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class oAe extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?eR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Cl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?eR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Cl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),n!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Fh().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new oE().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new tX;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in NB?a=NB[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new TE;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Zv.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(c)}else return l.data?{data:Zp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new pL(n);s=new Jv(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],h=d.url;if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const _=h[g],y=a(_);y!==null&&(y instanceof HTMLImageElement?m.push(y):m.push(new vl(y.data,y.width,y.height)))}r[d.uuid]=new Sh(m)}else{const m=a(d.url);r[d.uuid]=new Sh(m)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Zp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Jv(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,h=u.length;d<h;d++){const m=u[d],g=await s(m);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new vl(g.data,g.width,g.height)))}i[l.uuid]=new Sh(c)}else{const c=await s(l.url);i[l.uuid]=new Sh(c)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let c;Array.isArray(u)?(c=new N_,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new vl:c=new hi,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=i(a.mapping,aAe)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=i(a.wrap[0],BB),c.wrapT=i(a.wrap[1],BB)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=i(a.minFilter,zB)),a.magFilter!==void 0&&(c.magFilter=i(a.magFilter,zB)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),r[a.uuid]=c}return r}parseObject(e,n,i,r,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const _=h[g];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function u(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let c,d;switch(e.type){case"Scene":o=new Jb,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new xt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new rE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new iE(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new oi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ba(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Kq(e.color,e.intensity);break;case"DirectionalLight":o=new Yq(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Xq(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Qq(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new qq(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new jq(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Jq().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),d=l(e.material),o=new gq(c,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),d=l(e.material),o=new Bi(c,d);break;case"InstancedMesh":c=a(e.geometry),d=l(e.material);const h=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new yq(c,d,h),o.instanceMatrix=new rg(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new rg(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":c=a(e.geometry),d=l(e.material),o=new vq(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const _=new is;_.min.fromArray(v.boxMin),_.max.fromArray(v.boxMax);const y=new Or;return y.radius=v.sphereRadius,y.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:_,sphereInitialized:v.sphereInitialized,sphere:y}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new mq;break;case"Line":o=new nd(a(e.geometry),l(e.material));break;case"LineLoop":o=new _q(a(e.geometry),l(e.material));break;case"LineSegments":o=new Al(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new xq(a(e.geometry),l(e.material));break;case"Sprite":o=new pq(l(e.material));break;case"Group":o=new em;break;case"Bone":o=new nL;break;default:o=new _n}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)o.add(this.parseObject(h[m],n,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const g=h[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const g=h[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new _n}})}}const aAe={UVMapping:jw,CubeReflectionMapping:Du,CubeRefractionMapping:td,EquirectangularReflectionMapping:Lv,EquirectangularRefractionMapping:Nv,CubeUVReflectionMapping:Tg},BB={RepeatWrapping:Ov,ClampToEdgeWrapping:zo,MirroredRepeatWrapping:Uv},zB={NearestFilter:sr,NearestMipmapNearestFilter:N3,NearestMipmapLinearFilter:Qp,LinearFilter:Fi,LinearMipmapNearestFilter:Iy,LinearMipmapLinearFilter:al};class lAe extends as{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{n&&n(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return lu.add(e,u),n&&n(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),lu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});lu.add(e,l),s.manager.itemStart(e)}}let sS;class gL{static getContext(){return sS===void 0&&(sS=new(window.AudioContext||window.webkitAudioContext)),sS}static setContext(e){sS=e}}class uAe extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Cl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);gL.getContext().decodeAudioData(u,function(d){n(d)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const HB=new zt,VB=new zt,Yd=new zt;class cAe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Yd.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(Oh*n.fov*.5)/n.zoom;let a,l;VB.elements[12]=-r,HB.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,Yd.elements[0]=2*n.near/(l-a),Yd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Yd),a=-o*n.aspect-s,l=o*n.aspect-s,Yd.elements[0]=2*n.near/(l-a),Yd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Yd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VB),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HB)}}class yL{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$B(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=$B();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function $B(){return performance.now()}const Kd=new J,GB=new Nr,dAe=new J,Qd=new J;class hAe extends _n{constructor(){super(),this.type="AudioListener",this.context=gL.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yL}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Kd,GB,dAe),Qd.set(0,0,-1).applyQuaternion(GB),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Kd.x,r),n.positionY.linearRampToValueAtTime(Kd.y,r),n.positionZ.linearRampToValueAtTime(Kd.z,r),n.forwardX.linearRampToValueAtTime(Qd.x,r),n.forwardY.linearRampToValueAtTime(Qd.y,r),n.forwardZ.linearRampToValueAtTime(Qd.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Kd.x,Kd.y,Kd.z),n.setOrientation(Qd.x,Qd.y,Qd.z,i.x,i.y,i.z)}}class nX extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Zd=new J,WB=new Nr,fAe=new J,Jd=new J;class pAe extends nX{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zd,WB,fAe),Jd.set(0,0,1).applyQuaternion(WB);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Zd.x,i),n.positionY.linearRampToValueAtTime(Zd.y,i),n.positionZ.linearRampToValueAtTime(Zd.z,i),n.orientationX.linearRampToValueAtTime(Jd.x,i),n.orientationY.linearRampToValueAtTime(Jd.y,i),n.orientationZ.linearRampToValueAtTime(Jd.z,i)}else n.setPosition(Zd.x,Zd.y,Zd.z),n.setOrientation(Jd.x,Jd.y,Jd.z)}}class mAe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class iX{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Nr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Nr.multiplyQuaternionsFlat(e,o,e,n,e,i),Nr.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const vL="\\[\\]\\.:\\/",gAe=new RegExp("["+vL+"]","g"),_L="[^"+vL+"]",yAe="[^"+vL.replace("\\.","")+"]",vAe=/((?:WC+[\/:])*)/.source.replace("WC",_L),_Ae=/(WCOD+)?/.source.replace("WCOD",yAe),xAe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_L),SAe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_L),TAe=new RegExp("^"+vAe+_Ae+xAe+SAe+"$"),bAe=["material","materials","bones","map"];class wAe{constructor(e,n,i){const r=i||mn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class mn{constructor(e,n,i){this.path=n,this.parsedPath=i||mn.parseTrackName(n),this.node=mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new mn.Composite(e,n,i):new mn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gAe,"")}static parseTrackName(e){const n=TAe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);bAe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=mn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mn.Composite=wAe;mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray];mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class EAe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=oo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const h=arguments[c],m=h.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(h);for(let v=0,_=o;v!==_;++v)s[v].push(new mn(h,i[v],r[v]))}else if(g<u){a=e[g];const v=--u,_=e[v];n[_.uuid]=g,e[g]=_,n[m]=v,e[v]=h;for(let y=0,S=o;y!==S;++y){const x=s[y],w=x[v];let P=x[g];x[g]=w,P===void 0&&(P=new mn(h,i[y],r[y])),x[v]=P}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=n[u];if(c!==void 0&&c>=s){const d=s++,h=e[d];n[h.uuid]=c,e[c]=h,n[u]=d,e[d]=l;for(let m=0,g=r;m!==g;++m){const v=i[m],_=v[d],y=v[c];v[c]=_,v[d]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,d=n[c];if(d!==void 0)if(delete n[c],d<s){const h=--s,m=e[h],g=--o,v=e[g];n[m.uuid]=d,e[d]=m,n[v.uuid]=h,e[h]=v,e.pop();for(let _=0,y=r;_!==y;++_){const S=i[_],x=S[h],w=S[g];S[d]=x,S[h]=w,S.pop()}}else{const h=--o,m=e[h];h>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let g=0,v=r;g!==v;++g){const _=i[g];_[d]=_[h],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(d);for(let h=c,m=l.length;h!==m;++h){const g=l[h];d[h]=new mn(g,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class rX{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:_h,endingEnd:_h};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Fj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case W3:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case Jw:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===Bj;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===Uj){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=xh,r.endingEnd=xh):(e?r.endingStart=this.zeroSlopeAtStart?xh:_h:r.endingStart=Bv,n?r.endingEnd=this.zeroSlopeAtEnd?xh:_h:r.endingEnd=Bv)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const CAe=new Float32Array(1);class AAe extends Ua{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==s;++d){const h=r[d],m=h.name;let g=c[m];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=n&&n._propertyBindings[d].binding.parsedPath;g=new iX(mn.create(i,m,v),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new hL(new Float32Array(2),new Float32Array(2),1,CAe),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?Zv.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Jw),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new rX(this,o,n,i);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Zv.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)n[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,d=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,n[c]=d,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class xL{constructor(e){this.value=e}clone(){return new xL(this.value.clone===void 0?this.value:this.value.clone())}}let MAe=0;class PAe extends Ua{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:MAe++}),this.name="",this.usage=$v,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const s=Array.isArray(n[i])?n[i]:[n[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class IAe extends sE{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class RAe{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const jB=new zt;class sX{constructor(e,n,i=0,r=1/0){this.ray=new df(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Uh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return jB.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(jB),this}intersectObject(e,n=!0,i=[]){return tR(e,this,i,n),i.sort(qB),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)tR(e[r],this,i,n);return i.sort(qB),i}}function qB(t,e){return t.distance-e.distance}function tR(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const s=t.children;for(let o=0,a=s.length;o<a;o++)tR(s[o],e,n,!0)}}class nR{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ti(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DAe{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class SL{constructor(e,n,i,r){SL.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const s=this.elements;return s[0]=e,s[2]=n,s[1]=i,s[3]=r,this}}const XB=new je;class kAe{constructor(e=new je(1/0,1/0),n=new je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=XB.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,XB).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const YB=new J,oS=new J;class LAe{constructor(e=new J,n=new J){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){YB.subVectors(e,this.start),oS.subVectors(this.end,this.start);const i=oS.dot(oS);let s=oS.dot(YB)/i;return n&&(s=Ti(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const KB=new J;class NAe extends _n{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new Zt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new Ct(r,3));const s=new os({fog:!1,toneMapped:!1});this.cone=new Al(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),KB.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(KB),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tc=new J,aS=new zt,yM=new zt;class OAe extends Al{constructor(e){const n=oX(e),i=new Zt,r=[],s=[],o=new xt(0,0,1),a=new xt(0,1,0);for(let u=0;u<n.length;u++){const c=n[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ct(r,3)),i.setAttribute("color",new Ct(s,3));const l=new os({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");yM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(aS.multiplyMatrices(yM,a.matrixWorld),Tc.setFromMatrixPosition(aS),r.setXYZ(o,Tc.x,Tc.y,Tc.z),aS.multiplyMatrices(yM,a.parent.matrixWorld),Tc.setFromMatrixPosition(aS),r.setXYZ(o+1,Tc.x,Tc.y,Tc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function oX(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,oX(t.children[n]));return e}class UAe extends Bi{constructor(e,n,i){const r=new B_(n,4,2),s=new hd({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const FAe=new J,QB=new xt,ZB=new xt;class BAe extends _n{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new F_(n);r.rotateY(Math.PI*.5),this.material=new hd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Mn(o,3)),this.add(new Bi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");QB.copy(this.light.color),ZB.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?QB:ZB;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(FAe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class zAe extends Al{constructor(e=10,n=10,i=4473924,r=8947848){i=new xt(i),r=new xt(r);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let h=0,m=0,g=-a;h<=n;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=h===s?i:r;v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3}const c=new Zt;c.setAttribute("position",new Ct(l,3)),c.setAttribute("color",new Ct(u,3));const d=new os({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class HAe extends Al{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new xt(s),o=new xt(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const h=d/n*(Math.PI*2),m=Math.sin(h)*e,g=Math.cos(h)*e;a.push(0,0,0),a.push(m,0,g);const v=d&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<i;d++){const h=d&1?s:o,m=e-e/i*d;for(let g=0;g<r;g++){let v=g/r*(Math.PI*2),_=Math.sin(v)*m,y=Math.cos(v)*m;a.push(_,0,y),l.push(h.r,h.g,h.b),v=(g+1)/r*(Math.PI*2),_=Math.sin(v)*m,y=Math.cos(v)*m,a.push(_,0,y),l.push(h.r,h.g,h.b)}}const u=new Zt;u.setAttribute("position",new Ct(a,3)),u.setAttribute("color",new Ct(l,3));const c=new os({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const JB=new J,lS=new J,e8=new J;class VAe extends _n{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new Zt;r.setAttribute("position",new Ct([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new os({fog:!1,toneMapped:!1});this.lightPlane=new nd(r,s),this.add(this.lightPlane),r=new Zt,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new nd(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),JB.setFromMatrixPosition(this.light.matrixWorld),lS.setFromMatrixPosition(this.light.target.matrixWorld),e8.subVectors(lS,JB),this.lightPlane.lookAt(lS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lS),this.targetLine.scale.z=e8.length()}}const uS=new J,yi=new L_;class $Ae extends Al{constructor(e){const n=new Zt,i=new os({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}n.setAttribute("position",new Ct(r,3)),n.setAttribute("color",new Ct(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new xt(16755200),c=new xt(16711680),d=new xt(43775),h=new xt(16777215),m=new xt(3355443);this.setColors(u,c,d,h,m)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;yi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wi("c",n,e,yi,0,0,-1),wi("t",n,e,yi,0,0,1),wi("n1",n,e,yi,-i,-r,-1),wi("n2",n,e,yi,i,-r,-1),wi("n3",n,e,yi,-i,r,-1),wi("n4",n,e,yi,i,r,-1),wi("f1",n,e,yi,-i,-r,1),wi("f2",n,e,yi,i,-r,1),wi("f3",n,e,yi,-i,r,1),wi("f4",n,e,yi,i,r,1),wi("u1",n,e,yi,i*.7,r*1.1,-1),wi("u2",n,e,yi,-i*.7,r*1.1,-1),wi("u3",n,e,yi,0,r*2,-1),wi("cf1",n,e,yi,-i,0,1),wi("cf2",n,e,yi,i,0,1),wi("cf3",n,e,yi,0,-r,1),wi("cf4",n,e,yi,0,r,1),wi("cn1",n,e,yi,-i,0,-1),wi("cn2",n,e,yi,i,0,-1),wi("cn3",n,e,yi,0,-r,-1),wi("cn4",n,e,yi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wi(t,e,n,i,r,s,o){uS.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],uS.x,uS.y,uS.z)}}const cS=new is;class GAe extends Al{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Zt;s.setIndex(new Mn(i,1)),s.setAttribute("position",new Mn(r,3)),super(s,new os({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&cS.setFromObject(this.object),cS.isEmpty())return;const n=cS.min,i=cS.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class WAe extends Al{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Zt;s.setIndex(new Mn(i,1)),s.setAttribute("position",new Ct(r,3)),super(s,new os({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class jAe extends nd{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Zt;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new os({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Zt;l.setAttribute("position",new Ct(a,3)),l.computeBoundingSphere(),this.add(new Bi(l,new hd({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const t8=new J;let dS,vM;class qAe extends _n{constructor(e=new J(0,0,1),n=new J(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",dS===void 0&&(dS=new Zt,dS.setAttribute("position",new Ct([0,0,0,0,1,0],3)),vM=new Cg(0,.5,1,5,1),vM.translate(0,-.5,0)),this.position.copy(n),this.line=new nd(dS,new os({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bi(vM,new hd({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{t8.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(t8,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class XAe extends Al{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Zt;r.setAttribute("position",new Ct(n,3)),r.setAttribute("color",new Ct(i,3));const s=new os({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new xt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class YAe{constructor(){this.type="ShapePath",this.color=new xt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new jv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(y){const S=[];for(let x=0,w=y.length;x<w;x++){const P=y[x],A=new Fh;A.curves=P.curves,S.push(A)}return S}function i(y,S){const x=S.length;let w=!1;for(let P=x-1,A=0;A<x;P=A++){let D=S[P],O=S[A],H=O.x-D.x,E=O.y-D.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(D=S[A],H=-H,O=S[P],E=-E),y.y<D.y||y.y>O.y)continue;if(y.y===D.y){if(y.x===D.x)return!0}else{const k=E*(y.x-D.x)-H*(y.y-D.y);if(k===0)return!0;if(k<0)continue;w=!w}}else{if(y.y!==D.y)continue;if(O.x<=y.x&&y.x<=D.x||D.x<=y.x&&y.x<=O.x)return!0}}return w}const r=_l.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Fh,l.curves=a.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const d=[],h=[];let m=[],g=0,v;h[g]=void 0,m[g]=[];for(let y=0,S=s.length;y<S;y++)a=s[y],v=a.getPoints(),o=r(v),o=e?!o:o,o?(!c&&h[g]&&g++,h[g]={s:new Fh,p:v},h[g].s.curves=a.curves,c&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!h[0])return n(s);if(h.length>1){let y=!1,S=0;for(let x=0,w=h.length;x<w;x++)d[x]=[];for(let x=0,w=h.length;x<w;x++){const P=m[x];for(let A=0;A<P.length;A++){const D=P[A];let O=!0;for(let H=0;H<h.length;H++)i(D.p,h[H].p)&&(x!==H&&S++,O?(O=!1,d[H].push(D)):y=!0);O&&d[x].push(D)}}S>0&&y===!1&&(m=d)}let _;for(let y=0,S=h.length;y<S;y++){l=h[y].s,u.push(l),_=m[y];for(let x=0,w=_.length;x<w;x++)l.holes.push(_[x].h)}return u}}class KAe extends Ua{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class QAe extends Ra{constructor(e=1,n=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gw}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gw);const ZAe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:L3,AddEquation:Rc,AddOperation:Pj,AdditiveAnimationBlendMode:W3,AdditiveBlending:HI,AgXToneMapping:Lj,AlphaFormat:B3,AlwaysCompare:Yj,AlwaysDepth:xb,AlwaysStencilFunc:WI,AmbientLight:Kq,AnimationAction:rX,AnimationClip:Zv,AnimationLoader:ZCe,AnimationMixer:AAe,AnimationObjectGroup:EAe,AnimationUtils:XCe,ArcCurve:Sq,ArrayCamera:dq,ArrowHelper:qAe,AttachedBindMode:GI,Audio:nX,AudioAnalyser:mAe,AudioContext:gL,AudioListener:hAe,AudioLoader:uAe,AxesHelper:XAe,BackSide:ns,BasicDepthPacking:zj,BasicShadowMap:uj,BatchedMesh:vq,Bone:nL,BooleanKeyframeTrack:ff,Box2:kAe,Box3:is,Box3Helper:WAe,BoxGeometry:hf,BoxHelper:GAe,BufferAttribute:Mn,BufferGeometry:Zt,BufferGeometryLoader:tX,ByteType:O3,Cache:lu,Camera:L_,CameraHelper:$Ae,CanvasTexture:vCe,CapsuleGeometry:uE,CatmullRomCurve3:Tq,CineonToneMapping:Dj,CircleGeometry:cE,ClampToEdgeWrapping:zo,Clock:yL,Color:xt,ColorKeyframeTrack:fL,ColorManagement:bn,CompressedArrayTexture:gCe,CompressedCubeTexture:yCe,CompressedTexture:aE,CompressedTextureLoader:JCe,ConeGeometry:dE,ConstantAlphaFactor:Cj,ConstantColorFactor:wj,Controls:KAe,CubeCamera:iq,CubeReflectionMapping:Du,CubeRefractionMapping:td,CubeTexture:N_,CubeTextureLoader:eAe,CubeUVReflectionMapping:Tg,CubicBezierCurve:sL,CubicBezierCurve3:bq,CubicInterpolant:Vq,CullFaceBack:zI,CullFaceFront:lj,CullFaceFrontBack:G1e,CullFaceNone:aj,Curve:Fa,CurvePath:Eq,CustomBlending:cj,CustomToneMapping:kj,CylinderGeometry:Cg,Cylindrical:DAe,Data3DTexture:X3,DataArrayTexture:tE,DataTexture:vl,DataTextureLoader:tAe,DataUtils:sTe,DecrementStencilOp:rSe,DecrementWrapStencilOp:oSe,DefaultLoadingManager:Wq,DepthFormat:Nh,DepthStencilFormat:Zh,DepthTexture:Z3,DetachedBindMode:Oj,DirectionalLight:Yq,DirectionalLightHelper:VAe,DiscreteInterpolant:$q,DisplayP3ColorSpace:eE,DodecahedronGeometry:hE,DoubleSide:to,DstAlphaFactor:_j,DstColorFactor:Sj,DynamicCopyUsage:SSe,DynamicDrawUsage:mSe,DynamicReadUsage:vSe,EdgesGeometry:Cq,EllipseCurve:lE,EqualCompare:Wj,EqualDepth:Tb,EqualStencilFunc:cSe,EquirectangularReflectionMapping:Lv,EquirectangularRefractionMapping:Nv,Euler:ho,EventDispatcher:Ua,ExtrudeGeometry:pE,FileLoader:Cl,Float16BufferAttribute:dTe,Float32BufferAttribute:Ct,FloatType:Cs,Fog:rE,FogExp2:iE,FramebufferTexture:mCe,FrontSide:Ru,Frustum:O_,GLBufferAttribute:RAe,GLSL1:bSe,GLSL3:jI,GreaterCompare:jj,GreaterDepth:wb,GreaterEqualCompare:Xj,GreaterEqualDepth:bb,GreaterEqualStencilFunc:pSe,GreaterStencilFunc:hSe,GridHelper:zAe,Group:em,HalfFloatType:bg,HemisphereLight:jq,HemisphereLightHelper:BAe,IcosahedronGeometry:mE,ImageBitmapLoader:lAe,ImageLoader:Jv,ImageUtils:Zj,IncrementStencilOp:iSe,IncrementWrapStencilOp:sSe,InstancedBufferAttribute:rg,InstancedBufferGeometry:eX,InstancedInterleavedBuffer:IAe,InstancedMesh:yq,Int16BufferAttribute:uTe,Int32BufferAttribute:cTe,Int8BufferAttribute:oTe,IntType:qw,InterleavedBuffer:sE,InterleavedBufferAttribute:Jh,Interpolant:z_,InterpolateDiscrete:Fv,InterpolateLinear:Zb,InterpolateSmooth:zS,InvertStencilOp:aSe,KeepStencilOp:ah,KeyframeTrack:Ba,LOD:mq,LatheGeometry:U_,Layers:Uh,LessCompare:Gj,LessDepth:Sb,LessEqualCompare:j3,LessEqualDepth:Kh,LessEqualStencilFunc:dSe,LessStencilFunc:uSe,Light:pd,LightProbe:Jq,Line:nd,Line3:LAe,LineBasicMaterial:os,LineCurve:oL,LineCurve3:wq,LineDashedMaterial:Bq,LineLoop:_q,LineSegments:Al,LinearDisplayP3ColorSpace:k_,LinearFilter:Fi,LinearInterpolant:hL,LinearMipMapLinearFilter:X1e,LinearMipMapNearestFilter:q1e,LinearMipmapLinearFilter:al,LinearMipmapNearestFilter:Iy,LinearSRGBColorSpace:Fu,LinearToneMapping:Ij,LinearTransfer:zv,Loader:as,LoaderUtils:eR,LoadingManager:pL,LoopOnce:Uj,LoopPingPong:Bj,LoopRepeat:Fj,LuminanceAlphaFormat:V3,LuminanceFormat:H3,MOUSE:sh,Material:Sr,MaterialLoader:TE,MathUtils:zSe,Matrix2:SL,Matrix3:en,Matrix4:zt,MaxEquation:pj,Mesh:Bi,MeshBasicMaterial:hd,MeshDepthMaterial:J3,MeshDistanceMaterial:eL,MeshLambertMaterial:Uq,MeshMatcapMaterial:Fq,MeshNormalMaterial:Oq,MeshPhongMaterial:Lq,MeshPhysicalMaterial:kq,MeshStandardMaterial:cL,MeshToonMaterial:Nq,MinEquation:fj,MirroredRepeatWrapping:Uv,MixOperation:Mj,MultiplyBlending:$I,MultiplyOperation:R_,NearestFilter:sr,NearestMipMapLinearFilter:j1e,NearestMipMapNearestFilter:W1e,NearestMipmapLinearFilter:Qp,NearestMipmapNearestFilter:N3,NeutralToneMapping:Nj,NeverCompare:$j,NeverDepth:_b,NeverStencilFunc:lSe,NoBlending:gu,NoColorSpace:nu,NoToneMapping:yl,NormalAnimationBlendMode:Jw,NormalBlending:Lh,NotEqualCompare:qj,NotEqualDepth:Eb,NotEqualStencilFunc:fSe,NumberKeyframeTrack:Kv,Object3D:_n,ObjectLoader:oAe,ObjectSpaceNormalMap:Vj,OctahedronGeometry:F_,OneFactor:gj,OneMinusConstantAlphaFactor:Aj,OneMinusConstantColorFactor:Ej,OneMinusDstAlphaFactor:xj,OneMinusDstColorFactor:Tj,OneMinusSrcAlphaFactor:vb,OneMinusSrcColorFactor:vj,OrthographicCamera:ba,P3Primaries:Vv,PCFShadowMap:Ww,PCFSoftShadowMap:Py,PMREMGenerator:qI,Path:jv,PerspectiveCamera:oi,Plane:Zl,PlaneGeometry:wg,PlaneHelper:jAe,PointLight:Xq,PointLightHelper:UAe,Points:xq,PointsMaterial:iL,PolarGridHelper:HAe,PolyhedronGeometry:fd,PositionalAudio:pAe,PropertyBinding:mn,PropertyMixer:iX,QuadraticBezierCurve:aL,QuadraticBezierCurve3:lL,Quaternion:Nr,QuaternionKeyframeTrack:H_,QuaternionLinearInterpolant:Gq,RED_GREEN_RGTC2_Format:Kb,RED_RGTC1_Format:G3,REVISION:Gw,RGBADepthPacking:Hj,RGBAFormat:Dr,RGBAIntegerFormat:Zw,RGBA_ASTC_10x10_Format:Gb,RGBA_ASTC_10x5_Format:Hb,RGBA_ASTC_10x6_Format:Vb,RGBA_ASTC_10x8_Format:$b,RGBA_ASTC_12x10_Format:Wb,RGBA_ASTC_12x12_Format:jb,RGBA_ASTC_4x4_Format:kb,RGBA_ASTC_5x4_Format:Lb,RGBA_ASTC_5x5_Format:Nb,RGBA_ASTC_6x5_Format:Ob,RGBA_ASTC_6x6_Format:Ub,RGBA_ASTC_8x5_Format:Fb,RGBA_ASTC_8x6_Format:Bb,RGBA_ASTC_8x8_Format:zb,RGBA_BPTC_Format:Ny,RGBA_ETC2_EAC_Format:Db,RGBA_PVRTC_2BPPV1_Format:Pb,RGBA_PVRTC_4BPPV1_Format:Mb,RGBA_S3TC_DXT1_Format:Dy,RGBA_S3TC_DXT3_Format:ky,RGBA_S3TC_DXT5_Format:Ly,RGBDepthPacking:J1e,RGBFormat:z3,RGBIntegerFormat:Y1e,RGB_BPTC_SIGNED_Format:qb,RGB_BPTC_UNSIGNED_Format:Xb,RGB_ETC1_Format:Ib,RGB_ETC2_Format:Rb,RGB_PVRTC_2BPPV1_Format:Ab,RGB_PVRTC_4BPPV1_Format:Cb,RGB_S3TC_DXT1_Format:Ry,RGDepthPacking:eSe,RGFormat:$3,RGIntegerFormat:Qw,RawShaderMaterial:Dq,Ray:df,Raycaster:sX,Rec709Primaries:Hv,RectAreaLight:Qq,RedFormat:Kw,RedIntegerFormat:D_,ReinhardToneMapping:Rj,RenderTarget:Jj,RepeatWrapping:Ov,ReplaceStencilOp:nSe,ReverseSubtractEquation:hj,RingGeometry:gE,SIGNED_RED_GREEN_RGTC2_Format:Qb,SIGNED_RED_RGTC1_Format:Yb,SRGBColorSpace:Zs,SRGBTransfer:Vn,Scene:Jb,ShaderChunk:nn,ShaderLib:xa,ShaderMaterial:Da,ShadowMaterial:Rq,Shape:Fh,ShapeGeometry:yE,ShapePath:YAe,ShapeUtils:_l,ShortType:U3,Skeleton:oE,SkeletonHelper:OAe,SkinnedMesh:gq,Source:Sh,Sphere:Or,SphereGeometry:B_,Spherical:nR,SphericalHarmonics3:Zq,SplineCurve:uL,SpotLight:qq,SpotLightHelper:NAe,Sprite:pq,SpriteMaterial:tL,SrcAlphaFactor:yb,SrcAlphaSaturateFactor:bj,SrcColorFactor:yj,StaticCopyUsage:xSe,StaticDrawUsage:$v,StaticReadUsage:ySe,StereoCamera:cAe,StreamCopyUsage:TSe,StreamDrawUsage:gSe,StreamReadUsage:_Se,StringKeyframeTrack:pf,SubtractEquation:dj,SubtractiveBlending:VI,TOUCH:oh,TangentSpaceNormalMap:dd,TetrahedronGeometry:vE,Texture:hi,TextureLoader:nAe,TextureUtils:XEe,TorusGeometry:_E,TorusKnotGeometry:xE,Triangle:bs,TriangleFanDrawMode:Z1e,TriangleStripDrawMode:Q1e,TrianglesDrawMode:K1e,TubeGeometry:SE,UVMapping:jw,Uint16BufferAttribute:Y3,Uint32BufferAttribute:K3,Uint8BufferAttribute:aTe,Uint8ClampedBufferAttribute:lTe,Uniform:xL,UniformsGroup:PAe,UniformsLib:ht,UniformsUtils:nq,UnsignedByteType:Ia,UnsignedInt248Type:Qh,UnsignedInt5999Type:F3,UnsignedIntType:ku,UnsignedShort4444Type:Xw,UnsignedShort5551Type:Yw,UnsignedShortType:tg,VSMShadowMap:ma,Vector2:je,Vector3:J,Vector4:yn,VectorKeyframeTrack:Qv,VideoTexture:pCe,WebGL3DRenderTarget:YSe,WebGLArrayRenderTarget:XSe,WebGLCoordinateSystem:ll,WebGLCubeRenderTarget:rq,WebGLMultipleRenderTargets:QAe,WebGLRenderTarget:Ra,WebGLRenderer:hq,WebGLUtils:cq,WebGPUCoordinateSystem:Gv,WireframeGeometry:Iq,WrapAroundEnding:Bv,ZeroCurvatureEnding:_h,ZeroFactor:mj,ZeroSlopeEnding:xh,ZeroStencilOp:tSe,createCanvasElement:Qj},Symbol.toStringTag,{value:"Module"}));var aX={exports:{}},mf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */mf.ConcurrentRoot=1;mf.ContinuousEventPriority=4;mf.DefaultEventPriority=16;mf.DiscreteEventPriority=1;mf.IdleEventPriority=536870912;mf.LegacyRoot=0;aX.exports=mf;var nm=aX.exports;function JAe(t){let e;const n=new Set,i=(u,c)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const h=e;e=c?d:Object.assign({},e,d),n.forEach(m=>m(e,h))}},r=()=>e,s=(u,c=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function m(){const g=c(e);if(!d(h,g)){const v=h;u(h=g,v)}}return n.add(m),()=>n.delete(m)},l={setState:i,getState:r,subscribe:(u,c,d)=>c||d?s(u,c,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(i,r,l),l}const eMe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),n8=eMe?U.useEffect:U.useLayoutEffect;function tMe(t){const e=typeof t=="function"?JAe(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=U.useReducer(_=>_+1,0),o=e.getState(),a=U.useRef(o),l=U.useRef(i),u=U.useRef(r),c=U.useRef(!1),d=U.useRef();d.current===void 0&&(d.current=i(o));let h,m=!1;(a.current!==o||l.current!==i||u.current!==r||c.current)&&(h=i(o),m=!r(d.current,h)),n8(()=>{m&&(d.current=h),a.current=o,l.current=i,u.current=r,c.current=!1});const g=U.useRef(o);n8(()=>{const _=()=>{try{const S=e.getState(),x=l.current(S);u.current(d.current,x)||(a.current=S,d.current=x,s())}catch{c.current=!0,s()}},y=e.subscribe(_);return e.getState()!==g.current&&_(),y},[]);const v=m?h:d.current;return U.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}const nMe=t=>typeof t=="object"&&typeof t.then=="function",bh=[];function lX(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function uX(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const s of bh)if(lX(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=bh.indexOf(r);s!==-1&&bh.splice(s,1)},promise:(nMe(t)?t:t(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(bh.push(r),!n)throw r.promise}const iMe=(t,e,n)=>uX(t,e,!1,n),rMe=(t,e,n)=>void uX(t,e,!0,n),sMe=t=>{if(t===void 0||t.length===0)bh.splice(0,bh.length);else{const e=bh.find(n=>lX(t,n.keys,n.equal));e&&e.remove()}};var cX={exports:{}},_M={exports:{}},xM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i8;function oMe(){return i8||(i8=1,function(t){function e(z,ee){var te=z.length;z.push(ee);e:for(;0<te;){var ce=te-1>>>1,Te=z[ce];if(0<r(Te,ee))z[ce]=ee,z[te]=Te,te=ce;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ee=z[0],te=z.pop();if(te!==ee){z[0]=te;e:for(var ce=0,Te=z.length,Ue=Te>>>1;ce<Ue;){var he=2*(ce+1)-1,xe=z[he],Fe=he+1,He=z[Fe];if(0>r(xe,te))Fe<Te&&0>r(He,xe)?(z[ce]=He,z[Fe]=te,ce=Fe):(z[ce]=xe,z[he]=te,ce=he);else if(Fe<Te&&0>r(He,te))z[ce]=He,z[Fe]=te,ce=Fe;else break e}}return ee}function r(z,ee){var te=z.sortIndex-ee.sortIndex;return te!==0?te:z.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var ee=n(u);ee!==null;){if(ee.callback===null)i(u);else if(ee.startTime<=z)i(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function w(z){if(v=!1,x(z),!g)if(n(l)!==null)g=!0,Q(P);else{var ee=n(u);ee!==null&&oe(w,ee.startTime-z)}}function P(z,ee){g=!1,v&&(v=!1,y(O),O=-1),m=!0;var te=h;try{for(x(ee),d=n(l);d!==null&&(!(d.expirationTime>ee)||z&&!k());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var Te=ce(d.expirationTime<=ee);ee=t.unstable_now(),typeof Te=="function"?d.callback=Te:d===n(l)&&i(l),x(ee)}else i(l);d=n(l)}if(d!==null)var Ue=!0;else{var he=n(u);he!==null&&oe(w,he.startTime-ee),Ue=!1}return Ue}finally{d=null,h=te,m=!1}}var A=!1,D=null,O=-1,H=5,E=-1;function k(){return!(t.unstable_now()-E<H)}function W(){if(D!==null){var z=t.unstable_now();E=z;var ee=!0;try{ee=D(!0,z)}finally{ee?G():(A=!1,D=null)}}else A=!1}var G;if(typeof S=="function")G=function(){S(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ie=Y.port2;Y.port1.onmessage=W,G=function(){ie.postMessage(null)}}else G=function(){_(W,0)};function Q(z){D=z,A||(A=!0,G())}function oe(z,ee){O=_(function(){z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var te=h;h=ee;try{return z()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=h;h=z;try{return ee()}finally{h=te}},t.unstable_scheduleCallback=function(z,ee,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,z){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=te+Te,z={id:c++,callback:ee,priorityLevel:z,startTime:te,expirationTime:Te,sortIndex:-1},te>ce?(z.sortIndex=te,e(u,z),n(l)===null&&z===n(u)&&(v?(y(O),O=-1):v=!0,oe(w,te-ce))):(z.sortIndex=Te,e(l,z),g||m||(g=!0,Q(P))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var ee=h;return function(){var te=h;h=ee;try{return z.apply(this,arguments)}finally{h=te}}}}(xM)),xM}var r8;function aMe(){return r8||(r8=1,_M.exports=oMe()),_M.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lMe=function(e){var n={},i=U,r=aMe(),s=Object.assign;function o(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),P=Symbol.iterator;function A(f){return f===null||typeof f!="object"?null:(f=P&&f[P]||f["@@iterator"],typeof f=="function"?f:null)}function D(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case y:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case g:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case v:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case S:return p=f.displayName||null,p!==null?p:D(f.type)||"Memo";case x:p=f._payload,f=f._init;try{return D(f(p))}catch{}}return null}function O(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(p);case 8:return p===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function H(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,p.flags&4098&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function E(f){if(H(f)!==f)throw Error(o(188))}function k(f){var p=f.alternate;if(!p){if(p=H(f),p===null)throw Error(o(188));return p!==f?null:f}for(var b=f,C=p;;){var L=b.return;if(L===null)break;var B=L.alternate;if(B===null){if(C=L.return,C!==null){b=C;continue}break}if(L.child===B.child){for(B=L.child;B;){if(B===b)return E(L),f;if(B===C)return E(L),p;B=B.sibling}throw Error(o(188))}if(b.return!==C.return)b=L,C=B;else{for(var re=!1,fe=L.child;fe;){if(fe===b){re=!0,b=L,C=B;break}if(fe===C){re=!0,C=L,b=B;break}fe=fe.sibling}if(!re){for(fe=B.child;fe;){if(fe===b){re=!0,b=B,C=L;break}if(fe===C){re=!0,C=B,b=L;break}fe=fe.sibling}if(!re)throw Error(o(189))}}if(b.alternate!==C)throw Error(o(190))}if(b.tag!==3)throw Error(o(188));return b.stateNode.current===b?f:p}function W(f){return f=k(f),f!==null?G(f):null}function G(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=G(f);if(p!==null)return p;f=f.sibling}return null}function Y(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var p=Y(f);if(p!==null)return p}f=f.sibling}return null}var ie=Array.isArray,Q=e.getPublicInstance,oe=e.getRootHostContext,z=e.getChildHostContext,ee=e.prepareForCommit,te=e.resetAfterCommit,ce=e.createInstance,Te=e.appendInitialChild,Ue=e.finalizeInitialChildren,he=e.prepareUpdate,xe=e.shouldSetTextContent,Fe=e.createTextInstance,He=e.scheduleTimeout,ot=e.cancelTimeout,Ae=e.noTimeout,Ge=e.isPrimaryRenderer,Le=e.supportsMutation,le=e.supportsPersistence,j=e.supportsHydration,Me=e.getInstanceFromNode,Re=e.preparePortalMount,Be=e.getCurrentEventPriority,We=e.detachDeletedInstance,rt=e.supportsMicrotasks,st=e.scheduleMicrotask,q=e.supportsTestSelectors,V=e.findFiberRoot,_e=e.getBoundingRect,De=e.getTextContent,Ve=e.isHiddenSubtree,Ne=e.matchAccessibilityRole,dt=e.setFocusIfFocusable,qe=e.setupIntersectionObserver,Qe=e.appendChild,Gt=e.appendChildToContainer,Ke=e.commitTextUpdate,ut=e.commitMount,ct=e.commitUpdate,Ot=e.insertBefore,ft=e.insertInContainerBefore,de=e.removeChild,$e=e.removeChildFromContainer,at=e.resetTextContent,ue=e.hideInstance,nt=e.hideTextInstance,Pe=e.unhideInstance,Ye=e.unhideTextInstance,pt=e.clearContainer,mt=e.cloneInstance,Vt=e.createContainerChildSet,dn=e.appendChildToContainerChildSet,jn=e.finalizeContainerChildren,Jt=e.replaceContainerChildren,qn=e.cloneHiddenInstance,Hi=e.cloneHiddenTextInstance,gf=e.canHydrateInstance,yf=e.canHydrateTextInstance,go=e.canHydrateSuspenseInstance,za=e.isSuspenseInstancePending,na=e.isSuspenseInstanceFallback,Vi=e.registerSuspenseInstanceRetry,yo=e.getNextHydratableSibling,vf=e.getFirstHydratableChild,ia=e.getFirstHydratableChildWithinContainer,ls=e.getFirstHydratableChildWithinSuspenseInstance,Ml=e.hydrateInstance,En=e.hydrateTextInstance,Ag=e.hydrateSuspenseInstance,Bu=e.getNextHydratableInstanceAfterSuspenseInstance,X=e.commitHydratedContainer,me=e.commitHydratedSuspenseInstance,we=e.clearSuspenseBoundary,Se=e.clearSuspenseBoundaryFromContainer,ye=e.shouldDeleteUnhydratedTailInstances,tt=e.didNotMatchHydratedContainerTextInstance,yt=e.didNotMatchHydratedTextInstance,St;function Tt(f){if(St===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);St=p&&p[1]||""}return`
`+St+f}var Dt=!1;function kt(f,p){if(!f||Dt)return"";Dt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(it){var C=it}Reflect.construct(f,[],p)}else{try{p.call()}catch(it){C=it}f.call(p.prototype)}else{try{throw Error()}catch(it){C=it}f()}}catch(it){if(it&&C&&typeof it.stack=="string"){for(var L=it.stack.split(`
`),B=C.stack.split(`
`),re=L.length-1,fe=B.length-1;1<=re&&0<=fe&&L[re]!==B[fe];)fe--;for(;1<=re&&0<=fe;re--,fe--)if(L[re]!==B[fe]){if(re!==1||fe!==1)do if(re--,fe--,0>fe||L[re]!==B[fe]){var Oe=`
`+L[re].replace(" at new "," at ");return f.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",f.displayName)),Oe}while(1<=re&&0<=fe);break}}}finally{Dt=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?Tt(f):""}var At=Object.prototype.hasOwnProperty,cn=[],hn=-1;function pn(f){return{current:f}}function jt(f){0>hn||(f.current=cn[hn],cn[hn]=null,hn--)}function Mt(f,p){hn++,cn[hn]=f.current,f.current=p}var bt={},rn=pn(bt),Ft=pn(!1),Xn=bt;function $i(f,p){var b=f.type.contextTypes;if(!b)return bt;var C=f.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===p)return C.__reactInternalMemoizedMaskedChildContext;var L={},B;for(B in b)L[B]=p[B];return C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=L),L}function Pn(f){return f=f.childContextTypes,f!=null}function ra(){jt(Ft),jt(rn)}function zn(f,p,b){if(rn.current!==bt)throw Error(o(168));Mt(rn,p),Mt(Ft,b)}function Fs(f,p,b){var C=f.stateNode;if(p=p.childContextTypes,typeof C.getChildContext!="function")return b;C=C.getChildContext();for(var L in C)if(!(L in p))throw Error(o(108,O(f)||"Unknown",L));return s({},b,C)}function cr(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||bt,Xn=rn.current,Mt(rn,f),Mt(Ft,Ft.current),!0}function Pi(f,p,b){var C=f.stateNode;if(!C)throw Error(o(169));b?(f=Fs(f,p,Xn),C.__reactInternalMemoizedMergedChildContext=f,jt(Ft),jt(rn),Mt(rn,f)):jt(Ft),Mt(Ft,b)}var dr=Math.clz32?Math.clz32:Bs,md=Math.log,zu=Math.LN2;function Bs(f){return f>>>=0,f===0?32:31-(md(f)/zu|0)|0}var _f=64,Pl=4194304;function sa(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Il(f,p){var b=f.pendingLanes;if(b===0)return 0;var C=0,L=f.suspendedLanes,B=f.pingedLanes,re=b&268435455;if(re!==0){var fe=re&~L;fe!==0?C=sa(fe):(B&=re,B!==0&&(C=sa(B)))}else re=b&~L,re!==0?C=sa(re):B!==0&&(C=sa(B));if(C===0)return 0;if(p!==0&&p!==C&&!(p&L)&&(L=C&-C,B=p&-p,L>=B||L===16&&(B&4194240)!==0))return p;if(C&4&&(C|=b&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=C;0<p;)b=31-dr(p),L=1<<b,C|=f[b],p&=~L;return C}function Hu(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mg(f,p){for(var b=f.suspendedLanes,C=f.pingedLanes,L=f.expirationTimes,B=f.pendingLanes;0<B;){var re=31-dr(B),fe=1<<re,Oe=L[re];Oe===-1?(!(fe&b)||fe&C)&&(L[re]=Hu(fe,p)):Oe<=p&&(f.expiredLanes|=fe),B&=~fe}}function xf(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function gd(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function yd(f,p,b){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-dr(p),f[p]=b}function wE(f,p){var b=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var C=f.eventTimes;for(f=f.expirationTimes;0<b;){var L=31-dr(b),B=1<<L;p[L]=0,C[L]=-1,f[L]=-1,b&=~B}}function Pg(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var C=31-dr(b),L=1<<C;L&p|f[C]&p&&(f[C]|=p),b&=~L}}var ln=0;function Ig(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var Rg=r.unstable_scheduleCallback,Dg=r.unstable_cancelCallback,EE=r.unstable_shouldYield,G_=r.unstable_requestPaint,Ii=r.unstable_now,Vu=r.unstable_ImmediatePriority,vd=r.unstable_UserBlockingPriority,Sf=r.unstable_NormalPriority,CE=r.unstable_IdlePriority,Tf=null,zs=null;function W_(f){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Tf,f,void 0,(f.current.flags&128)===128)}catch{}}function AE(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Hs=typeof Object.is=="function"?Object.is:AE,oa=null,bf=!1,kg=!1;function j_(f){oa===null?oa=[f]:oa.push(f)}function ME(f){bf=!0,j_(f)}function vo(){if(!kg&&oa!==null){kg=!0;var f=0,p=ln;try{var b=oa;for(ln=1;f<b.length;f++){var C=b[f];do C=C(!0);while(C!==null)}oa=null,bf=!1}catch(L){throw oa!==null&&(oa=oa.slice(f+1)),Rg(Vu,vo),L}finally{ln=p,kg=!1}}return null}var Lg=a.ReactCurrentBatchConfig;function wf(f,p){if(Hs(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var L=b[C];if(!At.call(p,L)||!Hs(f[L],p[L]))return!1}return!0}function q_(f){switch(f.tag){case 5:return Tt(f.type);case 16:return Tt("Lazy");case 13:return Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 2:case 15:return f=kt(f.type,!1),f;case 11:return f=kt(f.type.render,!1),f;case 1:return f=kt(f.type,!0),f;default:return""}}function Tr(f,p){if(f&&f.defaultProps){p=s({},p),f=f.defaultProps;for(var b in f)p[b]===void 0&&(p[b]=f[b]);return p}return p}var Ef=pn(null),Cf=null,$u=null,Ng=null;function Og(){Ng=$u=Cf=null}function _d(f,p,b){Ge?(Mt(Ef,p._currentValue),p._currentValue=b):(Mt(Ef,p._currentValue2),p._currentValue2=b)}function Rl(f){var p=Ef.current;jt(Ef),Ge?f._currentValue=p:f._currentValue2=p}function Dl(f,p,b){for(;f!==null;){var C=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),f===b)break;f=f.return}}function aa(f,p){Cf=f,Ng=$u=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&p&&(fr=!0),f.firstContext=null)}function Jn(f){var p=Ge?f._currentValue:f._currentValue2;if(Ng!==f)if(f={context:f,memoizedValue:p,next:null},$u===null){if(Cf===null)throw Error(o(308));$u=f,Cf.dependencies={lanes:0,firstContext:f}}else $u=$u.next=f;return p}var Ri=null,Vs=!1;function Af(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X_(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function la(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function Ha(f,p){var b=f.updateQueue;b!==null&&(b=b.shared,Di!==null&&f.mode&1&&!(on&2)?(f=b.interleaved,f===null?(p.next=p,Ri===null?Ri=[b]:Ri.push(b)):(p.next=f.next,f.next=p),b.interleaved=p):(f=b.pending,f===null?p.next=p:(p.next=f.next,f.next=p),b.pending=p))}function Mf(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var C=p.lanes;C&=f.pendingLanes,b|=C,p.lanes=b,Pg(f,b)}}function Pf(f,p){var b=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var L=null,B=null;if(b=b.firstBaseUpdate,b!==null){do{var re={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};B===null?L=B=re:B=B.next=re,b=b.next}while(b!==null);B===null?L=B=p:B=B.next=p}else L=B=p;b={baseState:C.baseState,firstBaseUpdate:L,lastBaseUpdate:B,shared:C.shared,effects:C.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function Gu(f,p,b,C){var L=f.updateQueue;Vs=!1;var B=L.firstBaseUpdate,re=L.lastBaseUpdate,fe=L.shared.pending;if(fe!==null){L.shared.pending=null;var Oe=fe,it=Oe.next;Oe.next=null,re===null?B=it:re.next=it,re=Oe;var Et=f.alternate;Et!==null&&(Et=Et.updateQueue,fe=Et.lastBaseUpdate,fe!==re&&(fe===null?Et.firstBaseUpdate=it:fe.next=it,Et.lastBaseUpdate=Oe))}if(B!==null){var Xt=L.baseState;re=0,Et=it=Oe=null,fe=B;do{var Ut=fe.lane,On=fe.eventTime;if((C&Ut)===Ut){Et!==null&&(Et=Et.next={eventTime:On,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var Rt=f,wr=fe;switch(Ut=p,On=b,wr.tag){case 1:if(Rt=wr.payload,typeof Rt=="function"){Xt=Rt.call(On,Xt,Ut);break e}Xt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=wr.payload,Ut=typeof Rt=="function"?Rt.call(On,Xt,Ut):Rt,Ut==null)break e;Xt=s({},Xt,Ut);break e;case 2:Vs=!0}}fe.callback!==null&&fe.lane!==0&&(f.flags|=64,Ut=L.effects,Ut===null?L.effects=[fe]:Ut.push(fe))}else On={eventTime:On,lane:Ut,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},Et===null?(it=Et=On,Oe=Xt):Et=Et.next=On,re|=Ut;if(fe=fe.next,fe===null){if(fe=L.shared.pending,fe===null)break;Ut=fe,fe=Ut.next,Ut.next=null,L.lastBaseUpdate=Ut,L.shared.pending=null}}while(1);if(Et===null&&(Oe=Xt),L.baseState=Oe,L.firstBaseUpdate=it,L.lastBaseUpdate=Et,p=L.shared.interleaved,p!==null){L=p;do re|=L.lane,L=L.next;while(L!==p)}else B===null&&(L.shared.lanes=0);Wf|=re,f.lanes=re,f.memoizedState=Xt}}function Wu(f,p,b){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var C=f[p],L=C.callback;if(L!==null){if(C.callback=null,C=b,typeof L!="function")throw Error(o(191,L));L.call(C)}}}var kl=new i.Component().refs;function ju(f,p,b,C){p=f.memoizedState,b=b(C,p),b=b==null?p:s({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var _o={isMounted:function(f){return(f=f._reactInternals)?H(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var C=Vr(),L=rc(f),B=la(C,L);B.payload=p,b!=null&&(B.callback=b),Ha(f,B),p=wo(f,L,C),p!==null&&Mf(p,f,L)},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var C=Vr(),L=rc(f),B=la(C,L);B.tag=1,B.payload=p,b!=null&&(B.callback=b),Ha(f,B),p=wo(f,L,C),p!==null&&Mf(p,f,L)},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=Vr(),C=rc(f),L=la(b,C);L.tag=2,p!=null&&(L.callback=p),Ha(f,L),p=wo(f,C,b),p!==null&&Mf(p,f,C)}};function Y_(f,p,b,C,L,B,re){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,B,re):p.prototype&&p.prototype.isPureReactComponent?!wf(b,C)||!wf(L,B):!0}function Ug(f,p,b){var C=!1,L=bt,B=p.contextType;return typeof B=="object"&&B!==null?B=Jn(B):(L=Pn(p)?Xn:rn.current,C=p.contextTypes,B=(C=C!=null)?$i(f,L):bt),p=new p(b,B),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=_o,f.stateNode=p,p._reactInternals=f,C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=L,f.__reactInternalMemoizedMaskedChildContext=B),p}function Fg(f,p,b,C){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==f&&_o.enqueueReplaceState(p,p.state,null)}function xd(f,p,b,C){var L=f.stateNode;L.props=b,L.state=f.memoizedState,L.refs=kl,Af(f);var B=p.contextType;typeof B=="object"&&B!==null?L.context=Jn(B):(B=Pn(p)?Xn:rn.current,L.context=$i(f,B)),L.state=f.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(ju(f,p,B,b),L.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(p=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),p!==L.state&&_o.enqueueReplaceState(L,L.state,null),Gu(f,b,L,C),L.state=f.memoizedState),typeof L.componentDidMount=="function"&&(f.flags|=4194308)}var qu=[],Xu=0,If=null,Ll=0,us=[],Br=0,Nl=null,ua=1,xo="";function Va(f,p){qu[Xu++]=Ll,qu[Xu++]=If,If=f,Ll=p}function K_(f,p,b){us[Br++]=ua,us[Br++]=xo,us[Br++]=Nl,Nl=f;var C=ua;f=xo;var L=32-dr(C)-1;C&=~(1<<L),b+=1;var B=32-dr(p)+L;if(30<B){var re=L-L%5;B=(C&(1<<re)-1).toString(32),C>>=re,L-=re,ua=1<<32-dr(p)+L|b<<L|C,xo=B+f}else ua=1<<B|b<<L|C,xo=f}function Bg(f){f.return!==null&&(Va(f,1),K_(f,1,0))}function zg(f){for(;f===If;)If=qu[--Xu],qu[Xu]=null,Ll=qu[--Xu],qu[Xu]=null;for(;f===Nl;)Nl=us[--Br],us[Br]=null,xo=us[--Br],us[Br]=null,ua=us[--Br],us[Br]=null}var br=null,zr=null,Hn=!1,Yu=!1,$s=null;function Hg(f,p){var b=Eo(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=f,p=f.deletions,p===null?(f.deletions=[b],f.flags|=16):p.push(b)}function Q_(f,p){switch(f.tag){case 5:return p=gf(p,f.type,f.pendingProps),p!==null?(f.stateNode=p,br=f,zr=vf(p),!0):!1;case 6:return p=yf(p,f.pendingProps),p!==null?(f.stateNode=p,br=f,zr=null,!0):!1;case 13:if(p=go(p),p!==null){var b=Nl!==null?{id:ua,overflow:xo}:null;return f.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=Eo(18,null,null,0),b.stateNode=p,b.return=f,f.child=b,br=f,zr=null,!0}return!1;default:return!1}}function Rf(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Ol(f){if(Hn){var p=zr;if(p){var b=p;if(!Q_(f,p)){if(Rf(f))throw Error(o(418));p=yo(b);var C=br;p&&Q_(f,p)?Hg(C,b):(f.flags=f.flags&-4097|2,Hn=!1,br=f)}}else{if(Rf(f))throw Error(o(418));f.flags=f.flags&-4097|2,Hn=!1,br=f}}}function Vg(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;br=f}function Sd(f){if(!j||f!==br)return!1;if(!Hn)return Vg(f),Hn=!0,!1;if(f.tag!==3&&(f.tag!==5||ye(f.type)&&!xe(f.type,f.memoizedProps))){var p=zr;if(p){if(Rf(f)){for(f=zr;f;)f=yo(f);throw Error(o(418))}for(;p;)Hg(f,p),p=yo(p)}}if(Vg(f),f.tag===13){if(!j)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));zr=Bu(f)}else zr=br?yo(f.stateNode):null;return!0}function Ku(){j&&(zr=br=null,Yu=Hn=!1)}function Ul(f){$s===null?$s=[f]:$s.push(f)}function Td(f,p,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(o(309));var C=b.stateNode}if(!C)throw Error(o(147,f));var L=C,B=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===B?p.ref:(p=function(re){var fe=L.refs;fe===kl&&(fe=L.refs={}),re===null?delete fe[B]:fe[B]=re},p._stringRef=B,p)}if(typeof f!="string")throw Error(o(284));if(!b._owner)throw Error(o(290,f))}return f}function Df(f,p){throw f=Object.prototype.toString.call(p),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function Z_(f){var p=f._init;return p(f._payload)}function $g(f){function p(Ce,ge){if(f){var Ie=Ce.deletions;Ie===null?(Ce.deletions=[ge],Ce.flags|=16):Ie.push(ge)}}function b(Ce,ge){if(!f)return null;for(;ge!==null;)p(Ce,ge),ge=ge.sibling;return null}function C(Ce,ge){for(Ce=new Map;ge!==null;)ge.key!==null?Ce.set(ge.key,ge):Ce.set(ge.index,ge),ge=ge.sibling;return Ce}function L(Ce,ge){return Ce=oc(Ce,ge),Ce.index=0,Ce.sibling=null,Ce}function B(Ce,ge,Ie){return Ce.index=Ie,f?(Ie=Ce.alternate,Ie!==null?(Ie=Ie.index,Ie<ge?(Ce.flags|=2,ge):Ie):(Ce.flags|=2,ge)):(Ce.flags|=1048576,ge)}function re(Ce){return f&&Ce.alternate===null&&(Ce.flags|=2),Ce}function fe(Ce,ge,Ie,vt){return ge===null||ge.tag!==6?(ge=nC(Ie,Ce.mode,vt),ge.return=Ce,ge):(ge=L(ge,Ie),ge.return=Ce,ge)}function Oe(Ce,ge,Ie,vt){var It=Ie.type;return It===c?Et(Ce,ge,Ie.props.children,vt,Ie.key):ge!==null&&(ge.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===x&&Z_(It)===ge.type)?(vt=L(ge,Ie.props),vt.ref=Td(Ce,ge,Ie),vt.return=Ce,vt):(vt=Rx(Ie.type,Ie.key,Ie.props,null,Ce.mode,vt),vt.ref=Td(Ce,ge,Ie),vt.return=Ce,vt)}function it(Ce,ge,Ie,vt){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ie.containerInfo||ge.stateNode.implementation!==Ie.implementation?(ge=iC(Ie,Ce.mode,vt),ge.return=Ce,ge):(ge=L(ge,Ie.children||[]),ge.return=Ce,ge)}function Et(Ce,ge,Ie,vt,It){return ge===null||ge.tag!==7?(ge=Fd(Ie,Ce.mode,vt,It),ge.return=Ce,ge):(ge=L(ge,Ie),ge.return=Ce,ge)}function Xt(Ce,ge,Ie){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=nC(""+ge,Ce.mode,Ie),ge.return=Ce,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return Ie=Rx(ge.type,ge.key,ge.props,null,Ce.mode,Ie),Ie.ref=Td(Ce,null,ge),Ie.return=Ce,Ie;case u:return ge=iC(ge,Ce.mode,Ie),ge.return=Ce,ge;case x:var vt=ge._init;return Xt(Ce,vt(ge._payload),Ie)}if(ie(ge)||A(ge))return ge=Fd(ge,Ce.mode,Ie,null),ge.return=Ce,ge;Df(Ce,ge)}return null}function Ut(Ce,ge,Ie,vt){var It=ge!==null?ge.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return It!==null?null:fe(Ce,ge,""+Ie,vt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return Ie.key===It?Oe(Ce,ge,Ie,vt):null;case u:return Ie.key===It?it(Ce,ge,Ie,vt):null;case x:return It=Ie._init,Ut(Ce,ge,It(Ie._payload),vt)}if(ie(Ie)||A(Ie))return It!==null?null:Et(Ce,ge,Ie,vt,null);Df(Ce,Ie)}return null}function On(Ce,ge,Ie,vt,It){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Ce=Ce.get(Ie)||null,fe(ge,Ce,""+vt,It);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case l:return Ce=Ce.get(vt.key===null?Ie:vt.key)||null,Oe(ge,Ce,vt,It);case u:return Ce=Ce.get(vt.key===null?Ie:vt.key)||null,it(ge,Ce,vt,It);case x:var sn=vt._init;return On(Ce,ge,Ie,sn(vt._payload),It)}if(ie(vt)||A(vt))return Ce=Ce.get(Ie)||null,Et(ge,Ce,vt,It,null);Df(ge,vt)}return null}function Rt(Ce,ge,Ie,vt){for(var It=null,sn=null,Yt=ge,Sn=ge=0,er=null;Yt!==null&&Sn<Ie.length;Sn++){Yt.index>Sn?(er=Yt,Yt=null):er=Yt.sibling;var Tn=Ut(Ce,Yt,Ie[Sn],vt);if(Tn===null){Yt===null&&(Yt=er);break}f&&Yt&&Tn.alternate===null&&p(Ce,Yt),ge=B(Tn,ge,Sn),sn===null?It=Tn:sn.sibling=Tn,sn=Tn,Yt=er}if(Sn===Ie.length)return b(Ce,Yt),Hn&&Va(Ce,Sn),It;if(Yt===null){for(;Sn<Ie.length;Sn++)Yt=Xt(Ce,Ie[Sn],vt),Yt!==null&&(ge=B(Yt,ge,Sn),sn===null?It=Yt:sn.sibling=Yt,sn=Yt);return Hn&&Va(Ce,Sn),It}for(Yt=C(Ce,Yt);Sn<Ie.length;Sn++)er=On(Yt,Ce,Sn,Ie[Sn],vt),er!==null&&(f&&er.alternate!==null&&Yt.delete(er.key===null?Sn:er.key),ge=B(er,ge,Sn),sn===null?It=er:sn.sibling=er,sn=er);return f&&Yt.forEach(function(ac){return p(Ce,ac)}),Hn&&Va(Ce,Sn),It}function wr(Ce,ge,Ie,vt){var It=A(Ie);if(typeof It!="function")throw Error(o(150));if(Ie=It.call(Ie),Ie==null)throw Error(o(151));for(var sn=It=null,Yt=ge,Sn=ge=0,er=null,Tn=Ie.next();Yt!==null&&!Tn.done;Sn++,Tn=Ie.next()){Yt.index>Sn?(er=Yt,Yt=null):er=Yt.sibling;var ac=Ut(Ce,Yt,Tn.value,vt);if(ac===null){Yt===null&&(Yt=er);break}f&&Yt&&ac.alternate===null&&p(Ce,Yt),ge=B(ac,ge,Sn),sn===null?It=ac:sn.sibling=ac,sn=ac,Yt=er}if(Tn.done)return b(Ce,Yt),Hn&&Va(Ce,Sn),It;if(Yt===null){for(;!Tn.done;Sn++,Tn=Ie.next())Tn=Xt(Ce,Tn.value,vt),Tn!==null&&(ge=B(Tn,ge,Sn),sn===null?It=Tn:sn.sibling=Tn,sn=Tn);return Hn&&Va(Ce,Sn),It}for(Yt=C(Ce,Yt);!Tn.done;Sn++,Tn=Ie.next())Tn=On(Yt,Ce,Sn,Tn.value,vt),Tn!==null&&(f&&Tn.alternate!==null&&Yt.delete(Tn.key===null?Sn:Tn.key),ge=B(Tn,ge,Sn),sn===null?It=Tn:sn.sibling=Tn,sn=Tn);return f&&Yt.forEach(function(ZX){return p(Ce,ZX)}),Hn&&Va(Ce,Sn),It}function Co(Ce,ge,Ie,vt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===c&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:e:{for(var It=Ie.key,sn=ge;sn!==null;){if(sn.key===It){if(It=Ie.type,It===c){if(sn.tag===7){b(Ce,sn.sibling),ge=L(sn,Ie.props.children),ge.return=Ce,Ce=ge;break e}}else if(sn.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===x&&Z_(It)===sn.type){b(Ce,sn.sibling),ge=L(sn,Ie.props),ge.ref=Td(Ce,sn,Ie),ge.return=Ce,Ce=ge;break e}b(Ce,sn);break}else p(Ce,sn);sn=sn.sibling}Ie.type===c?(ge=Fd(Ie.props.children,Ce.mode,vt,Ie.key),ge.return=Ce,Ce=ge):(vt=Rx(Ie.type,Ie.key,Ie.props,null,Ce.mode,vt),vt.ref=Td(Ce,ge,Ie),vt.return=Ce,Ce=vt)}return re(Ce);case u:e:{for(sn=Ie.key;ge!==null;){if(ge.key===sn)if(ge.tag===4&&ge.stateNode.containerInfo===Ie.containerInfo&&ge.stateNode.implementation===Ie.implementation){b(Ce,ge.sibling),ge=L(ge,Ie.children||[]),ge.return=Ce,Ce=ge;break e}else{b(Ce,ge);break}else p(Ce,ge);ge=ge.sibling}ge=iC(Ie,Ce.mode,vt),ge.return=Ce,Ce=ge}return re(Ce);case x:return sn=Ie._init,Co(Ce,ge,sn(Ie._payload),vt)}if(ie(Ie))return Rt(Ce,ge,Ie,vt);if(A(Ie))return wr(Ce,ge,Ie,vt);Df(Ce,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ge!==null&&ge.tag===6?(b(Ce,ge.sibling),ge=L(ge,Ie),ge.return=Ce,Ce=ge):(b(Ce,ge),ge=nC(Ie,Ce.mode,vt),ge.return=Ce,Ce=ge),re(Ce)):b(Ce,ge)}return Co}var Qu=$g(!0),J_=$g(!1),bd={},cs=pn(bd),wd=pn(bd),Zu=pn(bd);function So(f){if(f===bd)throw Error(o(174));return f}function Gg(f,p){Mt(Zu,p),Mt(wd,f),Mt(cs,bd),f=oe(p),jt(cs),Mt(cs,f)}function Ju(){jt(cs),jt(wd),jt(Zu)}function Ed(f){var p=So(Zu.current),b=So(cs.current);p=z(b,f.type,p),b!==p&&(Mt(wd,f),Mt(cs,p))}function Wg(f){wd.current===f&&(jt(cs),jt(wd))}var Yn=pn(0);function kf(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||za(b)||na(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var jg=[];function Lf(){for(var f=0;f<jg.length;f++){var p=jg[f];Ge?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}jg.length=0}var Nf=a.ReactCurrentDispatcher,hr=a.ReactCurrentBatchConfig,To=0,qt=null,ai=null,gi=null,Of=!1,Cd=!1,Ad=0,PE=0;function Gi(){throw Error(o(321))}function Uf(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!Hs(f[b],p[b]))return!1;return!0}function Ff(f,p,b,C,L,B){if(To=B,qt=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Nf.current=f===null||f.memoizedState===null?T:M,f=b(C,L),Cd){B=0;do{if(Cd=!1,Ad=0,25<=B)throw Error(o(301));B+=1,gi=ai=null,p.updateQueue=null,Nf.current=R,f=b(C,L)}while(Cd)}if(Nf.current=Dd,p=ai!==null&&ai.next!==null,To=0,gi=ai=qt=null,Of=!1,p)throw Error(o(300));return f}function Bf(){var f=Ad!==0;return Ad=0,f}function bo(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?qt.memoizedState=gi=f:gi=gi.next=f,gi}function ds(){if(ai===null){var f=qt.alternate;f=f!==null?f.memoizedState:null}else f=ai.next;var p=gi===null?qt.memoizedState:gi.next;if(p!==null)gi=p,ai=f;else{if(f===null)throw Error(o(310));ai=f,f={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},gi===null?qt.memoizedState=gi=f:gi=gi.next=f}return gi}function $a(f,p){return typeof p=="function"?p(f):p}function ec(f){var p=ds(),b=p.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=f;var C=ai,L=C.baseQueue,B=b.pending;if(B!==null){if(L!==null){var re=L.next;L.next=B.next,B.next=re}C.baseQueue=L=B,b.pending=null}if(L!==null){B=L.next,C=C.baseState;var fe=re=null,Oe=null,it=B;do{var Et=it.lane;if((To&Et)===Et)Oe!==null&&(Oe=Oe.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),C=it.hasEagerState?it.eagerState:f(C,it.action);else{var Xt={lane:Et,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};Oe===null?(fe=Oe=Xt,re=C):Oe=Oe.next=Xt,qt.lanes|=Et,Wf|=Et}it=it.next}while(it!==null&&it!==B);Oe===null?re=C:Oe.next=fe,Hs(C,p.memoizedState)||(fr=!0),p.memoizedState=C,p.baseState=re,p.baseQueue=Oe,b.lastRenderedState=C}if(f=b.interleaved,f!==null){L=f;do B=L.lane,qt.lanes|=B,Wf|=B,L=L.next;while(L!==f)}else L===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function zf(f){var p=ds(),b=p.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=f;var C=b.dispatch,L=b.pending,B=p.memoizedState;if(L!==null){b.pending=null;var re=L=L.next;do B=f(B,re.action),re=re.next;while(re!==L);Hs(B,p.memoizedState)||(fr=!0),p.memoizedState=B,p.baseQueue===null&&(p.baseState=B),b.lastRenderedState=B}return[B,C]}function Hf(){}function Vf(f,p){var b=qt,C=ds(),L=p(),B=!Hs(C.memoizedState,L);if(B&&(C.memoizedState=L,fr=!0),C=C.queue,Rd(Pd.bind(null,b,C,f),[f]),C.getSnapshot!==p||B||gi!==null&&gi.memoizedState.tag&1){if(b.flags|=2048,Id(9,Md.bind(null,b,C,L,p),void 0,null),Di===null)throw Error(o(349));To&30||qg(b,p,L)}return L}function qg(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=qt.updateQueue,p===null?(p={lastEffect:null,stores:null},qt.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function Md(f,p,b,C){p.value=b,p.getSnapshot=C,ex(p)&&wo(f,1,-1)}function Pd(f,p,b){return b(function(){ex(p)&&wo(f,1,-1)})}function ex(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!Hs(f,b)}catch{return!0}}function Xg(f){var p=bo();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:f},p.queue=f,f=f.dispatch=RE.bind(null,qt,f),[p.memoizedState,f]}function Id(f,p,b,C){return f={tag:f,create:p,destroy:b,deps:C,next:null},p=qt.updateQueue,p===null?(p={lastEffect:null,stores:null},qt.updateQueue=p,p.lastEffect=f.next=f):(b=p.lastEffect,b===null?p.lastEffect=f.next=f:(C=b.next,b.next=f,f.next=C,p.lastEffect=f)),f}function tx(){return ds().memoizedState}function $f(f,p,b,C){var L=bo();qt.flags|=f,L.memoizedState=Id(1|p,b,void 0,C===void 0?null:C)}function tc(f,p,b,C){var L=ds();C=C===void 0?null:C;var B=void 0;if(ai!==null){var re=ai.memoizedState;if(B=re.destroy,C!==null&&Uf(C,re.deps)){L.memoizedState=Id(p,b,B,C);return}}qt.flags|=f,L.memoizedState=Id(1|p,b,B,C)}function Yg(f,p){return $f(8390656,8,f,p)}function Rd(f,p){return tc(2048,8,f,p)}function Kg(f,p){return tc(4,2,f,p)}function Fl(f,p){return tc(4,4,f,p)}function xn(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Ga(f,p,b){return b=b!=null?b.concat([f]):null,tc(4,4,xn.bind(null,p,f),b)}function Wi(){}function Gs(f,p){var b=ds();p=p===void 0?null:p;var C=b.memoizedState;return C!==null&&p!==null&&Uf(p,C[1])?C[0]:(b.memoizedState=[f,p],f)}function nx(f,p){var b=ds();p=p===void 0?null:p;var C=b.memoizedState;return C!==null&&p!==null&&Uf(p,C[1])?C[0]:(f=f(),b.memoizedState=[f,p],f)}function ix(f,p){var b=ln;ln=b!==0&&4>b?b:4,f(!0);var C=hr.transition;hr.transition={};try{f(!1),p()}finally{ln=b,hr.transition=C}}function rx(){return ds().memoizedState}function IE(f,p,b){var C=rc(f);b={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null},sx(f)?ox(p,b):(ax(f,p,b),b=Vr(),f=wo(f,C,b),f!==null&&lx(f,p,C))}function RE(f,p,b){var C=rc(f),L={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null};if(sx(f))ox(p,L);else{ax(f,p,L);var B=f.alternate;if(f.lanes===0&&(B===null||B.lanes===0)&&(B=p.lastRenderedReducer,B!==null))try{var re=p.lastRenderedState,fe=B(re,b);if(L.hasEagerState=!0,L.eagerState=fe,Hs(fe,re))return}catch{}finally{}b=Vr(),f=wo(f,C,b),f!==null&&lx(f,p,C)}}function sx(f){var p=f.alternate;return f===qt||p!==null&&p===qt}function ox(f,p){Cd=Of=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function ax(f,p,b){Di!==null&&f.mode&1&&!(on&2)?(f=p.interleaved,f===null?(b.next=b,Ri===null?Ri=[p]:Ri.push(p)):(b.next=f.next,f.next=b),p.interleaved=b):(f=p.pending,f===null?b.next=b:(b.next=f.next,f.next=b),p.pending=b)}function lx(f,p,b){if(b&4194240){var C=p.lanes;C&=f.pendingLanes,b|=C,p.lanes=b,Pg(f,b)}}var Dd={readContext:Jn,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},T={readContext:Jn,useCallback:function(f,p){return bo().memoizedState=[f,p===void 0?null:p],f},useContext:Jn,useEffect:Yg,useImperativeHandle:function(f,p,b){return b=b!=null?b.concat([f]):null,$f(4194308,4,xn.bind(null,p,f),b)},useLayoutEffect:function(f,p){return $f(4194308,4,f,p)},useInsertionEffect:function(f,p){return $f(4,2,f,p)},useMemo:function(f,p){var b=bo();return p=p===void 0?null:p,f=f(),b.memoizedState=[f,p],f},useReducer:function(f,p,b){var C=bo();return p=b!==void 0?b(p):p,C.memoizedState=C.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},C.queue=f,f=f.dispatch=IE.bind(null,qt,f),[C.memoizedState,f]},useRef:function(f){var p=bo();return f={current:f},p.memoizedState=f},useState:Xg,useDebugValue:Wi,useDeferredValue:function(f){var p=Xg(f),b=p[0],C=p[1];return Yg(function(){var L=hr.transition;hr.transition={};try{C(f)}finally{hr.transition=L}},[f]),b},useTransition:function(){var f=Xg(!1),p=f[0];return f=ix.bind(null,f[1]),bo().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,b){var C=qt,L=bo();if(Hn){if(b===void 0)throw Error(o(407));b=b()}else{if(b=p(),Di===null)throw Error(o(349));To&30||qg(C,p,b)}L.memoizedState=b;var B={value:b,getSnapshot:p};return L.queue=B,Yg(Pd.bind(null,C,B,f),[f]),C.flags|=2048,Id(9,Md.bind(null,C,B,b,p),void 0,null),b},useId:function(){var f=bo(),p=Di.identifierPrefix;if(Hn){var b=xo,C=ua;b=(C&~(1<<32-dr(C)-1)).toString(32)+b,p=":"+p+"R"+b,b=Ad++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=PE++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},M={readContext:Jn,useCallback:Gs,useContext:Jn,useEffect:Rd,useImperativeHandle:Ga,useInsertionEffect:Kg,useLayoutEffect:Fl,useMemo:nx,useReducer:ec,useRef:tx,useState:function(){return ec($a)},useDebugValue:Wi,useDeferredValue:function(f){var p=ec($a),b=p[0],C=p[1];return Rd(function(){var L=hr.transition;hr.transition={};try{C(f)}finally{hr.transition=L}},[f]),b},useTransition:function(){var f=ec($a)[0],p=ds().memoizedState;return[f,p]},useMutableSource:Hf,useSyncExternalStore:Vf,useId:rx,unstable_isNewReconciler:!1},R={readContext:Jn,useCallback:Gs,useContext:Jn,useEffect:Rd,useImperativeHandle:Ga,useInsertionEffect:Kg,useLayoutEffect:Fl,useMemo:nx,useReducer:zf,useRef:tx,useState:function(){return zf($a)},useDebugValue:Wi,useDeferredValue:function(f){var p=zf($a),b=p[0],C=p[1];return Rd(function(){var L=hr.transition;hr.transition={};try{C(f)}finally{hr.transition=L}},[f]),b},useTransition:function(){var f=zf($a)[0],p=ds().memoizedState;return[f,p]},useMutableSource:Hf,useSyncExternalStore:Vf,useId:rx,unstable_isNewReconciler:!1};function I(f,p){try{var b="",C=p;do b+=q_(C),C=C.return;while(C);var L=b}catch(B){L=`
Error generating stack: `+B.message+`
`+B.stack}return{value:f,source:p,stack:L}}function N(f,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var F=typeof WeakMap=="function"?WeakMap:Map;function K(f,p,b){b=la(-1,b),b.tag=3,b.payload={element:null};var C=p.value;return b.callback=function(){wx||(wx=!0,YE=C),N(f,p)},b}function Z(f,p,b){b=la(-1,b),b.tag=3;var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var L=p.value;b.payload=function(){return C(L)},b.callback=function(){N(f,p)}}var B=f.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(b.callback=function(){N(f,p),typeof C!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var re=p.stack;this.componentDidCatch(p.value,{componentStack:re!==null?re:""})}),b}function ne(f,p,b){var C=f.pingCache;if(C===null){C=f.pingCache=new F;var L=new Set;C.set(p,L)}else L=C.get(p),L===void 0&&(L=new Set,C.set(p,L));L.has(b)||(L.add(b),f=GX.bind(null,f,p,b),p.then(f,f))}function ae(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function pe(f,p,b,C,L){return f.mode&1?(f.flags|=65536,f.lanes=L,f):(f===p?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=la(-1,1),p.tag=2,Ha(b,p))),b.lanes|=1),f)}function Ee(f){f.flags|=4}function lt(f,p){if(f!==null&&f.child===p.child)return!0;if(p.flags&16)return!1;for(f=p.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var Xe,Pt,Bt,ei;if(Le)Xe=function(f,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)Te(f,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Pt=function(){},Bt=function(f,p,b,C,L){if(f=f.memoizedProps,f!==C){var B=p.stateNode,re=So(cs.current);b=he(B,b,f,C,L,re),(p.updateQueue=b)&&Ee(p)}},ei=function(f,p,b,C){b!==C&&Ee(p)};else if(le){Xe=function(f,p,b,C){for(var L=p.child;L!==null;){if(L.tag===5){var B=L.stateNode;b&&C&&(B=qn(B,L.type,L.memoizedProps,L)),Te(f,B)}else if(L.tag===6)B=L.stateNode,b&&C&&(B=Hi(B,L.memoizedProps,L)),Te(f,B);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)B=L.child,B!==null&&(B.return=L),Xe(f,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===p)break;for(;L.sibling===null;){if(L.return===null||L.return===p)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};var Hr=function(f,p,b,C){for(var L=p.child;L!==null;){if(L.tag===5){var B=L.stateNode;b&&C&&(B=qn(B,L.type,L.memoizedProps,L)),dn(f,B)}else if(L.tag===6)B=L.stateNode,b&&C&&(B=Hi(B,L.memoizedProps,L)),dn(f,B);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)B=L.child,B!==null&&(B.return=L),Hr(f,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===p)break;for(;L.sibling===null;){if(L.return===null||L.return===p)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};Pt=function(f,p){var b=p.stateNode;if(!lt(f,p)){f=b.containerInfo;var C=Vt(f);Hr(C,p,!1,!1),b.pendingChildren=C,Ee(p),jn(f,C)}},Bt=function(f,p,b,C,L){var B=f.stateNode,re=f.memoizedProps;if((f=lt(f,p))&&re===C)p.stateNode=B;else{var fe=p.stateNode,Oe=So(cs.current),it=null;re!==C&&(it=he(fe,b,re,C,L,Oe)),f&&it===null?p.stateNode=B:(B=mt(B,it,b,re,C,p,f,fe),Ue(B,b,C,L,Oe)&&Ee(p),p.stateNode=B,f?Ee(p):Xe(B,p,!1,!1))}},ei=function(f,p,b,C){b!==C?(f=So(Zu.current),b=So(cs.current),p.stateNode=Fe(C,f,b,p),Ee(p)):p.stateNode=f.stateNode}}else Pt=function(){},Bt=function(){},ei=function(){};function Ws(f,p){if(!Hn)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function ji(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,C=0;if(p)for(var L=f.child;L!==null;)b|=L.lanes|L.childLanes,C|=L.subtreeFlags&14680064,C|=L.flags&14680064,L.return=f,L=L.sibling;else for(L=f.child;L!==null;)b|=L.lanes|L.childLanes,C|=L.subtreeFlags,C|=L.flags,L.return=f,L=L.sibling;return f.subtreeFlags|=C,f.childLanes=b,p}function ux(f,p,b){var C=p.pendingProps;switch(zg(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(p),null;case 1:return Pn(p.type)&&ra(),ji(p),null;case 3:return C=p.stateNode,Ju(),jt(Ft),jt(rn),Lf(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(f===null||f.child===null)&&(Sd(p)?Ee(p):f===null||f.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,$s!==null&&(ZE($s),$s=null))),Pt(f,p),ji(p),null;case 5:Wg(p),b=So(Zu.current);var L=p.type;if(f!==null&&p.stateNode!=null)Bt(f,p,L,C,b),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!C){if(p.stateNode===null)throw Error(o(166));return ji(p),null}if(f=So(cs.current),Sd(p)){if(!j)throw Error(o(175));f=Ml(p.stateNode,p.type,p.memoizedProps,b,f,p,!Yu),p.updateQueue=f,f!==null&&Ee(p)}else{var B=ce(L,C,b,f,p);Xe(B,p,!1,!1),p.stateNode=B,Ue(B,L,C,b,f)&&Ee(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ji(p),null;case 6:if(f&&p.stateNode!=null)ei(f,p,f.memoizedProps,C);else{if(typeof C!="string"&&p.stateNode===null)throw Error(o(166));if(f=So(Zu.current),b=So(cs.current),Sd(p)){if(!j)throw Error(o(176));if(f=p.stateNode,C=p.memoizedProps,(b=En(f,C,p,!Yu))&&(L=br,L!==null))switch(B=(L.mode&1)!==0,L.tag){case 3:tt(L.stateNode.containerInfo,f,C,B);break;case 5:yt(L.type,L.memoizedProps,L.stateNode,f,C,B)}b&&Ee(p)}else p.stateNode=Fe(C,f,b,p)}return ji(p),null;case 13:if(jt(Yn),C=p.memoizedState,Hn&&zr!==null&&p.mode&1&&!(p.flags&128)){for(f=zr;f;)f=yo(f);return Ku(),p.flags|=98560,p}if(C!==null&&C.dehydrated!==null){if(C=Sd(p),f===null){if(!C)throw Error(o(318));if(!j)throw Error(o(344));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));Ag(f,p)}else Ku(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return ji(p),null}return $s!==null&&(ZE($s),$s=null),p.flags&128?(p.lanes=b,p):(C=C!==null,b=!1,f===null?Sd(p):b=f.memoizedState!==null,C&&!b&&(p.child.flags|=8192,p.mode&1&&(f===null||Yn.current&1?qi===0&&(qi=3):eC())),p.updateQueue!==null&&(p.flags|=4),ji(p),null);case 4:return Ju(),Pt(f,p),f===null&&Re(p.stateNode.containerInfo),ji(p),null;case 10:return Rl(p.type._context),ji(p),null;case 17:return Pn(p.type)&&ra(),ji(p),null;case 19:if(jt(Yn),L=p.memoizedState,L===null)return ji(p),null;if(C=(p.flags&128)!==0,B=L.rendering,B===null)if(C)Ws(L,!1);else{if(qi!==0||f!==null&&f.flags&128)for(f=p.child;f!==null;){if(B=kf(f),B!==null){for(p.flags|=128,Ws(L,!1),f=B.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),p.subtreeFlags=0,f=b,C=p.child;C!==null;)b=C,L=f,b.flags&=14680066,B=b.alternate,B===null?(b.childLanes=0,b.lanes=L,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=B.childLanes,b.lanes=B.lanes,b.child=B.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=B.memoizedProps,b.memoizedState=B.memoizedState,b.updateQueue=B.updateQueue,b.type=B.type,L=B.dependencies,b.dependencies=L===null?null:{lanes:L.lanes,firstContext:L.firstContext}),C=C.sibling;return Mt(Yn,Yn.current&1|2),p.child}f=f.sibling}L.tail!==null&&Ii()>XE&&(p.flags|=128,C=!0,Ws(L,!1),p.lanes=4194304)}else{if(!C)if(f=kf(B),f!==null){if(p.flags|=128,C=!0,f=f.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),Ws(L,!0),L.tail===null&&L.tailMode==="hidden"&&!B.alternate&&!Hn)return ji(p),null}else 2*Ii()-L.renderingStartTime>XE&&b!==1073741824&&(p.flags|=128,C=!0,Ws(L,!1),p.lanes=4194304);L.isBackwards?(B.sibling=p.child,p.child=B):(f=L.last,f!==null?f.sibling=B:p.child=B,L.last=B)}return L.tail!==null?(p=L.tail,L.rendering=p,L.tail=p.sibling,L.renderingStartTime=Ii(),p.sibling=null,f=Yn.current,Mt(Yn,C?f&1|2:f&1),p):(ji(p),null);case 22:case 23:return JE(),C=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==C&&(p.flags|=8192),C&&p.mode&1?js&1073741824&&(ji(p),Le&&p.subtreeFlags&6&&(p.flags|=8192)):ji(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var cx=a.ReactCurrentOwner,fr=!1;function Ji(f,p,b,C){p.child=f===null?J_(p,null,b,C):Qu(p,f.child,b,C)}function ti(f,p,b,C,L){b=b.render;var B=p.ref;return aa(p,L),C=Ff(f,p,b,C,B,L),b=Bf(),f!==null&&!fr?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~L,Bl(f,p,L)):(Hn&&b&&Bg(p),p.flags|=1,Ji(f,p,C,L),p.child)}function Qg(f,p,b,C,L){if(f===null){var B=b.type;return typeof B=="function"&&!tC(B)&&B.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=B,Wa(f,p,B,C,L)):(f=Rx(b.type,null,C,p,p.mode,L),f.ref=p.ref,f.return=p,p.child=f)}if(B=f.child,!(f.lanes&L)){var re=B.memoizedProps;if(b=b.compare,b=b!==null?b:wf,b(re,C)&&f.ref===p.ref)return Bl(f,p,L)}return p.flags|=1,f=oc(B,C),f.ref=p.ref,f.return=p,p.child=f}function Wa(f,p,b,C,L){if(f!==null&&wf(f.memoizedProps,C)&&f.ref===p.ref)if(fr=!1,(f.lanes&L)!==0)f.flags&131072&&(fr=!0);else return p.lanes=f.lanes,Bl(f,p,L);return DE(f,p,b,C,L)}function EL(f,p,b){var C=p.pendingProps,L=C.children,B=f!==null?f.memoizedState:null;if(C.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},Mt(Gf,js),js|=b;else if(b&1073741824)p.memoizedState={baseLanes:0,cachePool:null},C=B!==null?B.baseLanes:b,Mt(Gf,js),js|=C;else return f=B!==null?B.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null},p.updateQueue=null,Mt(Gf,js),js|=f,null;else B!==null?(C=B.baseLanes|b,p.memoizedState=null):C=b,Mt(Gf,js),js|=C;return Ji(f,p,L,b),p.child}function CL(f,p){var b=p.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function DE(f,p,b,C,L){var B=Pn(b)?Xn:rn.current;return B=$i(p,B),aa(p,L),b=Ff(f,p,b,C,B,L),C=Bf(),f!==null&&!fr?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~L,Bl(f,p,L)):(Hn&&C&&Bg(p),p.flags|=1,Ji(f,p,b,L),p.child)}function AL(f,p,b,C,L){if(Pn(b)){var B=!0;cr(p)}else B=!1;if(aa(p,L),p.stateNode===null)f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),Ug(p,b,C),xd(p,b,C,L),C=!0;else if(f===null){var re=p.stateNode,fe=p.memoizedProps;re.props=fe;var Oe=re.context,it=b.contextType;typeof it=="object"&&it!==null?it=Jn(it):(it=Pn(b)?Xn:rn.current,it=$i(p,it));var Et=b.getDerivedStateFromProps,Xt=typeof Et=="function"||typeof re.getSnapshotBeforeUpdate=="function";Xt||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(fe!==C||Oe!==it)&&Fg(p,re,C,it),Vs=!1;var Ut=p.memoizedState;re.state=Ut,Gu(p,C,re,L),Oe=p.memoizedState,fe!==C||Ut!==Oe||Ft.current||Vs?(typeof Et=="function"&&(ju(p,b,Et,C),Oe=p.memoizedState),(fe=Vs||Y_(p,b,fe,C,Ut,Oe,it))?(Xt||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount()),typeof re.componentDidMount=="function"&&(p.flags|=4194308)):(typeof re.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=Oe),re.props=C,re.state=Oe,re.context=it,C=fe):(typeof re.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{re=p.stateNode,X_(f,p),fe=p.memoizedProps,it=p.type===p.elementType?fe:Tr(p.type,fe),re.props=it,Xt=p.pendingProps,Ut=re.context,Oe=b.contextType,typeof Oe=="object"&&Oe!==null?Oe=Jn(Oe):(Oe=Pn(b)?Xn:rn.current,Oe=$i(p,Oe));var On=b.getDerivedStateFromProps;(Et=typeof On=="function"||typeof re.getSnapshotBeforeUpdate=="function")||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(fe!==Xt||Ut!==Oe)&&Fg(p,re,C,Oe),Vs=!1,Ut=p.memoizedState,re.state=Ut,Gu(p,C,re,L);var Rt=p.memoizedState;fe!==Xt||Ut!==Rt||Ft.current||Vs?(typeof On=="function"&&(ju(p,b,On,C),Rt=p.memoizedState),(it=Vs||Y_(p,b,it,C,Ut,Rt,Oe)||!1)?(Et||typeof re.UNSAFE_componentWillUpdate!="function"&&typeof re.componentWillUpdate!="function"||(typeof re.componentWillUpdate=="function"&&re.componentWillUpdate(C,Rt,Oe),typeof re.UNSAFE_componentWillUpdate=="function"&&re.UNSAFE_componentWillUpdate(C,Rt,Oe)),typeof re.componentDidUpdate=="function"&&(p.flags|=4),typeof re.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof re.componentDidUpdate!="function"||fe===f.memoizedProps&&Ut===f.memoizedState||(p.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&Ut===f.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=Rt),re.props=C,re.state=Rt,re.context=Oe,C=it):(typeof re.componentDidUpdate!="function"||fe===f.memoizedProps&&Ut===f.memoizedState||(p.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&Ut===f.memoizedState||(p.flags|=1024),C=!1)}return kE(f,p,b,C,B,L)}function kE(f,p,b,C,L,B){CL(f,p);var re=(p.flags&128)!==0;if(!C&&!re)return L&&Pi(p,b,!1),Bl(f,p,B);C=p.stateNode,cx.current=p;var fe=re&&typeof b.getDerivedStateFromError!="function"?null:C.render();return p.flags|=1,f!==null&&re?(p.child=Qu(p,f.child,null,B),p.child=Qu(p,null,fe,B)):Ji(f,p,fe,B),p.memoizedState=C.state,L&&Pi(p,b,!0),p.child}function ML(f){var p=f.stateNode;p.pendingContext?zn(f,p.pendingContext,p.pendingContext!==p.context):p.context&&zn(f,p.context,!1),Gg(f,p.containerInfo)}function PL(f,p,b,C,L){return Ku(),Ul(L),p.flags|=256,Ji(f,p,b,C),p.child}var dx={dehydrated:null,treeContext:null,retryLane:0};function hx(f){return{baseLanes:f,cachePool:null}}function IL(f,p,b){var C=p.pendingProps,L=Yn.current,B=!1,re=(p.flags&128)!==0,fe;if((fe=re)||(fe=f!==null&&f.memoizedState===null?!1:(L&2)!==0),fe?(B=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(L|=1),Mt(Yn,L&1),f===null)return Ol(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(p.mode&1?na(f)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(L=C.children,f=C.fallback,B?(C=p.mode,B=p.child,L={mode:"hidden",children:L},!(C&1)&&B!==null?(B.childLanes=0,B.pendingProps=L):B=Dx(L,C,0,null),f=Fd(f,C,b,null),B.return=p,f.return=p,B.sibling=f,p.child=B,p.child.memoizedState=hx(b),p.memoizedState=dx,f):LE(p,L));if(L=f.memoizedState,L!==null){if(fe=L.dehydrated,fe!==null){if(re)return p.flags&256?(p.flags&=-257,fx(f,p,b,Error(o(422)))):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(B=C.fallback,L=p.mode,C=Dx({mode:"visible",children:C.children},L,0,null),B=Fd(B,L,b,null),B.flags|=2,C.return=p,B.return=p,C.sibling=B,p.child=C,p.mode&1&&Qu(p,f.child,null,b),p.child.memoizedState=hx(b),p.memoizedState=dx,B);if(!(p.mode&1))p=fx(f,p,b,null);else if(na(fe))p=fx(f,p,b,Error(o(419)));else if(C=(b&f.childLanes)!==0,fr||C){if(C=Di,C!==null){switch(b&-b){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}C=B&(C.suspendedLanes|b)?0:B,C!==0&&C!==L.retryLane&&(L.retryLane=C,wo(f,C,-1))}eC(),p=fx(f,p,b,Error(o(421)))}else za(fe)?(p.flags|=128,p.child=f.child,p=WX.bind(null,f),Vi(fe,p),p=null):(b=L.treeContext,j&&(zr=ls(fe),br=p,Hn=!0,$s=null,Yu=!1,b!==null&&(us[Br++]=ua,us[Br++]=xo,us[Br++]=Nl,ua=b.id,xo=b.overflow,Nl=p)),p=LE(p,p.pendingProps.children),p.flags|=4096);return p}return B?(C=DL(f,p,C.children,C.fallback,b),B=p.child,L=f.child.memoizedState,B.memoizedState=L===null?hx(b):{baseLanes:L.baseLanes|b,cachePool:null},B.childLanes=f.childLanes&~b,p.memoizedState=dx,C):(b=RL(f,p,C.children,b),p.memoizedState=null,b)}return B?(C=DL(f,p,C.children,C.fallback,b),B=p.child,L=f.child.memoizedState,B.memoizedState=L===null?hx(b):{baseLanes:L.baseLanes|b,cachePool:null},B.childLanes=f.childLanes&~b,p.memoizedState=dx,C):(b=RL(f,p,C.children,b),p.memoizedState=null,b)}function LE(f,p){return p=Dx({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function RL(f,p,b,C){var L=f.child;return f=L.sibling,b=oc(L,{mode:"visible",children:b}),!(p.mode&1)&&(b.lanes=C),b.return=p,b.sibling=null,f!==null&&(C=p.deletions,C===null?(p.deletions=[f],p.flags|=16):C.push(f)),p.child=b}function DL(f,p,b,C,L){var B=p.mode;f=f.child;var re=f.sibling,fe={mode:"hidden",children:b};return!(B&1)&&p.child!==f?(b=p.child,b.childLanes=0,b.pendingProps=fe,p.deletions=null):(b=oc(f,fe),b.subtreeFlags=f.subtreeFlags&14680064),re!==null?C=oc(re,C):(C=Fd(C,B,L,null),C.flags|=2),C.return=p,b.return=p,b.sibling=C,p.child=b,C}function fx(f,p,b,C){return C!==null&&Ul(C),Qu(p,f.child,null,b),f=LE(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function kL(f,p,b){f.lanes|=p;var C=f.alternate;C!==null&&(C.lanes|=p),Dl(f.return,p,b)}function NE(f,p,b,C,L){var B=f.memoizedState;B===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:L}:(B.isBackwards=p,B.rendering=null,B.renderingStartTime=0,B.last=C,B.tail=b,B.tailMode=L)}function LL(f,p,b){var C=p.pendingProps,L=C.revealOrder,B=C.tail;if(Ji(f,p,C.children,b),C=Yn.current,C&2)C=C&1|2,p.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&kL(f,b,p);else if(f.tag===19)kL(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}if(Mt(Yn,C),!(p.mode&1))p.memoizedState=null;else switch(L){case"forwards":for(b=p.child,L=null;b!==null;)f=b.alternate,f!==null&&kf(f)===null&&(L=b),b=b.sibling;b=L,b===null?(L=p.child,p.child=null):(L=b.sibling,b.sibling=null),NE(p,!1,L,b,B);break;case"backwards":for(b=null,L=p.child,p.child=null;L!==null;){if(f=L.alternate,f!==null&&kf(f)===null){p.child=L;break}f=L.sibling,L.sibling=b,b=L,L=f}NE(p,!0,b,null,B);break;case"together":NE(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Bl(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),Wf|=p.lanes,!(b&p.childLanes))return null;if(f!==null&&p.child!==f.child)throw Error(o(153));if(p.child!==null){for(f=p.child,b=oc(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=oc(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function kX(f,p,b){switch(p.tag){case 3:ML(p),Ku();break;case 5:Ed(p);break;case 1:Pn(p.type)&&cr(p);break;case 4:Gg(p,p.stateNode.containerInfo);break;case 10:_d(p,p.type._context,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(Mt(Yn,Yn.current&1),p.flags|=128,null):b&p.child.childLanes?IL(f,p,b):(Mt(Yn,Yn.current&1),f=Bl(f,p,b),f!==null?f.sibling:null);Mt(Yn,Yn.current&1);break;case 19:if(C=(b&p.childLanes)!==0,f.flags&128){if(C)return LL(f,p,b);p.flags|=128}var L=p.memoizedState;if(L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Mt(Yn,Yn.current),C)break;return null;case 22:case 23:return p.lanes=0,EL(f,p,b)}return Bl(f,p,b)}function LX(f,p){switch(zg(p),p.tag){case 1:return Pn(p.type)&&ra(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Ju(),jt(Ft),jt(rn),Lf(),f=p.flags,f&65536&&!(f&128)?(p.flags=f&-65537|128,p):null;case 5:return Wg(p),null;case 13:if(jt(Yn),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Ku()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return jt(Yn),null;case 4:return Ju(),null;case 10:return Rl(p.type._context),null;case 22:case 23:return JE(),null;case 24:return null;default:return null}}var px=!1,kd=!1,NX=typeof WeakSet=="function"?WeakSet:Set,gt=null;function mx(f,p){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(C){ps(f,p,C)}else b.current=null}function OE(f,p,b){try{b()}catch(C){ps(f,p,C)}}var NL=!1;function OX(f,p){for(ee(f.containerInfo),gt=p;gt!==null;)if(f=gt,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,gt=p;else for(;gt!==null;){f=gt;try{var b=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,L=b.memoizedState,B=f.stateNode,re=B.getSnapshotBeforeUpdate(f.elementType===f.type?C:Tr(f.type,C),L);B.__reactInternalSnapshotBeforeUpdate=re}break;case 3:Le&&pt(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){ps(f,f.return,fe)}if(p=f.sibling,p!==null){p.return=f.return,gt=p;break}gt=f.return}return b=NL,NL=!1,b}function Ld(f,p,b){var C=p.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var L=C=C.next;do{if((L.tag&f)===f){var B=L.destroy;L.destroy=void 0,B!==void 0&&OE(p,b,B)}L=L.next}while(L!==C)}}function Zg(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&f)===f){var C=b.create;b.destroy=C()}b=b.next}while(b!==p)}}function UE(f){var p=f.ref;if(p!==null){var b=f.stateNode;switch(f.tag){case 5:f=Q(b);break;default:f=b}typeof p=="function"?p(f):p.current=f}}function OL(f,p,b){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Tf,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(f=p.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var C=f=f.next;do{var L=C,B=L.destroy;L=L.tag,B!==void 0&&(L&2||L&4)&&OE(p,b,B),C=C.next}while(C!==f)}break;case 1:if(mx(p,b),f=p.stateNode,typeof f.componentWillUnmount=="function")try{f.props=p.memoizedProps,f.state=p.memoizedState,f.componentWillUnmount()}catch(re){ps(p,b,re)}break;case 5:mx(p,b);break;case 4:Le?VL(f,p,b):le&&le&&(p=p.stateNode.containerInfo,b=Vt(p),Jt(p,b))}}function UL(f,p,b){for(var C=p;;)if(OL(f,C,b),C.child===null||Le&&C.tag===4){if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else C.child.return=C,C=C.child}function FL(f){var p=f.alternate;p!==null&&(f.alternate=null,FL(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&We(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function BL(f){return f.tag===5||f.tag===3||f.tag===4}function zL(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||BL(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function HL(f){if(Le){e:{for(var p=f.return;p!==null;){if(BL(p))break e;p=p.return}throw Error(o(160))}var b=p;switch(b.tag){case 5:p=b.stateNode,b.flags&32&&(at(p),b.flags&=-33),b=zL(f),BE(f,b,p);break;case 3:case 4:p=b.stateNode.containerInfo,b=zL(f),FE(f,b,p);break;default:throw Error(o(161))}}}function FE(f,p,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?ft(b,f,p):Gt(b,f);else if(C!==4&&(f=f.child,f!==null))for(FE(f,p,b),f=f.sibling;f!==null;)FE(f,p,b),f=f.sibling}function BE(f,p,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?Ot(b,f,p):Qe(b,f);else if(C!==4&&(f=f.child,f!==null))for(BE(f,p,b),f=f.sibling;f!==null;)BE(f,p,b),f=f.sibling}function VL(f,p,b){for(var C=p,L=!1,B,re;;){if(!L){L=C.return;e:for(;;){if(L===null)throw Error(o(160));switch(B=L.stateNode,L.tag){case 5:re=!1;break e;case 3:B=B.containerInfo,re=!0;break e;case 4:B=B.containerInfo,re=!0;break e}L=L.return}L=!0}if(C.tag===5||C.tag===6)UL(f,C,b),re?$e(B,C.stateNode):de(B,C.stateNode);else if(C.tag===18)re?Se(B,C.stateNode):we(B,C.stateNode);else if(C.tag===4){if(C.child!==null){B=C.stateNode.containerInfo,re=!0,C.child.return=C,C=C.child;continue}}else if(OL(f,C,b),C.child!==null){C.child.return=C,C=C.child;continue}if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return,C.tag===4&&(L=!1)}C.sibling.return=C.return,C=C.sibling}}function zE(f,p){if(Le){switch(p.tag){case 0:case 11:case 14:case 15:Ld(3,p,p.return),Zg(3,p),Ld(5,p,p.return);return;case 1:return;case 5:var b=p.stateNode;if(b!=null){var C=p.memoizedProps;f=f!==null?f.memoizedProps:C;var L=p.type,B=p.updateQueue;p.updateQueue=null,B!==null&&ct(b,B,L,f,C,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));b=p.memoizedProps,Ke(p.stateNode,f!==null?f.memoizedProps:b,b);return;case 3:j&&f!==null&&f.memoizedState.isDehydrated&&X(p.stateNode.containerInfo);return;case 12:return;case 13:gx(p);return;case 19:gx(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Ld(3,p,p.return),Zg(3,p),Ld(5,p,p.return);return;case 12:return;case 13:gx(p);return;case 19:gx(p);return;case 3:j&&f!==null&&f.memoizedState.isDehydrated&&X(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(le){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Jt(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function gx(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new NX),p.forEach(function(C){var L=jX.bind(null,f,C);b.has(C)||(b.add(C),C.then(L,L))})}}function UX(f,p){for(gt=p;gt!==null;){p=gt;var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var L=b[C];try{var B=f;Le?VL(B,L,p):UL(B,L,p);var re=L.alternate;re!==null&&(re.return=null),L.return=null}catch(It){ps(L,p,It)}}if(b=p.child,p.subtreeFlags&12854&&b!==null)b.return=p,gt=b;else for(;gt!==null;){p=gt;try{var fe=p.flags;if(fe&32&&Le&&at(p.stateNode),fe&512){var Oe=p.alternate;if(Oe!==null){var it=Oe.ref;it!==null&&(typeof it=="function"?it(null):it.current=null)}}if(fe&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var Et=p.alternate;(Et===null||Et.memoizedState===null)&&(qE=Ii())}break;case 22:var Xt=p.memoizedState!==null,Ut=p.alternate,On=Ut!==null&&Ut.memoizedState!==null;if(b=p,Le){e:if(C=b,L=Xt,B=null,Le)for(var Rt=C;;){if(Rt.tag===5){if(B===null){B=Rt;var wr=Rt.stateNode;L?ue(wr):Pe(Rt.stateNode,Rt.memoizedProps)}}else if(Rt.tag===6){if(B===null){var Co=Rt.stateNode;L?nt(Co):Ye(Co,Rt.memoizedProps)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===C)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===C)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===C)break e;B===Rt&&(B=null),Rt=Rt.return}B===Rt&&(B=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}if(Xt&&!On&&b.mode&1){gt=b;for(var Ce=b.child;Ce!==null;){for(b=gt=Ce;gt!==null;){C=gt;var ge=C.child;switch(C.tag){case 0:case 11:case 14:case 15:Ld(4,C,C.return);break;case 1:mx(C,C.return);var Ie=C.stateNode;if(typeof Ie.componentWillUnmount=="function"){var vt=C.return;try{Ie.props=C.memoizedProps,Ie.state=C.memoizedState,Ie.componentWillUnmount()}catch(It){ps(C,vt,It)}}break;case 5:mx(C,C.return);break;case 22:if(C.memoizedState!==null){WL(b);continue}}ge!==null?(ge.return=C,gt=ge):WL(b)}Ce=Ce.sibling}}}switch(fe&4102){case 2:HL(p),p.flags&=-3;break;case 6:HL(p),p.flags&=-3,zE(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,zE(p.alternate,p);break;case 4:zE(p.alternate,p)}}catch(It){ps(p,p.return,It)}if(b=p.sibling,b!==null){b.return=p.return,gt=b;break}gt=p.return}}}function FX(f,p,b){gt=f,$L(f)}function $L(f,p,b){for(var C=(f.mode&1)!==0;gt!==null;){var L=gt,B=L.child;if(L.tag===22&&C){var re=L.memoizedState!==null||px;if(!re){var fe=L.alternate,Oe=fe!==null&&fe.memoizedState!==null||kd;fe=px;var it=kd;if(px=re,(kd=Oe)&&!it)for(gt=L;gt!==null;)re=gt,Oe=re.child,re.tag===22&&re.memoizedState!==null?jL(L):Oe!==null?(Oe.return=re,gt=Oe):jL(L);for(;B!==null;)gt=B,$L(B),B=B.sibling;gt=L,px=fe,kd=it}GL(f)}else L.subtreeFlags&8772&&B!==null?(B.return=L,gt=B):GL(f)}}function GL(f){for(;gt!==null;){var p=gt;if(p.flags&8772){var b=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:kd||Zg(5,p);break;case 1:var C=p.stateNode;if(p.flags&4&&!kd)if(b===null)C.componentDidMount();else{var L=p.elementType===p.type?b.memoizedProps:Tr(p.type,b.memoizedProps);C.componentDidUpdate(L,b.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var B=p.updateQueue;B!==null&&Wu(p,B,C);break;case 3:var re=p.updateQueue;if(re!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=Q(p.child.stateNode);break;case 1:b=p.child.stateNode}Wu(p,re,b)}break;case 5:var fe=p.stateNode;b===null&&p.flags&4&&ut(fe,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(j&&p.memoizedState===null){var Oe=p.alternate;if(Oe!==null){var it=Oe.memoizedState;if(it!==null){var Et=it.dehydrated;Et!==null&&me(Et)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}kd||p.flags&512&&UE(p)}catch(Xt){ps(p,p.return,Xt)}}if(p===f){gt=null;break}if(b=p.sibling,b!==null){b.return=p.return,gt=b;break}gt=p.return}}function WL(f){for(;gt!==null;){var p=gt;if(p===f){gt=null;break}var b=p.sibling;if(b!==null){b.return=p.return,gt=b;break}gt=p.return}}function jL(f){for(;gt!==null;){var p=gt;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{Zg(4,p)}catch(Oe){ps(p,b,Oe)}break;case 1:var C=p.stateNode;if(typeof C.componentDidMount=="function"){var L=p.return;try{C.componentDidMount()}catch(Oe){ps(p,L,Oe)}}var B=p.return;try{UE(p)}catch(Oe){ps(p,B,Oe)}break;case 5:var re=p.return;try{UE(p)}catch(Oe){ps(p,re,Oe)}}}catch(Oe){ps(p,p.return,Oe)}if(p===f){gt=null;break}var fe=p.sibling;if(fe!==null){fe.return=p.return,gt=fe;break}gt=p.return}}var yx=0,vx=1,_x=2,xx=3,Sx=4;if(typeof Symbol=="function"&&Symbol.for){var Jg=Symbol.for;yx=Jg("selector.component"),vx=Jg("selector.has_pseudo_class"),_x=Jg("selector.role"),xx=Jg("selector.test_id"),Sx=Jg("selector.text")}function HE(f){var p=Me(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(f=V(f),f===null)throw Error(o(362));return f.stateNode.current}function VE(f,p){switch(p.$$typeof){case yx:if(f.type===p.value)return!0;break;case vx:e:{p=p.value,f=[f,0];for(var b=0;b<f.length;){var C=f[b++],L=f[b++],B=p[L];if(C.tag!==5||!Ve(C)){for(;B!=null&&VE(C,B);)L++,B=p[L];if(L===p.length){p=!0;break e}else for(C=C.child;C!==null;)f.push(C,L),C=C.sibling}}p=!1}return p;case _x:if(f.tag===5&&Ne(f.stateNode,p.value))return!0;break;case Sx:if((f.tag===5||f.tag===6)&&(f=De(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case xx:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function $E(f){switch(f.$$typeof){case yx:return"<"+(D(f.value)||"Unknown")+">";case vx:return":has("+($E(f)||"")+")";case _x:return'[role="'+f.value+'"]';case Sx:return'"'+f.value+'"';case xx:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function qL(f,p){var b=[];f=[f,0];for(var C=0;C<f.length;){var L=f[C++],B=f[C++],re=p[B];if(L.tag!==5||!Ve(L)){for(;re!=null&&VE(L,re);)B++,re=p[B];if(B===p.length)b.push(L);else for(L=L.child;L!==null;)f.push(L,B),L=L.sibling}}return b}function GE(f,p){if(!q)throw Error(o(363));f=HE(f),f=qL(f,p),p=[],f=Array.from(f);for(var b=0;b<f.length;){var C=f[b++];if(C.tag===5)Ve(C)||p.push(C.stateNode);else for(C=C.child;C!==null;)f.push(C),C=C.sibling}return p}var BX=Math.ceil,Tx=a.ReactCurrentDispatcher,WE=a.ReactCurrentOwner,bi=a.ReactCurrentBatchConfig,on=0,Di=null,ki=null,pr=0,js=0,Gf=pn(0),qi=0,e0=null,Wf=0,bx=0,jE=0,t0=null,hs=null,qE=0,XE=1/0;function jf(){XE=Ii()+500}var wx=!1,YE=null,nc=null,Ex=!1,ic=null,Cx=0,n0=0,KE=null,Ax=-1,Mx=0;function Vr(){return on&6?Ii():Ax!==-1?Ax:Ax=Ii()}function rc(f){return f.mode&1?on&2&&pr!==0?pr&-pr:Lg.transition!==null?(Mx===0&&(f=_f,_f<<=1,!(_f&4194240)&&(_f=64),Mx=f),Mx):(f=ln,f!==0?f:Be()):1}function wo(f,p,b){if(50<n0)throw n0=0,KE=null,Error(o(185));var C=Px(f,p);return C===null?null:(yd(C,p,b),(!(on&2)||C!==Di)&&(C===Di&&(!(on&2)&&(bx|=p),qi===4&&sc(C,pr)),fs(C,b),p===1&&on===0&&!(f.mode&1)&&(jf(),bf&&vo())),C)}function Px(f,p){f.lanes|=p;var b=f.alternate;for(b!==null&&(b.lanes|=p),b=f,f=f.return;f!==null;)f.childLanes|=p,b=f.alternate,b!==null&&(b.childLanes|=p),b=f,f=f.return;return b.tag===3?b.stateNode:null}function fs(f,p){var b=f.callbackNode;Mg(f,p);var C=Il(f,f===Di?pr:0);if(C===0)b!==null&&Dg(b),f.callbackNode=null,f.callbackPriority=0;else if(p=C&-C,f.callbackPriority!==p){if(b!=null&&Dg(b),p===1)f.tag===0?ME(YL.bind(null,f)):j_(YL.bind(null,f)),rt?st(function(){on===0&&vo()}):Rg(Vu,vo),b=null;else{switch(Ig(C)){case 1:b=Vu;break;case 4:b=vd;break;case 16:b=Sf;break;case 536870912:b=CE;break;default:b=Sf}b=rN(b,XL.bind(null,f))}f.callbackPriority=p,f.callbackNode=b}}function XL(f,p){if(Ax=-1,Mx=0,on&6)throw Error(o(327));var b=f.callbackNode;if(Ud()&&f.callbackNode!==b)return null;var C=Il(f,f===Di?pr:0);if(C===0)return null;if(C&30||C&f.expiredLanes||p)p=Ix(f,C);else{p=C;var L=on;on|=2;var B=ZL();(Di!==f||pr!==p)&&(jf(),Nd(f,p));do try{VX();break}catch(fe){QL(f,fe)}while(1);Og(),Tx.current=B,on=L,ki!==null?p=0:(Di=null,pr=0,p=qi)}if(p!==0){if(p===2&&(L=xf(f),L!==0&&(C=L,p=QE(f,L))),p===1)throw b=e0,Nd(f,0),sc(f,C),fs(f,Ii()),b;if(p===6)sc(f,C);else{if(L=f.current.alternate,!(C&30)&&!zX(L)&&(p=Ix(f,C),p===2&&(B=xf(f),B!==0&&(C=B,p=QE(f,B))),p===1))throw b=e0,Nd(f,0),sc(f,C),fs(f,Ii()),b;switch(f.finishedWork=L,f.finishedLanes=C,p){case 0:case 1:throw Error(o(345));case 2:Od(f,hs);break;case 3:if(sc(f,C),(C&130023424)===C&&(p=qE+500-Ii(),10<p)){if(Il(f,0)!==0)break;if(L=f.suspendedLanes,(L&C)!==C){Vr(),f.pingedLanes|=f.suspendedLanes&L;break}f.timeoutHandle=He(Od.bind(null,f,hs),p);break}Od(f,hs);break;case 4:if(sc(f,C),(C&4194240)===C)break;for(p=f.eventTimes,L=-1;0<C;){var re=31-dr(C);B=1<<re,re=p[re],re>L&&(L=re),C&=~B}if(C=L,C=Ii()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*BX(C/1960))-C,10<C){f.timeoutHandle=He(Od.bind(null,f,hs),C);break}Od(f,hs);break;case 5:Od(f,hs);break;default:throw Error(o(329))}}}return fs(f,Ii()),f.callbackNode===b?XL.bind(null,f):null}function QE(f,p){var b=t0;return f.current.memoizedState.isDehydrated&&(Nd(f,p).flags|=256),f=Ix(f,p),f!==2&&(p=hs,hs=b,p!==null&&ZE(p)),f}function ZE(f){hs===null?hs=f:hs.push.apply(hs,f)}function zX(f){for(var p=f;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var C=0;C<b.length;C++){var L=b[C],B=L.getSnapshot;L=L.value;try{if(!Hs(B(),L))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function sc(f,p){for(p&=~jE,p&=~bx,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var b=31-dr(p),C=1<<b;f[b]=-1,p&=~C}}function YL(f){if(on&6)throw Error(o(327));Ud();var p=Il(f,0);if(!(p&1))return fs(f,Ii()),null;var b=Ix(f,p);if(f.tag!==0&&b===2){var C=xf(f);C!==0&&(p=C,b=QE(f,C))}if(b===1)throw b=e0,Nd(f,0),sc(f,p),fs(f,Ii()),b;if(b===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,Od(f,hs),fs(f,Ii()),null}function KL(f){ic!==null&&ic.tag===0&&!(on&6)&&Ud();var p=on;on|=1;var b=bi.transition,C=ln;try{if(bi.transition=null,ln=1,f)return f()}finally{ln=C,bi.transition=b,on=p,!(on&6)&&vo()}}function JE(){js=Gf.current,jt(Gf)}function Nd(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==Ae&&(f.timeoutHandle=Ae,ot(b)),ki!==null)for(b=ki.return;b!==null;){var C=b;switch(zg(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&ra();break;case 3:Ju(),jt(Ft),jt(rn),Lf();break;case 5:Wg(C);break;case 4:Ju();break;case 13:jt(Yn);break;case 19:jt(Yn);break;case 10:Rl(C.type._context);break;case 22:case 23:JE()}b=b.return}if(Di=f,ki=f=oc(f.current,null),pr=js=p,qi=0,e0=null,jE=bx=Wf=0,hs=t0=null,Ri!==null){for(p=0;p<Ri.length;p++)if(b=Ri[p],C=b.interleaved,C!==null){b.interleaved=null;var L=C.next,B=b.pending;if(B!==null){var re=B.next;B.next=L,C.next=re}b.pending=C}Ri=null}return f}function QL(f,p){do{var b=ki;try{if(Og(),Nf.current=Dd,Of){for(var C=qt.memoizedState;C!==null;){var L=C.queue;L!==null&&(L.pending=null),C=C.next}Of=!1}if(To=0,gi=ai=qt=null,Cd=!1,Ad=0,WE.current=null,b===null||b.return===null){qi=1,e0=p,ki=null;break}e:{var B=f,re=b.return,fe=b,Oe=p;if(p=pr,fe.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var it=Oe,Et=fe,Xt=Et.tag;if(!(Et.mode&1)&&(Xt===0||Xt===11||Xt===15)){var Ut=Et.alternate;Ut?(Et.updateQueue=Ut.updateQueue,Et.memoizedState=Ut.memoizedState,Et.lanes=Ut.lanes):(Et.updateQueue=null,Et.memoizedState=null)}var On=ae(re);if(On!==null){On.flags&=-257,pe(On,re,fe,B,p),On.mode&1&&ne(B,it,p),p=On,Oe=it;var Rt=p.updateQueue;if(Rt===null){var wr=new Set;wr.add(Oe),p.updateQueue=wr}else Rt.add(Oe);break e}else{if(!(p&1)){ne(B,it,p),eC();break e}Oe=Error(o(426))}}else if(Hn&&fe.mode&1){var Co=ae(re);if(Co!==null){!(Co.flags&65536)&&(Co.flags|=256),pe(Co,re,fe,B,p),Ul(Oe);break e}}B=Oe,qi!==4&&(qi=2),t0===null?t0=[B]:t0.push(B),Oe=I(Oe,fe),fe=re;do{switch(fe.tag){case 3:fe.flags|=65536,p&=-p,fe.lanes|=p;var Ce=K(fe,Oe,p);Pf(fe,Ce);break e;case 1:B=Oe;var ge=fe.type,Ie=fe.stateNode;if(!(fe.flags&128)&&(typeof ge.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(nc===null||!nc.has(Ie)))){fe.flags|=65536,p&=-p,fe.lanes|=p;var vt=Z(fe,B,p);Pf(fe,vt);break e}}fe=fe.return}while(fe!==null)}eN(b)}catch(It){p=It,ki===b&&b!==null&&(ki=b=b.return);continue}break}while(1)}function ZL(){var f=Tx.current;return Tx.current=Dd,f===null?Dd:f}function eC(){(qi===0||qi===3||qi===2)&&(qi=4),Di===null||!(Wf&268435455)&&!(bx&268435455)||sc(Di,pr)}function Ix(f,p){var b=on;on|=2;var C=ZL();Di===f&&pr===p||Nd(f,p);do try{HX();break}catch(L){QL(f,L)}while(1);if(Og(),on=b,Tx.current=C,ki!==null)throw Error(o(261));return Di=null,pr=0,qi}function HX(){for(;ki!==null;)JL(ki)}function VX(){for(;ki!==null&&!EE();)JL(ki)}function JL(f){var p=iN(f.alternate,f,js);f.memoizedProps=f.pendingProps,p===null?eN(f):ki=p,WE.current=null}function eN(f){var p=f;do{var b=p.alternate;if(f=p.return,p.flags&32768){if(b=LX(b,p),b!==null){b.flags&=32767,ki=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{qi=6,ki=null;return}}else if(b=ux(b,p,js),b!==null){ki=b;return}if(p=p.sibling,p!==null){ki=p;return}ki=p=f}while(p!==null);qi===0&&(qi=5)}function Od(f,p){var b=ln,C=bi.transition;try{bi.transition=null,ln=1,$X(f,p,b)}finally{bi.transition=C,ln=b}return null}function $X(f,p,b){do Ud();while(ic!==null);if(on&6)throw Error(o(327));var C=f.finishedWork,L=f.finishedLanes;if(C===null)return null;if(f.finishedWork=null,f.finishedLanes=0,C===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var B=C.lanes|C.childLanes;if(wE(f,B),f===Di&&(ki=Di=null,pr=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||Ex||(Ex=!0,rN(Sf,function(){return Ud(),null})),B=(C.flags&15990)!==0,C.subtreeFlags&15990||B){B=bi.transition,bi.transition=null;var re=ln;ln=1;var fe=on;on|=4,WE.current=null,OX(f,C),UX(f,C),te(f.containerInfo),f.current=C,FX(C),G_(),on=fe,ln=re,bi.transition=B}else f.current=C;if(Ex&&(Ex=!1,ic=f,Cx=L),B=f.pendingLanes,B===0&&(nc=null),W_(C.stateNode),fs(f,Ii()),p!==null)for(b=f.onRecoverableError,C=0;C<p.length;C++)b(p[C]);if(wx)throw wx=!1,f=YE,YE=null,f;return Cx&1&&f.tag!==0&&Ud(),B=f.pendingLanes,B&1?f===KE?n0++:(n0=0,KE=f):n0=0,vo(),null}function Ud(){if(ic!==null){var f=Ig(Cx),p=bi.transition,b=ln;try{if(bi.transition=null,ln=16>f?16:f,ic===null)var C=!1;else{if(f=ic,ic=null,Cx=0,on&6)throw Error(o(331));var L=on;for(on|=4,gt=f.current;gt!==null;){var B=gt,re=B.child;if(gt.flags&16){var fe=B.deletions;if(fe!==null){for(var Oe=0;Oe<fe.length;Oe++){var it=fe[Oe];for(gt=it;gt!==null;){var Et=gt;switch(Et.tag){case 0:case 11:case 15:Ld(8,Et,B)}var Xt=Et.child;if(Xt!==null)Xt.return=Et,gt=Xt;else for(;gt!==null;){Et=gt;var Ut=Et.sibling,On=Et.return;if(FL(Et),Et===it){gt=null;break}if(Ut!==null){Ut.return=On,gt=Ut;break}gt=On}}}var Rt=B.alternate;if(Rt!==null){var wr=Rt.child;if(wr!==null){Rt.child=null;do{var Co=wr.sibling;wr.sibling=null,wr=Co}while(wr!==null)}}gt=B}}if(B.subtreeFlags&2064&&re!==null)re.return=B,gt=re;else e:for(;gt!==null;){if(B=gt,B.flags&2048)switch(B.tag){case 0:case 11:case 15:Ld(9,B,B.return)}var Ce=B.sibling;if(Ce!==null){Ce.return=B.return,gt=Ce;break e}gt=B.return}}var ge=f.current;for(gt=ge;gt!==null;){re=gt;var Ie=re.child;if(re.subtreeFlags&2064&&Ie!==null)Ie.return=re,gt=Ie;else e:for(re=ge;gt!==null;){if(fe=gt,fe.flags&2048)try{switch(fe.tag){case 0:case 11:case 15:Zg(9,fe)}}catch(It){ps(fe,fe.return,It)}if(fe===re){gt=null;break e}var vt=fe.sibling;if(vt!==null){vt.return=fe.return,gt=vt;break e}gt=fe.return}}if(on=L,vo(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Tf,f)}catch{}C=!0}return C}finally{ln=b,bi.transition=p}}return!1}function tN(f,p,b){p=I(b,p),p=K(f,p,1),Ha(f,p),p=Vr(),f=Px(f,1),f!==null&&(yd(f,1,p),fs(f,p))}function ps(f,p,b){if(f.tag===3)tN(f,f,b);else for(;p!==null;){if(p.tag===3){tN(p,f,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(nc===null||!nc.has(C))){f=I(b,f),f=Z(p,f,1),Ha(p,f),f=Vr(),p=Px(p,1),p!==null&&(yd(p,1,f),fs(p,f));break}}p=p.return}}function GX(f,p,b){var C=f.pingCache;C!==null&&C.delete(p),p=Vr(),f.pingedLanes|=f.suspendedLanes&b,Di===f&&(pr&b)===b&&(qi===4||qi===3&&(pr&130023424)===pr&&500>Ii()-qE?Nd(f,0):jE|=b),fs(f,p)}function nN(f,p){p===0&&(f.mode&1?(p=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):p=1);var b=Vr();f=Px(f,p),f!==null&&(yd(f,p,b),fs(f,b))}function WX(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),nN(f,b)}function jX(f,p){var b=0;switch(f.tag){case 13:var C=f.stateNode,L=f.memoizedState;L!==null&&(b=L.retryLane);break;case 19:C=f.stateNode;break;default:throw Error(o(314))}C!==null&&C.delete(p),nN(f,b)}var iN;iN=function(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps||Ft.current)fr=!0;else{if(!(f.lanes&b)&&!(p.flags&128))return fr=!1,kX(f,p,b);fr=!!(f.flags&131072)}else fr=!1,Hn&&p.flags&1048576&&K_(p,Ll,p.index);switch(p.lanes=0,p.tag){case 2:var C=p.type;f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps;var L=$i(p,rn.current);aa(p,b),L=Ff(null,p,C,f,L,b);var B=Bf();return p.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Pn(C)?(B=!0,cr(p)):B=!1,p.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,Af(p),L.updater=_o,p.stateNode=L,L._reactInternals=p,xd(p,C,f,b),p=kE(null,p,C,!0,B,b)):(p.tag=0,Hn&&B&&Bg(p),Ji(null,p,L,b),p=p.child),p;case 16:C=p.elementType;e:{switch(f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps,L=C._init,C=L(C._payload),p.type=C,L=p.tag=XX(C),f=Tr(C,f),L){case 0:p=DE(null,p,C,f,b);break e;case 1:p=AL(null,p,C,f,b);break e;case 11:p=ti(null,p,C,f,b);break e;case 14:p=Qg(null,p,C,Tr(C.type,f),b);break e}throw Error(o(306,C,""))}return p;case 0:return C=p.type,L=p.pendingProps,L=p.elementType===C?L:Tr(C,L),DE(f,p,C,L,b);case 1:return C=p.type,L=p.pendingProps,L=p.elementType===C?L:Tr(C,L),AL(f,p,C,L,b);case 3:e:{if(ML(p),f===null)throw Error(o(387));C=p.pendingProps,B=p.memoizedState,L=B.element,X_(f,p),Gu(p,C,null,b);var re=p.memoizedState;if(C=re.element,j&&B.isDehydrated)if(B={element:C,isDehydrated:!1,cache:re.cache,transitions:re.transitions},p.updateQueue.baseState=B,p.memoizedState=B,p.flags&256){L=Error(o(423)),p=PL(f,p,C,b,L);break e}else if(C!==L){L=Error(o(424)),p=PL(f,p,C,b,L);break e}else for(j&&(zr=ia(p.stateNode.containerInfo),br=p,Hn=!0,$s=null,Yu=!1),b=J_(p,null,C,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Ku(),C===L){p=Bl(f,p,b);break e}Ji(f,p,C,b)}p=p.child}return p;case 5:return Ed(p),f===null&&Ol(p),C=p.type,L=p.pendingProps,B=f!==null?f.memoizedProps:null,re=L.children,xe(C,L)?re=null:B!==null&&xe(C,B)&&(p.flags|=32),CL(f,p),Ji(f,p,re,b),p.child;case 6:return f===null&&Ol(p),null;case 13:return IL(f,p,b);case 4:return Gg(p,p.stateNode.containerInfo),C=p.pendingProps,f===null?p.child=Qu(p,null,C,b):Ji(f,p,C,b),p.child;case 11:return C=p.type,L=p.pendingProps,L=p.elementType===C?L:Tr(C,L),ti(f,p,C,L,b);case 7:return Ji(f,p,p.pendingProps,b),p.child;case 8:return Ji(f,p,p.pendingProps.children,b),p.child;case 12:return Ji(f,p,p.pendingProps.children,b),p.child;case 10:e:{if(C=p.type._context,L=p.pendingProps,B=p.memoizedProps,re=L.value,_d(p,C,re),B!==null)if(Hs(B.value,re)){if(B.children===L.children&&!Ft.current){p=Bl(f,p,b);break e}}else for(B=p.child,B!==null&&(B.return=p);B!==null;){var fe=B.dependencies;if(fe!==null){re=B.child;for(var Oe=fe.firstContext;Oe!==null;){if(Oe.context===C){if(B.tag===1){Oe=la(-1,b&-b),Oe.tag=2;var it=B.updateQueue;if(it!==null){it=it.shared;var Et=it.pending;Et===null?Oe.next=Oe:(Oe.next=Et.next,Et.next=Oe),it.pending=Oe}}B.lanes|=b,Oe=B.alternate,Oe!==null&&(Oe.lanes|=b),Dl(B.return,b,p),fe.lanes|=b;break}Oe=Oe.next}}else if(B.tag===10)re=B.type===p.type?null:B.child;else if(B.tag===18){if(re=B.return,re===null)throw Error(o(341));re.lanes|=b,fe=re.alternate,fe!==null&&(fe.lanes|=b),Dl(re,b,p),re=B.sibling}else re=B.child;if(re!==null)re.return=B;else for(re=B;re!==null;){if(re===p){re=null;break}if(B=re.sibling,B!==null){B.return=re.return,re=B;break}re=re.return}B=re}Ji(f,p,L.children,b),p=p.child}return p;case 9:return L=p.type,C=p.pendingProps.children,aa(p,b),L=Jn(L),C=C(L),p.flags|=1,Ji(f,p,C,b),p.child;case 14:return C=p.type,L=Tr(C,p.pendingProps),L=Tr(C.type,L),Qg(f,p,C,L,b);case 15:return Wa(f,p,p.type,p.pendingProps,b);case 17:return C=p.type,L=p.pendingProps,L=p.elementType===C?L:Tr(C,L),f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Pn(C)?(f=!0,cr(p)):f=!1,aa(p,b),Ug(p,C,L),xd(p,C,L,b),kE(null,p,C,!0,f,b);case 19:return LL(f,p,b);case 22:return EL(f,p,b)}throw Error(o(156,p.tag))};function rN(f,p){return Rg(f,p)}function qX(f,p,b,C){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(f,p,b,C){return new qX(f,p,b,C)}function tC(f){return f=f.prototype,!(!f||!f.isReactComponent)}function XX(f){if(typeof f=="function")return tC(f)?1:0;if(f!=null){if(f=f.$$typeof,f===v)return 11;if(f===S)return 14}return 2}function oc(f,p){var b=f.alternate;return b===null?(b=Eo(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function Rx(f,p,b,C,L,B){var re=2;if(C=f,typeof f=="function")tC(f)&&(re=1);else if(typeof f=="string")re=5;else e:switch(f){case c:return Fd(b.children,L,B,p);case d:re=8,L|=8;break;case h:return f=Eo(12,b,p,L|2),f.elementType=h,f.lanes=B,f;case _:return f=Eo(13,b,p,L),f.elementType=_,f.lanes=B,f;case y:return f=Eo(19,b,p,L),f.elementType=y,f.lanes=B,f;case w:return Dx(b,L,B,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:re=10;break e;case g:re=9;break e;case v:re=11;break e;case S:re=14;break e;case x:re=16,C=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return p=Eo(re,b,p,L),p.elementType=f,p.type=C,p.lanes=B,p}function Fd(f,p,b,C){return f=Eo(7,f,C,p),f.lanes=b,f}function Dx(f,p,b,C){return f=Eo(22,f,C,p),f.elementType=w,f.lanes=b,f.stateNode={},f}function nC(f,p,b){return f=Eo(6,f,null,p),f.lanes=b,f}function iC(f,p,b){return p=Eo(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function YX(f,p,b,C,L){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gd(0),this.expirationTimes=gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gd(0),this.identifierPrefix=C,this.onRecoverableError=L,j&&(this.mutableSourceEagerHydrationData=null)}function sN(f,p,b,C,L,B,re,fe,Oe){return f=new YX(f,p,b,fe,Oe),p===1?(p=1,B===!0&&(p|=8)):p=0,B=Eo(3,null,null,p),f.current=B,B.stateNode=f,B.memoizedState={element:C,isDehydrated:b,cache:null,transitions:null},Af(B),f}function oN(f){if(!f)return bt;f=f._reactInternals;e:{if(H(f)!==f||f.tag!==1)throw Error(o(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Pn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(f.tag===1){var b=f.type;if(Pn(b))return Fs(f,b,p)}return p}function aN(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=W(p),f===null?null:f.stateNode}function lN(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function rC(f,p){lN(f,p),(f=f.alternate)&&lN(f,p)}function KX(f){return f=W(f),f===null?null:f.stateNode}function QX(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var p=Vr();wo(f,134217728,p),rC(f,134217728)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var p=Vr(),b=rc(f);wo(f,b,p),rC(f,b)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var b=sa(p.pendingLanes);b!==0&&(Pg(p,b|1),fs(p,Ii()),!(on&6)&&(jf(),vo()))}break;case 13:var C=Vr();KL(function(){return wo(f,1,C)}),rC(f,1)}},n.batchedUpdates=function(f,p){var b=on;on|=1;try{return f(p)}finally{on=b,on===0&&(jf(),bf&&vo())}},n.createComponentSelector=function(f){return{$$typeof:yx,value:f}},n.createContainer=function(f,p,b,C,L,B,re){return sN(f,p,!1,null,b,C,L,B,re)},n.createHasPseudoClassSelector=function(f){return{$$typeof:vx,value:f}},n.createHydrationContainer=function(f,p,b,C,L,B,re,fe,Oe){return f=sN(b,C,!0,f,L,B,re,fe,Oe),f.context=oN(null),b=f.current,C=Vr(),L=rc(b),B=la(C,L),B.callback=p??null,Ha(b,B),f.current.lanes=L,yd(f,L,C),fs(f,C),f},n.createPortal=function(f,p,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:C==null?null:""+C,children:f,containerInfo:p,implementation:b}},n.createRoleSelector=function(f){return{$$typeof:_x,value:f}},n.createTestNameSelector=function(f){return{$$typeof:xx,value:f}},n.createTextSelector=function(f){return{$$typeof:Sx,value:f}},n.deferredUpdates=function(f){var p=ln,b=bi.transition;try{return bi.transition=null,ln=16,f()}finally{ln=p,bi.transition=b}},n.discreteUpdates=function(f,p,b,C,L){var B=ln,re=bi.transition;try{return bi.transition=null,ln=1,f(p,b,C,L)}finally{ln=B,bi.transition=re,on===0&&jf()}},n.findAllNodes=GE,n.findBoundingRects=function(f,p){if(!q)throw Error(o(363));p=GE(f,p),f=[];for(var b=0;b<p.length;b++)f.push(_e(p[b]));for(p=f.length-1;0<p;p--){b=f[p];for(var C=b.x,L=C+b.width,B=b.y,re=B+b.height,fe=p-1;0<=fe;fe--)if(p!==fe){var Oe=f[fe],it=Oe.x,Et=it+Oe.width,Xt=Oe.y,Ut=Xt+Oe.height;if(C>=it&&B>=Xt&&L<=Et&&re<=Ut){f.splice(p,1);break}else if(C!==it||b.width!==Oe.width||Ut<B||Xt>re){if(!(B!==Xt||b.height!==Oe.height||Et<C||it>L)){it>C&&(Oe.width+=it-C,Oe.x=C),Et<L&&(Oe.width=L-it),f.splice(p,1);break}}else{Xt>B&&(Oe.height+=Xt-B,Oe.y=B),Ut<re&&(Oe.height=re-Xt),f.splice(p,1);break}}}return f},n.findHostInstance=aN,n.findHostInstanceWithNoPortals=function(f){return f=k(f),f=f!==null?Y(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return aN(f)},n.flushControlled=function(f){var p=on;on|=1;var b=bi.transition,C=ln;try{bi.transition=null,ln=1,f()}finally{ln=C,bi.transition=b,on=p,on===0&&(jf(),vo())}},n.flushPassiveEffects=Ud,n.flushSync=KL,n.focusWithin=function(f,p){if(!q)throw Error(o(363));for(f=HE(f),p=qL(f,p),p=Array.from(p),f=0;f<p.length;){var b=p[f++];if(!Ve(b)){if(b.tag===5&&dt(b.stateNode))return!0;for(b=b.child;b!==null;)p.push(b),b=b.sibling}}return!1},n.getCurrentUpdatePriority=function(){return ln},n.getFindAllNodesFailureDescription=function(f,p){if(!q)throw Error(o(363));var b=0,C=[];f=[HE(f),0];for(var L=0;L<f.length;){var B=f[L++],re=f[L++],fe=p[re];if((B.tag!==5||!Ve(B))&&(VE(B,fe)&&(C.push($E(fe)),re++,re>b&&(b=re)),re<p.length))for(B=B.child;B!==null;)f.push(B,re),B=B.sibling}if(b<p.length){for(f=[];b<p.length;b++)f.push($E(p[b]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return Q(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:KX,findFiberByHostInstance:f.findFiberByHostInstance||QX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{Tf=p.inject(f),zs=p}catch{}f=!!p.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,p,b,C){if(!q)throw Error(o(363));f=GE(f,p);var L=qe(f,b,C).disconnect;return{disconnect:function(){L()}}},n.registerMutableSourceForHydration=function(f,p){var b=p._getVersion;b=b(p._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[p,b]:f.mutableSourceEagerHydrationData.push(p,b)},n.runWithPriority=function(f,p){var b=ln;try{return ln=f,p()}finally{ln=b}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,p,b,C){var L=p.current,B=Vr(),re=rc(L);return b=oN(b),p.context===null?p.context=b:p.pendingContext=b,p=la(B,re),p.payload={element:f},C=C===void 0?null:C,C!==null&&(p.callback=C),Ha(L,p),f=wo(L,re,B),f!==null&&Mf(f,L,re),re},n};cX.exports=lMe;var uMe=cX.exports;const cMe=ka(uMe);var dX={exports:{}},hX={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,ee){var te=z.length;z.push(ee);e:for(;0<te;){var ce=te-1>>>1,Te=z[ce];if(0<r(Te,ee))z[ce]=ee,z[te]=Te,te=ce;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ee=z[0],te=z.pop();if(te!==ee){z[0]=te;e:for(var ce=0,Te=z.length,Ue=Te>>>1;ce<Ue;){var he=2*(ce+1)-1,xe=z[he],Fe=he+1,He=z[Fe];if(0>r(xe,te))Fe<Te&&0>r(He,xe)?(z[ce]=He,z[Fe]=te,ce=Fe):(z[ce]=xe,z[he]=te,ce=he);else if(Fe<Te&&0>r(He,te))z[ce]=He,z[Fe]=te,ce=Fe;else break e}}return ee}function r(z,ee){var te=z.sortIndex-ee.sortIndex;return te!==0?te:z.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var ee=n(u);ee!==null;){if(ee.callback===null)i(u);else if(ee.startTime<=z)i(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function w(z){if(v=!1,x(z),!g)if(n(l)!==null)g=!0,Q(P);else{var ee=n(u);ee!==null&&oe(w,ee.startTime-z)}}function P(z,ee){g=!1,v&&(v=!1,y(O),O=-1),m=!0;var te=h;try{for(x(ee),d=n(l);d!==null&&(!(d.expirationTime>ee)||z&&!k());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var Te=ce(d.expirationTime<=ee);ee=t.unstable_now(),typeof Te=="function"?d.callback=Te:d===n(l)&&i(l),x(ee)}else i(l);d=n(l)}if(d!==null)var Ue=!0;else{var he=n(u);he!==null&&oe(w,he.startTime-ee),Ue=!1}return Ue}finally{d=null,h=te,m=!1}}var A=!1,D=null,O=-1,H=5,E=-1;function k(){return!(t.unstable_now()-E<H)}function W(){if(D!==null){var z=t.unstable_now();E=z;var ee=!0;try{ee=D(!0,z)}finally{ee?G():(A=!1,D=null)}}else A=!1}var G;if(typeof S=="function")G=function(){S(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ie=Y.port2;Y.port1.onmessage=W,G=function(){ie.postMessage(null)}}else G=function(){_(W,0)};function Q(z){D=z,A||(A=!0,G())}function oe(z,ee){O=_(function(){z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var te=h;h=ee;try{return z()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=h;h=z;try{return ee()}finally{h=te}},t.unstable_scheduleCallback=function(z,ee,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,z){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=te+Te,z={id:c++,callback:ee,priorityLevel:z,startTime:te,expirationTime:Te,sortIndex:-1},te>ce?(z.sortIndex=te,e(u,z),n(l)===null&&z===n(u)&&(v?(y(O),O=-1):v=!0,oe(w,te-ce))):(z.sortIndex=Te,e(l,z),g||m||(g=!0,Q(P))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var ee=h;return function(){var te=h;h=ee;try{return z.apply(this,arguments)}finally{h=te}}}})(hX);dX.exports=hX;var s8=dX.exports;const TL={},dMe=t=>void Object.assign(TL,t);function hMe(t,e){function n(c,{args:d=[],attach:h,...m},g){let v=`${c[0].toUpperCase()}${c.slice(1)}`,_;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=m.object;_=Dp(y,{type:c,root:g,attach:h,primitive:!0})}else{const y=TL[v];if(!y)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=Dp(new y(...d),{type:c,root:g,attach:h,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof Zt?_.__r3f.attach="geometry":_ instanceof Sr&&(_.__r3f.attach="material")),v!=="inject"&&bM(_,m),_}function i(c,d){let h=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?TM(c,d,d.__r3f.attach):d.isObject3D&&c.isObject3D&&(c.add(d),h=!0),h||(g=c.__r3f)==null||g.objects.push(d),d.__r3f||Dp(d,{}),d.__r3f.parent=c,rR(d),kp(d)}}function r(c,d,h){let m=!1;if(d){var g,v;if((g=d.__r3f)!=null&&g.attach)TM(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){d.parent=c,d.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:d});const _=c.children.filter(S=>S!==d),y=_.indexOf(h);c.children=[..._.slice(0,y),d,..._.slice(y)],m=!0}m||(v=c.__r3f)==null||v.objects.push(d),d.__r3f||Dp(d,{}),d.__r3f.parent=c,rR(d),kp(d)}}function s(c,d,h=!1){c&&[...c].forEach(m=>o(d,m,h))}function o(c,d,h){if(d){var m,g,v;if(d.__r3f&&(d.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(w=>w!==d)),(g=d.__r3f)!=null&&g.attach)c8(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){var _;c.remove(d),(_=d.__r3f)!=null&&_.root&&SMe($S(d),d)}const S=(v=d.__r3f)==null?void 0:v.primitive,x=!S&&(h===void 0?d.dispose!==null:h);if(!S){var y;s((y=d.__r3f)==null?void 0:y.objects,d,x),s(d.children,d,x)}if(delete d.__r3f,x&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?s8.unstable_scheduleCallback(s8.unstable_IdlePriority,w):w()}kp(c)}}function a(c,d,h,m){var g;const v=(g=c.__r3f)==null?void 0:g.parent;if(!v)return;const _=n(d,h,c.__r3f.root);if(c.children){for(const y of c.children)y.__r3f&&i(_,y);c.children=c.children.filter(y=>!y.__r3f)}c.__r3f.objects.forEach(y=>i(_,y)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(v,c),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(v,_),_.raycast&&_.__r3f.eventCount&&$S(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(y=>{y!==null&&(y.stateNode=_,y.ref&&(typeof y.ref=="function"?y.ref(_):y.ref.current=_))})}const l=()=>{};return{reconciler:cMe({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,d)=>{if(!d)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,i(h,d))},removeChildFromContainer:(c,d)=>{d&&o(c.getState().scene,d)},insertInContainerBefore:(c,d,h)=>{if(!d||!h)return;const m=c.getState().scene;m.__r3f&&r(m,d,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var d;return!!((d=c==null?void 0:c.__r3f)!=null?d:{}).handlers},prepareUpdate(c,d,h,m){var g;if(((g=c==null?void 0:c.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==c)return[!0];{const{args:_=[],children:y,...S}=m,{args:x=[],children:w,...P}=h;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((D,O)=>D!==x[O]))return[!0];const A=_X(c,S,P,!0);return A.changes.length?[!1,A]:null}},commitUpdate(c,[d,h],m,g,v,_){d?a(c,m,v,_):bM(c,h)},commitMount(c,d,h,m){var g;const v=(g=c.__r3f)!=null?g:{};c.raycast&&v.handlers&&v.eventCount&&$S(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Dp(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var d;const{attach:h,parent:m}=(d=c.__r3f)!=null?d:{};h&&m&&c8(m,c,h),c.isObject3D&&(c.visible=!1),kp(c)},unhideInstance(c,d){var h;const{attach:m,parent:g}=(h=c.__r3f)!=null?h:{};m&&g&&TM(g,c,m),(c.isObject3D&&d.visible==null||d.visible)&&(c.visible=!0),kp(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():nm.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&$n.fun(performance.now)?performance.now:$n.fun(Date.now)?Date.now:()=>0,scheduleTimeout:$n.fun(setTimeout)?setTimeout:void 0,cancelTimeout:$n.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bM}}var o8,a8;const SM=t=>"colorSpace"in t||"outputColorSpace"in t,fX=()=>{var t;return(t=TL.ColorManagement)!=null?t:null},pX=t=>t&&t.isOrthographicCamera,fMe=t=>t&&t.hasOwnProperty("current"),V_=typeof window<"u"&&((o8=window.document)!=null&&o8.createElement||((a8=window.navigator)==null?void 0:a8.product)==="ReactNative")?U.useLayoutEffect:U.useEffect;function mX(t){const e=U.useRef(t);return V_(()=>void(e.current=t),[t]),e}function pMe({set:t}){return V_(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class gX extends U.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}gX.getDerivedStateFromError=()=>({error:!0});const yX="__default",l8=new Map,mMe=t=>t&&!!t.memoized&&!!t.changes;function vX(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const H0=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function $S(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const $n={obj:t=>t===Object(t)&&!$n.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if($n.str(t)||$n.num(t)||$n.boo(t))return t===e;const s=$n.obj(t);if(s&&i==="reference")return t===e;const o=$n.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!$n.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if($n.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function gMe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function yMe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Dp(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function iR(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const u8=/-\d+$/;function TM(t,e,n){if($n.str(n)){if(u8.test(n)){const s=n.replace(u8,""),{target:o,key:a}=iR(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=iR(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function c8(t,e,n){var i,r;if($n.str(n)){const{target:s,key:o}=iR(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function _X(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const c=t.__r3f,d=Object.entries(r),h=[];if(u){const g=Object.keys(l);for(let v=0;v<g.length;v++)r.hasOwnProperty(g[v])||d.unshift([g[v],yX+"remove"])}d.forEach(([g,v])=>{var _;if((_=t.__r3f)!=null&&_.primitive&&g==="object"||$n.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return h.push([g,v,!0,[]]);let y=[];g.includes("-")&&(y=g.split("-")),h.push([g,v,!1,y]);for(const S in r){const x=r[S];S.startsWith(`${g}-`)&&h.push([S,x,!1,S.split("-")])}});const m={...r};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(m.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(m.attach=c.memoizedProps.attach),{memoized:m,changes:h}}const vMe=typeof process<"u"&&!1;function bM(t,e){var n;const i=t.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=mMe(e)?e:_X(t,e),l=i==null?void 0:i.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let c=0;c<a.length;c++){let[d,h,m,g]=a[c];if(SM(t)){const S="srgb",x="srgb-linear";d==="encoding"?(d="colorSpace",h=h===3001?S:x):d==="outputEncoding"&&(d="outputColorSpace",h=h===3001?S:x)}let v=t,_=v[d];if(g.length&&(_=g.reduce((y,S)=>y[S],t),!(_&&_.set))){const[y,...S]=g.reverse();v=S.reverse().reduce((x,w)=>x[w],t),d=y}if(h===yX+"remove")if(v.constructor){let y=l8.get(v.constructor);y||(y=new v.constructor,l8.set(v.constructor,y)),h=y[d]}else h=0;if(m&&i)h?i.handlers[d]=h:delete i.handlers[d],i.eventCount=Object.keys(i.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof Uh)){if(Array.isArray(h))_.fromArray?_.fromArray(h):_.set(...h);else if(_.copy&&h&&h.constructor&&(vMe?_.constructor.name===h.constructor.name:_.constructor===h.constructor))_.copy(h);else if(h!==void 0){const y=_ instanceof xt;!y&&_.setScalar?_.setScalar(h):_ instanceof Uh&&h instanceof Uh?_.mask=h.mask:_.set(h),!fX()&&s&&!s.linear&&y&&_.convertSRGBToLinear()}}else if(v[d]=h,v[d]instanceof hi&&v[d].format===Dr&&v[d].type===Ia&&s){const y=v[d];SM(y)&&SM(s.gl)?y.colorSpace=s.gl.outputColorSpace:y.encoding=s.gl.outputEncoding}kp(t)}if(i&&i.parent&&t.raycast&&l!==i.eventCount){const c=$S(t).getState().internal,d=c.interaction.indexOf(t);d>-1&&c.interaction.splice(d,1),i.eventCount&&c.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&rR(t),t}function kp(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function rR(t){t.onUpdate==null||t.onUpdate(t)}function _Me(t,e){t.manual||(pX(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function hS(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function xMe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return nm.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nm.ContinuousEventPriority;default:return nm.DefaultEventPriority}}function xX(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function SMe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{xX(n.capturedMap,e,i,r)})}function TMe(t){function e(l){const{internal:u}=t.getState(),c=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+d*d))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+c]}))}function i(l,u){const c=t.getState(),d=new Set,h=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let y=0;y<m.length;y++){const S=H0(m[y]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function g(y){const S=H0(y);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var x;S.events.compute==null||S.events.compute(l,S,(x=S.previousRoot)==null?void 0:x.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(y,!0):[]}let v=m.flatMap(g).sort((y,S)=>{const x=H0(y.object),w=H0(S.object);return!x||!w?y.distance-S.distance:w.events.priority-x.events.priority||y.distance-S.distance}).filter(y=>{const S=hS(y);return d.has(S)?!1:(d.add(S),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const y of v){let S=y.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&h.push({...y,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let y of c.internal.capturedMap.get(l.pointerId).values())d.has(hS(y.intersection))||h.push(y.intersection);return h}function r(l,u,c,d){const h=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=H0(g.object)||h,{raycaster:_,pointer:y,camera:S,internal:x}=v,w=new J(y.x,y.y,0).unproject(S),P=E=>{var k,W;return(k=(W=x.capturedMap.get(E))==null?void 0:W.has(g.eventObject))!=null?k:!1},A=E=>{const k={intersection:g,target:u.target};x.capturedMap.has(E)?x.capturedMap.get(E).set(g.eventObject,k):x.capturedMap.set(E,new Map([[g.eventObject,k]])),u.target.setPointerCapture(E)},D=E=>{const k=x.capturedMap.get(E);k&&xX(x.capturedMap,g.eventObject,k,E)};let O={};for(let E in u){let k=u[E];typeof k!="function"&&(O[E]=k)}let H={...g,...O,pointer:y,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:w,ray:_.ray,camera:S,stopPropagation(){const E="pointerId"in u&&x.capturedMap.get(u.pointerId);if((!E||E.has(g.eventObject))&&(H.stopped=m.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(k=>k.eventObject===g.eventObject))){const k=l.slice(0,l.indexOf(g));s([...k,g])}},target:{hasPointerCapture:P,setPointerCapture:A,releasePointerCapture:D},currentTarget:{hasPointerCapture:P,setPointerCapture:A,releasePointerCapture:D},nativeEvent:u};if(d(H),m.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const c of u.hovered.values())if(!l.length||!l.find(d=>d.object===c.object&&d.index===c.index&&d.instanceId===c.instanceId)){const h=c.eventObject.__r3f,m=h==null?void 0:h.handlers;if(u.hovered.delete(hS(c)),h!=null&&h.eventCount){const g={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,u){for(let c=0;c<u.length;c++){const d=u[c].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=t.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:d,internal:h}=t.getState();h.lastEvent.current=c;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(c,m?n:void 0),y=g?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=_.map(x=>x.eventObject)),g&&!_.length&&y<=2&&(o(c,h.interaction),d&&d(c)),m&&s(_);function S(x){const w=x.eventObject,P=w.__r3f,A=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const D=hS(x),O=h.hovered.get(D);O?O.stopped&&x.stopPropagation():(h.hovered.set(D,x),A.onPointerOver==null||A.onPointerOver(x),A.onPointerEnter==null||A.onPointerEnter(x))}A.onPointerMove==null||A.onPointerMove(x)}else{const D=A[l];D?(!g||h.initialHits.includes(w))&&(o(c,h.interaction.filter(O=>!h.initialHits.includes(O))),D(x)):g&&h.initialHits.includes(w)&&o(c,h.interaction.filter(O=>!h.initialHits.includes(O)))}}r(_,c,y,S)}}return{handlePointer:a}}const SX=t=>!!(t!=null&&t.render),TX=U.createContext(null),bMe=(t,e)=>{const n=tMe((a,l)=>{const u=new J,c=new J,d=new J;function h(y=l().camera,S=c,x=l().size){const{width:w,height:P,top:A,left:D}=x,O=w/P;S instanceof J?d.copy(S):d.set(...S);const H=y.getWorldPosition(u).distanceTo(d);if(pX(y))return{width:w/y.zoom,height:P/y.zoom,top:A,left:D,factor:1,distance:H,aspect:O};{const E=y.fov*Math.PI/180,k=2*Math.tan(E/2)*H,W=k*(w/P);return{width:W,height:k,top:A,left:D,factor:w/W,distance:H,aspect:O}}}let m;const g=y=>a(S=>({performance:{...S.performance,current:y}})),v=new je;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>t(l(),y),advance:(y,S)=>e(y,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yL,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();m&&clearTimeout(m),y.performance.current!==y.performance.min&&g(y.performance.min),m=setTimeout(()=>g(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:y=>a(S=>({...S,events:{...S.events,...y}})),setSize:(y,S,x,w,P)=>{const A=l().camera,D={width:y,height:S,top:w||0,left:P||0,updateStyle:x};a(O=>({size:D,viewport:{...O.viewport,...h(A,c,D)}}))},setDpr:y=>a(S=>{const x=vX(y);return{viewport:{...S.viewport,dpr:x,initialDpr:S.viewport.initialDpr||x}}}),setFrameloop:(y="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,y!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:U.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,S,x)=>{const w=l().internal;return w.priority=w.priority+(S>0?1:0),w.subscribers.push({ref:y,priority:S,store:x}),w.subscribers=w.subscribers.sort((P,A)=>P.priority-A.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(S>0?1:0),P.subscribers=P.subscribers.filter(A=>A.ref!==y))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:d}=n.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var h;r=l,s=u.dpr,_Me(a,l),c.setPixelRatio(u.dpr);const m=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let fS,wMe=new Set,EMe=new Set,CMe=new Set;function wM(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function V0(t,e){switch(t){case"before":return wM(wMe,e);case"after":return wM(EMe,e);case"tail":return wM(CMe,e)}}let EM,CM;function AM(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),EM=e.internal.subscribers,fS=0;fS<EM.length;fS++)CM=EM[fS],CM.ref.current(CM.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function AMe(t){let e=!1,n=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,V0("before",u),n=!0;for(const d of t.values()){var c;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(i+=AM(u,s))}if(n=!1,V0("after",u),i===0)return V0("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,c=1){var d;if(!u)return t.forEach(h=>a(h.store.getState(),c));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):n?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,d,h){if(c&&V0("before",u),d)AM(u,d,h);else for(const m of t.values())AM(u,m.store.getState());c&&V0("after",u)}return{loop:o,invalidate:a,advance:l}}function bX(){const t=U.useContext(TX);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Xl(t=n=>n,e){return bX()(t,e)}function wX(t,e=0){const n=bX(),i=n.getState().internal.subscribe,r=mX(t);return V_(()=>i(r,e,n),[e,i,n]),null}const d8=new WeakMap;function EX(t,e){return function(n,...i){let r=d8.get(n);return r||(r=new n,d8.set(n,r)),t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,gMe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function bE(t,e,n,i){const r=Array.isArray(e)?e:[e],s=iMe(EX(n,i),[t,...r],{equal:$n.equ});return Array.isArray(e)?s:s[0]}bE.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return rMe(EX(n),[t,...i])};bE.clear=function(t,e){const n=Array.isArray(e)?e:[e];return sMe([t,...n])};const sg=new Map,{invalidate:h8,advance:f8}=AMe(sg),{reconciler:i2,applyProps:Pp}=hMe(sg,xMe),Ip={objects:"shallow",strict:!1},MMe=(t,e)=>{const n=typeof t=="function"?t(e):t;return SX(n)?n:new hq({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function PMe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=n}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:i,height:r,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function IMe(t){const e=sg.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||bMe(h8,f8),o=n||i2.createContainer(s,nm.ConcurrentRoot,null,!1,null,"",r,null);e||sg.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:d,size:h,scene:m,events:g,onCreated:v,shadows:_=!1,linear:y=!1,flat:S=!1,legacy:x=!1,orthographic:w=!1,frameloop:P="always",dpr:A=[1,2],performance:D,raycaster:O,camera:H,onPointerMissed:E}=c,k=s.getState(),W=k.gl;k.gl||k.set({gl:W=MMe(d,t)});let G=k.raycaster;G||k.set({raycaster:G=new sX});const{params:Y,...ie}=O||{};if($n.equ(ie,G,Ip)||Pp(G,{...ie}),$n.equ(Y,G.params,Ip)||Pp(G,{params:{...G.params,...Y}}),!k.camera||k.camera===u&&!$n.equ(u,H,Ip)){u=H;const te=H instanceof L_,ce=te?H:w?new ba(0,0,0,0,.1,1e3):new oi(75,0,.1,1e3);te||(ce.position.z=5,H&&(Pp(ce,H),("aspect"in H||"left"in H||"right"in H||"bottom"in H||"top"in H)&&(ce.manual=!0,ce.updateProjectionMatrix())),!k.camera&&!(H!=null&&H.rotation)&&ce.lookAt(0,0,0)),k.set({camera:ce}),G.camera=ce}if(!k.scene){let te;m instanceof Jb?te=m:(te=new Jb,m&&Pp(te,m)),k.set({scene:Dp(te)})}if(!k.xr){var Q;const te=(Ue,he)=>{const xe=s.getState();xe.frameloop!=="never"&&f8(Ue,!0,xe,he)},ce=()=>{const Ue=s.getState();Ue.gl.xr.enabled=Ue.gl.xr.isPresenting,Ue.gl.xr.setAnimationLoop(Ue.gl.xr.isPresenting?te:null),Ue.gl.xr.isPresenting||h8(Ue)},Te={connect(){const Ue=s.getState().gl;Ue.xr.addEventListener("sessionstart",ce),Ue.xr.addEventListener("sessionend",ce)},disconnect(){const Ue=s.getState().gl;Ue.xr.removeEventListener("sessionstart",ce),Ue.xr.removeEventListener("sessionend",ce)}};typeof((Q=W.xr)==null?void 0:Q.addEventListener)=="function"&&Te.connect(),k.set({xr:Te})}if(W.shadowMap){const te=W.shadowMap.enabled,ce=W.shadowMap.type;if(W.shadowMap.enabled=!!_,$n.boo(_))W.shadowMap.type=Py;else if($n.str(_)){var oe;const Te={basic:uj,percentage:Ww,soft:Py,variance:ma};W.shadowMap.type=(oe=Te[_])!=null?oe:Py}else $n.obj(_)&&Object.assign(W.shadowMap,_);(te!==W.shadowMap.enabled||ce!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}const z=fX();z&&("enabled"in z?z.enabled=!x:"legacyMode"in z&&(z.legacyMode=x)),l||Pp(W,{outputEncoding:y?3e3:3001,toneMapping:S?yl:L3}),k.legacy!==x&&k.set(()=>({legacy:x})),k.linear!==y&&k.set(()=>({linear:y})),k.flat!==S&&k.set(()=>({flat:S})),d&&!$n.fun(d)&&!SX(d)&&!$n.equ(d,W,Ip)&&Pp(W,d),g&&!k.events.handlers&&k.set({events:g(s)});const ee=PMe(t,h);return $n.equ(ee,k.size,Ip)||k.setSize(ee.width,ee.height,ee.updateStyle,ee.top,ee.left),A&&k.viewport.dpr!==vX(A)&&k.setDpr(A),k.frameloop!==P&&k.setFrameloop(P),k.onPointerMissed||k.set({onPointerMissed:E}),D&&!$n.equ(D,k.performance,Ip)&&k.set(te=>({performance:{...te.performance,...D}})),a=v,l=!0,this},render(c){return l||this.configure(),i2.updateContainer($(RMe,{store:s,children:c,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){CX(t)}}}function RMe({store:t,children:e,onCreated:n,rootElement:i}){return V_(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),$(TX.Provider,{value:t,children:e})}function CX(t,e){const n=sg.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),i2.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),yMe(r),sg.delete(t),e&&e(t)}catch{}},500)})}}i2.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:U.version});const MM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function DMe(t){const{handlePointer:e}=TMe(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(MM).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=MM[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=MM[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function sR(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}sR.debounce=sR;var kMe=sR;const p8=ka(kMe);var LMe=Object.defineProperty,NMe=Object.defineProperties,OMe=Object.getOwnPropertyDescriptors,m8=Object.getOwnPropertySymbols,UMe=Object.prototype.hasOwnProperty,FMe=Object.prototype.propertyIsEnumerable,g8=(t,e,n)=>e in t?LMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y8=(t,e)=>{for(var n in e||(e={}))UMe.call(e,n)&&g8(t,n,e[n]);if(m8)for(var n of m8(e))FMe.call(e,n)&&g8(t,n,e[n]);return t},BMe=(t,e)=>NMe(t,OMe(e)),v8,_8;typeof window<"u"&&((v8=window.document)!=null&&v8.createElement||((_8=window.navigator)==null?void 0:_8.product)==="ReactNative")?U.useLayoutEffect:U.useEffect;function AX(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=AX(i,e,n);if(r)return r;i=e?null:i.sibling}}function MX(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const x8=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=x8;return}return x8.apply(this,arguments)};const bL=MX(U.createContext(null));class PX extends U.Component{render(){return U.createElement(bL.Provider,{value:this._reactInternals},this.props.children)}}function zMe(){const t=U.useContext(bL);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=U.useId();return U.useMemo(()=>{for(const i of[t,t==null?void 0:t.alternate]){if(!i)continue;const r=AX(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function HMe(){const t=zMe(),[e]=U.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const r=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;r&&r!==bL&&!e.has(r)&&e.set(r,U.useContext(MX(r)))}n=n.return}return e}function VMe(){const t=HMe();return U.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>U.createElement(e,null,U.createElement(n.Provider,BMe(y8({},i),{value:t.get(n)}))),e=>U.createElement(PX,y8({},e))),[t])}function $Me({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||typeof window<"u"&&window.ResizeObserver,[s,o]=U.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=U.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,c=U.useRef(!1);U.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[d,h,m]=U.useMemo(()=>{const y=()=>{if(!a.current.element)return;const{left:S,top:x,width:w,height:P,bottom:A,right:D,x:O,y:H}=a.current.element.getBoundingClientRect(),E={left:S,top:x,width:w,height:P,bottom:A,right:D,x:O,y:H};a.current.element instanceof HTMLElement&&i&&(E.height=a.current.element.offsetHeight,E.width=a.current.element.offsetWidth),Object.freeze(E),c.current&&!qMe(a.current.lastBounds,E)&&o(a.current.lastBounds=E)};return[y,u?p8(y,u):y,l?p8(y,l):y]},[o,i,l,u]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function v(){var y;a.current.element&&(a.current.resizeObserver=new r(h),(y=a.current.resizeObserver)==null||y.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(S=>S.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=y=>{!y||y===a.current.element||(g(),a.current.element=y,a.current.scrollContainers=IX(y),v())};return WMe(m,!!e),GMe(h),U.useEffect(()=>{g(),v()},[e,m,h]),U.useEffect(()=>g,[]),[_,s,d]}function GMe(t){U.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function WMe(t,e){U.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function IX(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...IX(t.parentElement)]}const jMe=["x","y","top","bottom","left","right","width","height"],qMe=(t,e)=>jMe.every(n=>t[n]===e[n]),XMe=U.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=DMe,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:d,legacy:h,orthographic:m,frameloop:g,dpr:v,performance:_,raycaster:y,camera:S,scene:x,onPointerMissed:w,onCreated:P,...A},D){U.useMemo(()=>dMe(ZAe),[]);const O=VMe(),[H,E]=$Me({scroll:!0,debounce:{scroll:50,resize:0},...i}),k=U.useRef(null),W=U.useRef(null);U.useImperativeHandle(D,()=>k.current);const G=mX(w),[Y,ie]=U.useState(!1),[Q,oe]=U.useState(!1);if(Y)throw Y;if(Q)throw Q;const z=U.useRef(null);return V_(()=>{const te=k.current;E.width>0&&E.height>0&&te&&(z.current||(z.current=IMe(te)),z.current.configure({gl:s,events:o,shadows:u,linear:c,flat:d,legacy:h,orthographic:m,frameloop:g,dpr:v,performance:_,raycaster:y,camera:S,scene:x,size:E,onPointerMissed:(...ce)=>G.current==null?void 0:G.current(...ce),onCreated:ce=>{ce.events.connect==null||ce.events.connect(a?fMe(a)?a.current:a:W.current),l&&ce.setEvents({compute:(Te,Ue)=>{const he=Te[l+"X"],xe=Te[l+"Y"];Ue.pointer.set(he/Ue.size.width*2-1,-(xe/Ue.size.height)*2+1),Ue.raycaster.setFromCamera(Ue.pointer,Ue.camera)}}),P==null||P(ce)}}),z.current.render($(O,{children:$(gX,{set:oe,children:$(U.Suspense,{fallback:$(pMe,{set:ie}),children:e})})})))}),U.useEffect(()=>{const te=k.current;if(te)return()=>CX(te)},[]),$("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:a?"none":"auto",...r},...A,children:$("div",{ref:H,style:{width:"100%",height:"100%"},children:$("canvas",{ref:k,style:{display:"block"},children:n})})})}),YMe=U.forwardRef(function(e,n){return $(PX,{children:$(XMe,{...e,ref:n})})}),$_=new J,wL=new J,KMe=new J,S8=new je;function QMe(t,e,n){const i=$_.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function ZMe(t,e){const n=$_.setFromMatrixPosition(t.matrixWorld),i=wL.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(KMe);return r.angleTo(s)>Math.PI/2}function JMe(t,e,n,i){const r=$_.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),S8.set(s.x,s.y),n.setFromCamera(S8,e);const o=n.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(n.ray.origin)<a}return!0}function ePe(t,e){if(e instanceof ba)return e.zoom;if(e instanceof oi){const n=$_.setFromMatrixPosition(t.matrixWorld),i=wL.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function tPe(t,e,n){if(e instanceof oi||e instanceof ba){const i=$_.setFromMatrixPosition(t.matrixWorld),r=wL.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const oR=t=>Math.abs(t)<1e-10?0:t;function RX(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=oR(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const nPe=(t=>e=>RX(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),iPe=(t=>(e,n)=>RX(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function rPe(t){return t&&typeof t=="object"&&"current"in t}const sPe=U.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:d,onOcclude:h,castShadow:m,receiveShadow:g,material:v,geometry:_,zIndexRange:y=[16777271,0],calculatePosition:S=QMe,as:x="div",wrapperClass:w,pointerEvents:P="auto",...A},D)=>{const{gl:O,camera:H,scene:E,size:k,raycaster:W,events:G,viewport:Y}=Xl(),[ie]=U.useState(()=>document.createElement(x)),Q=U.useRef(),oe=U.useRef(null),z=U.useRef(0),ee=U.useRef([0,0]),te=U.useRef(null),ce=U.useRef(null),Te=(a==null?void 0:a.current)||G.connected||O.domElement.parentNode,Ue=U.useRef(null),he=U.useRef(!1),xe=U.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&rPe(d[0]),[d]);U.useLayoutEffect(()=>{const Ge=O.domElement;d&&d==="blending"?(Ge.style.zIndex=`${Math.floor(y[0]/2)}`,Ge.style.position="absolute",Ge.style.pointerEvents="none"):(Ge.style.zIndex=null,Ge.style.position=null,Ge.style.pointerEvents=null)},[d]),U.useLayoutEffect(()=>{if(oe.current){const Ge=Q.current=Uz(ie);if(E.updateMatrixWorld(),c)ie.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Le=S(oe.current,H,k);ie.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Le[0]}px,${Le[1]}px,0);transform-origin:0 0;`}return Te&&(r?Te.prepend(ie):Te.appendChild(ie)),()=>{Te&&Te.removeChild(ie),Ge.unmount()}}},[Te,c]),U.useLayoutEffect(()=>{w&&(ie.className=w)},[w]);const Fe=U.useMemo(()=>c?{position:"absolute",top:0,left:0,width:k.width,height:k.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-k.height/2,left:-k.width/2,width:k.width,height:k.height},...n},[n,s,o,k,c]),He=U.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);U.useLayoutEffect(()=>{if(he.current=!1,c){var Ge;(Ge=Q.current)==null||Ge.render(U.createElement("div",{ref:te,style:Fe},U.createElement("div",{ref:ce,style:He},U.createElement("div",{ref:D,className:i,style:n,children:t}))))}else{var Le;(Le=Q.current)==null||Le.render(U.createElement("div",{ref:D,style:Fe,className:i,children:t}))}});const ot=U.useRef(!0);wX(Ge=>{if(oe.current){H.updateMatrixWorld(),oe.current.updateWorldMatrix(!0,!1);const Le=c?ee.current:S(oe.current,H,k);if(c||Math.abs(z.current-H.zoom)>e||Math.abs(ee.current[0]-Le[0])>e||Math.abs(ee.current[1]-Le[1])>e){const le=ZMe(oe.current,H);let j=!1;xe&&(Array.isArray(d)?j=d.map(We=>We.current):d!=="blending"&&(j=[E]));const Me=ot.current;if(j){const We=JMe(oe.current,H,W,j);ot.current=We&&!le}else ot.current=!le;Me!==ot.current&&(h?h(!ot.current):ie.style.display=ot.current?"block":"none");const Re=Math.floor(y[0]/2),Be=d?xe?[y[0],Re]:[Re-1,0]:y;if(ie.style.zIndex=`${tPe(oe.current,H,Be)}`,c){const[We,rt]=[k.width/2,k.height/2],st=H.projectionMatrix.elements[5]*rt,{isOrthographicCamera:q,top:V,left:_e,bottom:De,right:Ve}=H,Ne=nPe(H.matrixWorldInverse),dt=q?`scale(${st})translate(${oR(-(Ve+_e)/2)}px,${oR((V+De)/2)}px)`:`translateZ(${st}px)`;let qe=oe.current.matrixWorld;u&&(qe=H.matrixWorldInverse.clone().transpose().copyPosition(qe).scale(oe.current.scale),qe.elements[3]=qe.elements[7]=qe.elements[11]=0,qe.elements[15]=1),ie.style.width=k.width+"px",ie.style.height=k.height+"px",ie.style.perspective=q?"":`${st}px`,te.current&&ce.current&&(te.current.style.transform=`${dt}${Ne}translate(${We}px,${rt}px)`,ce.current.style.transform=iPe(qe,1/((l||10)/400)))}else{const We=l===void 0?1:ePe(oe.current,H)*l;ie.style.transform=`translate3d(${Le[0]}px,${Le[1]}px,0) scale(${We})`}ee.current=Le,z.current=H.zoom}}if(!xe&&Ue.current&&!he.current)if(c){if(te.current){const Le=te.current.children[0];if(Le!=null&&Le.clientWidth&&Le!=null&&Le.clientHeight){const{isOrthographicCamera:le}=H;if(le||_)A.scale&&(Array.isArray(A.scale)?A.scale instanceof J?Ue.current.scale.copy(A.scale.clone().divideScalar(1)):Ue.current.scale.set(1/A.scale[0],1/A.scale[1],1/A.scale[2]):Ue.current.scale.setScalar(1/A.scale));else{const j=(l||10)/400,Me=Le.clientWidth*j,Re=Le.clientHeight*j;Ue.current.scale.set(Me,Re,1)}he.current=!0}}}else{const Le=ie.children[0];if(Le!=null&&Le.clientWidth&&Le!=null&&Le.clientHeight){const le=1/Y.factor,j=Le.clientWidth*le,Me=Le.clientHeight*le;Ue.current.scale.set(j,Me,1),he.current=!0}Ue.current.lookAt(Ge.camera.position)}});const Ae=U.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return U.createElement("group",ve({},A,{ref:oe}),d&&!xe&&U.createElement("mesh",{castShadow:m,receiveShadow:g,ref:Ue},_||U.createElement("planeGeometry",null),v||U.createElement("shaderMaterial",{side:to,vertexShader:Ae.vertexShader,fragmentShader:Ae.fragmentShader})))});var oPe=Object.defineProperty,aPe=(t,e,n)=>e in t?oPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$t=(t,e,n)=>(aPe(t,typeof e!="symbol"?e+"":e,n),n);const pS=new df,T8=new Zl,lPe=Math.cos(70*(Math.PI/180)),b8=(t,e)=>(t%e+e)%e;let uPe=class extends Ua{constructor(e,n){super(),$t(this,"object"),$t(this,"domElement"),$t(this,"enabled",!0),$t(this,"target",new J),$t(this,"minDistance",0),$t(this,"maxDistance",1/0),$t(this,"minZoom",0),$t(this,"maxZoom",1/0),$t(this,"minPolarAngle",0),$t(this,"maxPolarAngle",Math.PI),$t(this,"minAzimuthAngle",-1/0),$t(this,"maxAzimuthAngle",1/0),$t(this,"enableDamping",!1),$t(this,"dampingFactor",.05),$t(this,"enableZoom",!0),$t(this,"zoomSpeed",1),$t(this,"enableRotate",!0),$t(this,"rotateSpeed",1),$t(this,"enablePan",!0),$t(this,"panSpeed",1),$t(this,"screenSpacePanning",!0),$t(this,"keyPanSpeed",7),$t(this,"zoomToCursor",!1),$t(this,"autoRotate",!1),$t(this,"autoRotateSpeed",2),$t(this,"reverseOrbit",!1),$t(this,"reverseHorizontalOrbit",!1),$t(this,"reverseVerticalOrbit",!1),$t(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),$t(this,"mouseButtons",{LEFT:sh.ROTATE,MIDDLE:sh.DOLLY,RIGHT:sh.PAN}),$t(this,"touches",{ONE:oh.ROTATE,TWO:oh.DOLLY_PAN}),$t(this,"target0"),$t(this,"position0"),$t(this,"zoom0"),$t(this,"_domElementKeyEvents",null),$t(this,"getPolarAngle"),$t(this,"getAzimuthalAngle"),$t(this,"setPolarAngle"),$t(this,"setAzimuthalAngle"),$t(this,"getDistance"),$t(this,"listenToKeyEvents"),$t(this,"stopListenToKeyEvents"),$t(this,"saveState"),$t(this,"reset"),$t(this,"update"),$t(this,"connect"),$t(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=de=>{let $e=b8(de,2*Math.PI),at=c.phi;at<0&&(at+=2*Math.PI),$e<0&&($e+=2*Math.PI);let ue=Math.abs($e-at);2*Math.PI-ue<ue&&($e<at?$e+=2*Math.PI:at+=2*Math.PI),d.phi=$e-at,i.update()},this.setAzimuthalAngle=de=>{let $e=b8(de,2*Math.PI),at=c.theta;at<0&&(at+=2*Math.PI),$e<0&&($e+=2*Math.PI);let ue=Math.abs($e-at);2*Math.PI-ue<ue&&($e<at?$e+=2*Math.PI:at+=2*Math.PI),d.theta=$e-at,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=de=>{de.addEventListener("keydown",qe),this._domElementKeyEvents=de},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",qe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const de=new J,$e=new J(0,1,0),at=new Nr().setFromUnitVectors(e.up,$e),ue=at.clone().invert(),nt=new J,Pe=new Nr,Ye=2*Math.PI;return function(){const mt=i.object.position;at.setFromUnitVectors(e.up,$e),ue.copy(at).invert(),de.copy(mt).sub(i.target),de.applyQuaternion(at),c.setFromVector3(de),i.autoRotate&&l===a.NONE&&Y(W()),i.enableDamping?(c.theta+=d.theta*i.dampingFactor,c.phi+=d.phi*i.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let Vt=i.minAzimuthAngle,dn=i.maxAzimuthAngle;isFinite(Vt)&&isFinite(dn)&&(Vt<-Math.PI?Vt+=Ye:Vt>Math.PI&&(Vt-=Ye),dn<-Math.PI?dn+=Ye:dn>Math.PI&&(dn-=Ye),Vt<=dn?c.theta=Math.max(Vt,Math.min(dn,c.theta)):c.theta=c.theta>(Vt+dn)/2?Math.max(Vt,c.theta):Math.min(dn,c.theta)),c.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,c.phi)),c.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&H||i.object.isOrthographicCamera?c.radius=Te(c.radius):c.radius=Te(c.radius*h),de.setFromSpherical(c),de.applyQuaternion(ue),mt.copy(i.target).add(de),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let jn=!1;if(i.zoomToCursor&&H){let Jt=null;if(i.object instanceof oi&&i.object.isPerspectiveCamera){const qn=de.length();Jt=Te(qn*h);const Hi=qn-Jt;i.object.position.addScaledVector(D,Hi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const qn=new J(O.x,O.y,0);qn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),jn=!0;const Hi=new J(O.x,O.y,0);Hi.unproject(i.object),i.object.position.sub(Hi).add(qn),i.object.updateMatrixWorld(),Jt=de.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Jt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Jt).add(i.object.position):(pS.origin.copy(i.object.position),pS.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(pS.direction))<lPe?e.lookAt(i.target):(T8.setFromNormalAndCoplanarPoint(i.object.up,i.target),pS.intersectPlane(T8,i.target))))}else i.object instanceof ba&&i.object.isOrthographicCamera&&(jn=h!==1,jn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix()));return h=1,H=!1,jn||nt.distanceToSquared(i.object.position)>u||8*(1-Pe.dot(i.object.quaternion))>u?(i.dispatchEvent(r),nt.copy(i.object.position),Pe.copy(i.object.quaternion),jn=!1,!0):!1}})(),this.connect=de=>{i.domElement=de,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ke),i.domElement.addEventListener("pointerdown",V),i.domElement.addEventListener("pointercancel",De),i.domElement.addEventListener("wheel",dt)},this.dispose=()=>{var de,$e,at,ue,nt,Pe;i.domElement&&(i.domElement.style.touchAction="auto"),(de=i.domElement)==null||de.removeEventListener("contextmenu",Ke),($e=i.domElement)==null||$e.removeEventListener("pointerdown",V),(at=i.domElement)==null||at.removeEventListener("pointercancel",De),(ue=i.domElement)==null||ue.removeEventListener("wheel",dt),(nt=i.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",_e),(Pe=i.domElement)==null||Pe.ownerDocument.removeEventListener("pointerup",De),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",qe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new nR,d=new nR;let h=1;const m=new J,g=new je,v=new je,_=new je,y=new je,S=new je,x=new je,w=new je,P=new je,A=new je,D=new J,O=new je;let H=!1;const E=[],k={};function W(){return 2*Math.PI/60/60*i.autoRotateSpeed}function G(){return Math.pow(.95,i.zoomSpeed)}function Y(de){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=de:d.theta-=de}function ie(de){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=de:d.phi-=de}const Q=(()=>{const de=new J;return function(at,ue){de.setFromMatrixColumn(ue,0),de.multiplyScalar(-at),m.add(de)}})(),oe=(()=>{const de=new J;return function(at,ue){i.screenSpacePanning===!0?de.setFromMatrixColumn(ue,1):(de.setFromMatrixColumn(ue,0),de.crossVectors(i.object.up,de)),de.multiplyScalar(at),m.add(de)}})(),z=(()=>{const de=new J;return function(at,ue){const nt=i.domElement;if(nt&&i.object instanceof oi&&i.object.isPerspectiveCamera){const Pe=i.object.position;de.copy(Pe).sub(i.target);let Ye=de.length();Ye*=Math.tan(i.object.fov/2*Math.PI/180),Q(2*at*Ye/nt.clientHeight,i.object.matrix),oe(2*ue*Ye/nt.clientHeight,i.object.matrix)}else nt&&i.object instanceof ba&&i.object.isOrthographicCamera?(Q(at*(i.object.right-i.object.left)/i.object.zoom/nt.clientWidth,i.object.matrix),oe(ue*(i.object.top-i.object.bottom)/i.object.zoom/nt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ee(de){i.object instanceof oi&&i.object.isPerspectiveCamera||i.object instanceof ba&&i.object.isOrthographicCamera?h/=de:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function te(de){i.object instanceof oi&&i.object.isPerspectiveCamera||i.object instanceof ba&&i.object.isOrthographicCamera?h*=de:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ce(de){if(!i.zoomToCursor||!i.domElement)return;H=!0;const $e=i.domElement.getBoundingClientRect(),at=de.clientX-$e.left,ue=de.clientY-$e.top,nt=$e.width,Pe=$e.height;O.x=at/nt*2-1,O.y=-(ue/Pe)*2+1,D.set(O.x,O.y,1).unproject(i.object).sub(i.object.position).normalize()}function Te(de){return Math.max(i.minDistance,Math.min(i.maxDistance,de))}function Ue(de){g.set(de.clientX,de.clientY)}function he(de){ce(de),w.set(de.clientX,de.clientY)}function xe(de){y.set(de.clientX,de.clientY)}function Fe(de){v.set(de.clientX,de.clientY),_.subVectors(v,g).multiplyScalar(i.rotateSpeed);const $e=i.domElement;$e&&(Y(2*Math.PI*_.x/$e.clientHeight),ie(2*Math.PI*_.y/$e.clientHeight)),g.copy(v),i.update()}function He(de){P.set(de.clientX,de.clientY),A.subVectors(P,w),A.y>0?ee(G()):A.y<0&&te(G()),w.copy(P),i.update()}function ot(de){S.set(de.clientX,de.clientY),x.subVectors(S,y).multiplyScalar(i.panSpeed),z(x.x,x.y),y.copy(S),i.update()}function Ae(de){ce(de),de.deltaY<0?te(G()):de.deltaY>0&&ee(G()),i.update()}function Ge(de){let $e=!1;switch(de.code){case i.keys.UP:z(0,i.keyPanSpeed),$e=!0;break;case i.keys.BOTTOM:z(0,-i.keyPanSpeed),$e=!0;break;case i.keys.LEFT:z(i.keyPanSpeed,0),$e=!0;break;case i.keys.RIGHT:z(-i.keyPanSpeed,0),$e=!0;break}$e&&(de.preventDefault(),i.update())}function Le(){if(E.length==1)g.set(E[0].pageX,E[0].pageY);else{const de=.5*(E[0].pageX+E[1].pageX),$e=.5*(E[0].pageY+E[1].pageY);g.set(de,$e)}}function le(){if(E.length==1)y.set(E[0].pageX,E[0].pageY);else{const de=.5*(E[0].pageX+E[1].pageX),$e=.5*(E[0].pageY+E[1].pageY);y.set(de,$e)}}function j(){const de=E[0].pageX-E[1].pageX,$e=E[0].pageY-E[1].pageY,at=Math.sqrt(de*de+$e*$e);w.set(0,at)}function Me(){i.enableZoom&&j(),i.enablePan&&le()}function Re(){i.enableZoom&&j(),i.enableRotate&&Le()}function Be(de){if(E.length==1)v.set(de.pageX,de.pageY);else{const at=ft(de),ue=.5*(de.pageX+at.x),nt=.5*(de.pageY+at.y);v.set(ue,nt)}_.subVectors(v,g).multiplyScalar(i.rotateSpeed);const $e=i.domElement;$e&&(Y(2*Math.PI*_.x/$e.clientHeight),ie(2*Math.PI*_.y/$e.clientHeight)),g.copy(v)}function We(de){if(E.length==1)S.set(de.pageX,de.pageY);else{const $e=ft(de),at=.5*(de.pageX+$e.x),ue=.5*(de.pageY+$e.y);S.set(at,ue)}x.subVectors(S,y).multiplyScalar(i.panSpeed),z(x.x,x.y),y.copy(S)}function rt(de){const $e=ft(de),at=de.pageX-$e.x,ue=de.pageY-$e.y,nt=Math.sqrt(at*at+ue*ue);P.set(0,nt),A.set(0,Math.pow(P.y/w.y,i.zoomSpeed)),ee(A.y),w.copy(P)}function st(de){i.enableZoom&&rt(de),i.enablePan&&We(de)}function q(de){i.enableZoom&&rt(de),i.enableRotate&&Be(de)}function V(de){var $e,at;i.enabled!==!1&&(E.length===0&&(($e=i.domElement)==null||$e.ownerDocument.addEventListener("pointermove",_e),(at=i.domElement)==null||at.ownerDocument.addEventListener("pointerup",De)),ut(de),de.pointerType==="touch"?Qe(de):Ve(de))}function _e(de){i.enabled!==!1&&(de.pointerType==="touch"?Gt(de):Ne(de))}function De(de){var $e,at,ue;ct(de),E.length===0&&(($e=i.domElement)==null||$e.releasePointerCapture(de.pointerId),(at=i.domElement)==null||at.ownerDocument.removeEventListener("pointermove",_e),(ue=i.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",De)),i.dispatchEvent(o),l=a.NONE}function Ve(de){let $e;switch(de.button){case 0:$e=i.mouseButtons.LEFT;break;case 1:$e=i.mouseButtons.MIDDLE;break;case 2:$e=i.mouseButtons.RIGHT;break;default:$e=-1}switch($e){case sh.DOLLY:if(i.enableZoom===!1)return;he(de),l=a.DOLLY;break;case sh.ROTATE:if(de.ctrlKey||de.metaKey||de.shiftKey){if(i.enablePan===!1)return;xe(de),l=a.PAN}else{if(i.enableRotate===!1)return;Ue(de),l=a.ROTATE}break;case sh.PAN:if(de.ctrlKey||de.metaKey||de.shiftKey){if(i.enableRotate===!1)return;Ue(de),l=a.ROTATE}else{if(i.enablePan===!1)return;xe(de),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ne(de){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Fe(de);break;case a.DOLLY:if(i.enableZoom===!1)return;He(de);break;case a.PAN:if(i.enablePan===!1)return;ot(de);break}}function dt(de){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(de.preventDefault(),i.dispatchEvent(s),Ae(de),i.dispatchEvent(o))}function qe(de){i.enabled===!1||i.enablePan===!1||Ge(de)}function Qe(de){switch(Ot(de),E.length){case 1:switch(i.touches.ONE){case oh.ROTATE:if(i.enableRotate===!1)return;Le(),l=a.TOUCH_ROTATE;break;case oh.PAN:if(i.enablePan===!1)return;le(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case oh.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Me(),l=a.TOUCH_DOLLY_PAN;break;case oh.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Re(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Gt(de){switch(Ot(de),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Be(de),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;We(de),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;st(de),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;q(de),i.update();break;default:l=a.NONE}}function Ke(de){i.enabled!==!1&&de.preventDefault()}function ut(de){E.push(de)}function ct(de){delete k[de.pointerId];for(let $e=0;$e<E.length;$e++)if(E[$e].pointerId==de.pointerId){E.splice($e,1);return}}function Ot(de){let $e=k[de.pointerId];$e===void 0&&($e=new je,k[de.pointerId]=$e),$e.set(de.pageX,de.pageY)}function ft(de){const $e=de.pointerId===E[0].pointerId?E[1]:E[0];return k[$e.pointerId]}n!==void 0&&this.connect(n),this.update()}};const cPe=U.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const d=Xl(A=>A.invalidate),h=Xl(A=>A.camera),m=Xl(A=>A.gl),g=Xl(A=>A.events),v=Xl(A=>A.setEvents),_=Xl(A=>A.set),y=Xl(A=>A.get),S=Xl(A=>A.performance),x=e||h,w=i||g.connected||m.domElement,P=U.useMemo(()=>new uPe(x),[x]);return wX(()=>{P.enabled&&P.update()},-1),U.useEffect(()=>(s&&P.connect(s===!0?w:s),P.connect(w),()=>void P.dispose()),[s,w,n,P,d]),U.useEffect(()=>{const A=H=>{d(),n&&S.regress(),o&&o(H)},D=H=>{a&&a(H)},O=H=>{l&&l(H)};return P.addEventListener("change",A),P.addEventListener("start",D),P.addEventListener("end",O),()=>{P.removeEventListener("start",D),P.removeEventListener("end",O),P.removeEventListener("change",A)}},[o,a,l,P,d,v]),U.useEffect(()=>{if(t){const A=y().controls;return _({controls:P}),()=>_({controls:A})}},[t,P]),U.createElement("primitive",ve({ref:c,object:P,enableDamping:r},u))});class DX extends as{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Cl(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){function n(u){const c=new DataView(u),d=32/8*3+32/8*3*3+16/8,h=c.getUint32(80,!0);if(80+32/8+h*d===c.byteLength)return!0;const g=[115,111,108,105,100];for(let v=0;v<5;v++)if(i(g,c,v))return!1;return!0}function i(u,c,d){for(let h=0,m=u.length;h<m;h++)if(u[h]!==c.getUint8(d+h))return!1;return!0}function r(u){const c=new DataView(u),d=c.getUint32(80,!0);let h,m,g,v=!1,_,y,S,x,w;for(let k=0;k<80-10;k++)c.getUint32(k,!1)==1129270351&&c.getUint8(k+4)==82&&c.getUint8(k+5)==61&&(v=!0,_=new Float32Array(d*3*3),y=c.getUint8(k+6)/255,S=c.getUint8(k+7)/255,x=c.getUint8(k+8)/255,w=c.getUint8(k+9)/255);const P=84,A=12*4+2,D=new Zt,O=new Float32Array(d*3*3),H=new Float32Array(d*3*3),E=new xt;for(let k=0;k<d;k++){const W=P+k*A,G=c.getFloat32(W,!0),Y=c.getFloat32(W+4,!0),ie=c.getFloat32(W+8,!0);if(v){const Q=c.getUint16(W+48,!0);Q&32768?(h=y,m=S,g=x):(h=(Q&31)/31,m=(Q>>5&31)/31,g=(Q>>10&31)/31)}for(let Q=1;Q<=3;Q++){const oe=W+Q*12,z=k*3*3+(Q-1)*3;O[z]=c.getFloat32(oe,!0),O[z+1]=c.getFloat32(oe+4,!0),O[z+2]=c.getFloat32(oe+8,!0),H[z]=G,H[z+1]=Y,H[z+2]=ie,v&&(E.setRGB(h,m,g,Zs),_[z]=E.r,_[z+1]=E.g,_[z+2]=E.b)}}return D.setAttribute("position",new Mn(O,3)),D.setAttribute("normal",new Mn(H,3)),v&&(D.setAttribute("color",new Mn(_,3)),D.hasColors=!0,D.alpha=w),D}function s(u){const c=new Zt,d=/solid([\s\S]*?)endsolid/g,h=/facet([\s\S]*?)endfacet/g,m=/solid\s(.+)/;let g=0;const v=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,_=new RegExp("vertex"+v+v+v,"g"),y=new RegExp("normal"+v+v+v,"g"),S=[],x=[],w=[],P=new J;let A,D=0,O=0,H=0;for(;(A=d.exec(u))!==null;){O=H;const E=A[0],k=(A=m.exec(E))!==null?A[1]:"";for(w.push(k);(A=h.exec(E))!==null;){let Y=0,ie=0;const Q=A[0];for(;(A=y.exec(Q))!==null;)P.x=parseFloat(A[1]),P.y=parseFloat(A[2]),P.z=parseFloat(A[3]),ie++;for(;(A=_.exec(Q))!==null;)S.push(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])),x.push(P.x,P.y,P.z),Y++,H++;ie!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+g),Y!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+g),g++}const W=O,G=H-O;c.userData.groupNames=w,c.addGroup(W,G,D),D++}return c.setAttribute("position",new Ct(S,3)),c.setAttribute("normal",new Ct(x,3)),c}function o(u){return typeof u!="string"?new TextDecoder().decode(u):u}function a(u){if(typeof u=="string"){const c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d)&255;return c.buffer||c}else return u}const l=a(e);return n(l)?r(l):s(o(e))}}const dPe="/assets/rover-fbe5edeb.stl",hPe="/assets/Apollo_16-f078b0c5.stl",fPe=({url:t})=>{const e=bE(DX,t);e&&e.computeVertexNormals();const n=U.useRef();return U.useEffect(()=>{n.current&&(n.current.rotation.x=-Math.PI/2,n.current.position.y=15,n.current.receiveShadow=!0)},[e]),$("mesh",{ref:n,geometry:e,children:$("meshStandardMaterial",{color:"#d1d1d1",side:to})})},pPe=({url:t})=>{const e=bE(DX,t);e&&e.computeVertexNormals();const n=U.useRef();return U.useEffect(()=>{n.current&&(n.current.rotation.x=-Math.PI/2,n.current.position.y=24,n.current.position.x=-20,n.current.receiveShadow=!0,n.current.scale.set(.04,.04,.04))},[e]),Nt("mesh",{ref:n,geometry:e,children:[$("meshStandardMaterial",{color:"#377039",side:to}),$(sPe,{children:$("div",{style:{color:"white"},children:"testrover"})})]})},mPe=()=>Nt(Ma,{children:[$(of,{}),Nt(YMe,{shadows:!0,style:{height:"94vh"},camera:{position:[-100,100,150]},children:[$("ambientLight",{intensity:.4}),$("directionalLight",{position:[100,5,200],castShadow:!0,intensity:2,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":500,"shadow-camera-left":-100,"shadow-camera-right":100,"shadow-camera-top":100,"shadow-camera-bottom":-100}),$(fPe,{url:hPe}),$(pPe,{url:dPe}),$(cPe,{maxPolarAngle:Math.PI/2})]})]});PM.createRoot(document.getElementById("root")).render($(Uee,{children:$(Hee,{children:$(SZ,{children:Nt(pZ,{children:[$(bc,{path:"/",element:$(Rte,{})}),$(bc,{path:"/resources",element:$($ee,{})}),$(bc,{path:"/media",element:$(cte,{})}),$(bc,{path:"/graphs",element:$(Mme,{})}),$(bc,{path:"/binstream",element:$(H1e,{})}),$(bc,{path:"/fpvstream",element:$($1e,{})}),$(bc,{path:"/location",element:$(mPe,{})})]})})})}));
